<dom-module id="em-chart-ra">

<style>
 :host {
            @apply(--layout-vertical);
            @apply(--layout-flex);
        }
        
/* .vbox-5 {
    display: block !important;
    -ms-flex-direction: column;
    -webkit-flex-direction: column;
    flex-direction: column;
    -ms-flex: 5;
    -webkit-flex: 5;
    flex: 5;
} */

</style>

<template>
<sc-panel title-text="SRM(matrix) - RA차트">
			<cc-matrix-chart id="matrixChart" 
							 titles="{{titles}}" 
							 chart-title="Matrix Chart"
							 x-axis-ranges="{{xAxisRanges}}" 
							 y-axis-ranges="{{yAxisRanges}}"
							 points="{{points}}"
							 rectangle-areas="{{rectangleAreas}}"
							 chart-labels="{{chartLabels}}"
							 axis-label-mode="false"
							 on-point-click="onPointClick"
							 on-area-click="onAreaClick"
							 on-chart-loaded="onChartLoaded">
			</cc-matrix-chart> 
 </sc-panel>
 <sc-toolbar>
	<sc-spacer></sc-spacer>   
 	<sc-button id="SG0008" text="SG0008찾기" style="width:90px"   on-click="findPoint" i18n-disabled></sc-button>
 	<sc-button id="SG0007" text="SG0007찾기" style="width:90px"  on-click="findPoint" 18n-disabled></sc-button>
 	<sc-button id="SG0006" text="SG0006찾기" style="width:90px"  on-click="findPoint" 18n-disabled></sc-button>
 	<sc-button id="SG0005" text="SG0005찾기" style="width:90px"  on-click="findPoint" 18n-disabled></sc-button>
 	<sc-button id="SG0004" text="SG0004찾기" style="width:90px"  on-click="findPoint" 18n-disabled></sc-button>
 	<sc-spacer></sc-spacer>
</sc-toolbar>
			
</template>

<script>
Polymer({
	is: 'em-chart-ra',
	properties : {
			titles : {
				type:Object,
				value :{
					 x_title : "협력사매력도",  
					 y_title : "구매사매력도"
				}
			},
			xAxisRanges:{
				type:Array,
			 	value : [
			 	   {co_cd : "C4100",lang_ccd : "ko_KR",mat_typ_cd : "RA",max_pos : "50",max_sco : "50",min_pos : "0",min_sco : "0",oper_org_sn : "10010",rng_cls : "L",sys_id : "EMRO",title : "구매사매력 낮음",xy_cls : "X"},
			 	   {co_cd : "C4100",lang_ccd : "ko_KR",mat_typ_cd : "RA",max_pos : "100",max_sco : "100",min_pos : "50",min_sco : "50",oper_org_sn : "10010",rng_cls : "H",sys_id : "EMRO",title : "구매사매력 높음",xy_cls : "X"}
 				]
			},
			
			yAxisRanges:{
				type:Array,
			 	value : [
			 	   {co_cd : "C4100",lang_ccd : "ko_KR",mat_typ_cd : "RA",max_pos : "50",max_sco : "50",min_pos : "0",min_sco : "0",oper_org_sn : "10010",rng_cls : "L",sys_id : "EMRO",title : "공급사매력 낮음",xy_cls : "Y"},
			 	   {co_cd : "C4100",lang_ccd : "ko_KR",mat_typ_cd : "RA",max_pos : "100",max_sco : "100",min_pos : "50",min_sco : "50",oper_org_sn : "10010",rng_cls : "H",sys_id : "EMRO",title : "공급사매력 높음",xy_cls : "Y"}
 				]
			},
			points:{
				type : Array,
				value : [
				  {color : "RED",co_cd : "C4100",editstatus : "",editstatusname : "",eg_cd : "EG0020",es_seq : "10000",eval_kind_cd : "ET0001_000001",eval_seq : "10002",eval_typ_cd : "ET0001",
				 oper_org_sn : "10010",ra_area_cd : "A",ra_bg_col : "#9370db",rsx : "90.6",rsy : "89",sg_cd : "SG0004",sg_nm : "수공구",si_area_cd : "A",si_bg_col : "#9370db",sys_id : "EMRO",x : "90.6",x_position : "90.6",y : "89",y_position : "89"},
				 {color : "RED",co_cd : "C4100",editstatus : "",editstatusname : "",eg_cd : "EG0020",es_seq : "10000",eval_kind_cd : "ET0001_000001",eval_seq : "10002",eval_typ_cd : "ET0001",
				 oper_org_sn : "10010",ra_area_cd : "D",ra_bg_col : "#7093db",rsx : "34",rsy : "37.2",sg_cd : "SG0008",sg_nm : "연마공구",si_area_cd : "D",si_bg_col : "#7093db",sys_id : "EMRO",x : "34",x_position : "34",y : "37.2",y_position : "37.2"},
				 {color : "RED",co_cd : "C4100",editstatus : "",editstatusname : "",eg_cd : "EG0020",es_seq : "10000",eval_kind_cd : "ET0001_000001",eval_seq : "10002",eval_typ_cd : "ET0001",
				 oper_org_sn : "10010",ra_area_cd : "A",ra_bg_col : "#9370db",rsx : "74.6",rsy : "68",sg_cd : "SG0005",sg_nm : "전동공구",si_area_cd : "A",si_bg_col : "#9370db",sys_id : "EMRO",x : "74.6",x_position : "74.6",y : "68",y_position : "68"}, 
				 {color : "RED",co_cd : "C4100",editstatus : "",editstatusname : "",eg_cd : "EG0020",es_seq : "10000",eval_kind_cd : "ET0001_000001",eval_seq : "10002",eval_typ_cd : "ET0001",
				 oper_org_sn : "10010",ra_area_cd : "A",ra_bg_col : "#9370db",rsx : "58.25",rsy : "58.35",sg_cd : "SG0006",sg_nm : "체결재",si_area_cd : "A",si_bg_col : "#9370db",sys_id : "EMRO",x : "58.25",x_position : "58.25",y : "58.35",y_position : "58.35"},
				 {color : "RED",co_cd : "C4100",editstatus : "",editstatusname : "",eg_cd : "EG0020",es_seq : "10000",eval_kind_cd : "ET0001_000001",eval_seq : "10002",eval_typ_cd : "ET0001",
				 oper_org_sn : "10010",ra_area_cd : "B",ra_bg_col : "#4682b4",rsx : "41.75",rsy : "51.7",sg_cd : "SG0007",sg_nm : "측정공구",si_area_cd : "B",si_bg_col : "#4682b4",sys_id : "EMRO",x : "41.75",x_position : "41.75",y : "51.7",y_position : "51.7"} 
				 
				 
				 
				 
				]
			},
			rectangleAreas :{
				type:Array,
				value:[
				   {area_nm : "협력사매력 높음", color : "#f789a5",height : "50",mat_area : "HL",mat_area_cd : "C",width : "50",x : "50",x_max_sco : "100",x_min_sco : "50",y : "50",y_max_sco : "50",y_min_sco : "0"},
				   {area_nm : "상호매력 높음",  color : "#977cf1",height : "50",mat_area : "HH",mat_area_cd : "A",width : "50",x : "50",x_max_sco : "100",x_min_sco : "50",y : "0",y_max_sco : "100",y_min_sco : "50"},
				   {area_nm : "구매사매력 높음",color : "#7085eb",height : "50",mat_area : "LH",mat_area_cd : "B",width : "50",x : "0",x_max_sco : "50",x_min_sco : "0",y : "0",y_max_sco : "100",y_min_sco : "50"},
				   {area_nm : "상호매력 부족",color : "#c2d4e6",height : "50",mat_area : "LL",mat_area_cd : "D",width : "50",x : "0",x_max_sco : "50",x_min_sco : "0",y : "50",y_max_sco : "50",y_min_sco : "0"} 
				   
		  	   ]
			},
			chartLabels :  {
				type:Array,
				value:[
				       {label_nm : "상호매력 높음",    x_crd : "75",    y_crd : "25"},
				       {label_nm : "공급사매력 높음",    x_crd : "25",    y_crd : "25"}, 
				       {label_nm : "구매사매력 높음",    x_crd : "75",    y_crd : "75"},  
				       {label_nm : "상호매력 부족",    x_crd : "25",    y_crd : "75"}      
		        ]
			}
	},
	
	listeners: {
        "area-resize": "_onResizeListener"
    },
    _onResizeListener : function(){
    	console.log("#### _onResizeListener")
    	this.$.matrixChart.chart.reflow();
    },
	findPoint : function(e){
		var highChart = this.$.matrixChart.chart,
			series = highChart.series;
		for(var i = 0,len = series.length ;i < len;i++){
			var serie = series[i];
			if(serie.name == e.target.id){
				serie.points[0].onMouseOver();
				break;
			}
		}
		
	},
	attached: function() {
		var mChart = this.$.matrixChart;
		/** (차트생성시 유의할점)
		*   1. chart는 생성될 div를 지정하여 해당 div안에 그려지기때문에 attached 시점 이후에  생성해야합니다.
		*   2. titles, xAxisRanges, yAxisRanges, points, rectangleAreas,chartLabels 의 데이터를 셋팅(조회)한 후에 생성해야합니다.
		*/
		mChart.createMatrixChart();
	},
	
	//포인트 클릭시 이벤트 처리
	onPointClick : function(event,data){
		alert('[point click] '+data.sg_cd)
		console.log('event : ' ,event);
		console.log('data  : ' ,data);
	},
	
	//영역 클릭시 이벤트 처리
	onAreaClick :  function(event,data){
		alert('[area click] '+data.area_nm)
		console.log('event : ' ,event);
		console.log('data  : ' ,data);
	},
	
	onChartLoaded : function(){
		
	}
});
</script>

</dom-module>