var _vm__="AAAANSUhEUgAAAHo";var _wm_=function(){"jscrambler ignore_transformations_@ ignorewm";return"iVBORw0KGgo"+_vm__+"AAAAkCAYAAABG3S5jAAAAAXNSR0ICQMB9xQAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUATWljcm9zb2Z0IE9mZmljZX/tNXEAAAKFSURBVHja7ZmhT8NAFMYRCIJHIkhw+AmCwswiMTP8CwgsM2SBdQk4BAaJIfRYIEGAwYHBoBbazqMwKHjX9crrtR13uy505BNftrV3ve/u1/feHcy12+056P8LiwDQEEBDAA0BNATQEEBDAA0B9FTVuXta9ET03LsefnX70Q5A10RdEW0dieCBPjdmDXRV3v895P2LwZLnhx8xlBkDHXsXUSXeARqgrSZ9RvqUhmL50X3ndLAg73siuJTX6L5HZhtdP3xJ24hoRfbvieG56kvtDo6Pb+b587v9YI8/n8Cd8DZ8jF4/2pVtk+/bqScm00Ujf2syberj6qDVmEXeJvVf5NsFuDNoZZKLjIY50NfRU24CBNu7Cm9zk2FRUvR8tSi5hWJjuIIu7UveOGhPDB9NvNn6rxXobGoJWuNeBGr3LiN4dC3cZ8b9jhgsZ6KErqk3XmYLWtzmz+9R36KXKQHRdE3dWsqM/amNkZxnFjT5SDITmyvzNrn/2qRubkRG56EINnlK0tPSbxNQi8BB62VCLnaSmtmLMxqjqF8ZaA5Lz0QqmvkYJjWa9UshuvivVY2Wk9PTjayzVYGWEUTp8bUg9eUWio9REehSYKagXfzXctetznt6LXEBndbJeOOWps9GWUTYgDapz66gXf3XBnSSila5MbWrVgvgAlr/rdVBe9CGR6HyGh209Bo9DrSr/4wPx2NcdTXaIi1ZRzR/drIzNQVdlKJNooNvGMftuo0iekL/k3qfVkTfZSZCxyW+gXGt0foZle6t24BW5+FD/+3FdrH0+qrO+DY12tW/9J7+7eEvz9EQ/nsFATQE0BBAQwANATQE0AANATQE0BBAQwANATRUmb4BHjMPDmWYhGcAAAAASUVORK5CYII="}();var DLChart=function($){var _win=$||window;var _doc=$.document||document;var _ver="0.8.8.5358";var _getVersion=function(){return _ver};if(!Function.prototype.bind){Function.prototype.bind=function(e){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var t=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r?this:e,t.concat(Array.prototype.slice.call(arguments)))};r.prototype=this.prototype;n.prototype=new r;return n}}if(!String.prototype.trim){(function(){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(e,"")}})()}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,t){var i;if(this==null){throw new TypeError('"this" is null or not defined')}var r=Object(this);var n=r.length>>>0;if(n===0){return-1}var s=+t||0;if(Math.abs(s)===Infinity){s=0}if(s>=n){return-1}i=Math.max(s>=0?s:n-Math.abs(s),0);while(i<n){if(i in r&&r[i]===e){return i}i++}return-1}}if(!Array.prototype.filter){Array.prototype.filter=function(e){"use strict";if(this===void 0||this===null){throw new TypeError}var t=Object(this);var i=t.length>>>0;if(typeof e!=="function"){throw new TypeError}var r=[];var n=arguments.length>=2?arguments[1]:void 0;for(var s=0;s<i;s++){if(s in t){var a=t[s];if(e.call(n,a,s,t)){r.push(a)}}}return r}}(function(){var s=0;if(!window.requestAnimationFrame){window.requestAnimationFrame=function(e,t){var i=(new Date).getTime();var r=Math.max(0,16-(i-s));var n=window.setTimeout(function(){e(i+r)},r);s=i+r;return n}}})();var UNDEFINED;var $_canvasContextMap={};var $_language=(window.navigator.language||window.navigator.userLanguage||"").substr(0,2);var $_debug=false;var $_testing=false;var $_logging=false;var $_isBeta=false;var $$_defaultImagesAutoLoad=true;var $$_canvasContextShared=false;var ElementCanvasContext;var DefaultCanvasContext;var bufferCanvas;var $_evl=window.addEventListener;var console=window.console;var log=console&&typeof console.log=="function"?Function.prototype.bind.call(console.log,console):undefined;var _console=console;var MSECS_PER_DAY=24*3600*1e3;var __epoch=(new Date).getTime();var __epochlc=new Date(__epoch-MSECS_PER_DAY*3);var TZO=(new Date).getTimezoneOffset();var toString=Object.prototype.toString;var PI=Math.PI;var _2PI=Math.PI*2;var _RADIAN=180/Math.PI;var MAX_INT=Math.pow(2,53)-1;var MIN_INT=-MAX_INT;var _sigma="Σ";var $_autoinc=0;var $_temp_size={width:0,height:0};var $_csvreg=/,(?=(?:[^"]*"[^"]*")*(?![^"]*"))/;var $_colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/;var $_linereg=/\r\n|\r|\n/;var $_currencyreg=/[^\d.\-\+]/g;var $_linebrreg=/(?:\r\n|\r|\n)/g;var $_linebr="<br>";var $_NULL_FUNC=function(){};var $$_loc=window.location;var $$_htmlreg=/[<>]/g;var $$_htmlmap={"<":"&lt;",">":"&gt;"};var $$_htmlrep=function(e){return $$_htmlmap[e]};var $$_image64="data:image/png;base64,";var _lictool="tool";var _runloc=window.location;var _isMac=navigator.platform.toUpperCase().indexOf("MAC")>=0;var _isOpera=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0;var _isFirefox=navigator.userAgent.indexOf("Firefox")>=0||typeof InstallTrigger!=="undefined";var _isChrome=!!window.chrome&&!_isOpera;var _isSafari=/constructor/i.test(window.HTMLElement)||function(e){return e.toString()==="[object SafariRemoteNotification]"}(!window["safari"]||safari.pushNotification)||!_isChrome&&!_isOpera&&window.webkitAudioContext!==undefined;var _isIE=false||!!document.documentMode||/Edge/i.test(navigator.userAgent);var _ieVer=function(){var e,t=3,i=document.createElement("div"),r=i.getElementsByTagName("i");while(i.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",r[0]);return t>4?t:e}();var _ieOld=_ieVer!==undefined&&_ieVer<=9;var _ieLeg=_ieVer!==undefined&&_ieVer<=8;var _norgba=false;var _ieTen=navigator.appVersion.indexOf("MSIE 10")!==-1;var _window=window;var _document=document;var _nop=function(){};var _throwDebug=_nop;var _check=_nop;var _assert=_nop;var assert=_assert;var _clearAllWindowEventListeners=function(){for(var e=window.dataGridEventListeners,t=e.length-1;t>=0;t--){var i=e[t];i.target.removeEventListener(i.event,i.listener,i.useCapture);delete e[t]}};var _addWindowEventListener=function(e,t,i,r,n){var s=window.dataGridEventListeners;return s||(window.dataGridEventListeners=s=[]),s.push({container:e,target:t,event:i,listener:r,useCapture:n}),t.addEventListener(i,r,n)};var _removeWindowEventListener=function(e,t,i,r,n){for(var s=window.dataGridEventListeners,a=s.length-1;a>=0;a--){var o=s[a];if(o.container===e&&o.target===t&&o.event===i&&o.listener===r){o.target.removeEventListener(o.event,o.listener,o.useCapture);s.splice(a,1)}}};var _clearWindowEventListeners=function(e){for(var t=window.dataGridEventListeners,i=t.length-1;i>=0;i--){var r=t[i];if(r.container===e){r.target.removeEventListener(r.event,r.listener,r.useCapture);t.splice(i,1)}}};var $$_mobile=undefined;var $$_setMobile=function(e){$$_mobile=e};var _isMobile=function(){if($$_mobile==undefined){var t=false,e=["win16","win32","win64","mac","macintel"],i=navigator.platform;if(!i||e.indexOf(i.toLowerCase()<0)){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){t=true}if(!t){(function(e){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))){t=true}})(navigator.userAgent||navigator.vendor||window.opera)}}$$_mobile=t}return!!$$_mobile};var _setDebug=function(e){$_debug=e;_throwDebug=e?function(e){throw e instanceof Error?e:new Error(e)}:_nop;_check=e?function e(t,i){if(!t)throw new Error("Failed: ["+t+"] "+i)}:_nop;assert=_assert=e?function(e,t){if(!e){throw new AssertError(t)}}:_nop};var $_setBeta=function(e){$_isBeta=e};var _setDefaultImagesAutoLoad=function(e){$$_defaultImagesAutoLoad=e};var _setCanvasContextShared=function(e){$$_canvasContextShared=e;_DPPX=1;if(e&&ElementCanvasContext==null&&DefaultCanvasContext==null){ElementCanvasContext=document.createElement("canvas");DefaultCanvasContext=document.createElement("canvas");bufferCanvas=document.createElement("canvas")}};var _log=function(){log&&log.apply(console,arguments)};var _dlog=function(){$_debug&&log&&log.apply(console,arguments)};var _setLogging=function(e){$_logging=e};var _trace=function(){$_logging&&log&&log.apply(console,arguments)};var trace=_trace;var _dtrace=function(){$_debug&&$_logging&&log&&log.apply(console,arguments)};var _createError=function(i,r){var e=function(e,t){this.name=i;this.message=e;if(typeof r=="string"){this[r]=t;if(t){this.message+="\r\n"+JSON.stringify(t)}}};e.prototype=new Error;e.prototype.constructor=e;return e};var _throwError=function(e){throw new Error(e)};var _DPPX=_window.devicePixelRatio||(_window.matchMedia&&_window.matchMedia("(min-resolution: 2dppx),(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches?2:1)||1;_DPPX=isNaN(_DPPX)||_isMac?1:Math.max(1,Math.floor(_DPPX));var _isValidAddr=function(e,t){if(!_iseval){var i=_licson[_lictool+"var"];if(i){var r=_licson[_lictool+"val"];if(r&&r=="emro"&&SCAjax){return true}}}var n,s,a,o,l=t.split(".");for(n=e.length;n--;){if(e[n]==$$_fileloc)return true;if(t){if(t==e[n])return true;o=e[n].split(".");a=true;for(s=Math.min(l.length,o.length);s--;){if(o[s]!="*"&&l[s]!=o[s]){a=false;break}}if(a)return true}}};var _isValidProduct=function(){return _licson[$$_pdName+"u"+"c"+"t"]==$$_pdName};var alertOnce=function(){var t=false;return function(e){if(!t){t=true;alert(e)}}}();var _alert=function(e){alert(e)};var _alertConfirm=function(e){alert(e)};var _getTimer=function(){return(new Date).getTime()-__epoch};var getTimer=_getTimer;var _setTimeout=function(e,t,i){setTimeout(e,t,i)};function _defined(e){return e!==UNDEFINED&&e!==null}var defined=_defined;function _isEmpty(e){return e===UNDEFINED||e===null||e===""}function _isNaN(e){return e===null||isNaN(e)}function _isObject(e){return e!==null&&typeof e==="object"}var isObject=_isObject;function _asObject(e){return e!==null&&typeof e==="object"?e:null}function _makeObject(){var e={};for(var t=0,i=arguments.length;t<i;t+=2){e[arguments[2*t]]=arguments[2*t+1]}return e}function _isEmptyObject(e){if(e==null)return true;for(var t in e){if(e.hasOwnProperty(t))return false}return true}function _equalTexts(e,t,i){if(e&&t){return i?e.toLowerCase()==t.toLowerCase():e==t}else{return!e&&!t}}function _replaceChar(e,t,i,r){var n="";i=Math.min(i,e.length);for(var s=t;s<i;s++){n+=r}return e.substr(0,t)+n+e.substr(i)}function _isFunction(e){return typeof e==="function"}function _asFunction(e){return typeof e==="function"?e:null}var _isFunc=_isFunction;var _asFunc=_asFunction;function _isString(e){return typeof e==="string"}function _isNumber(e){return typeof e==="number"}function _isFiniteNumber(e){return typeof e==="number"&&isFinite(e)}function _isBoolean(e){return typeof e==="boolean"}function _isWhiteSpace(e){return!e||!e.trim()}function _forceFloat(e){e=Number(e);return isNaN(e)?0:e}function _isInt(e){if(isNaN(e))return false;var t=parseFloat(e);return(t|0)===t}function _forceInt(e){e=Number(e);return isNaN(e)?0:Math.floor(e)}function _isDate(e){return toString.call(e)==="[object Date]"}var _isArray=function(){if(typeof Array.isArray==="function"){return Array.isArray}else{return function(e){return toString.call(e)==="[object Array]"}}}();var isArray=_isArray;function _asArray(e){return _isArray(e)?e:null}var asArray=_asArray;function _makeArray(e){return _isArray(e)?e:[e]}function _equalsArray(e,t){var i,r,n,s;if((e===null||e===undefined)&&(t===null||t===undefined)){return true}if(!_isArray(e)||!_isArray(t)){return false}i=e.length;if(t.length!=i){return false}for(s=0;s<i;s++){r=e[s];n=t[s];if(r instanceof Date&&n instanceof Date){if(r.getTime()!=n.getTime()){return false}}else if(e[s]!=t[s]){return false}}return true}function _dedupe(e){for(var t=e.length-1;t>0;t--){if(e[t]===e[t-1]){e.splice(t,1)}}}function _asDate(e){return e instanceof Date?e:null}function _toDate(e,t){if(e instanceof Date)return e;if(typeof e==="string"){return t?t.getDateNull(e):new Date(e)}if(e&&e.getTime)return new Date(e.getTime);return undefined}function _isFontText(e){return typeof e==="string"&&e.length>2&&e.lastIndexOf("pt")==e.length-2}function _irandom(e){return Math.floor(Math.random()*e)}function _irandom2(e,t){return Math.floor(Math.random()*(t-e))+e}function _tempSize(e,t){$_temp_size.width=e;$_temp_size.height=t;return $_temp_size}function _pick(){var e,t,i=arguments,r=i.length;for(e=0;e<r;e++){t=i[e];if(t!==undefined&&t!==null){return t}}return UNDEFINED}function _pickStr(e,t){return e===undefined||e===null?t:e}function _included(e){var t,i=arguments,r=i.length;for(t=1;t<r;t++){if(i[t]==e){return true}}return false}function _getObj(e,t){if(e&&t){var i,r,n=t.split("."),s=e;for(i=0,r=n.length;s&&i<r;i++){s=s[n[i]]}return s}return null}function _toStr(e){if(typeof e==="number"){return!isNaN(e)?String(e):""}else{return e!==null&&e!==undefined?String(e):""}}function _toLower(e){return typeof e==="string"?e.toLowerCase():e}function _toUpper(e){return typeof e==="string"?e.toUpperCase():e}function _strLen(e){return typeof e==="string"?e.length:0}function _pad(e,t,i){var r=String(e);t=Math.max(t||2,1);i=i||"0";return new Array(t-r.length+1).join(i)+r}var pad=_pad;function hex(e,t,i){t=Math.max(t||2,1);i=i||0;var r=e.toString(16);return new Array(t-r.toString(16).length+1).join(i)+r}var $$_week_days=["일","월","화","수","목","금","토"];var $$_month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];function _isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}function _incMonth(e,t){var i=e.getDate();e.setDate(1);e.setMonth(e.getMonth()+t);e.setDate(Math.min(i,$$_month_days[_isLeapYear(e.getYear())?1:0][e.getMonth()]));return e}function _minDate(e,t){if(!(e instanceof Date))return e;if(!(t instanceof Date))return t;return e.getTime()<t.getTime()?e:t}function _maxDate(e,t){if(!(e instanceof Date))return t;if(!(t instanceof Date))return e;return e.getTime()>t.getTime()?e:t}function _toArray(e){return _isArray(e)?e:defined(e)?[e]:null}var toArray=_toArray;function incArray(e,t){e.push(t);return t}function _getter(e){return"get"+e.chartAt(0).toUpperCase()+e.substr(1)}function _setter(e){return"set"+e.charAt(0).toUpperCase()+e.substr(1)}function _isWhitespace(e){return/\s/.test(e)}function _trim(e){return e?e.trim():e}var trim=_trim;var _trimLeftRgx=/^\s+/;function _trimLeft(e){return e?e.replace(_trimLeftRgx,""):e}var _trimRightRgx=/\s+$/;function _trimRight(e){return e?e.replace(_trimRightRgx,""):e}var _stripRgx=/(\s+)(.*)(\s+)$/;var _stripRgx2=/\s+/g;function _strip(e){e.replace(_stripRgx,function(e,t,i,r){return t+i.replace(_stripRgx2,"")+r});return e?e.replace(_stripRgx,""):e}function _capitalize(e){return e.charAt(0).toUpperCase()+e.substr(1)}function _uncapitalize(e){return e.charAt(0).toLowerCase()+e.substr(1)}function byteLength(e){var t,i,r;for(t=i=0;r=e.charCodeAt(i++);t+=r>>11?3:r>>7?2:1);return t}function _createProperties(e,t,i){if(t){var r=t.split(",");for(var n=0,s=t.length;n<s;n++){e[r[n]]=i}}}var _floor=Math.floor;var _int=Math.floor;var _round=Math.round;var _ceil=Math.ceil;var _abs=Math.abs;var _slice=Array.prototype.slice;function _enum(e,t,i){if(t){var r,n,s,a=t.$DOMAIN={};for(r in t){n=t[r];if(typeof n==="string"){a[n]=r}}t.$ENUM=e;if(i){for(s in i){t[s]=i[s]}}return Object.freeze?Object.freeze(t):t}}function _getEnumLength(e){var t,i,r=0;if(e&&(i=e.$DOMAIN)){for(t in i){r++}}return r}function _getEnumNames(e){var t,i,r;if(e&&(i=e.$DOMAIN)){t=[];for(r in i){t.push(i[r])}}return t}function _getEnumValues(e){var t,i,r;if(e&&(i=e.$DOMAIN)){t=[];for(r in i){t.push(r)}}return t}function _isEnum(e){return e&&e.$ENUM}function _isEnumValue(e,t){return e&&t&&t.$ENUM&&t.$DOMAIN.hasOwnProperty(e)}function _checkEnumValue(e,t){if(!t||!e.$DOMAIN.hasOwnProperty(t)){throw"Invalid "+e.$ENUM+" value: "+(typeof t==="string"?'"'+t+'"':t)}return t}function _clone(e){var t,i=new e.constructor;for(t in e){i[t]=e[t]}return i}function _extend(e){var t,i,r,n;e=e||{};for(t=1,i=arguments.length;t<i;t++){r=arguments[t];if(r){for(n in r){e[n]=r[n]}}}return e}function _deepExtend(e){var t,i,r,n,s,a,o;e=e||{};for(t=1,i=arguments.length;t<i;t++){r=arguments[t];if(r){for(n in r){s=r[n];if(_isArray(s)){a=[];for(o=0;o<s.length;o++){a.push(_deepExtend(s[o]))}s=a}else if(_isObject(s)){s=_deepExtend({},s)}e[n]=s}}}return e}function simpleFormat(){var e=arguments.length;if(e>1){var t=arguments[0],i=[],r;for(r=0;r<e;r++){t=t.replace("{"+r+"}",arguments[r+1])}return t}else{console.warn("Not wrong arguments..");return arguments[0]}}var _createCallback=function(script){return typeof script=="function"?script:typeof script=="string"?eval("({func:function () {"+script+"}})").func:null};var AbortError=_createError("DataLudi.AbortError");var _abort=function(e){throw new AbortError(e)};var _checkAbort=function(e,t,i){try{e.apply(t,_slice.call(arguments,2))}catch(e){if(e instanceof AbortError)return false;throw e}return true};var _rethrow=function(e){if(!(e instanceof AbortError))throw e};function AssertError(e){this.message=e||"Assert error"}AssertError.prototype=new Error;AssertError.prototype.constructor=AssertError;var DLCallback={data:"ludi"};var NullFunc=function(){};var _EnumProperty=function(e,t){this.$enum=e;this.defaultValue=t};var EnumProp=function(e,t){return new _EnumProperty(e,t)};var _IntegerProperty=function(e){this.defaultValue=e};var IntProp_0=new _IntegerProperty(0);var IntProp=function(e){return new _IntegerProperty(e)};var _INHERITTING={};var DLBase=function(){this.$_hash=String(++DLBase.$_hash)};$$_getNextHash=function(){return++DLBase.$_hash};DLBase.$_hash=0;DLBase.isProperty=function(e,t){var i,r=e;while(r){i=r.$attrs;if(i&&t in i){return true}r=r.prototype.$base&&r.prototype.$base.constructor}return false};DLBase.getPropertyNames=function(e){var t,i,r=[],n=e;while(n){t=n.$attrs;if(t){for(i in t){if(r.indexOf(i)<0){r.push(i)}}}n=n.prototype.$base&&n.prototype.$base.constructor}return r};DLBase.getPropertyDefaults=function(e){var t,i,r,n={},s=e;while(s){t=s.$attrs;if(t){for(i in t){if(!n.hasOwnProperty(i)){r=t[i];n[i]=r.value}}}s=s.prototype.$base&&s.prototype.$base.constructor}return n};$_getAllAttrs=function(e){var t,i,r,n=e.$attrs2={};if(e.Base){t=e.Base.constructor;r=t.$attrs2||$_getAllAttrs(t);for(i in r){n[i]=r[i]}}r=e.$attrs;for(i in r){n[i]=r[i]}return n};var $$clscnt=0;var defineClass=function(e,t,i,r,n){if(t!==null&&!(typeof t=="function")){if($_debug)debugger;throw"Base class is not a function"}var s,a,o,l,h,u,c,d,f,_,g,m=function(){if(arguments[0]!==_INHERITTING){this.$inited=false;this.init&&this.init.apply(this,arguments);this.$inited=true}},p=m.prototype=t?new t(_INHERITTING):new DLBase(_INHERITTING);$$clscnt++;p.constructor=m;m.Base=p.$base=t?t.prototype:DLBase.prototype;p.$name=e;if(i){s={};for(a in i){o=i[a];if(o===DLCallback){p[a]=undefined}else if(typeof o==="function"){o.$name=a;o.$owner=p;p[a]=o}else{s[a]=o}}g=m.$attrs={};for(a in s){_=g[a]={$enum:undefined};o=s[a];l=false;e=_capitalize(a);h=a;c="set"+e;f=a+"PropChanged";d=null;u=a+"_";if(p[u]===NullFunc){d=p[h]=null;delete p[u]}else if(p.hasOwnProperty(u)){d=p[u];delete p[u]}else if(o&&o.get){d=o.get;l=true}else if(!p.hasOwnProperty(h)){d=new Function("return this._"+a+";")}if(d&&d!==NullFunc){d.$name=h;d.$owner=p;p[gg=h]=d}d=null;if(o&&o.set){d=o.set;l=true}else if(p[c]===NullFunc){d=p[c]=null}else if(!p.hasOwnProperty(c)&&(!o||!o.hasOwnProperty("set"))){if(o instanceof _EnumProperty){d=function(i,r,n){return function(e){_checkEnumValue(i.$enum,e);var t;if(p[n]&&(t=p[n].call(this))!=e){this["_"+r]=e;if(this.$inited){if(this[f])this[f].call(this,r,t,e);else this.propertyChanged(r,t,e)}}return this}}(o,a,h)}else if(o instanceof _IntegerProperty){d=function(i,r){return function(e){var t;e=parseInt(e);if(!isNaN(e)&&p[r]&&(t=p[r].call(this))!=e){this["_"+i]=e;if(this.$inited){if(this[f])this[f].call(this,i,t,e);else this.propertyChanged(i,t,e)}}return this}}(a,h)}else{d=function(i,r){return function(e){var t;if(p[r]&&(t=p[r].call(this))!=e){this["_"+i]=e;if(this.$inited){if(this[f])this[f].call(this,i,t,e);else this.propertyChanged(i,t,e)}}return this}}(a,h)}}if(d){d.$name=c;d.$owner=p;p[ss=c]=d}if(o instanceof _EnumProperty){_.$enum=o.$enum;o=o.defaultValue}else if(o instanceof _IntegerProperty){o=o.defaultValue}else if(o&&o.hasOwnProperty("value")){o=o.value;l=false}if(l){_.noinit=l}else{_.field="_"+a;_.value=o}_.getter=p[h]?h:null;_.setter=p[c]?c:null}}if(r){for(a in r){m[a]=r[a]}}if(typeof n==="function"){n.call(m,m,r)}return m};var _throwCallerError=function(){throw new Error("Not supported Function.caller")};var _throwInvalidMethod=function(e){throw new Error("Method is not exists: "+e)};var _throwCheckedError=function(e){throw e instanceof Error?e:new Error(e.message||e)};var _throwDebugError=function(e){if($_debug){throw e}};var _throwAbstractError=function(){var e=_throwAbstractError.caller;throw new Error(Locale._default.notImplemeted+(e?": "+e.$owner.$name+"::"+e.$name:""))};var _cast=function(e,t){return e instanceof t?e:null};var $$_locproto=window.location.protocol;var Base=DLBase.prototype;Base.constructor=DLBase;Base.init=function(e){!e&&(this.$_hash=String(++DLBase.$_hash));var t,i,r,n=this.constructor.$attrs2||$_getAllAttrs(this.constructor);for(t in n){i=n[t];if(!i.noinit){v=i.value;if(typeof v==="function"){v=v.call(this)}this[i.field]=v}}};Base._super=function(){var e,t=this._super.caller;if(t){e=t.$owner.$base[t.$name];if(e){return e.apply(this,arguments)}}else{_throwCallerError()}};Base._callbase=function(e){this.constructor.prototype.$base[e].apply(this,_slice.call(arguments,1))};Base.className=function(){return this.constructor.prototype.$name};Base.baseClass=function(){return this.constructor.prototype.$base};Base.baseClassName=function(){var e=this.constructor.prototype.$base;return e&&e.$name};Base.clone=function(e){var t,i,r=this.constructor,n=new r(e),s=r.$attrs2;for(i in s){t=s[i];n[t.field]=this[t.field]}return n};Base.assign=function(e){if(e===this){return this}var t,i,r,n,s,a,o=this.constructor.$attrs2;if(e instanceof DLBase){t=e.constructor.$attrs2;for(i in t){r=o[i];if(r&&(s=r.setter)){attr=t[i];if(n=attr.getter){a=e[n].call(e);this[s].call(this,a)}}}}else if(_isObject(e)){for(i in e){r=o[i];if(r&&(s=r.setter)){this[s].call(this,e[i])}}}else{this.assignSimple(e)}return this};Base.assignSimple=function(e){};Base.assignProps=function(e,t){var i,r,n,s,a,o,l,h,u,c;if(e&&e!==this&&t){i=this.constructor.$attrs2;if(e instanceof DLBase){r=e.constructor.$attrs2;for(n=0,s=t.length;n<s;n++){a=t[n];l=r[a];if(l&&(u=l.getter)){o=i[a];if(o&&(h=o.setter)){c=e[u].call(e);this[h].call(this,c)}}}}else{for(n=0,s=t.length;n<s;n++){a=t[n];if(e.hasOwnProperty(a)){o=i[a];if(o&&(h=o.setter)){this[h].call(this,e[a])}}}}}};Base.propertyChanged=function(e,t,i){};Base.getAttribute=function(e,t){if(e){var i,r,n,s=e.split("."),a=this,o=null;for(r=0,n=s.length;r<n;r++){i=s[r];o=a.constructor.$attrs2[i];if(o){if(r<n-1){a=a[o.getter]()}}else{break}}return{target:a,prop:i,attr:o}}return undefined};Base.getProperty=function(e,t){if(e){var i,r,n,s,a=e.split("."),o=this,l=null;for(i=0,r=a.length;i<r;i++){n=a[i];l=o.constructor.$attrs2[n];if(l){if(i<r-1){o=o[l.getter]()}}else{break}}if(l&&l.getter){s=o[l.getter]();return t&&s&&s.proxy?s.proxy():s}}return undefined};Base.getProperties=function(e,t){if(e&&e.length>0){var i,r,n,s={};for(i=0,r=e.length;i<r;i++){n=e[i];s[n]=this.getProperty(n,t)}return e}return null};Base.setProperty=function(e,t,i){if(e){var r,n,s,a=e.split("."),o=this;attr=null;for(r=0,n=a.length;r<n;r++){s=a[r];attr=o.constructor.$attrs2[s];if(attr){if(r<n-1){o=o[attr.getter]()}}else{break}}if(attr&&attr.setter){o[attr.setter](t)}else if(i){throw"Invalid property: "+e}}return this};Base.setProperties=function(e,t){var i,r,n;if(_isArray(e)){for(i=0,r=e.length;i<r;i+=2){this.setProperty(e[i],e[i+1],t)}}else if(e){for(n in e){this.setProperty(n,e[n],t)}}return this};Base.toggle=function(e){return this.setProperty(e,!this.getProperty(e))};Base._initProps=function(e){if(e){var t,i;for(t in e){i="_"+t;if(this.hasOwnProperty(i)){this[i]=e[t]}}}};function $$_getProxy(e){if(_isArray(e)){var t,i,r=[];for(t=0,i=e.length;t<i;t++){r.push($$_getProxy(e[t]))}return r}else if(typeof e.proxy=="function"){return e.proxy()}return e}Base.proxy=function(){var e,t,i,r=this.constructor.$attrs2,n={};for(e in r){t=r[e];if(t.getter&&t.setter){i=this[t.getter]();if(i&&i.noProxy){}else{if(i){i=$$_getProxy(i)}n[e]=i}}}return n};Base.as=function(e){return this instanceof e?this:null};var EventAware=defineClass(null,null,{init:function(e){this._super(e);this._listeners=[]},findListener:function(e){var t=this._listeners;for(var i=t.length;i--;){if(e(t[i])){return t[i]}}return null},addListener:function(e){if(e&&this._listeners.indexOf(e)<0){this._listeners.push(e)}return this},removeListener:function(e){var t;if(e&&(t=this._listeners.indexOf(e))>=0){this._listeners.splice(t,1)}return this},containsListener:function(e){return this._listeners.indexOf(e)>=0},fireEvent:function(e){var t,i,r,n,s=_slice.call(arguments,0),a=this._listeners;s[0]=this;for(t=0,i=a.length;t<i;t++){r=a[t];n=r[e];n&&n.apply(r,s)}},fireConfirmEvent:function(e){var t,i,r,n,s,a=_slice.call(arguments,0);a[0]=this;for(t=0,i=this._listeners.length;t<i;t++){r=this._listeners[t];n=r[e];if(n){s=n.apply(r,a);if(typeof s==="boolean"&&!s){return false}}}return true},fireMessageEvent:function(e){var t,i,r,n,s,a=_slice.call(arguments,0);a[0]=this;for(t=0,i=this._listeners.length;t<i;t++){r=this._listeners[t];n=r[e];if(n){s=n.apply(r,a);if(typeof s==="string"&&s){return s}}}return null}});var EventAware$=EventAware.prototype;var Locale=function(e){this.lang=e;this.year="";this.months=["January","February","March","April","May","June","July","August","September","October","November","December"];this.shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.weekDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];this.shortWeekDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];this.thousandSep=",";this.decimalSep=".";this.dateSep="/";this.timeSep=":";this.am="AM";this.pm="PM";this.halfs=["1st Half","2nd Half"];this.quarters=["Q1","Q2","Q3","Q4"];this.dateFormat="M/d/yyyy HH:mm:ss";this.shortDateFormat="M/d/yyyy";this.minuteFormat="M/d/yyyy HH:mm";this.hourFormat="M/d/yyyy HH";this.monthFormat="M/yyyy";this.yearFormat="yyyy";this.untermintatedExpression="Untermintated expression";this.invalidToken="Invalid token";this.untermintatedString="Untermintated string";this.unknownOperator="Unknown operator";this.notExpectedTokenKind="Token is not a expected kind";this.invalidIsOperand="is operator's operand must be defined, null or empty";this.unknownToken="Unknown token";this.invalidIdentifierToken="Token is not a valid Identifier";this.invalidIdentifierKey="Invalid identifier key";this.invalidIdentifierIndexer="Invalid identifier indexer";this.invalidDateTimeFormat="Invalid datetime format";this.invalidDateTimeText="Invalid date Text: ";this.invalidDateTimeOutputFormat="Invalid datetime output format: ";this.invalidDateTimeFormat2="Invalid datetime format - 'H' and 'a' can not coexists";this.invalidDateTimeFormat3="Invalid datetime format - If there is 'h' then 'a' must be exists";this.invalidDateTimeInputFormat="Invalid datetime input format: ";this.invalidColorText="Invalid color text";this.invalidLinearGradientText="Invalid linear gradient text";this.invalidRadialGradientText="Invalid radial gradient text";this.valueIsRequired="Value is required";this.notImplemeted="Not Yet implemented";this.progressCancel="Cancel"};Locale.$_callbacks=[];Locale.addCallback=function(e){var t=Locale.$_callbacks;if(typeof e=="function"&&t.indexOf(e)<0){t.push(e);e(Locale._currLang)}};Locale.$_runCallbacks=function(){var e=Locale.$_callbacks;for(var t=e.length;t--;){e[t](Locale._currLang)}};Locale.getLocale=function(e){return Locale[e]||Locale.en};Locale.setLanguage=function(e){e=e||$_lanugage||"en";if(e!=Locale._currLang){Locale._currLang=e;Locale._default=Locale.getLocale(e);Locale.$_runCallbacks()}};Locale.setLocale=function(e,t){if(e&&_isObject(t)){Locale[e]=_extend(new Locale(e),t);if(Locale[e]===Locale._default){Locale.$_runCallbacks()}}};Locale.en=_extend(new Locale("en"),{});Locale.ko=Locale.kr=_extend(new Locale("ko"),{year:"년",months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],weekDays:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortWeekDays:["일","월","화","수","목","금","토"],thousandSep:",",decimalSep:".",dateSep:"/",timeSep:":",am:"오전",pm:"오후",halfs:["전반기","후반기"],quarters:["1사분기","2사분기","3사분기","4사분기"],dateFormat:"yyyy-MM-dd HH:mm:ss",shortDateFormat:"yyyy-MM-dd",minuteFormat:"yyyy-MM-dd HH:mm",hourFormat:"yyyy-MM-dd HH",monthFormat:"yyyy-MM",yearFormat:"yyyy",untermintatedExpression:"종결되지 않은 수식입니다",invalidToken:"잘못된 token 입니다",untermintatedString:"종결되지 않은 문자열입니다",unknownOperator:"알 수 없는 연산자입니다",notExpectedTokenKind:"기대하지 않은 토큰 종류입니다",invalidIsOperand:"is 연산자의 피연산자는 defined, null, empty 중 하나여야 합니다",unknownToken:"알 수 없는 토큰입니다",invalidIdentifierToken:"토큰이 식별자가 아닙니다",invalidIdentifierKey:"잘못된 식별자 키입니다",invalidIdentifierIndexer:"잘못된 인덱서 식별자입니다",invalidDateTimeFormat:"잘못된 날짜 형식입니다",invalidDateTimeText:"잘못된 날짜 값입니다",invalidDateTimeOutputFormat:"잘못된 날짜 출력 형식입니다",invalidDateTimeFormat2:"잘못된 날짜 형식 - 'H'와 'a'가 같이 존재할 수 없습니다",invalidDateTimeFormat3:"잘못된 날짜 형식 - 'h'가 있으면 'a'가 반드시 있어야 합니다",invalidDateTimeInputFormat:"잘못된 날짜 입력 형식입니다",invalidColorText:"잘못된 color 텍스트입니다",invalidLinearGradientText:"잘못된 linear gradient 텍스트입니다",invalidRadialGradientText:"잘못된 radial gradient 텍스트입니다",valueIsRequired:"반드시 요구되는 값입니다",notImplemeted:"아직 구현되지 않았습니다"});Locale._default=Locale.getLocale($_language);Locale._currLang=$_language;var SummaryMode=_enum("SummaryMode",{NONE:"none",AGGREGATE:"aggregate",STATISTICAL:"statistical"});var DateTimeScale=_enum("DateTimeScale",{SECOND:-3,MINUTE:-2,HOUR:-1,DATE:1,WEEK:2,MONTH:3,QUARTER:4,HALF:5,YEAR:6});var TextCase=_enum("TextCase",{NORMAL:"normal",UPPER:"upper",LOWER:"lower"});var Dictionary=function(){this._values={};this._keys={}};Dictionary.prototype={constructor:Dictionary,containsKey:function(e){return e&&this._values.hasOwnProperty(e.$_hash)},isEmpty:function(){for(var e in this._values){return false}return true},set:function(e,t){if(!e||!e.$_hash){throw"Invalid key"}this._values[e.$_hash]=t;this._keys[e.$_hash]=e;return this},unset:function(e){if(e&&this._values.hasOwnProperty(e.$_hash)){delete this._values[e.$_hash];delete this._keys[e.$_hash];return true}return false},clear:function(){this._values={};this._keys={};return this},get:function(e){return e?this._values[e.$_hash]:undefined},keys:function(){var e=[];for(var t in this._values){e.push(this._keys[t])}return e},values:function(){var e=[];for(var t in this._values){e.push(this._values[t])}return e},each:function(e){if(!_isFunction(e))return;for(var t in this._values){e(this._keys[t],this._values[t])}},checkTrue:function(e){if(!_isFunction(e))return;for(var t in this._values){if(e(this._keys[t],this._values[t])){return true}}return false},checkFalse:function(e){if(!_isFunction(e))return;for(var t in this._values){if(!e(null,this._keys[t],this._values[t])){return true}}return false}};function toInt(e,t){return e!==UNDEFINED&&e!==null?parseInt(e,t||10):0}function toFloat(e){return e!==UNDEFINED&&e!==null?parseFloat(e):0}function _toFixed(e,t){var i,r;if(!isNaN(e)){if(t>0){r=Math.pow(10,t-1);e=Math.floor(e/r)*r}else if(t<0){r=e+"";i=r.indexOf(".");if(i>=0){e=parseFloat(r.substr(0,i)+"."+r.substr(i+1,-t))}}}return e}function _equalDates(e,t){if(!(e instanceof Date)){return!(t instanceof Date)}if(!(t instanceof Date)){return false}return e.getTime()==t.getTime()}var $$_get_obj=function(e,t){var i=e;for(var r=0,n=t.length-1;r<n;r++){var s=t[r];var a=i[s];if(a===UNDEFINED){a=i[s]={}}i=a}return i};var $$_expand_object=function(e){var t=[];for(var i in e){var r=i.indexOf(".");if(r>=0){t.push(i)}}if(t.length>0){var n={};for(var i in e){n[i]=e[i]}e=n;for(var s=t.length;s--;){i=t[s];var a=i.split(".");var o=a[0];if(o){n=$$_get_obj(e,a);n[a[a.length-1]]=e[i]}}}return e};function equalArrays(e,t){if(e===t)return true;if(e==null||t==null)return false;var i=e.length;if(i!=t.length)return false;for(var r=0;r<i;++r){if(e[r]!==t[r])return false}return true}function decimalAdjust(e,t,i){if(typeof i==="undefined"||+i===0){return Math[e](t)}t=+t;i=+i;if(isNaN(t)||!(typeof i==="number"&&i%1===0)){return NaN}t=t.toString().split("e");t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-i:-i)));t=t.toString().split("e");return+(t[0]+"e"+(t[1]?+t[1]+i:i))}var _round10=function(e,t){return decimalAdjust("round",e,t)};var _floor10=function(e,t){return decimalAdjust("floor",e,t)};var _ceil10=function(e,t){return decimalAdjust("ceil",e,t)};var _getClipboardText=function(e){var t,i=(e.originalEvent||e).clipboardData;if(i){t=i.getData("text/plain")}else{t=window.clipboardData.getData("text")}return t};var _setClipboardText=function(e,t){if(_win.clipboardData){_win.clipboardData.setData("Text",t)}else{e.clipboardData.setData("text/plain",t)}};var ImageList=function(e,t){this._name=e;this._rootUrl=t;this._urls=[];this._listeners=[];this._images=[];this._map={}};ImageList.prototype.name=function(){return this._name};ImageList.prototype.count=function(){return this._urls.length};ImageList.prototype.addListener=function(e){var t=this._listeners;if(e&&t.indexOf(e)<0){t.push(e)}};ImageList.prototype.removeListener=function(e){var t=this._listeners;var i=t.indexOf(e);if(i>=0){_listener.splice(i,1)}};ImageList.prototype.getUrl=function(e){return this._urls[e]};ImageList.prototype.addUrl=function(e){if(e&&this._urls.indexOf(e)<0){this._urls.push(e);this._map[e]=this._urls.length-1}};ImageList.prototype.addUrls=function(e){if(e){for(var t=0;t<e.length;t++){this.addUrl(e[t])}}};ImageList.prototype.getImage=function(e){if(typeof e==="string"){var t=this._map[e];if(t!==undefined)e=t}if(e>=0&&e<this._urls.length){var i=this._images[e];if(i){return i}i=new Image;i["index"]=e;i["owner"]=this;this._images[e]=i;i.onload=function(){this.owner._fireLoaded(this.index)}.bind(i);i.src=this._rootUrl+this._urls[e]}return null};ImageList.prototype._fireLoaded=function(e){var t=this._listeners;if(t){for(var i=0;i<t.length;i++){t[i]&&t[i].onImageListImageLoaded(this,e)}}};var ImagePool=function(){this._listeners=[];this._images={}};ImagePool.prototype.addListener=function(e){if(e&&this._listeners.indexOf(e)<0){this._listeners.push(e)}};ImagePool.prototype.removeListener=function(e){var t=this._listeners.indexOf(e);if(t>=0){this._listeners.splice(t,1)}};ImagePool.prototype.getImage=function(e,t){if(e){var i=this._images[e];if(i){return i}i=new Image;i["owner"]=this;i["url"]=e;i["infinity"]=t;this._images[e]=i;i.onload=function(){this.owner._fireLoaded(this.url);delete i.onload}.bind(i);i.src=e}return null};ImagePool.prototype._fireLoaded=function(e){for(var t=0;t<this._listeners.length;t++){this._listeners[t].onImageLoaded(e)}};ImagePool.prototype.clearImages=function(e){for(var t in this._images){if(e){delete this._images[t]["owner"];delete this._images[t]["url"];delete this._images[t]}else if(!this._images[t]["infinity"]){delete this._images[t]["owner"];delete this._images[t]["url"];delete this._images[t]}}};var $$_DEF_NUM_SYMBOLS=["K","M","G","T","P","E","Z","Y"];var $$_NULL_NUM_SYMBOLS=["","","","","","","",""];var NumberScales=defineClass("NumberScales",null,{init:function(e){this._super();this._symbols=$$_DEF_NUM_SYMBOLS;this.$_symbols=undefined;this.setSymbols(e)},setSymbols:function(e){if(e!==this.$_symbols){var t,i;this.$_symbols=e;this._symbols=[];if(e!==null){if(_isString(e)){i=e;if(_equalTexts(i,"default",true)){this._symbols=$$_DEF_NUM_SYMBOLS}else if(i){this._symbols=i.split(",")}}else if(_isArray(e)){this._symbols=e.slice()}for(t=this._symbols.length;t<$$_DEF_NUM_SYMBOLS.length;t++){this._symbols.push($$_DEF_NUM_SYMBOLS[t])}}else{this._symbols=$$_NULL_NUM_SYMBOLS}}return this},getScaledText:function(e,t,i){var r,n=_int(Math.log(Math.abs(e))*Math.LOG10E);if(n>=t){n=_floor(n/t);r=Math.pow(10,n*t);e=e/r;if(i){e=i.format(e)}return e+this._symbols[n-1]}return String(e)},getText:function(e,t){return this.getScaledText(e,3,t)}},null,function(e){e.Default=new e(3)});var EmptyCommandError=function(e,t){this.name="DataLudi.EmptyCommandError";this.message="Empty command";this.command=e;this.ret=t};EmptyCommandError.prototype=new Error;EmptyCommandError.prototype.constructor=EmptyCommandError;var CommmandLockError=function(e,t){this.name="DataLudi.CommmandLockError";this.message="A command is already running";this.command=e;this.ret=t};CommmandLockError.prototype=new Error;CommmandLockError.prototype.constructor=CommmandLockError;var EditCommand=defineClass("EditCommand",null,{init:function(){this._super()},undo:function(e){},postUndo:function(e){},redo:function(e,t){},postRedo:function(e){},execute:function(e){return this.redo(false,e)},postRun:function(e){},rollbackUndo:function(){},rollbackRedo:function(){},dispose:function(){},set:function(e,t){if(e){this.$_user=this.$_user||{};this.$_user[e]=t}},get:function(e){return this.$_user&&this.$_user[e]},unset:function(e){this.$_user&&delete this.$_user[e]},_setReady:function(){this.ready=true},throwEmpty:function(e){if(this.undoable)throw new EmptyCommandError(this,e);return e},throwPaused:function(e,t){throw new CommandPausedError(this,e,t)}});var EditCommandGroup=defineClass("EditCommandGroup",EditCommand,{init:function(e){this._super();this._items=[]},count:function(){return this._items.length},add:function(e){if(e){var t=e instanceof EditCommandGroup?e.$_collectItems():[e];var i,r,n=t.length;for(i=0;i<n;i++){r=t[i];if(this._immediately){var s={};try{r.execute(s);this._setReady();r.postRun(s);this._items.push(r)}catch(e){if(e instanceof EmptyCommandError){return e.ret}if(!r.ready){throw err}}}else{this._items.push(r)}}}return this},dispose:function(){for(var e=this._items.length;e--;){this._items[e].dispose()}},undo:function(){var t,e,i,r=this._items.length;this._completed=false;try{for(t=r;t--;){i=false;e={};this._items[t].undo(e);i=true;this._items[t].postUndo(e)}this._completed=true}catch(e){if(i){this._completed=true;this._all=t==0;if(!this._all){this.$_shrink(t+1)}}throw e}},redo:function(e){var t,i,r,n=this._items.length;this._completed=false;try{for(t=0;t<n;t++){r=false;i={};this._items[t].redo(e,i);r=true;this._items[t].postRedo(i)}this._completed=true}catch(e){if(r){this._completed=true;this._all==t==n-1;if(!this._all){this.$_shrink(t+1)}}throw e}},execute:function(){var t,e,i,r,n,s,a=0,o=[];this._completed=false;try{for(t=0,e=this._items.length;t<e;t++){i=this._items[t];s=false;n={};try{i.execute(n);s=true;i.postRun(n);a++}catch(e){if(e instanceof EmptyCommandError){o.push(t)}else{if(!i.ready){this.$_shrink(t);this._completed=a>0}else if(s){this.$_shrink(t+1);this._completed=true}throw e}}finally{i.ready&&this._setReady()}}this._completed=true}finally{for(r=o.length;r--;){t=o[r];this._items[t].dispose();this._items.splice(t,1)}}if(a<1){throw new EmptyCommandError(0)}},$_collectItems:function(){function a(e,t){var i,r,n=e._items,s=n.length;for(i=0;i<s;i++){r=n[i];if(r instanceof EditCommandGroup){a(e,t)}else{t.push(r)}}return t}return a(this,[])},$_shrink:function(e){if(e>=0&&e<this._items.length){this._items.splice(e,this._items.length)}}});var EditCommandStack=defineClass("EditCommandStack",null,{init:function(e){this._super();this._owner=e;this._commands=[];this._current=-1;this._status=0},length:function(){return this._commands.length},undoing:function(){return this._status==2},redoing:function(){return this._status==3},canUndo:function(){return this._status<=0&&this._current>=0},canRedo:function(){return this._status<=0&&this._commands.length>this._current+1},undo:function(){if(this._status>0){throw new CommandLockError}if(this.canUndo()){var t,e={},i=this._commands[this._current];this._status=this._owner._onStack=2;try{try{i.undo(e)}catch(e){if(i.rollbackUndo()){throw e.source||e}else if(i instanceof EditCommandGroup&&i._completed){if(i._all){t=e}else{this._shrink(this._current+1);this._current++;throw e.source||e}}else{this._shrink(this._current);throw e.source||e}}if(t){throw t.source||t}i.postUndo(e)}finally{this._current=Math.max(this._current-1,-1);this._status=this._owner._onStack=0;this._stateChanged()}}return this},redo:function(){if(this._status>0){throw new CommandLockError}if(this.canRedo()){var t,e={},i=this._current+1,r=this._commands[i];this._status=this._owner._onStack=3;try{try{r.redo(true,e)}catch(e){if(r.rollbackRedo()){throw e.source||e}else if(r instanceof EditCommandGroup&&r._completed){if(r._all){t=e}else{this._shrink(this._current+2);throw e.source||e}}else{this._shrink(i);i=Math.max(-1,i-1);throw e.source||e}}if(t){throw t.source||t}r.postRedo(e)}finally{this._current=i;this._status=this._owner._onStack=0;this._stateChanged()}}return this},execute:function(t){if(t instanceof EditCommand){if(this._status>1){throw new CommmandLockError}if(this._status==1){return}var e,i,r,n={};this._status=1;t.ready=false;try{e=t.execute(n)}catch(e){if(e instanceof EmptyCommandError){return e.ret}if(!t.ready){throw e}if(t instanceof EditCommandGroup&&t._completed){r=e}else{this._shrink(this._current);throw e.source||e}}finally{this._status=0}this._commands[++this._current]=t;this._shrink(this._current+1);try{if(r){throw r.source||r}t.postRun(n)}finally{this._stateChanged()}return e}},flush:function(){var e=this._commands,t=e.length;if(t>0){for(;t--;){this._commands[t].dispose()}this._commands=[];this._current=-1;this._stateChanged()}},_currCmd:function(){return this._commands[this._current]},_stateChanged:function(){this._owner&&this._owner.onEditCommandStackChanged(this,this.canUndo(),this.canRedo())},_shrink:function(e){if(e>=0&&e<this._commands.length){for(i=this._commands.length-1;i>=e;i--){this._commands[i].dispose()}this._commands.length=e;this._stateChanged()}}});var _saveToFile=function(e,t){if(_isIE||navigator.appVersion.toString().indexOf(".NET")>0){window.navigator.msSaveOrOpenBlob(e,t)}else{var i=document.createElement("a");document.body.appendChild(i);var r=URL.createObjectURL(e);i.href=r;i.download=t;i.click();document.body.removeChild(i)}};var _saveTextToFile=function(e,t){var i=[e];var r=new Blob(i,{type:"text/plain"});_saveToFile(r,t)};var _uploadFile=function(e,t,i,r){var n=document.body;if(r._remoteActionIframe){n=_getIframeBody()}if(n){var s={fileName:t,data:i};var a=document.createElement("div");n.appendChild(a);var o=_createFormElement(null,"tempForm",e,"post");a.appendChild(o);if(_isObject(r._remoteParams)){for(var l in r._remoteParams){if(!s.hasOwnProperty(l)){s[l]=r._remoteParams[l]}}}for(var l in s){o.appendChild(_createInpuntElement(l,s[l]))}o.submit();n.removeChild(a)}};var _getIframeBody=function(e){e=e||"smartdatagrid_excel_upload_file",uploadIframe=document.getElementById(e);if(!uploadIframe){uploadIframe=document.createElement("iframe");uploadIframe.style.display="none";uploadIframe.style.position="absolute";uploadIframe.id=e;uploadIframe.hidden=true;document.body.appendChild(uploadIframe)}if(!uploadIframe.contentDocument){return null}return uploadIframe.contentDocument.body};var _createInpuntElement=function(e,t,i){var r=document.createElement("input");i=i||"hidden";r.name=e;r.value=t;r.type=i;return r};var _createFormElement=function(e,t,i,r){var n=document.createElement("form"),r=r||"post";if(e){n.id=e}if(t){n.name=t}n.action=i;n.method=r;return n};var _loadTextFile=function(n){var e='<input id="dl_kji_file" type="file" style="display: none" onchange="$_kji_upload();">',t=document.createElement("div");window.$_kji_upload=function(){var e,t,i,r=document.getElementById("dl_kji_file");length=r.files.length;try{if(length>0){e=r.files[0];t=new FileReader;t.onload=function(e){n&&n(e.target.result)};t.onerror=function(e){if(n){n(undefined,evet)}else{alert("File load error: "+e)}};t.readAsText(e)}}finally{i=document.getElementById("dl_kji_div");i&&document.body.removeChild(i)}};try{t.id="dl_kji_div";t.innerHTML=e;document.body.appendChild(t);document.getElementById("dl_kji_file").click()}catch(e){document.body.removeChild(t)}};var $_parseCSV=function(e,t){var i=[];if(e&&e.length>0){var r,n,s,a=0,o=-1,l=-1,h=false,u=false,c=e.length,d=null;for(r=0;r<c;r++){n=e.charAt(r);if(n==t){if(!h){s=r-a;if(s<=0){d=""}else if(l==r-1&&o==a){d=e.substring(o+1,l);if(u){d=d.replace('""','"')}}else{d=e.substring(a,r)}i.push(d);h=u=false;a=r+1}}else if(n=='"'){if(!h){o=r;l=-1;h=true}else if(l<0){l=r;h=false}else if(l==r-1){u=true;h=true;l=-1}}}if(a<c){if(l==c-1&&o==a){d=e.substring(o+1,l);if(u){d=d.replace('""','"')}}else{d=e.substring(a,c)}i.push(d)}}return i};var $$$_TF_DUMMY_PATTERN=/(.*)/;var $$$_TF_DUMMY_FORMAT="$1";var TextFormatter=defineClass("TextFormatter",null,{init:function(e){this._super();this.$_parse(e)},format:function(e){return e&&e.replace(this._pattern,this._format)},$_parse:function(e){if(e){var t=e.trim().split($_colonreg);if(t.length>1){var i=t[0].trim();var r=t[1].trim();if(i&&r){if(i.charAt(0)=='"'){i=i.substr(1,i.length-2)}if(i){if(r.charAt(0)=='"'){r=i.substr(1,r.length-2)}if(r){this._pattern=new RegExp(i,t[2]||"");this._format=r;return}}}}}this._pattern=$$$_TF_DUMMY_PATTERN;this._format=$$$_TF_DUMMY_FORMAT}});var $$$_SEP="$&,";var $$$_MAX_PRECISION=14;var $$$_MAX_DIGITS=14;var getDeigits=function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0};var DecimalFormatter=defineClass("DecimalFormatter",null,{init:function(e){this._super();this._minDigits=0,this._maxDigits=0,this._minInts=0,this._maxInts=0,this._optDecimal=false,this._groupPos=0,this._reg=null,this._regDecimal=null;this._parse(e);if(this._maxDigits>0&&$$$_MAX_PRECISION>0){this._format=DecimalFormatter.prototype.format}else{this.format=DecimalFormatter.prototype.formatInt}},format:function(e){var t=Number(e);if(isNaN(t)){return""}var i=this._minDigits;if(this._optDecimal){var r=getDeigits(t);i=Math.min(Math.max(r,this._minDigits),this._maxDigits)}if($$$_MAX_PRECISION>0){t=Number(t.toPrecision($$$_MAX_PRECISION))}else{t=Number(t.toPrecision(15))}if($$$_MAX_DIGITS>0){i=Math.min(i,$$$_MAX_DIGITS)}var n=t.toFixed(i);return this._reg?i?n.replace(this._regDecimal,$$$_SEP):n.replace(this._reg,$$$_SEP):n},formatInt:function(e){var t,i=Number(e);if(isNaN(i)){return""}else{if(this._reg){t=i.toFixed(0).replace(this._reg,$$$_SEP)}else{t=i.toFixed(0)}return t}},_parse:function(e){if(e){e=e.trim()}if(!e){return}var t,i,r=e.length,n=e.indexOf(".");if(this._optDecimal=e.indexOf("#",n)>0,n>=0){for(t=n+1;r>t&&"0"==e.charAt(t);t++){this._minDigits++,this._maxDigits++}for(;r>t&&"#"==e.charAt(t);t++){this._maxDigits++}if($$$_MAX_DIGITS>0){this._maxDigits=Math.min($$$_MAX_DIGITS,this._maxDigits)}e=e.substr(0,n)}if(e&&(r=e.length,e.charAt(r-1)==","&&(this._groupPos=3,e=e.substr(0,r-1))),e){r=e.length;var s=true;for(t=r-1;t>=0;t--){i=e.charAt(t);if("0"==i&&s){this._minInts++,this._maxInts++}else if(0==this._groupPos&&i==","){this._groupPos=r-t-1}else{if("#"!=i){break}s=false}}}if(this._groupPos>0){this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\."+"))","g");this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\."+")","g")}}});$$_DecimalFormatter_cache={};DecimalFormatter.clean=function(){$$_DecimalFormatter_cache={}};DecimalFormatter.getFormatter=function(e){if(e){var t=$$_DecimalFormatter_cache[e];if(!t){$$_DecimalFormatter_cache[e]=t=new DecimalFormatter(e)}return t}return null};DecimalFormatter.formatNumber=function(e,t){try{if(e){return DecimalFormatter.getFormatter(e).format(t)}}catch(e){}return String(t)};var BooleanFormatter=defineClass("BooleanFormatter",null,{init:function(e){this._super();this._format=e;this._nullText="";this._trueText="true";this._falseText="false";this._parse()},format:null,setFormat:function(e){if(e!=this._format){this._format=e;this._parse()}},formatValue:function(e){return e===undefined?this._nullText:e?this._trueText:this._falseText},_parse:function(){this._falseText=this._trueText=null;if(this._format){var e=this._format.split(/[;\:]/);this._falseText=e[0];if(e.length>0){this._trueText=e[1]}if(e.length>1){this._nullText=e[2]}}}});$$_BooleanFormatter_cache={};BooleanFormatter.getFormatter=function(e){if(e){var t=$$_BooleanFormatter_cache[e];if(!t){$$_BooleanFormatter_cache[e]=t=new BooleanFormatter(e)}return t}return null};var BooleanConverter=function(e){this._format=e;this._values=null;this._sensitive=true;this._trueText=null;this._falseText=null;this._parse(this._format)};BooleanConverter.prototype.format=function(){return this._format};BooleanConverter.prototype.setFormat=function(e){if(e!=this._format){this._format=e;this._parse(e)}};BooleanConverter.prototype.toBool=function(e){if(this._values){if(e){var t=this._sensitive?String(e):String(e).toLowerCase();if(t in this._values){return this._values[t]}}}return Boolean(e)};BooleanConverter.prototype.toBoolEx=function(e){var t=this._sensitive?String(e):String(e).toLowerCase();if(this._values){if(t in this._values){return this._values[t]}}return t?true:undefined};BooleanConverter.prototype.toBoolStrict=function(e){if(_values){var t=this._sensitive?String(e):String(e).toLowerCase();if(t in this._values){return this._values[t]}}return undefined};BooleanConverter.prototype.toText=function(e){return e?this._trueText:this._falseText};BooleanConverter.prototype._parse=function(e){if(e){var t,i,r=e.split(/[;\:]/),n,s,a=true;t=r[0];n=t?t.split(","):null;if(r.length>1){t=r[1];s=t?t.split(","):null}if(r.length>2){t=trim(r[2]);if(t=="0")a=false}this._values={};this._sensitive=a;for(i=0;i<n.length;i++){t=n[i];this._values[a?t:t.toLowerCase()]=false}for(i=0;i<s.length;i++){t=s[i];this._values[a?t:t.toLowerCase()]=true}this._trueText=s&&s.length>0?s[0]:"true";this._falseText=n&&n.length>0?n[0]:"false"}else{this._values={};this._values["true"]=true;this._values["false"]=false;this._trueText="true";this._falseText="false"}};BooleanConverter.$_DefaultFormat="false,f,0:true,t,1:0";BooleanConverter.Default=new BooleanConverter(BooleanConverter.$_DefaultFormat);$$_BooleanConverter_cache={};$$_BooleanConverter_cache[BooleanConverter.$_DefaultFormat]=BooleanConverter.Default;BooleanConverter.getConverter=function(e){if(e){var t=$$_BooleanConverter_cache[e];if(!t){$$_BooleanConverter_cache[e]=t=new BooleanConverter(e)}return t}return null};var DATE_SEPARATORS="./-: ";var DateTimeParser=defineClass("DateTimeParser",null,{init:function(e){this._super();this._baseYear=0;this._patterns=[];this.setFormat(e)},format:null,baseYear:2e3,zoneDelta:0,amText:null,pmText:null,setFormat:function(e){if(e!=this._format){if(!e){this.$_throwInvalidFormat("")}this.$_parseFormat(e);this._format=e}},setBaseYear:function(e){if(isNaN(e))e=2e3;if(e!=this._baseYear){this._baseYear=e}},setAmText:function(e){if(e!=this._amText){this._amText=e}},setPmText:function(e){if(e!=this._pmText){this._pmText=e}},parse:function(e){try{var t=0;var i=1;var r=1;var n=0;var s=0;var a=0;var o=0;var l=0;var h=0;var u=this._patterns.length;var c;var d=0;var f=e.length;for(c=0;c<u&&d<f;c++){var _=this._patterns[c];var g=_.c;var m=_.len;switch(g){case"y":t=_int(e.substr(d,m));break;case"M":i=_int(e.substr(d,m));break;case"d":r=_int(e.substr(d,m));break;case"a":var p;if((p=this._amText||Locale._default.am)&&e.indexOf(p,d)==d){l=12;m=p.length}else if((p=this._pmText||Local._default.pm)&&e.indexOf(p,d)==d){h=12;m=p.length}else{return null}break;case"H":n=_int(e.substr(d,m));break;case"h":n=_int(e.substr(d,m));break;case"m":s=_int(e.substr(d,m));break;case"s":a=_int(e.substr(d,m));break;case"S":o=_int(e.substr(d,m));break;case".":case"/":case"-":case":":case" ":if(DATE_SEPARATORS.indexOf(e.charAt(d))<0){return null}break;default:return null}d+=m}}catch(e){return null}if(t<100){t+=this._baseYear}if(l>0){if(n==12){n=0}}else if(h>0&&n<12){n+=12}if(typeof DataLudi!=="undefined"&&DataLudi.__CustomDate){return DataLudi.__CustomDate(t,i-1,r,n,s+this._zoneDelta,a,o)}else{return new Date(t,i-1,r,n,s+this._zoneDelta,a,o)}},$_parseFormat:function(e){var t=e;var i=t.length;var r=0;var n,s,a;this._patterns=[];while(r<i){n=r;s=t.charAt(r);if(_isWhitespace(s)){r++;while(r<i&&_isWhitespace(t.charAt(r))){r++}this._patterns.push({c:" ",p:n,len:r-n})}else{a=0;switch(s){case"y":a=this.$_getPattern(t,r,s);if(a!=4&&a!=2)this.$_throwInvalidFormat(t);break;case"M":case"d":case"H":case"h":case"m":case"s":a=this.$_getPattern(t,r,s);if(a!=2)this.$_throwInvalidFormat(t);break;case"S":a=this.$_getPattern(t,r,s);if(a!=3)this.$_throwInvalidFormat(t);break;case"a":case".":case"/":case"-":case":":a=this.$_getPattern(t,r,s);if(a!=1)this.$_throwInvalidFormat(t);break;default:this.$_throwInvalidFormat(t)}if(a>0){this._patterns.push({c:s,p:r,len:a});r+=a}}}},$_throwInvalidFormat:function(e){if($_debug)debugger;throw new Error(Locale._default.invalidDateTimeFormat+": "+e)},$_getPattern:function(e,t,i){var r=e.length;var n=1;while(++t<r&&e.charAt(t)==i){n++}return n}});var $$_DT_DATE_TOKENS=["yy","yyyy","M","MM","MMM","MMMM","d","dd","ddd","dddd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","tt","TT","'",'"'];var $$_DT_DATE_SEPARATORS=[".","/","-",":"];var U_0="0".charCodeAt(0);var U_9="9".charCodeAt(0);var U_Z="Z".charCodeAt(0);var L_Z="z".charCodeAt(0);var U_A="A".charCodeAt(0);var L_A="a".charCodeAt(0);var U_Y="Y".charCodeAt(0);var L_Y="y".charCodeAt(0);var U_M="M".charCodeAt(0);var L_M="m".charCodeAt(0);var U_D="D".charCodeAt(0);var L_D="d".charCodeAt(0);var U_H="H".charCodeAt(0);var L_H="h".charCodeAt(0);var U_S="S".charCodeAt(0);var L_S="s".charCodeAt(0);var L_T="t".charCodeAt(0);var U_T="T".charCodeAt(0);var L_Q="'".charCodeAt(0);var DateTimeWriter=function(e){var t=null;var i=null;var r=null;var n=2e3;var s=false;var u=null;var c=null;var a=null;var o=function(e,t){if(e){var i,r,n;var s=e.trim();var a=s.length;var o=[];var l=0;while(l<a){i=s.charAt(l);if($$_DT_DATE_SEPARATORS.indexOf(i)>=0){o.push(i);l++}else{r=l++;while(l<a&&s.charAt(l)==i){l++}i=s.substring(r,l);if($$_DT_DATE_TOKENS.indexOf(i)<0){n=i.charCodeAt(0);if(n>=U_A&&n<=U_Z||n>=L_A&&n<=L_Z){throw new Error(Locale._default.invalidDateTimeOutputFormat+": "+e)}}if(i==="'"||i==='"'){var h=l;while(l<a&&s.charAt(l)!=i){l++}if(l>=a){throw new Error(Locale._default.invalidDateTimeOutputFormat+": "+e)}t.push(s.substring(h,l++));i="'"}o.push(i)}if(l<a&&_isWhitespace(i=s.charAt(l))){o.push(i);while(l<a&&_isWhitespace(s.charAt(l))){l++}}}return o}return null};var l=function(e){u=null;if(typeof e==="string"){e=e.trim();if(e){t=e;u=o(e,c=[])}}};var d=function(e){return e<10?"0"+e:String(e)};this.format=function(){return t};this.formatString=function(){return a};this.setFormatString=function(e){e=e||DateTimeWriter.$_DefaultFormat;if(e!=a){u=[];l(e);a=e}};this.getText=function(e){if(!u){return""}var t=e;if(!(t instanceof Date)){t=new Date(e)}var i=Locale._default;var r=0;var n="";var s;for(var a=0,o=u.length;a<o;a++){var l=u[a];var h=l.length;switch(l.charCodeAt(0)){case L_Y:n+=h>2?t.getFullYear():d(t.getFullYear()%100);break;case U_M:n+=h>3?i.months[t.getMonth()]:h>2?i.shortMonths[t.getMonth()]:h>1?d(t.getMonth()+1):t.getMonth()+1;break;case L_D:n+=h>3?i.weekDays[t.getDay()]:h>2?i.shortWeekDays[t.getDay()]:h>1?d(t.getDate()):t.getDate();break;case U_H:n+=h>1?d(t.getHours()):t.getHours();break;case L_H:s=t.getHours();if(s==0){s=12}else if(s>12){s=s-12}n+=h>1?d(s):s;break;case L_M:n+=h>1?d(t.getMinutes()):t.getMinutes();break;case L_S:n+=h>1?d(t.getSeconds()):t.getSeconds();break;case U_S:n+=t.getMilliseconds().toString().substr(0,h);break;case L_A:case U_A:case L_T:case U_T:if(t.getHours()<12){n+=i.am}else{n+=i.pm}break;case L_Q:n+=c[r++];break;default:n+=l}}return n};this.setFormatString(e||DateTimeWriter.$_DefaultFormat)};Locale.addCallback(function(e){var t=DateTimeWriter;t.$_DefaultFormat=Locale._default.shortDateFormat;t.Default=new t(t.$_DefaultFormat);t.Month=new t(Locale._default.monthFormat);t.Year=new t(Locale._default.yearFormat);t.Second=new t(Locale._default.secondFormat);t.Minute=new t(Locale._default.minuteFormat);t.Hour=new t(Locale._default.minuteFormat);t.Writers={};t.Writers[DateTimeScale.YEAR]=t.Year;t.Writers[DateTimeScale.HALF]=t.Month;t.Writers[DateTimeScale.QUARTER]=t.Month;t.Writers[DateTimeScale.MONTH]=t.Month;t.Writers[DateTimeScale.WEEK]=t.Default;t.Writers[DateTimeScale.DATE]=t.Default;t.Writers[DateTimeScale.HOUR]=t.Hour;t.Writers[DateTimeScale.MINUTE]=t.Minute;t.Writers[DateTimeScale.SECOND]=t.Second});$$_DateTimeWriter_cache={};$$_DateTimeWriter_cache[DateTimeWriter.$_DefaultFormat]=DateTimeWriter.Default;DateTimeWriter.getWriter=function(e){if(typeof e=="string"){var t=$$_DateTimeWriter_cache;var i=t[e];if(!i){t[e]=i=new DateTimeWriter(e)}return i}return null};var $$_DATE_TOKENS=["yy","yyyy","M","MM","d","dd","a","A","H","HH","h","hh","m","mm","s","ss"];var $$_DATE_SEPARATORS=[".","/","-",":"];var $$_ZERO_CHAR="0".charCodeAt(0);var $$_NINE_CHAR="9".charCodeAt(0);var DatetimeConverter=function(e){var t=null,x=null,b=null,I=null,T=2e3,A=false;var i=function(e){var t,i,r,n,s=e.length,a=[];i=t=0;r=e.charAt(t++);while(t<s){n=e.charAt(t);if(n!=r){a.push(e.substring(i,t));r=n;i=t}t++}if(i<s){a.push(e.substr(i))}return a};var E=function(e){var t,i,r,n,s,a,o,l,h=[];if(t=_trim(e)){a=t.length;o=0;while(o<a){i=t.charAt(o);if($$_DATE_SEPARATORS.indexOf(i)>=0){h.push(i);o++}else{r=o++;while(o<a&&t.charAt(o)==i){o++}i=t.substring(r,o);if($$_DATE_TOKENS.indexOf(i)<0){throw new Error(Locale._default.invalidDateTimeInputFormat+": "+e)}h.push(i=="A"?"a":i)}if(o<a&&_isWhitespace(i=t.charAt(o))){h.push(" ");while(o<a&&_isWhitespace(t.charAt(o))){o++}}}l=[];a=h.length;r=0;for(o=0;o<a;o++){i=h[o];if(i=="a"||$$_DATE_TOKENS.indexOf(i)<0){if(r>1){l.push("E")}l.push(i);r=0}else{if(r==1){l.splice(l.length-2,0,"L")}l.push(i);r++}}h=l}return h};var R=function(e,t,i){var r;var n=[];var s=["am","pm","AM","PM","Am","Pm","aM","pM"];t&&s.push(t);i&&s.push(i);if(r=_trim(e)){var a,o;var l=r.length;var h=0;while(h<l){a=r.charAt(h);if(DATE_SEPARATORS.indexOf(a)>=0){n.push(a);h++}else if(a.charCodeAt(0)>=$$_ZERO_CHAR&&a.charCodeAt(0)<=$$_NINE_CHAR){o=h++;while(h<l&&r.charCodeAt(h)>=$$_ZERO_CHAR&&r.charCodeAt(h)<=$$_NINE_CHAR){h++}a=r.substring(o,h);n.push(a)}else{var u=-1;for(var c=0;c<s.length;c++){if(r.indexOf(s[c],h)==h){u=c;break}}if(u<0){throw new Error(Locale._default.invalidDateTimeText+": "+r)}n.push(s[c]);h+=s[c].length}if(h<l&&_isWhitespace(a=r.charAt(h))){n.push(" ");while(h<l&&_isWhitespace(r.charAt(h))){h++}}}}return n};var n=function(e){if(e=_trim(e)){var t=E(e);var i=0;var r=t.indexOf("a")>=0;if(r&&t.indexOf("H")>=0){throw Locale._default.invalidDateTimeFormat2+": "+e}if(t.indexOf("h")>=0&&!r){throw Locale._default.invalidDateTimeFormat3+": "+e}}};var r=function(e){x=null;b="am";I="pm";T=2e3;A=false;if(e){var t=e.split(";");x=t[0]?t[0]:_defaultFormat;n(x);if(t.length>1){A=t[1]?t[1]=="1":false}if(t.length>2&&t[2]){var i=t[2].split(",");if(i[0])b=i[0];if(i[1])I=i[1]}if(t.length>3){var r=_int(t[3]);if(!isNaN(r))T=r}}};this.formatString=function(){return t};this.setFormatString=function(e){if(e!=t){t=e;r(e)}};this.format=function(){return x};this.getDate=function(e,t){var i=_isDate(t)?t:null,r=null;if(e=_trim(e)){var n,s,a,o=false,l=false,h=E(x),u=R(e,b,I),c=h.indexOf("a")>=0||h.indexOf("A")>=0,d=h.length,f=u.length,_=0,g=1,r=1,m=0,p=0,v=0,y=0,S=0,C=0,w=0;while(C<d&&w<f){s=h[C];a=u[w];switch(s.charAt(0)){case"L":n=String(a);C++;while(C<d&&(e=h[C])!="E"){a=n?_int(n.substr(0,e.length)):-1;n=n.substr(e.length);switch(e.charAt(0)){case"Y":case"y":_=Math.max(0,a);break;case"M":g=a>=0?a:1;break;case"D":case"d":r=a>=0?a:1;break;case"H":case"h":m=Math.max(0,a);break;case"m":p=Math.max(0,a);break;case"s":v=Math.max(0,a);break}C++}break;case"Y":case"y":l=true;_=_int(a);break;case"M":l=true;g=_int(a);break;case"D":case"d":l=true;r=_int(a);break;case"H":case"h":o=true;m=_int(a);break;case"m":o=true;p=_int(a);break;case"s":o=true;v=_int(a);break;case"a":e=String(a);if(e){e=e.toLowerCase();if(b&&e==b.toLowerCase()||e=="am"){y=12}else if(I&&e==I.toLowerCase()||e=="pm"){S=12}}break}C++;w++}if(_<100&&_>=0){_+=T}if(l){if(_<0||_>9999){return null}if(g<1||g>12){return null}if(r<1||r>31){return null}if(g==2){if(r>29){return null}if(r==29){if(!(_%4==0&&_%100!=0||_%400==0))return null}}}else if(A&&a){_=i.getFullYear();g=i.getMonth()+1;r=i.getDate()}if(o){if(m<0||m>24){return null}if((y>0||S>0)&&m>12){return null}if(p<0||p>59){return null}if(v<0||v>59){return null}if(y>0){m=m%12}else if(S>0){m=m%12+12}}else if(A&&_isDate(i)){m=i.getHours();p=i.getMinutes();v=i.getSeconds()}if(typeof DataLudi!=="undefined"&&DataLudi.__CustomDate){r=DataLudi.__CustomDate(_,g-1,r,m,p,v)}else{r=new Date(_,g-1,r,m,p,v)}}return r};this.getDateNull=function(e){try{return this.getDate(e)}catch(e){}return null};this.getText=function(e,t){var i=e;if(!(i instanceof Date)){i=new Date(e)}var r=E(x);var n=r.indexOf("a")>=0||r.indexOf("A")>=0;var s="";var a;for(var o=0,l=r.length;o<l;o++){var h=r[o];var u=h.length;switch(h.charAt(0)){case"L":break;case"Y":case"y":s+=u>2?i.getFullYear():_pad(i.getFullYear()%100);break;case"M":s+=u>1?_pad(i.getMonth()+1):i.getMonth()+1;break;case"D":case"d":s+=u>1?_pad(i.getDate()):i.getDate();break;case"H":s+=u>1?_pad(i.getHours()):i.getHours();break;case"h":if(n){a=i.getHours();if(a==0){a=12}else if(a>12){a=a-12}s+=u>1?_pad(a):a}else{s+=u>1?_pad(i.getHours()):i.getHours()}break;case"m":s+=u>1?_pad(i.getMinutes()):i.getMinutes();break;case"s":s+=u>1?_pad(i.getSeconds()):i.getSeconds();break;case"A":case"a":if(i.getHours()<12){s+=b}else{s+=I}break;default:if(!t){s+=h}}}return s};this.setFormatString(e)};DatetimeConverter.$_DefaultFormat="yyyy/MM/dd";DatetimeConverter.Default=new DatetimeConverter(DatetimeConverter.$_DefaultFormat);var ISODateTimeParser=function(){};var $$_zoneOffset=(new Date).getTimezoneOffset()*60*1e3;ISODateTimeParser.parse=function(t,i){var e=null;try{var r=t.indexOf("T");var n=t.substring(0,r);var s=t.substring(r+1);var a=n.split("-");var o=a.length;var l=_int(a[0]);var h=o>1?_int(a[1]):1;var u=o>2?_int(a[2]):1;var c;var d;var f;var _;if(s.indexOf("Z")!=-1){c=1;d=0;f=0;s=s.replace("Z","")}else if(s.indexOf("+")!=-1){c=1;_=s.substring(s.indexOf("+")+1,s.length);d=Number(_.substring(0,_.indexOf(":")));f=Number(_.substring(_.indexOf(":")+1,_.length));s=s.substring(0,s.indexOf("+"))}else if(s.indexOf("-")!=-1){c=-1;_=s.substring(s.indexOf("-")+1,s.length);d=Number(_.substring(0,_.indexOf(":")));f=Number(_.substring(_.indexOf(":")+1,_.length));s=s.substring(0,s.indexOf("-"))}else{c=0}var g=s.split(":");o=g?g.length:0;var m=o>0?_int(g[0]):0;var p=o>1?_int(g[1]):0;var v=o>2?String(g[2]).split("."):null;var y=v&&v.length>0?_int(v[0]):0;var S=v&&v.length>1?1e3*parseFloat("0."+v[1]):0;var C=Date.UTC(l,h-1,u,m,p,y,S);var w=c?(d*36e5+f*6e4)*c:-$$_zoneOffset;e=new Date(C-w);if(i&&isNaN(e.getTime())){throw new Error(Locale._default.invalidDateTimeText+": "+t)}}catch(e){if(i){var x=Locale._default.invalidDateTimeText+": "+t;var b=e.toString();if(b.indexOf(Locale._default.invalidDateTimeText)!=0){x+="\nError: "+e.toString()}throw new Error(x)}}return e};var $$_drawPlusBox=function(e,t,i,r){var n=_round(t.x+(t.width-i)/2);var s=_round(t.y+(t.height-i)/2);var a=_round(i/9);var o=[n+a*0,s+a*0,n+a*0,s+a*9,n+a*9,s+a*9,n+a*9,s+a*0];var l=[n+a*4,s+a*2,n+a*4,s+a*4,n+a*2,s+a*4,n+a*2,s+a*5,n+a*4,s+a*5,n+a*4,s+a*7,n+a*5,s+a*7,n+a*5,s+a*5,n+a*7,s+a*5,n+a*7,s+a*4,n+a*5,s+a*4,n+a*5,s+a*2];e.drawHoledPolygonArray(r,null,o,l)};var $$_drawMinusBox=function(e,t,i,r){var n=_round(t.x+(t.width-i)/2);var s=_round(t.y+(t.height-i)/2);var a=_round(i/9);var o=[n+a*0,s+a*0,n+a*0,s+a*9,n+a*9,s+a*9,n+a*9,s+a*0];var l=[n+a*2,s+a*4,n+a*2,s+a*5,n+a*7,s+a*5,n+a*7,s+a*4];e.drawHoledPolygonArray(r,null,o,l)};var $$_drawCheckMark=function(e,t,i,r){var n=i.x+(i.width-r)/2;var s=i.y+(i.height-r)/2-r/6+1;var a=r/10;var o=[n+a*0,s+a*6.573,n+a*4.3915,s+a*10,n+a*10.1,s+a*3,n+a*8.205,s+a*2,n+a*3.684,s+a*6.9425,n+a*1.2,s+a*5];e.drawPolygonArray(t,null,o)};var $$_drawRightArrow=function(e,t,i,r){var n=t.x+(t.width-i)/2;var s=t.y+(t.height-i)/2;var a=i/9;var o=[n+a*1.75,s+a*1,n+a*5.25,s+a*4.5,n+a*1.75,s+a*8,n+a*2.75,s+a*9,n+a*7.25,s+a*4.5,n+a*2.75,s+a*0];e.drawPolygonArray(r,null,o)};var $$_drawDownArrow=function(e,t,i,r){var n=t.x+(t.width-i)/2;var s=t.y+(t.height-i)/2;var a=i/9;var o=[n+a*0,s+a*2.75,n+a*4.5,s+a*7.25,n+a*9,s+a*2.75,n+a*8,s+a*1.75,n+a*4.5,s+a*5.25,n+a*1,s+a*1.75];e.drawPolygonArray(r,null,o)};var $$_drawItriangle=function(e,t,i,r){var n=t.x+(t.width-i)/2;var s=t.y+(t.height-i)/2;var a=i/9;var o=[n+a*1,s+a*2,n+a*8,s+a*2,n+a*4.5,s+a*7];e.drawPolygonArray(r,null,o)};var $$_drawRightTriangle=function(e,t,i,r){var n=t.x+(t.width-i)/2;var s=t.y+(t.height-i)/2;var a=i/9;var o=[n+a*7,s+a*1,n+a*7,s+a*7,n+a*1,s+a*7];e.drawPolygonArray(r,null,o)};var $$_drawTriangleRight=function(e,t,i,r){var n=t.x+(t.width-i)/2;var s=t.y+(t.height-i)/2;var a=i/9;var o=[n+a*2,s+a*1,n+a*7,s+a*4.5,n+a*2,s+a*8];e.drawPolygonArray(r,null,o)};var ExpressionSyntaxError=_createError("DataLudi.ExpressionSyntaxError","tokenPos");function _syntaxError(e,t){throw new ExpressionSyntaxError(e,t)}var ExpressionEvaluationError=_createError("DataLudi.ExpressionEvaluationError");var $$_createTokenArray=function(){var e=[];for(var t=0;t<arguments.length;t++){e[arguments[t]]=true}return e};var TokenKind={Unknown:0,Add:1,Slash:2,Star:3,Minus:4,Plus:5,Identifier:10,And:11,Not:13,Div:14,Mod:15,Shl:16,Shr:17,Or:18,ToStr:20,ToNum:21,ToDate:22,ToBool:23,Length:24,Is:26,IsNot:27,BraceClose:30,BraceOpen:31,Comma:32,CRLF:33,Null:34,Defined:35,Empty:36,NaN:37,True:38,False:39,Equal:40,Greater:41,GreaterEqual:42,Lower:43,LowerEqual:44,NotEqual:45,Like:46,NotLike:47,ILike:48,NotILike:49,Match:50,NotMatch:51,IMatch:52,NotIMatch:53,In:54,NotIn:55,Rand:56,Srand:57,ToUpper:58,ToLower:59,String:60,StringLiteral:61,Ascii:62,FloatLiteral:63,IntegerLiteral:64,Point:65,RoundOpen:66,RoundClose:67,DotDot:68,BracketOpen:69,BracketClose:70,Space:71,ToInt:72,ToNumz:73,ToIntz:74,Symbol:80};TokenKind.IS_CHECK=$$_createTokenArray(TokenKind.Is,TokenKind.IsNot);TokenKind.IS_SET=$$_createTokenArray(TokenKind.In,TokenKind.NotIn);TokenKind.IS_COMPARISON=$$_createTokenArray(TokenKind.Equal,TokenKind.NotEqual,TokenKind.Like,TokenKind.NotLike,TokenKind.ILike,TokenKind.NotILike,TokenKind.Match,TokenKind.NotMatch,TokenKind.IMatch,TokenKind.NotIMatch,TokenKind.Greater,TokenKind.GreaterEqual,TokenKind.Lower,TokenKind.LowerEqual);TokenKind.IS_LOGICAL=$$_createTokenArray(TokenKind.And,TokenKind.Or);TokenKind.IS_ADDITIVE=$$_createTokenArray(TokenKind.Minus,TokenKind.Plus);TokenKind.IS_MULTIPLICATIVE=$$_createTokenArray(TokenKind.Star,TokenKind.Slash,TokenKind.Div,TokenKind.Mod,TokenKind.Shl,TokenKind.Shr);var ExpressionLexer=function(){var e,i=[],t=[],r=[],n=[],s=[],a=[],o=0,l=0,h={};for(e="0".charCodeAt(0);e<="9".charCodeAt(0);e++)i[e]=true;for(e="a".charCodeAt(0);e<="z".charCodeAt(0);e++)i[e]=true;for(e="A".charCodeAt(0);e<="Z".charCodeAt(0);e++)i[e]=true;i["_".charCodeAt(0)]=true;for(e="0".charCodeAt(0);e<="9".charCodeAt(0);e++)t[e]=true;for(e="a".charCodeAt(0);e<="f".charCodeAt(0);e++)t[e]=true;for(e="A".charCodeAt(0);e<="F".charCodeAt(0);e++)t[e]=true;for(e="0".charCodeAt(0);e<="9".charCodeAt(0);e++)r[e]=true;r[".".charCodeAt(0)]=r["e".charCodeAt(0)]=r["E".charCodeAt(0)]=true;for(e=1;e<=9;e++)n[e]=true;for(e=11;e<=12;e++)n[e]=true;for(e=14;e<=32;e++)n[e]=true;s[0]=s[10]=s[13]=true;a[0]=true;o='"'.charCodeAt(0);l="'".charCodeAt(0);h={};h["str"]=TokenKind.ToStr;h["num"]=TokenKind.ToNum;h["int"]=TokenKind.ToInt;h["numz"]=TokenKind.ToNumz;h["intz"]=TokenKind.ToIntz;h["date"]=TokenKind.ToDate;h["bool"]=TokenKind.ToBool;h["not"]=TokenKind.Not;h["len"]=TokenKind.Length;h["and"]=TokenKind.And;h["in"]=TokenKind.In;h["mod"]=TokenKind.Mod;h["or"]=TokenKind.Or;h["div"]=TokenKind.Div;h["shl"]=TokenKind.Shl;h["shr"]=TokenKind.Shr;h["is"]=TokenKind.Is;h["like"]=TokenKind.Like;h["ilike"]=TokenKind.ILike;h["match"]=TokenKind.Match;h["imatch"]=TokenKind.IMatch;h["defined"]=TokenKind.Defined;h["null"]=TokenKind.Null;h["empty"]=TokenKind.Empty;h["nan"]=TokenKind.NaN;h["true"]=TokenKind.True;h["false"]=TokenKind.False;h["rand"]=TokenKind.Rand;h["srand"]=TokenKind.Srand;h["lower"]=TokenKind.ToLower;h["upper"]=TokenKind.ToUpper;var u=null,c=null,d=0,f=0,_=0,g=0,m=0,p=0,v=0;function y(){f=TokenKind.Unknown;_++}function S(){f=TokenKind.Symbol;_++}function C(){f=TokenKind.Comma;_++}function w(){f=TokenKind.CRLF;if(c.charCodeAt(_+1)==10){_+=2}else{_++}m++;p=_}function x(){f=TokenKind.CRLF;_++;m++;p=_}function b(){if(c.charAt(_+1)=="="){f=TokenKind.GreaterEqual;_+=2}else{f=TokenKind.Greater;_++}}function I(){if(c.charAt(_+1)=="="){f=TokenKind.NotEqual;_+=2}else{f=TokenKind.Not;_++}}function T(){if(c.charAt(_+1)=="="){f=TokenKind.Equal;_+=2}else{_syntaxError(Locale._default.invalidToken+" at equalOp",j())}}function A(){if(c.charAt(_+1)=="&"){f=TokenKind.And;_+=2}else{_syntaxError(Locale._default.invalidToken+" at andOp",j())}}function E(){if(c.charAt(_+1)=="|"){f=TokenKind.Or;_+=2}else{_syntaxError(Locale._default.invalidToken+" at orOp",j())}}function R(){if(c.charAt(_+1)=="="){f=TokenKind.LowerEqual;_+=2}else{f=TokenKind.Lower;_++}}function L(){var e=_;while(e<d&&!i[c.charCodeAt(e)]){e++}var t=e;while(e<d&&i[c.charCodeAt(e)]){e++}if(e>t){g=e;return c.substr(t,e-t).toLowerCase()}else{return null}}function P(){var e=_;while(_<d&&(i[c.charCodeAt(_)]||c.charCodeAt(_)>255)){_++}var t=c.substr(e,_-e).toLowerCase();if(h.hasOwnProperty(t)){f=h[t];switch(f){case TokenKind.Not:t=L();if(t){switch(t){case"in":f=TokenKind.NotIn;_=g;break;case"like":f=TokenKind.NotLike;_=g;break;case"ilike":f=TokenKind.NotILike;_=g;break;case"match":f=TokenKind.NotMatch;_=g;break;case"imatch":f=TokenKind.NotIMatch;_=g;break}}break;case TokenKind.Is:t=L();if(t=="not"){f=TokenKind.IsNot;_=g}break}}else{f=TokenKind.Identifier}}function N(){f=TokenKind.IntegerLiteral;_++;while(_<d&&t[c.charCodeAt(_)]){_++}}function k(){f=TokenKind.IntegerLiteral;_++;while(_<d&&r[c.charCodeAt(_)]){if(c.charAt(_)=="."){if(c.charAt(_+1)=="."){break}f=TokenKind.FloatLiteral}_++}}function D(){f=TokenKind.Minus;_++}function O(){f=TokenKind.Plus;_++}function M(){var e=c.charAt(_+1);if(e=="."){f=TokenKind.DotDot;_+=2}else{f=TokenKind.Point;_++}}function V(){f=TokenKind.RoundOpen;_++}function F(){f=TokenKind.RoundClose;_++}function B(){f=TokenKind.Slash;_++}function $(){f=TokenKind.Space;_++;while(_<d&&n[c.charCodeAt(_)]){_++}}function H(){f=TokenKind.BracketOpen;_++}function G(){f=TokenKind.BracketClose;_++}function z(){f=TokenKind.Star;_++}function W(){f=TokenKind.Mod;_++}function U(){f=TokenKind.StringLiteral;do{var e=c.charCodeAt(_);if(a[e]){_syntaxError(Locale._default.untermintatedString,j())}_++}while(_<d&&c.charCodeAt(_)!=o);_++}function X(){f=TokenKind.StringLiteral;do{var e=c.charCodeAt(_);if(a[e]){_syntaxError(Locale._default.untermintatedString,j())}_++}while(_<d&&c.charCodeAt(_)!=l);_++}function K(){var e;u=[];for(e=1;e<=255;e++){u[e]=S}for(e=1;e<=32;e++){u[e]=$}u[10]=x;u[13]=w;u["$".charCodeAt(0)]=N;u[o]=U;u[l]=X;for(e=0;e<=9;e++){u["0".charCodeAt(0)+e]=k}for(e="A".charCodeAt(0);e<="Z".charCodeAt();e++){u[e]=P}for(e="a".charCodeAt(0);e<="z".charCodeAt();e++){u[e]=P}u["_".charCodeAt(0)]=P;u["(".charCodeAt(0)]=V;u[")".charCodeAt(0)]=F;u["*".charCodeAt(0)]=z;u["+".charCodeAt(0)]=O;u[",".charCodeAt(0)]=C;u["-".charCodeAt(0)]=D;u[".".charCodeAt(0)]=M;u["/".charCodeAt(0)]=B;u["%".charCodeAt(0)]=W;u["!".charCodeAt(0)]=I;u["=".charCodeAt(0)]=T;u["&".charCodeAt(0)]=A;u["|".charCodeAt(0)]=E;u["<".charCodeAt(0)]=R;u[">".charCodeAt(0)]=b;u["[".charCodeAt(0)]=H;u["]".charCodeAt(0)]=G}function Y(){if(_<d){var e=c.charCodeAt(_);v=_;if(e<256){u[e]()}else{P()}return true}return false}this.source=function(){return c};this.tokenId=function(){return f};var j=function(){var e={x:v-p,y:m};var t;try{t=c.substr(v,_-v)}catch(e){}t&&(e.expr=t.substr(0,20));return e};this.tokenLoc=j;this.tokenLen=function(){return _-v};this.token=function(){return c.substr(v,this.tokenLen())};this.isSpace=function(){return f==TokenKind.Space};this.init=function(e){c=e;d=e.length;m=0;p=0;v=0;_=0;f=0};this.isEnd=function(){return _>=d};this.nextId=function(e){do{Y()}while(_<d&&f!=e)};this.nextNoSpace=function(){do{if(Y()&&!this.isSpace()){return true}}while(_<d);return false};this.isFirstInLine=function(){if(v==0){return true}var e;var t=v;t--;while(t>0&&n[c.charCodeAt(t)]){t--}if(t==0){return true}e=c.charCodeAt(t);if(e==10||e==13){return true}return false};K()};var ExpressionNode=defineClass("ExpressionNode",null,{init:function(){this._super()},_asLiteral:function(){return null},evaluate:function(){_throwAbstractError()},toString:function(){return String(this)}});var EmptyExpressionNode=defineClass("EmptyExpressionNode",ExpressionNode,{init:function(){this._super()},_asLiteral:function(){return null},evaluate:function(){return undefined},toString:function(){return""}},null,function(e){e.Default=new e});var CheckableNode=defineClass("DefinedNode",ExpressionNode,{init:function(){this._super()}});var DefinedNode=defineClass("DefinedNode",CheckableNode,{init:function(){this._super()},value:function(){return UNDEFINED},_asLiteral:function(){return this},evaluate:function(e){return UNDEFINED},toString:function(){return"defined"}});var EmptyNode=defineClass("EmptyNode",CheckableNode,{init:function(){this._super()},value:function(){return UNDEFINED},_asLiteral:function(){return this},evaluate:function(e){return UNDEFINED},toString:function(){return"empty"}});var NullNode=defineClass("NullNode",CheckableNode,{init:function(){this._super()},value:function(){return null},_asLiteral:function(){return this},evaluate:function(e){return null},toString:function(){return"null"}});var NanNode=defineClass("NanNode",CheckableNode,{init:function(){this._super()},value:function(){return NaN},_asLiteral:function(){return this},evaluate:function(e){return NaN},toString:function(){return"NaN"}});var CheckNode=defineClass("CheckNode",ExpressionNode,{init:function(e,t,i){this._super();this.leftExpr=e;this.operator=t;this._isNot=t==TokenKind.IsNot;this._value=-1;if(i instanceof DefinedNode){this._value=CheckNode.DEFINED}else if(i instanceof NullNode){this._value=CheckNode.NULL}else if(i instanceof EmptyNode){this._value=CheckNode.EMPTY}else if(i instanceof NanNode){this._value=CheckNode.NAN}},isIdentifier:function(e){return this.leftExpr.isIdentifier(e)},_prepareValue:function(){this.leftExpr._prepareValue();this._literal=this.leftExpr._getLiteral()},_getLiteral:function(){return null},evaluate:function(e){var t=this._literal?this._literal.value():this.leftExpr.evaluate(e);var i;switch(this._value){case CheckNode.DEFINED:i=t!==undefined;break;case CheckNode.NULL:i=t===undefined||t===null;break;case CheckNode.EMPTY:i=t===undefined||t===null||String(t).length==0;break;case CheckNode.NAN:i=t===null||isNaN(t);break;default:return undefined}return this._isNot?!i:i},toString:function(){var e="<<ERROR>>";switch(this._value){case CheckNode.DEFINED:e="defined";break;case CheckNode.NULL:e="null";break;case CheckNode.EMPTY:e="empty";break;case CheckNode.NAN:e="NaN";break}return"("+((this._isNot?"is not ":"is ")+e)+")"}},{DEFINED:0,NULL:1,EMPTY:2,NAN:3});var FloatLiteralNode=defineClass("FloatLiteralNode",ExpressionNode,{init:function(e){this._super();this._value=Number(e)},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(e){return this._value},toString:function(){return String(this._value)}});var IntegerLiteralNode=defineClass("IntegerLiteralNode",ExpressionNode,{init:function(e){this._super();this._value=parseInt(e)},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(e){return this._value},toString:function(){return String(this._value)}});var BooleanLiteralNode=defineClass("BooleanLiteralNode",ExpressionNode,{init:function(e){this._super();this._value=e=="true"?true:false},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(e){return this._value},toString:function(){return String(this._value)}});var StringLiteralNode=defineClass("StringLiteralNode",ExpressionNode,{init:function(e){this._super();this._value=e.substr(1,e.length-2)},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(e){return this._value},toString:function(){return this._value}});var IdentifierNode=defineClass("IdentifierNode",ExpressionNode,{init:function(e){this._super();this._literal=e;this._idKey=-830710},identifier:function(){return this._literal},evaluate:function(e){if(this._idKey==-830710){this._idKey=e.isIdentifier(this._literal)}return e.evaluateIdentifier(this._idKey)},toString:function(){return this._literal}});var IndexerNode=defineClass("IndexerNode",ExpressionNode,{init:function(e,t){this._super();this._ident=e;this._indexer=t;this._idKey=-1490313;this._intIndex=NaN;this._strIndex=null},_prepareValue:function(){var e=null;var t=this._indexer._asLiteral();if(!t){e=this._indexer._prepareValue&&this._indexer;if(e){e._prepareValue();t=e._getLiteral()}}if(t){var i=t.value();if(typeof i==="string"){this._strIndex=i}else{this._intIndex=parseInt(i)}}},_getLiteral:function(){return null},evaluate:function(e){if(this._idKey==-1490313){this._idKey=e.isIdentifier(this._ident)}if(this._strIndex){return e.evaluateIndexerS(this._idKey,this._strIndex)}else if(!isNaN(this._intIndex)){return e.evaluateIndexerI(this._idKey,this._intIndex)}else{var t=this._indexer.evaluate(e);if(typeof t==="string"){return e.evaluateIndexerS(this._idKey,t)}else{return e.evaluateIndexerI(this._idKey,t)}}},toString:function(){var e=this._ident+"["+this._indexer.toString()+"]";return e}});var UnaryNode=defineClass("UnaryNode",ExpressionNode,{init:function(e){this._super();this._factor=e;this._literal=null},_prepareValue:function(){this._literal=this._factor._asLiteral();if(!this._literal&&this._factor._prepareValue){this._factor._prepareValue();this._literal=this._factor._getLiteral()}},_getLiteral:function(){return null}});var LenNode=defineClass("LenNode",UnaryNode,{init:function(e){this._super(e)},evaluate:function(e){var t=this._literal?this._literal.value():this._factor.evaluate(e);return t?t.length:0},toString:function(){return"(len "+this._factor+")"}});var RandNode=defineClass("RandNode",UnaryNode,{init:function(e){this._super(e)},evaluate:function(e){var t=parseInt(this._literal?this._literal.value():this._factor.evaluate(e));return isNaN(t)||t<=0?0:Math.floor(Math.random()*t)},toString:function(){return"(rand "+this._factor+")"}});var $$_chars=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];var SrandNode=defineClass("SrandNode",UnaryNode,{init:function(e){this._super(e)},evaluate:function(e){var t=parseInt(this._literal?this._literal.value():this._factor.evaluate(e));if(isNaN(t)||t<=0){return""}else{var i="";var r=$$_chars.length;for(var n=0;n<t;n++){i+=$$_chars[Math.floor(Math.random()*r)]}return i}},toString:function(){return"(srand "+this._factor+")"}});var LowerNode=defineClass("LowerNode",UnaryNode,{init:function(e){this._super(e)},evaluate:function(e){var t=this._literal?this._literal.value():this._factor.evaluate(e);return typeof t==="string"?t.toLowerCase():t},toString:function(){return"(lower "+this._factor+")"}});var UpperNode=defineClass("UpperNode",UnaryNode,{init:function(e){this._super(e)},evaluate:function(e){var t=this._literal?this._literal.value():this._factor.evaluate(e);return typeof t==="string"?t.toUpperCase():t},toString:function(){return"(upper "+this._factor+")"}});var MinusNode=defineClass("MinusNode",UnaryNode,{init:function(e){this._super(e)},evaluate:function(e){var t=this._literal?this._literal.value():this._factor.evaluate(e);return-t},toString:function(){return"-"+this._factor}});var PlusNode=defineClass("PlusNode",UnaryNode,{init:function(e){this._super(e)},evaluate:function(e){var t=this._literal?this._literal.value():this._factor.evaluate(e);return t},toString:function(){return"+"+this._factor}});var NotNode=defineClass("NotNode",UnaryNode,{init:function(e){this._super(e)},evaluate:function(e){var t=this._literal?this._literal.value():this._factor.evaluate(e);return!t},toString:function(){return"(!"+this._factor+")"}});var ToBoolNode=defineClass("ToBoolNode",UnaryNode,{init:function(e){this._super(e)},evaluate:function(e){var t=this._literal?this._literal.value():this._factor.evaluate(e);return Boolean(t)},toString:function(){return"(bool "+this._factor+")"}});var ToNumberNode=defineClass("ToNumberNode",UnaryNode,{init:function(e,t){this._super(e);this._zero=t},evaluate:function(e){var t=this._literal?this._literal.value():this._factor.evaluate(e);t=Number(t);return this._zero&&isNaN(t)?0:t},toString:function(){return(this.zero?"(numz ":"(num ")+this._factor+")"}});var ToIntegerNode=defineClass("ToIntegerNode",UnaryNode,{init:function(e,t){this._super(e);this._zero=t},evaluate:function(e){var t=this._literal?this._literal.value():this._factor.evaluate(e);t=Number(t);return this._zero&&isNaN(t)?0:Math.floor(t)},toString:function(){return(this.zero?"(intz ":"(int ")+this._factor+")"}});var ToDateNode=defineClass("ToDateNode",UnaryNode,{init:function(e){this._super(e)},evaluate:function(e){var t=this._literal?this._literal.value():this._factor.evaluate(e);return new Date(t)},toString:function(){return"(date "+this._factor+")"}});var ToStringNode=defineClass("ToStringNode",UnaryNode,{init:function(e){this._super(e)},evaluate:function(e){var t=this._literal?this._literal.value():this._factor.evaluate(e);return String(t)},toString:function(){return"(str "+this._factor+")"}});var TermNode=defineClass("TermNode",ExpressionNode,{init:function(){this._super();this._factors=[];this._operators=[];this._literal=null},addFactor:function(e){this._factors.push(e)},addOperator:function(e){this._operators.push(e)},isIdentifier:function(e){return this._factors.length==1&&this._factors[0]instanceof IdentifierNode&&this._factors[0].identifier()==e},_prepareValue:function(){var e;for(var t=0,i=this._factors.length;t<i;t++){e=this._factors[t];if(e._prepareValue){e._prepareValue()}}if(this._operators.length==0){e=this._factors[0];this._literal=e._asLiteral();if(!this._literal&&e._prepareValue){this._literal=e._getLiteral()}}},_getLiteral:function(){return this._literal},evaluate:function(e){if(this._literal){return this._literal.value()}var t=this._factors.length;var i=this._factors[0].evaluate(e);for(var r=1;r<t;r++){var n=this._factors[r].evaluate(e);switch(this._operators[r-1]){case TokenKind.Star:i=i*n;break;case TokenKind.Slash:i=i/n;break;case TokenKind.Div:i=_int(_int(i)/_int(n));break;case TokenKind.Mod:i=i%n;break;case TokenKind.Shl:i=i<<n;break;case TokenKind.Shr:i=i>>n;break}}return i},toString:function(){var e="";var t;if(this._literal){e=this._literal.toString()}else if((t=this._factors.length)==1){e=this._factors[0].toString()}else{e="("+this._factors[0].toString();for(var i=1;i<t;i++){switch(this._operators[i-1]){case TokenKind.Star:e+=" * ";break;case TokenKind.Slash:e+=" / ";break;case TokenKind.Div:e+=" / ";break;case TokenKind.Mod:e+=" mod ";break;case TokenKind.Shl:e+=" shl ";break;case TokenKind.Shr:e+=" shr ";break}e+=this._factors[i].toString()}e+=")"}return e}});var SimpleExpressionNode=defineClass("SimpleExpressionNode",ExpressionNode,{init:function(){this._super();this._terms=[];this._operators=[];this._literal=null},addTerm:function(e){this._terms.push(e)},addOperator:function(e){this._operators.push(e)},isIdentifier:function(e){return this._terms.length==1&&this._terms[0].isIdentifier(e)},_prepareValue:function(){for(var e=0,t=this._terms.length;e<t;e++){this._terms[e]._prepareValue()}if(this._operators.length==0){this._literal=this._terms[0]._getLiteral()}},_getLiteral:function(){return this._literal},evaluate:function(e){if(this._literal){return this._literal.value()}var t=this._terms.length;var i=this._terms[0].evaluate(e);for(var r=1;r<t;r++){var n=this._terms[r].evaluate(e);switch(this._operators[r-1]){case TokenKind.Minus:i=i-n;break;case TokenKind.Plus:i=i+n;break}}return i},toString:function(){var e="";var t;if(this._literal){e=this._literal.toString()}else if((t=this._terms.length)==1){e=this._terms[0].toString()}else{e="("+this._terms[0].toString();for(var i=1;i<t;i++){switch(this._operators[i-1]){case TokenKind.Minus:e+=" - ";break;case TokenKind.Plus:e+=" + ";break;default:e+=" <<ERROR>> "}e+=this._terms[i].toString()}e+=")"}return e}});var ListNode=defineClass("ListNode",ExpressionNode,{init:function(){this._super();this._exprs=[]},evaluateIn:function(e,t){var i=this._exprs;for(var r=0;r<i.length;r++){if(t==i[r].evaluate(e)){return true}}return false},_prepareValue:function(){for(var e=this._exprs.length;e--;){this._exprs[e]._prepareValue()}},toString:function(){var e=this._exprs;var t=e.length-1;var i="(";for(var r=0;r<t;r++){i+=e[r].toString()+", "}if(t==0){i+=e[t].toString()}return i+")"}});var SetNode=defineClass("SetNode",ExpressionNode,{init:function(e){this._super();this.leftExpr=e;this.listNode=null;this.operator=TokenKind.Unknown;this._literal=null},isIdentifier:function(e){return!this.listNode&&this.leftExpr.isIdentifier(e)},_prepareValue:function(){this.leftExpr._prepareValue();if(this.listNode){this.listNode._prepareValue()}else{this._literal=this.leftExpr._getLiteral()}},_getLiteral:function(){return this._literal},evaluate:function(e){if(this._literal){return this._literal.value()}var t=this.leftExpr.evaluate(e);if(this.listNode){if(this.operator==TokenKind.NotIn){t=!this.listNode.evaluateIn(e,t)}else{t=this.listNode.evaluateIn(e,t)}}return t},toString:function(){var e="";if(this._literal){e=this._literal.toString()}else if(this.listNode){e="("+this.leftExpr.toString()+" in "+this.listNode.toString()+")"}else{e=this.leftExpr.toString()}return e}});var ComparisonNode=defineClass("ComparisonNode",ExpressionNode,{init:function(){this._super();this.leftExpr=null;this.rightExpr=null;this.operator=TokenKind.Unknown;this._literal=null},isIdentifier:function(e){return!this.rightExpr&&this.leftExpr.isIdentifier(e)},evaluate:function(e){if(this._literal){return this._literal.value()}else if(this.rightExpr){var t=this.leftExpr.evaluate(e);var i=this.rightExpr.evaluate(e);switch(this.operator){case TokenKind.Equal:if(t instanceof Date&&i instanceof Date){return t.getTime()==i.getTime()}return t==i;case TokenKind.NotEqual:if(t instanceof Date&&i instanceof Date){return t.getTime()!=i.getTime()}return t!=i;case TokenKind.Greater:return t>i;case TokenKind.GreaterEqual:return t>=i;case TokenKind.Lower:return t<i;case TokenKind.LowerEqual:return t<=i;case TokenKind.Like:return this._calcLike(t,i,false);case TokenKind.NotLike:return!this._calcLike(t,i,false);case TokenKind.ILike:return this._calcLike(t,i,true);case TokenKind.NotILike:return!this._calcLike(t,i,true);case TokenKind.Match:return this._calcMatch(t,i,false);case TokenKind.NotMatch:return!this._calcMatch(t,i,false);case TokenKind.IMatch:return this._calcMatch(t,i,true);case TokenKind.NotIMatch:return!this._calcMatch(t,i,true);default:throw new ExpressionEvaluationError(Locale.unknownOperator+": "+this.operator)}}else{return this.leftExpr.evaluate(e)}},toString:function(){var e="";if(this._literal){e=this._literal.toString()}else if(this.rightExpr){var t=this.leftExpr.toString();var i=this.rightExpr.toString();var r;switch(this.operator){case TokenKind.Equal:r="==";break;case TokenKind.NotEqual:r="!=";break;case TokenKind.Greater:r=">";break;case TokenKind.GreaterEqual:r=">=";break;case TokenKind.Lower:r="<";break;case TokenKind.LowerEqual:r="<=";break;case TokenKind.Like:r="like";break;case TokenKind.NotLike:r="not like";break;case TokenKind.ILike:r="ilike";break;case TokenKind.NotILike:r="not ilike";break;case TokenKind.Match:r="match";break;case TokenKind.NotMatch:r="not match";break;case TokenKind.IMatch:r="imatch";break;case TokenKind.NotIMatch:r="not imatch";break;default:r="<<ERROR>>";break}e="("+t+" "+r+" "+i+")"}else{e=this.leftExpr.toString()}return e},_prepareValue:function(){this.leftExpr._prepareValue();if(this.rightExpr){this.rightExpr._prepareValue()}else{this._literal=this.leftExpr._getLiteral()}},_getLiteral:function(){return this._literal},_calcLike:function(e,t,i){var r=String(e);var n=String(t);if(r&&n){if(i){r=r.toLowerCase();n=n.toLowerCase()}var s=n.length;if(s>1){var a=n.charAt(0)=="%";var o=n.charAt(s-1)=="%";if(a&&o){n=n.substr(1,s-2);return r.indexOf(n,0)>=0}else if(a){n=n.substr(1,s-1);s=r.length;return r.lastIndexOf(n,s-1)==s-1}else if(o){n=n.substr(0,s-1);return r.indexOf(n,0)==0}else{return r==n}}else if(n=="%"){return false}else{return r==n}}return false},_calcMatch:function(e,t,i){var r=new RegExp(t,"m"+(i?"i":""));return r.test(e)}});var LogicalNode=defineClass("LogicalNode",ExpressionNode,{init:function(){this._super();this.leftExpr=null;this.rightExpr=null;this.operator=TokenKind.Unknown;this._literal=null},evaluate:function(e){if(this._literal){return this._literal.value()}else if(this.rightExpr){var t=this.leftExpr.evaluate(e);var i=this.rightExpr.evaluate(e);switch(this.operator){case TokenKind.And:return t&&i;case TokenKind.Or:return t||i;default:throw new ExpressionEvaluationError(Locale.unknownOperator+": "+this.operator)}}else{return this.leftExpr.evaluate(e)}},toString:function(){var e="";if(this._literal){e=this._literal.toString()}else if(this.rightExpr){var t=this.leftExpr.toString();var i=this.rightExpr.toString();var r;switch(this.operator){case TokenKind.And:r=" and ";break;case TokenKind.Or:r=" or ";break;default:r="<<ERROR>>";break}e="("+t+" "+r+" "+i+")"}else{e=this.leftExpr.toString()}return e},isIdentifier:function(e){return!this.rightExpr&&this.leftExpr.isIdentifier(e)},_prepareValue:function(){this.leftExpr._prepareValue();if(this.rightExpr){this.rightExpr._prepareValue()}else{this._literal=this.leftExpr._getLiteral()}},_getLiteral:function(){return this._literal}});var ExpressionParser=function(){var s=new ExpressionLexer;var t=[];t[TokenKind.StringLiteral]=f;t[TokenKind.RoundOpen]=_;t[TokenKind.Identifier]=g;t[TokenKind.IntegerLiteral]=p;t[TokenKind.FloatLiteral]=m;t[TokenKind.Minus]=v;t[TokenKind.Plus]=y;t[TokenKind.Not]=S;t[TokenKind.Defined]=C;t[TokenKind.Null]=w;t[TokenKind.Empty]=x;t[TokenKind.NaN]=b;t[TokenKind.True]=I;t[TokenKind.False]=I;t[TokenKind.ToBool]=T;t[TokenKind.ToNum]=A;t[TokenKind.ToNumz]=E;t[TokenKind.ToInt]=R;t[TokenKind.ToIntz]=L;t[TokenKind.ToDate]=P;t[TokenKind.ToStr]=N;t[TokenKind.Length]=k;t[TokenKind.Rand]=D;t[TokenKind.Srand]=O;t[TokenKind.ToLower]=M;t[TokenKind.ToUpper]=V;var e=null;function r(e){if(e!=s.tokenId()){_syntaxError(Locale._default.notExpectedTokenKind+" ["+e+"]: "+s.tokenId(),s.tokenLoc())}a()}function n(e,t){var i=s.tokenId();if(e!=i&&t!=i){_syntaxError(Locale._default.notExpectedTokenKind+" ["+e+", "+t+"]: "+s.tokenId(),s.tokenLoc())}a()}function a(e){var t=s.nextNoSpace();if(!t&&e){_syntaxError(Locale._default.untermintatedExpression+s.source(),s.tokenLoc())}return t}function o(){var e=l();var t,i,r,n;t=new LogicalNode;t.leftExpr=e;if(TokenKind.IS_LOGICAL[n=s.tokenId()]){t.operator=s.tokenId();a(true);t.rightExpr=o()}return t}function l(){var e=new ComparisonNode;var t,i,r;e.leftExpr=u();if(TokenKind.IS_CHECK[t=s.tokenId()]){a(true);i=u();i._prepareValue();r=_cast(i._getLiteral(),CheckableNode);if(r){e=new CheckNode(e,t,r)}else{_syntaxError(Locale._default.invalidIsOperand+": "+s.tokenId(),s.tokenLoc())}}else if(TokenKind.IS_SET[t]){e=new SetNode(e.leftExpr);e.operator=s.tokenId();a(true);e.listNode=h()}else if(TokenKind.IS_COMPARISON[t]){e.operator=s.tokenId();a(true);e.rightExpr=u()}return e}function h(){var e=new ListNode;r(TokenKind.RoundOpen);while(true){var t=s.tokenId();if(t==TokenKind.RoundClose){a();break}var i=u();e._exprs.push(i);n(TokenKind.Comma,TokenKind.RoundClose)}return e}function u(){var e=new SimpleExpressionNode;var t;e.addTerm(i());while(TokenKind.IS_ADDITIVE[t=s.tokenId()]){e.addOperator(t);a(true);e.addTerm(i())}return e}function i(){var e=new TermNode;var t;e.addFactor(c());while(TokenKind.IS_MULTIPLICATIVE[t=s.tokenId()]){e.addOperator(t);a(true);e.addFactor(c())}return e}function c(){var e=t[s.tokenId()];if(e){return e()}else{_syntaxError(Locale._default.unknownToken+": "+s.tokenId(),s.tokenLoc())}}function d(){var e=s.tokenId();switch(e){case TokenKind.StringLiteral:return f();case TokenKind.RoundOpen:return _();case TokenKind.Identifier:return g();case TokenKind.IntegerLiteral:return p();case TokenKind.FloatLiteral:return m();case TokenKind.Minus:return v();case TokenKind.Plus:return y();case TokenKind.Not:return S();case TokenKind.Defined:return C();case TokenKind.Null:return w();case TokenKind.Empty:return x();case TokenKind.NaN:return b();case TokenKind.True:case TokenKind.False:return I();case TokenKind.ToBool:return T();case TokenKind.ToNum:return A();case TokenKind.ToNumz:return E();case TokenKind.ToInt:return R();case TokenKind.ToIntz:return L();case TokenKind.ToDate:return P();case TokenKind.ToStr:return N();case TokenKind.Length:return k()}_syntaxError(Locale._default.unknownToken+": "+e,s.tokenLoc())}function f(){var e=s.token();a();return new StringLiteralNode(e)}function _(){a();var e=o();r(TokenKind.RoundClose);return e}function g(){var e=s.token();a();if(s.tokenId()==TokenKind.BracketOpen){a();var t=o();r(TokenKind.BracketClose);return new IndexerNode(e,t)}else{return new IdentifierNode(e)}}function m(){var e=s.token();a();return new FloatLiteralNode(e)}function p(){var e=s.token();a();return new IntegerLiteralNode(e)}function v(){a();return new MinusNode(c())}function y(){a();return new PlusNode(c())}function S(){a();return new NotNode(c())}function C(){a();return new DefinedNode}function w(){a();return new NullNode}function x(){a();return new EmptyNode}function b(){a();return new NanNode}function I(){var e=s.token();a();return new BooleanLiteralNode(e)}function T(){a();return new ToBoolNode(c())}function A(){a();return new ToNumberNode(c())}function E(){a();return new ToNumberNode(c(),true)}function R(){a();return new ToIntegerNode(c())}function L(){a();return new ToIntegerNode(c(),true)}function P(){a();return new ToDateNode(c())}function N(){a();return new ToStringNode(c())}function k(){a();return new LenNode(c())}function D(){a();return new RandNode(c())}function O(){a();return new SrandNode(c())}function M(){a();return new LowerNode(c())}function V(){a();return new UpperNode(c())}this.parse=function(e){if(!e)return null;s.init(e);a();var t=o();if(!s.isEnd()){var i=g();if(i)_syntaxError("Invalid token: "+i._literal);_syntaxError(Locale._default.untermintatedExpression+": "+e,s.tokenLoc())}if(t){t._prepareValue()}return t};this.evaluate=function(e,t){var i=this.parse(e);return i.evaluate(t)}};ExpressionParser.Default=new ExpressionParser;var ExpressionRuntime=defineClass("ExpressionRuntime",null,{init:function(){this._super()},scope:function(){return null},isIdentifier:function(e){throw new ExpressionSyntaxError(Locale._default.invalidIdentifierToken+": "+e)},evaluateIdentifier:function(e){throw new ExpressionEvaluationError(Locale._default.invalidIdentifierKey+": "+e)},evaluateIndexerI:function(e,t){throw new ExpressionEvaluationError(Locale._default.invalidIdentifierIndexer+": "+e)},evaluateIndexerS:function(e,t){throw new ExpressionEvaluationError(Locale._default.invalidIdentifierIndexer+": "+e)}});var $$_SCROLL_SIZE=17;var Dom=defineClass("Dom",null,{init:function(e){this._super();this._element=e},x:function(){return this._element.offsetLeft},y:function(){return this._element.offsetTop},size:function(){return Dom.getSize(this._element)},element:function(){return this._element},attached:function(){return!!this._element.parentNode},detach:function(){if(this._element.parentNode){this._element.parentNode.removeChild(this._element);return true}},clearChildren:function(){Dom.clearChildren(this._element)},addChild:function(e){Dom.addChild(this._element,e)},setStyles:function(e,t){Dom.setStyles(this._element,e,t)},getBounds:function(){return Dom.getBounds(this._element)},getOffset:function(){return Dom.getOffset(this._element)},move:function(e,t){Dom.move(this._element,e,t)},disableSelection:function(){Dom.disableSelection(this._element)},isAncestorOf:function(e){var t=e.parentElement;while(t){if(t==this._element){return true}}return false}},{createElement:function(e,t,i){var r,n=document.createElement(e);t&&Dom.setStyles(n,t);if(i){for(r in i){n[r]=i[r]}}return n},setStyles:function(e,t,i){var r,n;if(t){n=e.style;for(r in t){n[r]=t[r]}}if(i){for(r in i){e.setAttribute(r,i[r])}}},addWindowListener:function(e,t){_win.addEventListener(e,t)},removeWindowListener:function(e,t){_win.removeEventListener(e,t)},getSize:function(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height}},setSize:function(e,t,i){var r=e.style;r.width=t+"px";r.height=i+"px"},getBounds:function(e){var t=e.getBoundingClientRect();t.cx=e.offsetLeft;t.cy=e.offsetTop;return t},setBounds:function(e,t,i,r,n){var s=e.style;s.left=t+"px";s.top=i+"px";s.width=r+"px";s.height=n+"px"},getScrolled:function(){var e=document.body,t=document.documentElement;return{sx:window.pageXOffset||t.scrollLeft||e.scrollLeft,sy:window.pageYOffset||t.scrollTop||e.scrollTop}},getOffset:function(e){var t=e.getBoundingClientRect(),i=document.body,r=document.documentElement,n=window.pageYOffset||r.scrollTop||i.scrollTop,s=window.pageXOffset||r.scrollLeft||i.scrollLeft,a=r.clientTop||i.clientTop||0,o=r.clientLeft||i.clientLeft||0,l=t.left+s-o,h=t.top+n-a;return{x:Math.round(l),y:Math.round(h)}},move:function(e,t,i){e.style.left=t+"px";e.style.top=i+"px"},disableSelection:function(e){e.style["-moz-user-select"]="-moz-none";e.style["-khtml-user-select"]="none";e.style["-webkit-user-select"]="none";e.style["-o-user-select"]="none";e.style["-ms-user-select"]="none";e.style["user-select"]="none"},addChild:function(e,t){if(e&&t&&t.parentNode!==e){e.appendChild(t);return true}return false},removeChild:function(e,t){if(e&&t&&t.parentNode===e){e.removeChild(t);return true}return false},clearChildren:function(e){var t=e;while(t.lastChild){t.removeChild(t.lastChild)}},visitChildren:function(e,t){var i,r;if(t){i=e.childNodes;for(r=0;r<i.length;r++){if(t(e,i[r])===false){return}}}},getChildIndex:function(e){if(e){var t=e.parentNode;if(t){var i=t.childNodes;for(var r=0;r<i.length;r++){if(i[r]===e){return r}}}}return-1},getRadioGroupValue:function(e){var t=document.getElementsByName(e);if(t){for(var i=t.length;i--;){if(t[i].checked){return t[i].value}}}return undefined},htmlEncode:function(e){return document.createElement("a").appendChild(document.createTextNode(e)).parentNode.innerHTML},getClipRect:function(e){return"rect("+e.y+"px,"+(e.x+e.width)+"px,"+(e.y+e.height)+"px,"+e.x+"px)"},createSimpleSpan:function(e){var t=document.createElement("span");t.style.position="absolute";t.style.display="inline-block";e.appendChild(t);return t},renderText:function(e,t,i,r,n,s){var a=e.style;if(i&&r!==null&&r!==undefined&&(r=String(r))){e.innerHTML=r;a.display="inline-block";if(t){a.font=t.font;a.textDecoration=t.deco}else{a.font=DEF_FONT;a.textDecoration="none"}a.color=i.css();a.lineHeight=1.1;a.whiteSpace="nowrap";a.left=n+"px";a.top=s+"px";if(_ieLeg){}else if(_ieOld){a.msTransform="none"}else{a.transform="none";a.WebkitTransform="none"}}},renderTextRect:function(e,t,i,r,n,s,a,o){Dom.renderTextBounds(e,t,i,r,n.x,n.y,n.width,n.height,s,a,o)},renderTextBounds:function(e,t,i,r,n,s,a,o,l,h,u){var c,d,f;if(i&&r!==null&&r!==undefined&&(r=String(r))){c=1.1;d=e.style;d.width=a+"px";if(t){d.font=t.font;d.textDecoration=t.deco}else{d.font=DEF_FONT}d.color=i.css();if(u=="explicit"){d.whiteSpace="nowrap";d.wordWrap="";f=true}else if(u=="normal"){d.whiteSpace="normal";d.wordWrap="break-word";f=true}else{d.whiteSpace="nowrap";d.wordWrap=""}d.lineHeight=c;r=r.replace($$_htmlreg,$$_htmlrep);f&&(r=r.replace($_linebrreg,$_linebr));e.innerHTML=r;d.left=n+"px";d.textAlign=l;switch(h){case TextLayout.TOP:d.top=s+"px";if(_ieLeg){}else if(_ieOld){d.msTransform="none"}else{d.transform="none";d.WebkitTransform="none"}break;case TextLayout.BOTTOM:d.top=s+o+"px";if(_ieLeg){}else if(_ieOld){d.msTransform="translateY(-100%)"}else{d.transform="translateY(-100%)";d.WebkitTransform="translateY(-100%)"}break;case TextLayout.MIDDLE:default:d.top=Math.round(s+o/c/2)+"px";if(_ieLeg){}else if(_ieOld){d.msTransform="translateY(-50%)"}else{d.transform="translateY(-50%)";d.WebkitTransform="translateY(-50%)"}break}}},getTextWidth:function(e,t){var i,r,n=0;if(t){i=document.createElement("div");r=i.style;i.innerHTML=t;r.position="absolute";r.whiteSpace="nowrap";r.visibility="hidden";r.font=e?e.font:DEF_FONT;document.body.appendChild(i);n=i.offsetWidth;document.body.removeChild(i)}return n},getTextWidth2:function(e,t,i){var r,n=0;if(i){r=e.style;e.textContent=i;r.display="inline";r.maxWidth="";r.font=t?t.font:DEF_FONT;r.textDecoration="none";r.whiteSpace="nowrap";r.wordWrap="";r.textAlign="left";n=e.offsetWidth}return n},calcTextBounds:function(e,t,i,r,n,s,a,o,l,h,u){var c,d,f;u=u||new Rectangle;u.x=r;u.y=n;if(i){c=1.1;d=e.style;d.display="inline-block";d.maxWidth=s+"px";if(t){d.font=t.font;d.textDecoration=t.deco}else{d.font=DEF_FONT}d.lineHeight=1.1;if(h=="explicit"){d.whiteSpace="nowrap";d.wordWrap="";f=true}else if(h=="normal"){d.whiteSpace="normal";d.wordWrap="break-word";f=true}else{d.whiteSpace="nowrap";d.wordWrap=""}i=i.replace($$_htmlreg,$$_htmlrep);f&&(i=i.replace($_linebrreg,$_linebr));e.innerHTML=i;d.textAlign=o;d.maxWidth="";u.width=e.offsetWidth;u.height=e.offsetHeight;switch(o){case TextAlign.LEFT:break;case TextAlign.CENTER:u.x=_int(r+(s-u.width)/2);break;case TextAlign.RIGHT:u.x=r+s-u.width;break}switch(l){case TextLayout.TOP:break;case TextLayout.BOTTOM:u.y=n+a-u.height;break;case TextLayout.MIDDLE:default:u.y=Math.round(n+(a-u.height/c)/2);break}}return u},isAncestorOf:function(e,t){var i=t.parentElement;while(i){if(i==e){return true}i=i.parentElement}return false}});var _stopEvent=function(e){if(e.preventDefault){e.preventDefault();e.stopImmediatePropagation&&e.stopImmediatePropagation()}else{e.returnValue=false}};var _ignoreEvent=function(e){e.$$_ignored=true};(function(){var e=document.createElement("div");var t=false;var i;try{i=e.getBoundingClientRect()}catch(e){t=true}if(t||isNaN(i.width)){Element.prototype.getBoundingClientRect2=function(){var e=Element.prototype.getBoundingClientRect.call(this);return{left:e.left,right:e.right,width:e.right-e.left,top:e.top,bottom:e.bottom,height:e.bottom-e.top}}}else{Element.prototype.getBoundingClientRect2=Element.prototype.getBoundingClientRect}try{e.style.background="rgba(0, 0, 0, 1)"}catch(e){_norgba=true}})();if(Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get){(function(){var t=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return t.get.call(this)},set:function(e){return t.set.call(this,e)}})})()}var _getBrowserSize=function(){return{width:_win.innerWidth||_doc.documentElement.clientWidth||_doc.body.clientWidth,height:_win.innerHeight||_doc.documentElement.clientHeight||_doc.body.clientHeight}};var $_checkSize=undefined;var _getCheckSize=function(e){if(!$_checkSize){(function(){var e=document.createElement("input");e.type="checkbox";e.style.padding="0px";e.style.margin="0px";document.body.appendChild(e);$_checkSize=e.getBoundingClientRect2();document.body.removeChild(e)})()}return $_checkSize};var $$_DOM={};var $_validated=0;var $_toolValidated=0;var _egam_=Image;var $_mobileEnabled=true;var UIContainer=defineClass("UIContainer",EventAware,{init:function(e,t,i){this._super();e=!!e;this.$_dom=e?$$_DOM:null;this.$_rich=!e;if(!t){throw"container is null!"}this._containerDiv=t instanceof HTMLElement?t:document.getElementById(t);if(!this._containerDiv){throw"Invalid grid container element: "+t}this._popupOwner=_cast(i,HTMLElement);this._canvas=this._container=document.createElement("div");this._containerDiv.appendChild(this._container);var r=this._container.style;r.position="relative";r.boxSizing="border-box";r.width="100%";r.height="100%";r.borderStyle="none";r.borderWidth="0px";r.overflow="hidden";this._width=this._container.clientWidth;this._height=this._container.clientHeight;this._updateRequested=false;this._layoutNeeded=false;this._invalidated=false;this._nextLayoutNeeded=false;this._nextInvalidated=false;this._defaultTool=new VisualTool(this);this._activeTool=this._defaultTool;this._domMouse=false;this._captured=false;this._focusing=false;this._focusingTarget=null;this._hovered=null;this._currentX=0;this._currentY=0;this._rendered=0;this._defaultCursor=Cursor.AUTO;this._drawing=false;this._offsetX=0;this._offsetY=0;this._clicked=0;this._clicket=0;this._children=[];this._rootElement=this._createRootElement(this.$_dom);this._feedbackRoot=this._createFeedbackRoot(this.$_dom);this._containerRender=this._render.bind(this);if(this.$_dom){var n=this.$_textMeasurer=document.createElement("span");n.style.poistion="absolute";n.style.visibility="hidden";n.style.whiteSpace="nowrap";n.style.margin=n.style.padding=0;this._container.appendChild(n);this._svgPool=document.createElementNS(SVGNS,"svg");this._svgPool.style.pointerEvents="none";this._svgDefs=document.createElementNS(SVGNS,"defs");this._svgPool.appendChild(this._svgDefs);this._container.appendChild(this._svgPool);this.$_getLinearGradient=function(e){var t=document;var i=this._svgPool;var r=this._svgDefs;var n="lg"+e.$_hash;var s=t.getElementById(n);if(!s){s=t.createElementNS(SVGNS,"linearGradient");s.setAttribute("id",n);if(e._angle==90){s.setAttributeNS(null,"x1","0%");s.setAttributeNS(null,"y1","0%");s.setAttributeNS(null,"x2","0%");s.setAttributeNS(null,"y2","100%")}var a=t.createElementNS(SVGNS,"stop");a.setAttributeNS(null,"offset","0%");a.setAttributeNS(null,"style","stop-color:"+e._colors[0].value());s.appendChild(a);var o=t.createElementNS(SVGNS,"stop");o.setAttributeNS(null,"offset","100%");o.setAttributeNS(null,"style","stop-color:"+e._colors[1].value());s.appendChild(o);r.appendChild(s)}return"url(#"+n+")"}}},_registerEventHandlers:function(e){e.style.cursor=this._defaultCursor;if(typeof _addWindowEventListener==="function"){_addWindowEventListener(this,_win,"resize",this._resizeHandler.bind(this),false);_addWindowEventListener(this,e,"keydown",this._keyDownHandler.bind(this),false);_addWindowEventListener(this,e,"keyup",this._keyUpHandler.bind(this),false);_addWindowEventListener(this,e,"click",this._clickHandler.bind(this),false);_addWindowEventListener(this,e,"dblclick",this._dblclickHandler.bind(this),false);_addWindowEventListener(this,e,"mousedown",this._mouseDownHandler.bind(this),false);_addWindowEventListener(this,_win,"mousemove",this._mouseMoveHandler.bind(this),false);_addWindowEventListener(this,_win,"mouseup",this._mouseUpHandler.bind(this),false);_addWindowEventListener(this,e,"mouseenter",this._mouseEnterHandler.bind(this),false);_addWindowEventListener(this,e,"mouseleave",this._mouseLeaveHandler.bind(this),false);_addWindowEventListener(this,e,"mouseover",this._mouseOverHandler.bind(this),false);if(_isFirefox){_addWindowEventListener(this,e,"DOMMouseScroll",this._mouseScrollHandler.bind(this),false)}else{_addWindowEventListener(this,e,"mousewheel",this._mouseWheelHandler.bind(this),false)}_addWindowEventListener(this,e,"focus",this._focusHandler.bind(this),false);_addWindowEventListener(this,e,"blur",this._blurHandler.bind(this),false);if($_mobileEnabled){_addWindowEventListener(this,e,"touchstart",this._touchStartHandler.bind(this),false);_addWindowEventListener(this,e,"touchmove",this._touchMoveHandler.bind(this),false);_addWindowEventListener(this,e,"touchend",this._touchEndHandler.bind(this),false);_addWindowEventListener(this,e,"touchcancel",this._touchCancelHandler.bind(this),false);_addWindowEventListener(this,e,"touchleave",this._touchLeaveHandler.bind(this),false)}_addWindowEventListener(this,_win,"focus",this._focusHandlerFireFox.bind(this),true);_addWindowEventListener(this,_win,"focusin",this._focusinHandler.bind(this),true);if(_isChrome){}}else if(_win.addEventListener){_win.addEventListener("resize",this._resizeHandler.bind(this),false);e.addEventListener("keydown",this._keyDownHandler.bind(this),false);e.addEventListener("keyup",this._keyUpHandler.bind(this),false);e.addEventListener("click",this._clickHandler.bind(this),false);e.addEventListener("dblclick",this._dblclickHandler.bind(this),false);e.addEventListener("mousedown",this._mouseDownHandler.bind(this),false);_win.addEventListener("mousemove",this._mouseMoveHandler.bind(this),false);_win.addEventListener("mouseup",this._mouseUpHandler.bind(this),false);e.addEventListener("mouseenter",this._mouseEnterHandler.bind(this),false);e.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this),false);e.addEventListener("mouseover",this._mouseOverHandler.bind(this),false);if(_isFirefox){e.addEventListener("DOMMouseScroll",this._mouseScrollHandler.bind(this),false)}else{e.addEventListener("mousewheel",this._mouseWheelHandler.bind(this),false)}e.addEventListener("focus",this._focusHandler.bind(this),false);e.addEventListener("blur",this._blurHandler.bind(this),false);if($_mobileEnabled){e.addEventListener("touchstart",this._touchStartHandler.bind(this),false);e.addEventListener("touchmove",this._touchMoveHandler.bind(this),false);e.addEventListener("touchend",this._touchEndHandler.bind(this),false);e.addEventListener("touchcancel",this._touchCancelHandler.bind(this),false);e.addEventListener("touchleave",this._touchLeaveHandler.bind(this),false)}_win.addEventListener("focus",this._focusHandlerFireFox.bind(this),true);_win.addEventListener("focusin",this._focusinHandler.bind(this),true);if(_isChrome){}}else{_win.attachEvent("onresize",this._resizeHandler.bind(this),false);e.attachEvent("onkeydown",this._keyDownHandler.bind(this),false);e.attachEvent("onkeyup",this._keyUpHandler.bind(this),false);e.attachEvent("onclick",this._clickHandler.bind(this),false);e.attachEvent("ondblclick",this._dblclickHandler.bind(this),false);e.attachEvent("onmousedown",this._mouseDownHandler.bind(this),false);_win.attachEvent("onmousemove",this._mouseMoveHandler.bind(this),false);_win.attachEvent("onmouseup",this._mouseUpHandler.bind(this),false);e.attachEvent("onmouseenter",this._mouseEnterHandler.bind(this),false);e.attachEvent("onmouseleave",this._mouseLeaveHandler.bind(this),false);e.attachEvent("onmouseover",this._mouseOverHandler.bind(this),false);if(_isFirefox){e.attachEvent("onDOMMouseScroll",this._mouseScrollHandler.bind(this),false)}else{e.attachEvent("onmousewheel",this._mouseWheelHandler.bind(this),false)}e.attachEvent("onfocus",this._focusHandler.bind(this),false);e.attachEvent("onblur",this._blurHandler.bind(this),false);if($_mobileEnabled){e.attachEvent("ontouchstart",this._touchStartHandler.bind(this),false);e.attachEvent("ontouchmove",this._touchMoveHandler.bind(this),false);e.attachEvent("ontouchend",this._touchEndHandler.bind(this),false);e.attachEvent("ontouchcancel",this._touchCancelHandler.bind(this),false);e.attachEvent("ontouchleave",this._touchLeaveHandler.bind(this),false)}}},containerElement:function(){return this._container},visible:function(){return this._container.style.visibility!="hidden"},isVisible:function(){return this.visible()},setVisible:function(e){this._container.style.visibility=e?"visible":"hidden"},width:function(){return this._width},height:function(){return this._height},defaultTool:function(){return this._defaultTool},setDefaultTool:function(e){var t=this._defaultTool;if(e!==t){this._defaultTool=e;if(this._activeTool===t){this.setActiveTool(e)}}return this},activeTool:function(){return this._activeTool},setActiveTool:function(e){if(e!==this._activeTool){if(this._activeTool){this._activeTool.deactivate()}this._activeTool=e;if(this._activeTool){this._activeTool.activate()}}return this},mouseX:function(){return this._currentX},mouseY:function(){return this._currentY},popupMenuManager:function(){return this._popupMenuManager},contextMenu:function(){return this._contextMenu},setContextMenu:function(e){if(e!=this._contextMenu){if(e instanceof PopupMenu){this._contextMenu=e}else if(e){this._contextMenu=new PopupMenu("gridContextMenu",this,e)}else{this._contextMenu=null}}},addChild:function(e){if(e&&this._children.indexOf(e)<0){this._children.push(e);e.attached(this)}return e},removeChild:function(e){var t;if(e&&(t=this._children.indexOf(e))>=0){this._children.splice(t,1);e.detached()}},addElement:function(e,t){return this._rootElement.addElement(e,t)},removeElement:function(e){this._rootElement.removeElement(e)},addFeedback:function(e,t){this._feedbackRoot.addElement(e,t)},removeFeedback:function(e){this._feedbackRoot.removeElement(e)},findElementAt:function(e,t,i){return this._feedbackRoot.findChildAt(e-this._rootElement._x,t-this._rootElement._y,i)||this._rootElement.findChildAt(e-this._rootElement._x,t-this._rootElement._y,i)},setFocus:function(){this._setFocusAndScroll(this._canvas)},updateNow:function(){this._render(_getTimer())},invalidateLayout:function(){if(this._drawing){this._nextLayoutNeeded=true}else{this._layoutNeeded=true}this.invalidate(true)},invalidate:function(e){if((!this._updateRequested||!this._invalidated)&&(e||!this._drawing)){window&&window.requestAnimationFrame(this._containerRender);this._updateRequested=true;if(this._drawing){this._nextInvalidated=true}else{this._invalidated=true}}},setDefaultCursor:function(e){this._defaultCursor=e||Cursor.AUTO},setCursor:function(e){this._canvas.style.cursor=e||this._defaultCursor},restoreCursor:function(e){this._canvas.style.cursor=this._defaultCursor},_setDomMouse:function(e){return this._domMouse=e},_createChildren:function(e){},_layoutChildren:function(e){},_createRootElement:function(e){return null},_createFeedbackRoot:function(e){return null},_render:function(e){if(!this._container){return}this._updateRequested=false;this.resetSize();this._offsetX=this._canvas.offsetLeft;this._offsetY=this._canvas.offsetTop;var t=this._canvas.offsetParent;while(t){this._offsetX+=t.offsetLeft;this._offsetY+=t.offsetTop;t=t.offsetParent}this._drawing=true;try{this.$_dom?this.$$_renderHtml_in(e,null,0,0):this.$$_render(e,null,0,0)}finally{this._drawing=false;this._invalidated=this._nextInvalidated;this._layoutNeeded=this._nextLayoutNeeded;this._nextInvalidated=this._nextLayoutNeeded=false}},$$_render:function(e,t,i,r){},$$_renderHtml_in:function(e,t,i,r){var n=_document.createDocumentFragment();n.appendChild(this._rootElement._dom);try{this.$$_renderHtml(e,null,0,0)}finally{this._container.appendChild(n);this._rootElement.drawHtml()}},$$_renderHtml:function(e,t,i,r){},_setFocusAndScroll:function(e){if(e){if(!this._focusing){this._focusing=true;this._focusingTarget=e;try{var t=_win.pageXOffset;var i=_win.pageYOffset;e.setFocus?e.setFocus():e.focus();if(_win.pageXOffset!=t||_win.pageYOffset!=i){_win.scrollTo(t,i)}}finally{this._focusing=false;this._focusingTarget=null}}else if(e!=this._focusingTarget){e.setFocus?e.setFocus():e.focus()}}},checkClicked:function(e,t){if($_debug){var i=this._width-e,r=this._height-t,n=getTimer();if(i<3&&r<3){if(n<this._clicket+300){this._clicked++;if(this._clicked==3){_alert(this);if($_debug)throw this}}else{this._clicked=0}}this._clicket=n}},toOffset:function(e){var t=this._canvas;var i=t.getBoundingClientRect();e.mouseX=e.clientX-i.left;e.mouseY=e.clientY-i.top;return e},toScreen:function(e){e.x+=this._offsetX;e.y+=this._offsetY;return e},_resizeHandler:function(e){},_keyDownHandler:function(e){if(e.$$_ignored)return;if(e.defaultPrevented)return;if(this._activeTool){var t=_isMac&&e.metaKey||!_isMac&&e.ctrlKey;if(this._activeTool.keyDown(e.keyCode,e.ctrlKey,e.shiftKey,e.altKey)){_stopEvent(e)}}},_keyUpHandler:function(e){if(e.$$_ignored)return;if(e.defaultPrevented)return;if(this._activeTool){var t=_isMac&&e.metaKey||!_isMac&&e.ctrlKey;if(this._activeTool.keyUp(e.keyCode,e.ctrlKey,e.shiftKey,e.altKey)){_stopEvent(e)}}},_clickHandler:function(e){if(e.$$_ignored)return;this.checkClicked(e.clientX-this._offsetX,e.clientY-this._offsetY);if(this._activeTool){this._activeTool.click(this.toOffset(e))}},_dblclickHandler:function(e){if(e.$$_ignored)return;this.checkClicked(e.clientX-this._offsetX,e.clientY-this._offsetY);if(this._activeTool){this._activeTool.dblclick(this.toOffset(e))}},$$_isIE:function(e){return(_ieTen||_ieOld||this._domMouse)&&this._container.contains(e.target)},_mouseDownHandler:function(e){if(e.$$_ignored)return;if(e.target===this._canvas||this.$$_isIE(e)){this._canvas.setAttribute("tabindex","0");this._captured=true;this.checkClicked(e.clientX-this._offsetX,e.clientY-this._offsetY);this.toOffset(e);var t=this.findElementAt(e.mouseX,e.mouseY,true);if(this.getChartOptions().scatter().draggable&&t&&t.className&&t.className()=="ChartSeriesItemView"){this._dragElt=t;t._dragStart=true;this._dragStartX=e.mouseX;this._dragStartY=e.mouseY}this._currentX=e.mouseX;this._currentY=e.mouseY;if(this._activeTool){this._activeTool.mouseDown(e)}if(_isIE&&(!this._activeTool||this._activeTool.isEditing())){_stopEvent(e)}}},_mouseMoveHandler:function(e){if(e.$$_ignored)return;if(!this._captured&&e.target!==this._canvas&&!this.$$_isIE(e)){if(this._hovered){this._hovered.setHovered(false);this._hovered=null}if(this._activeTool){this._activeTool.mouseOutside()}return}this.toOffset(e);var t=e.mouseX;var i=e.mouseY;if(t!=this._currentX||i!=this._currentY){this._currentX=t;this._currentY=i;if(!this._activeTool||!this._activeTool.isDragging()){var r=this.findElementAt(t,i,true);if(this.getChartOptions().scatter().draggable&&this._dragElt&&this._dragElt._dragStart){var n=this._dragStartX-t;var s=this._dragStartY-i;var a=this._dragElt._x-n;var o=this._dragElt._y-s;if(a>0&&o>0){this._dragElt.setDataPoint(a,o);this._dragElt.$_g._elt.setAttributeNS(null,"transform","translate("+a+","+o+")")}}if((r==null||r.canHover())&&r!=this._hovered){if(this._hovered){this._hovered.setHovered(false)}this._hovered=r;if(this._hovered&&this._hovered._mouseEnabled){this._hovered.setHovered(true)}}}}if(this._activeTool){this._activeTool.mouseMove(e)}},_mouseUpHandler:function(e){if(e.$$_ignored)return;if(!this._captured&&e.target!==this._canvas&&!this.$$_isIE(e)){return}this._captured=false;if(this._activeTool){this._activeTool.mouseUp(this.toOffset(e))}if(this.getChartOptions().scatter().draggable&&this._dragElt&&this._dragElt._dragStart){this._dragElt._dragStart=false;var t=this._dragElt._dataPoint;var i=t.x/this._dragElt._parent._parent.width()*100;var r=(this._dragElt._parent._parent._drawRect.bottom()-t.y)/this._dragElt._parent._parent.height()*100;var n=this._dragElt._model._data;n.x=i.toFixed(2);n.y=r.toFixed(2);this._dragElt._model.setData(n);if(this.onSeriesPointDrop){this.onSeriesPointDrop(this._dragElt._model)}this._dragStartX=0;this._dragStartY=0;this._chartView.refreshView()}},_mouseEnterHandler:function(e){if(e.$$_ignored)return;if(this._activeTool){this._activeTool.mouseEnter(this.toOffset(e))}},_mouseLeaveHandler:function(e){if(e.$$_ignored)return;if(this._hovered){this._hovered.setHovered(false)}if(this._activeTool){this._activeTool.mouseLeave(this.toOffset(e))}},_mouseOverHandler:function(e){if(e.$$_ignored)return;if(this._activeTool){this._activeTool.mouseLeave(this.toOffset(e))}},_mouseWheelHandler:function(e){if(e.$$_ignored)return;if(this._activeTool){if(this._activeTool.mouseWheel(this.toOffset(e))){_stopEvent(e);return true}}return false},_mouseScrollHandler:function(e){if(e.$$_ignored)return;if(this._activeTool){e.wheelDelta=-e.detail;if(this._activeTool.mouseWheel(this.toOffset(e))){_stopEvent(e)}}},_focusHandler:function(e){},_blurHandler:function(e){},_focusinHandler:function(e){if(e.target===this._canvas){this._activeTool&&this._activeTool.setFocus()}},_focusHandlerFireFox:function(e){if(e.target===this._canvas){this._activeTool&&this._activeTool.setFocus()}},_focusoutHandler:function(e){},_touchStartHandler:function(e){if(e.touches.length>1||e.changedTouches.length>1||e.targetTouches.length>1){if(this._activeTool){try{this._activeTool.touchCancel(e)}catch(e){}}return}if(this._activeTool){if(this._activeTool.touchStart(e)){e.preventDefault()}else{try{this._activeTool.touchCancel(e)}catch(e){}}}},_touchMoveHandler:function(e){if(e.touches.length>1||e.changedTouches.length>1||e.targetTouches.length>1){if(this._activeTool){try{this._activeTool.touchCancel(e)}catch(e){}}return}if(this._activeTool){if(this._activeTool.touchMove(e)){e.preventDefault()}else{try{this._activeTool.touchCancel(e)}catch(e){}}}},_touchEndHandler:function(e){if(this._activeTool){this._activeTool.touchEnd(e)}},_touchCancelHandler:function(e){if(this._activeTool){this._activeTool.touchCancel(e)}},_touchLeaveHandler:function(e){if(this._activeTool){this._activeTool.touchEnd(e)}},onMenuItemClick:function(e){this.onContextMenuItemClicked&&this.onContextMenuItemClicked(this,e);this.fireEvent(UIContainer.CONTEXT_MENU_ITEM_CLICKED,e)},getChartOptions:function(){return this._chartView.options()}});UIContainer.CONTEXT_MENU_ITEM_CLICKED="onUIContainerContextMenuItemClicked";var TextAlign=_enum("TextAlign",{LEFT:"left",CENTER:"center",RIGHT:"right"});var TextLayout=_enum("TextLayout",{TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"});function Rectangle(e,t,i,r){if(typeof e==="undefined"||e===null){this.x=this.y=this.width=this.height=0}else{this.x=e;this.y=t;this.width=i;this.height=r}}Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)};Rectangle.prototype.getInner=function(){return new Rectangle(0,0,this.width,this.height)};Rectangle.prototype.equals=function(e){return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height};Rectangle.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"};Rectangle.prototype.left=function(){return this.x};Rectangle.prototype.setLeft=function(e){var t=e-this.x;this.x+=t;this.width-=t;return this};Rectangle.prototype.leftBy=function(e){this.x+=e;this.width-=e;return this};Rectangle.prototype.right=function(){return this.x+this.width};Rectangle.prototype.setRight=function(e){var t=e-(this.x+this.width);this.width+=t;return this};Rectangle.prototype.rightBy=function(e){this.width+=e;return this};Rectangle.prototype.top=function(){return this.y};Rectangle.prototype.setTop=function(e){var t=e-this.y;this.y+=t;this.height-=t;return this};Rectangle.prototype.topBy=function(e){this.y+=e;this.height-=e;return this};Rectangle.prototype.bottom=function(){return this.y+this.height};Rectangle.prototype.setBottom=function(e){var t=e-(this.y+this.height);this.height+=t;return this};Rectangle.prototype.bottomBy=function(e){this.height+=e;return this};Rectangle.prototype.setSize=function(e,t){this.width=e;this.height=t};Rectangle.prototype.shrink=function(e,t){this.width-=e;this.height-=t;return this};Rectangle.prototype.expand=function(e,t){this.width+=e;this.height+=t;return this};Rectangle.prototype.contains=function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height};Rectangle.prototype.isEmpty=function(){return this.width<=0||this.height<=0};Rectangle.prototype.setEmpty=function(){this.width=this.height=0;return this};Rectangle.prototype.set=function(e,t,i,r){this.x=e;this.y=t;this.width=i;this.height=r;return this};Rectangle.prototype.setBy=function(e,t,i,r){this.x+=e;this.y+=t;this.width+=i;this.height+=r;return this};Rectangle.prototype.copy=function(e){this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height;return this};Rectangle.prototype.copyHorz=function(e){this.x=e.x;this.width=e.width;return this};Rectangle.prototype.copyVert=function(e){this.y=e.y;this.height=e.height;return this};Rectangle.prototype.inflate=function(e,t,i,r){t=arguments.length>1?t:0;i=arguments.length>2?i:e;r=arguments.length>3?r:t;if(e)this.setLeft(this.x-e);if(t)this.setTop(this.y-t);if(i)this.setRight(this.right()+i);if(r)this.setBottom(this.bottom()+r);return this};Rectangle.prototype.offset=function(e,t){this.x+=e;this.y+=t;return this};Rectangle.prototype.round=function(){var e=this.clone();e.x>>>=0;e.y>>>=0;e.width>>>=0;e.height>>>=0;return e};Rectangle.prototype.union=function(e){var t=this.clone();t.setLeft(Math.min(this.x,e.x));t.setRight(Math.max(this.right(),e.right()));t.setTop(Math.min(this.y,e.y));t.setBottom(Math.max(this.bottom(),e.bottom()));return t};Rectangle.prototype.normalize=function(){if(this.width<0){this.x-=this.width;this.width*=-1}if(this.height<0){this.y-=this.height;this.height*=-1}return this};var Size=function(e,t){if(arguments.length==0){this.width=this.height=0}else{this.width=e;this.height=t}};Size.EMPTY=new Size;Size.empty=function(){return new Size};Size.create=function(e,t){return new Size(e,t)};Size.prototype={constructor:Size,clone:function(){return new Size(this.width,this.height)},equals:function(e){return e===this||e&&this.width===e.width&&this.height===e.height},toString:function(){return"{width: "+this.width+", height: "+this.height+"}"},isEmpty:function(){return this.width===0||this.height===0},setEmpty:function(){this.width=this.height=0;return this},set:function(e,t){this.width=e;this.height=t;return this},round:function(){var e=this.clone();e.width>>>=0;e.height>>>=0;return e}};var Point=function(e,t){if(arguments.length==0){this.x=this.y=0}else{this.x=e;this.y=t}};Point.EMPTY=new Point;Point.empty=function(){return new Point};Point.create=function(e,t){return new Point(e,t)};Point.prototype={constructor:Size,clone:function(){return new Point(this.x,this.y)},equals:function(e){return e===this||e&&this.width===e.width&&this.height===e.height},toString:function(){return"{x: "+this.x+", y: "+this.y+"}"},isEmpty:function(){return this.x===0||this.y===0},setEmpty:function(){this.x=this.y=0;return this},set:function(e,t){this.x=e;this.y=t;return this},round:function(){var e=this.clone();e.x>>>=0;e.y>>>=0;return e}};var SideRectangles=function(){this.left=new Rectangle;this.right=new Rectangle;this.top=new Rectangle;this.bottom=new Rectangle};SideRectangles.prototype={constructor:SideRectangles,clear:function(){this.left.setEmpty();this.right.setEmpty();this.top.setEmpty();this.bottom.setEmpty()},setLeft:function(e,t,i,r){this.left.set(e,t,i,r)},setRight:function(e,t,i,r){this.right.set(e,t,i,r)},setTop:function(e,t,i,r){this.top.set(e,t,i,r)},setBottom:function(e,t,i,r){this.bottom.set(e,t,i,r)}};var RelativeSize=function(e,t){this._size=e;this._fixed=t};RelativeSize.prototype={constructor:RelativeSize,clone:function(){return new RelativeSize(this._size,this._fixed)},getSize:function(e){return this._fixed?this._size:e*this._size}};RelativeSize.Empty=new RelativeSize(0,false);RelativeSize.createFrom=function(e){var t=0;var i=false;if(e){var r=String(e).trim();var n=r.length;if(n>0){if(n>2&&r.lastIndexOf("px")==n-2){i=true;r=r.substr(0,n-3)}if(r){t=parseFloat(r)}}}return new RelativeSize(t,i)};RelativeSize.equals=function(e,t){return e instanceof RelativeSize&&t instanceof RelativeSize&&e._size===t.size&&e._precentage===t._precentage};var PercentSize=function(e,t){this._size=e;this._fixed=t};PercentSize.prototype={constructor:PercentSize,clone:function(){return new PercentSize(this._size,this._fixed)},size:function(){return this._size},getSize:function(e,t){return this._fixed?this._size:e*this._size/(t||100)}};PercentSize.Empty=new PercentSize(0,true);PercentSize.createFrom=function(e){if(e===undefined){return e}else if(typeof e==="number"){return new PercentSize(e,true)}else if(e){var t=String(e).trim();var i=t.length;if(i>0){var r=0;var n=true;if(i>1&&t.lastIndexOf("%")==i-1){n=false;t=t.substr(0,i-1).trim()}if(t){r=parseFloat(t)}return new PercentSize(r,n)}}return null};PercentSize.equals=function(e,t){return e instanceof PercentSize&&t instanceof PercentSize&&e._size===t.size&&e._fixed===t._fixed};PercentSize.getFixed=function(e){return e instanceof PercentSize&&e._fixed?e._size:0};PercentSize.getFixedI=function(e){return e instanceof PercentSize&&e._fixed?_int(e._size):0};var SizeF=function(e,t){this.width=e;this.height=t};SizeF.prototype={constructor:SizeF,clone:function(){return new SizeF(this.width,this.height)},set:function(e,t){this.width=parseFloat(e);this.height=parseFloat(t)}};SizeF.createFrom=function(e){var t=0,i=0;if(e){var r=String(e).split(",");if(r.length>0){t=i=parseFloat(r[0])}if(r.length>1){i=parseFloat(r[1])}}return new SizeF(t,i)};var Color=function(e,t){if(typeof e==="string"){Color._parse(e,this,t,false,false)}else if(e instanceof Color){this._r=e._r;this._g=e._g;this._b=e._b;this._a=e._a}else if(!isNaN(e)){this._a=(e>>>24)/255;this._r=(e&16711680)>>16;this._g=(e&65280)>>8;this._b=e&255}else{this._r=this._g=this._b=0;this._a=t?NaN:1}};var ColorProto=Color.prototype;Color._ERROR=new Color(UNDEFINED,true);Color._ERROR.error=true;Color.createFrom=function(e,t,i){var r=Color._parse(e,$_tempColor,t,i,false);if(r){return typeof r==="object"?r:$_tempColor.clone()}else{return null}};Color.createWithArgb=function(e,t,i,r){var n=new Color;n._a=e;n._r=t;n._g=i;n._b=r;return n};Color.createFromRange=function(e,t,i,r){if(e instanceof Color&&t instanceof Color){var n=new Color;n._a=isNaN(e._a)?1:e._a;n._r=e._r+_int((t._r-e._r)*r/i);n._g=e._g+_int((t._g-e._g)*r/i);n._b=e._b+_int((t._b-e._b)*r/i);return n}};Color._parse=function(e,t,i,r,n){var s=String(e);if(s){var a=s.length;var o;s=s.trim().toLowerCase();if(s.charAt(0)=="#"){s=s.substr(1);a--;if(a>=6&&a<=8){t._b=toInt(s.substr(a-2,2),16);t._g=toInt(s.substr(a-4,2),16);t._r=toInt(s.substr(a-6,2),16);t._a=a==6?i?NaN:1:toInt(s.substr(0,a-6),16)/255}else if(a==3){t._r=toInt(s.charAt(0)+s.charAt(0),16);t._g=toInt(s.charAt(1)+s.charAt(1),16);t._b=toInt(s.charAt(2)+s.charAt(2),16);t._a=i?NaN:1}else if(n){throw new Error(Locale._default.invalidColorText+": "+e)}else{t._r=t._g=t._b=0;t._a=i?0:1;return false}}else if(s.indexOf("rgba(")==0&&s.charAt(a-1)==")"){s=s.substring(5,a-1);o=s.split(",");t._r=toInt(o[0]);t._g=toInt(o[1]);t._b=toInt(o[2]);t._a=o[3]}else if(s.indexOf("rgb(")==0&&s.charAt(a-1)==")"){s=s.substring(4,a-1);o=s.split(",");t._r=toInt(o[0]);t._g=toInt(o[1]);t._b=toInt(o[2]);t._a=i?NaN:1}else if(i&&StrictColors.hasOwnProperty(s)){return StrictColors[s]}else if(!i&&Colors.hasOwnProperty(s)){return Colors[s]}else{if(!r){o=parseInt(s);if(!isNaN(o)){t._a=(e>>>24)/255;t._r=(e&16711680)>>16;t._g=(e&65280)>>8;t._b=e&255;return true}}if(n){throw new Error(Locale._default.invalidColorText+": "+e)}t._a=t._r=t._g=t._b=0;return false}return true}return false};Color.getColorStringArray=function(e){return e.trim().split(/\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)};Color.getColorCsvArray=function(e){return e.trim().split(/\s*,\s*|\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)};Color.getColorStopCsvArray=function(e){return e.trim().split(/\s*,\s*|\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))|(stops\(.*\))/).filter(Boolean)};ColorProto.clone=function(){return new Color(this)};ColorProto.cloneWithBrightness=function(e){return $$_addBrightness(this,e,false,null)};ColorProto.copy=function(e,t){if(e){this._r=e._r;this._g=e._g;this._b=e._b;this._a=isNaN(e._a)?Number(t):e._a}else{this._a=Number(t)}return this};ColorProto.a=function(){return this._a};ColorProto.r=function(){return this._r};ColorProto.g=function(){return this._g};ColorProto.b=function(){return this._b};ColorProto.value=function(){return"rgba("+this._r+","+this._g+","+this._b+","+this._a+")"};ColorProto.valueWithBrightness=function(e){return $$_addBrightness(this,e,true)};ColorProto.argb=function(){return _floor(this._a*255)*(1<<24)+(this._r<<16)+(this._g<<8)+this._b};ColorProto.rgb=function(){return this._r<<16|this._g<<8|this._b};ColorProto.extractAlpha=function(){var e=this._a;this._a=NaN;return e};ColorProto.forceAlpha=function(e){if(isNaN(this._a)){this._a=isNaN(e)?1:e}return this};ColorProto.toHex=function(){return""+hex(_floor(this._a*255))+hex(this._r)+hex(this._g)+hex(this._b)};ColorProto.toColorHex=function(){return""+hex(this._r)+hex(this._g)+hex(this._b)};ColorProto.toString=function(){return"#"+hex(_floor(this._a*255))+hex(this._r)+hex(this._g)+hex(this._b)};ColorProto.toColorString=function(){return"#"+hex(this._r)+hex(this._g)+hex(this._b)};ColorProto.css=_norgba?function(){return"#"+hex(this._r)+hex(this._g)+hex(this._b)}:function(){return"rgba("+this._r+","+this._g+","+this._b+","+this._a+")"};ColorProto.svg=_norgba?function(e){e.style.fill="#"+hex(this._r)+hex(this._g)+hex(this._b)}:function(e){e.style.fill="rgba("+this._r+","+this._g+","+this._b+","+this._a+")"};Color.areEqual=function(e,t){return e&&t&&e._r==t._r&&e._g==t._g&&e._b==t._b&&e._a==t._a};var $_tempColor=new Color;var $_tempColors=[new Color,new Color];var $$_addBrightness=function(e,t,i,r){var n=e._r,s=e._g,a=e._b,o=Number(t);if(!isNaN(o)&&o!=1){n=_floor(Math.max(0,Math.min(255,n*o)));s=_floor(Math.max(0,Math.min(255,s*o)));a=_floor(Math.max(0,Math.min(255,a*o)));if(n==255&&e._r<255){n=_floor((255+e._r)/2)}if(s==255&&e._g<255){s=_floor((255+e._g)/2)}if(a==255&&e._b<255){a=_floor((255+e._b)/2)}}if(i){return"rgba("+n+","+s+","+a+","+e._a+")"}else{r=r||new Color;r._r=n;r._g=s;r._b=a;return r}};var Colors={transparent:new Color(0),aqua:new Color(4278255615),black:new Color(4278190080),blue:new Color(4278190335),fuchsia:new Color(4294902015),gray:new Color(4286611584),green:new Color(4278222848),lime:new Color(4278255360),maroon:new Color(4286578688),navy:new Color(4278190208),olive:new Color(4286611456),orange:new Color(4294944e3),purple:new Color(4286578816),red:new Color(4294901760),silver:new Color(4290822336),teal:new Color(4278222976),white:new Color(4294967295),yellow:new Color(4294967040),dimGray:new Color(4285098345),ltGray:new Color(4292072403),silver:new Color(4290822336),darkGray:new Color(4289309097)};var StrictColors={transparent:new Color("#00000000"),aqua:new Color("#00ffff",true),black:new Color("#000000",true),blue:new Color("#0000ff",true),fuchsia:new Color("#ff00ff",true),gray:new Color("#808080",true),green:new Color("#008000",true),lime:new Color("#00ff00",true),maroon:new Color("#800000",true),navy:new Color("#000080",true),olive:new Color("#808000",true),orange:new Color("#ffa500",true),purple:new Color("#800080",true),red:new Color("#ff0000",true),silver:new Color("#c0c0c0",true),teal:new Color("#008080",true),white:new Color("#ffffff",true),yellow:new Color("#ffff00",true),dimGray:new Color("#696969",true),ltGray:new Color("#d3d3d3",true),silver:new Color("#c0c0c0",true),darkGray:new Color("#a9a9a9",true)};var SolidBrush=function(e){this._color=new Color(e)};_extend(SolidBrush.prototype,{color:function(){return this._color},alpha:function(){return this._color._a},opaque:function(){return this._color._a>=1},applyTo:function(e){e.setFill(this._color.value());return true},toText:function(){return this._color.toString()},toColorText:function(){return this._color.toColorString()},css:_norgba?function(){if(!this._css){this._css=this._color.toColorString()}return this._css}:function(){if(!this._css){this._css=this._color.value()}return this._css},applyToCss:function(e){if(this._color._a<1){var t=this._color.toString();t="progid:DXImageTransform.Microsoft.gradient(startColorstr="+t+",endColorstr="+t+")";e.filter=t;e.background=""}else{e.filter="";e.background=this._color.toColorString()}},svg:_norgba?function(e){e.style.fill=this._color.toColorString()}:function(e){e.style.fill=this._color.value()}});var $SB=SolidBrush;_extend($SB,{WHITE:new $SB(Colors.white),BLACK:new $SB(Colors.black),GRAY:new $SB(Colors.gray),DIMGRAY:new $SB(Colors.dimGray),LTGRAY:new $SB(Colors.ltGray),SILVER:new $SB(Colors.silver),DKGRAY:new $SB(Colors.darkGray),RED:new $SB(Colors.red),YELLOW:new $SB(Colors.yellow),GREEN:new $SB(Colors.green),BLUE:new $SB(Colors.blue),SCROLL:new $SB(4293980400),SCROLLINDENT:new $SB(4294506744),NULL:{applyTo:function(e,t,i,r,n){e.setFill("rgba(0, 0, 0, 0)");return true}},areEqual:function(e,t){if(e===t)return true;if(e&&t){return Color.areEqual(e._color,t._color)}return!e==!t}});$SB.Null=$SB.NULL;var FillGradient=defineClass("FillGradient",null,{init:function(e){this._super();var t=e?e.trim().toLowerCase():null;this.parse(t)},parse:function(e){},proxy:function(){return this}});FillGradient.createFrom=function(e){if(e){var t=e.trim().toLowerCase();if(t.indexOf("linear")==0){return new LinearGradient(t)}else if(t.indexOf("radial")==0){return new RadialGradient(t)}else if(t.indexOf("glass")==0){return new GlassGradient(t)}}return null};var LinearGradient=defineClass("LinearGradient",FillGradient,{init:function(e){this._super(e);this._context=null},parse:function(e){var t,i,r,n,s,a,o,l,h;this._colors=[];this._ratios=[];this._angle=1;if(e){t=Color.getColorStopCsvArray(e);i=t.length-1;r=t[i];if(r.indexOf("stops(")!=0){r=null;i++}if(i<2||t[0]!="linear"){throw new Error(Locale._default.invalidLinearGradientText+": "+e)}n=1;while(n<i){s=String(t[n]);a=Color.createFrom(s,false,true);if(a){this._colors[n-1]=a}else{break}n++}if(n<i){this._angle=parseFloat(t[n])}if(this._colors.length==1){this._colors[1]=this._colors[0].clone()}i=this._colors.length;o=255/(i-1);this._ratios=[l=0];if(r){s=r.substring(6,r.length-1);r=s.split(",");h=0;for(n=1;n<i-1;n++){l=r[n-1]/100;if(isNaN(l))l=h;this._ratios.push(l);h=l}}else{for(n=1;n<i-1;n++){l+=o;this._ratios.push(l/255)}}this._ratios.push(1)}},clone:function(){var e=new LinearGradient(null);e._colors=this._colors.slice();e._ratios=this._ratios.slice();e._angle=this._angle;return e},color:function(){return this._colors[0]},opaque:function(){for(var e=0,t=this._colors.length;e<t;e++){if(this._colors[e]._a<1)return false}return true},prepare:function(e){this._context=e},applyTo:function(e,t,i,r,n){var s;switch(this._angle){case 90:s=e.createLinearGradient(t,i,t,i+n);break;case 45:s=e.createLinearGradient(t,i,t+r,i+n);break;case 0:default:s=e.createLinearGradient(t,i,t+r,i)}for(var a=0,o=this._colors.length;a<o;a++){var l=this._colors[a].value();s.addColorStop(this._ratios[a],l)}e.setFill(s);return true},applyShadowTo:function(e){},toText:function(){var e="linear";for(var t=0,i=this._colors.length;t<i;t++){e+=","+this._colors[t].toString()}return e+","+this._angle},css:_norgba?function(){return this._colors[0].toColorString()}:function(){var e="linear-gradient("+"180deg"+","+this._colors[0].value()+","+this._colors[1].value()+")";return e},applyToCss:function(e){var t=this._colors[0].toString();var i=this._colors[1].toString();var r="progid:DXImageTransform.Microsoft.gradient(startColorstr="+t+",endColorstr="+i+")";e.filter=r;e.background=""},svg:_norgba?function(e){e.style.fill=this._colors[0].toColorString()}:function(e){e.setAttributeNS(null,"fill",e.ownerSVGElement.$_svgPool.$_getLinearGradient(this))}});LinearGradient.areEqual=function(e,t){var i=e&&t;if(i){i=e._colors.length==t._colors.length;if(i){for(var r=0;r<e._colors.length;r++){i=Color.areEqual(e._colors[r],t._colors[r]);if(!i)break}}if(i){i=e._ratios.length==t._ratios.length;if(i){for(var r=0;r<e._ratios.length;r++){if(e._ratios[r]!=t._ratios[r])break}}if(i){i=e._angle==t._angle}}}return i};var RadialGradient=defineClass("RadialGradient",FillGradient,{init:function(e){this._super(e)},parse:function(e){this._colors=[];this._ratios=[];if(e){var t=Color.getColorCsvArray(e);var i=t.length;if(i<2||t[0]!="radial"){throw new Error(Locale._default.invalidRadialGradientText+": "+e)}var r=1;while(r<i){var n=String(t[r]);var s=Color.createFrom(n,false,true);if(s){this._colors[r-1]=s}else{break}r++}if(r<i){this._angle=parseFloat(t[r])}if(this._colors.length==1){this._colors[1]=this._colors[0].clone()}i=this._colors.length;var a=255/(i-1);var o=0;this._ratios=[0];for(r=1;r<i-1;r++){o+=a;this._ratios.push(o/255)}this._ratios.push(1)}},clone:function(){var e=new RadialGradient(null);e._colors=this._colors.slice();e._ratios=this._ratios.slice();return e},prepare:function(e){},applyTo:function(e,t,i,r,n){var s=e.createRadialGradient(t,i,t+r,i+n);for(var a=0,o=this._colors.length;a<o;a++){var l=this._colors[a].value();s.addColorStop(this._ratios[a],l)}e.setFill(s);return true},svg:_norgba?function(e){e.style.fill=this._colors[0].toColorString()}:function(e){e.setAttributeNS(null,"fill",e.ownerSVGElement.$_svgPool.$_getLinearGradient(this))}});var GlassGradient=defineClass("GlassGradient",FillGradient,{init:function(e){this._super()},parse:function(e){}});var SolidPen=function(e,t,i){this._color=new Color(e);this._width=t!==undefined?Math.max(0,parseInt(t)):1;if(i)this._dash=i};_extend(SolidPen.prototype,{applyTo:function(e){e.setStroke(this._color.value(),this._width,this._dash);return true},color:function(){return this._color},width:function(){return this._width},opaque:function(){return this._color._a>=1},toText:function(){return this._color.toString()+","+this._width+"px"},css:_norgba?function(){if(!this._css){this._css=this._width+"px "+(this._dash?"dashed ":"solid ")+this._color.toColorString()}return this._css}:function(){if(!this._css){this._css=this._width+"px "+(this._dash?"dashed ":"solid ")+this._color.value()}return this._css},svg:_norgba?function(e){var t=e.style;t.stroke=this._color.toColorString();t.strokeWidth=this._width;this._dash&&(t.strokeDasharray="2,2")}:function(e){var t=e.style;t.stroke=this._color.value();t.strokeWidth=this._width;this._dash&&(t.strokeDasharray="2,2")}});var $SP=SolidPen;_extend($SP,{WHITE:new $SP(Colors.white),BLACK:new $SP(Colors.black),GRAY:new $SP(Colors.gray),DIMGRAY:new $SP(Colors.dimGray),LTGRAY:new $SP(Colors.ltGray),SILVER:new $SP(Colors.silver),DKGRAY:new $SP(Colors.darkGray),RED:new $SP(Colors.red),GREEN:new $SP(Colors.green),BLUE:new $SP(Colors.blue),FOCUS:new $SP(Colors.gray,1,[1,1]),areEqual:function(e,t){var i=e&&t&&Color.areEqual(e._color,t._color)&&e._width==t._width;if(i){i=!e._dash==!t._dash;if(i&&e._dash){for(var r=e._dash.length;r--;){if(e._dash[r]!=t._dash[r])break}}}return i},fromFill:function(e){return e?new SolidPen(e.color()):null}});var _fillToCss=function(e,t){if(_norgba){new $SP(e).applyToCss(t)}else{t.background=e}};var Palette=defineClass("Palette",null,{init:function(e,t,i){this._super();this._owner=e;this._items=[];if(!isNaN(i)){this._alpha=Math.max(0,Math.min(1,i))}else{this._alpha=1}this._nextItem=0;t&&this.addItems(t)},owner:function(){return this._owner},getNext:function(){var e=this._items.length;if(e>0){return this._items[this._nextItem++%e]}return null},getRandomItem:function(){var e=this._items.length;if(e>0){return this._items[_int(Math.random()*e)]}return null},reset:function(e){this._nextItem=isNaN(e)?0:e},getItem:function(e){var t=this._items.length;if(t>0){return this._items[e%t]}return null},addItem:function(e){e=this._createItem(e);if(this._items.indexOf(e)<0){this._items.push(e);this._changed();return e}return null},addItems:function(e){if(_isString(e)){e=e.split(",")}if(_isArray(e)){for(var t=0,i=e.length;t<i;t++){this.addItem(e[t])}}},removeItem:function(e){var t=this._items.indexOf(e);if(t>=0){this._items.splice(t,1);this._changed()}},_changed:function(){this._owner&&this._owner._paletteChanged&&this._owner._paletteChanged(this)},_createItem:function(e){return undefined}});var FillPalette=defineClass("FillPalette",Palette,{init:function(e,t,i){this._super(e,t,i)},_createItem:function(e){var t=_createFillEx(e,this._alpha);return t instanceof SolidBrush||t instanceof FillGradient?t:null}});var StrokePalette=defineClass("StrokePalette",Palette,{init:function(e,t,i,r){if(!isNaN(i)&&i>=1){this._width=_floor(i)}else{this._width=1}this._super(e,t,r)},_createItem:function(e){var t=_createStrokeEx(e,this._width,this._alpha);return t instanceof SolidPen?t:null}});var FontPalette=defineClass("FontPalette",Palette,{init:function(e,t){FontPalette.Base.init.call(this,e,t)},_createItem:function(e){return _createFont(e)||null}});var PaletteManager=defineClass("PaletteManager",null,{init:function(e){this._super();this._owner=e;this._palettes={}},get:function(e){return this._palettes[e]},clear:function(e){if(this._palettes.length>0){this._palettes={};!e&&this._changed()}},addFill:function(e,t,i,r){var n;if(e&&t&&!this._palettes.hasOwnProperty(e)){n=this._palettes[e]=new FillPalette(this,t,i);!r&&this._changed()}return n},addFillRange:function(e,t,i,r,n,s,a,o){var l,h,u,c=_createFillEx(t,a),d=_createFillEx(i,a);if(c instanceof SolidBrush&&d instanceof SolidBrush){l=[c];if(r>1){for(h=0;h<r-2;h++){u=new SolidBrush(Color.createFromRange(c._color,d._color,r,h+1));l.push(u)}l.push(d);n=parseInt(n);if(!isNaN(n))l=l.slice(n);s=parseInt(s);if(!isNaN(s))l=l.slice(0,s);return this.addFill(e,l,a,o)}}},addStroke:function(e,t,i,r,n){var s;if(e&&t&&!this._palettes.hasOwnProperty(e)){s=this._palettes[e]=new StrokePalette(this,t,i,r);!n&&this._changed()}return s},addPalettes:function(e,t){if(_isArray(e)&&e.length>0){for(var i=e.length;i--;){this.add(e[i],true)}!t&&this._changed()}},add:function(e,t){var i,r,n,s,a=e;if(a&&a.name){i=a.fills;if(_isArray(i)||_isString(i)){return this.addFill(a.name,i,a.alpha,t)}i=a.strokes;if(_isArray(i)||_isString(i)){return this.addStroke(a.name,i,a.width,a.alpha,t)}r=a.minFill;n=a.maxFill;s=a.stops;if(r&&n&&s>0){return this.addFillRange(a.name,r,n,s,a.start,a.end)}r=a.minStroke;n=a.maxStroke;s=a.count;if(r&&n&&s>0){return this.addStrokeRange(a.name,r,n,s)}}return undefined},remove:function(e,t){var i=this._palettes.indexOf(e);if(i>=0){this._palettes.splice(i,1);!t&&this._changed();return true}return false},_paletteChanged:function(){this._changed()},_changed:function(){this._owner.onPaletteChanged(this)}});var PaletteItem=defineClass("PaletteItem",null,{init:function(e,t){this._super(e);this._scope=t;this._num=false;this._any=false;this.assign(e)},fetch:function(e){var t=e||this._scope,i=t.getPalette(this._palette);if(i){if(this._restart!==undefined){i.reset(this._restart)}if(this._num){return i.getItem(this._index)}else if(this._any){return i.getRandomItem()}else if(this._index){return i.getItem(t.getPaletteIndex(this._index))}else{return i.getNext()}}return undefined},assign:function(e){if(e instanceof PaletteItem){this._palette=e._palette;this._index=e._index;this._restart=e._restart}else if(e){var t=String(e).trim();if(t.indexOf("p(")==0&&t.lastIndexOf(")")==t.length-1){var i=t.substring(2,t.length-1).split(":");this._palette=i[0].trim();t=i.length>1?i[1].trim():undefined;if(t){this._index=_int(t);if(isNaN(this._index)){this._any=t=="?";this._index=this._any?undefined:t;this._num=false}else{this._num=true;this._any=false}}else{this._index=undefined;this._num=false;this._any=false}t=i.length>2?i[2].trim():undefined;if(t){this._restart=_int(t);if(isNaN(this._restart))this._restart=undefined}else{this._restart=undefined}}else{throw"Invalid palette item value: "+e}}}});var FillCollection=defineClass("FillCollection",null,{init:function(e,t){this._super();if(_isArray(e)){var i,r,n=e.length,s=new Array(n);for(i=0;i<n;i++){r=e[i];if(typeof r=="string")r=r.trim();s[i]=_createFill(r,t)}this._fills=s}else{this._fills=[]}},count:function(){return this._fills.length},getItem:function(e){var t=this._fills[e];return t&&t.fetch?t.fetch(this._scope):t}});var StrokeCollection=defineClass("StrokeCollection",null,{init:function(e,t){this._super();if(_isArray(e)){var i,r=e.length,n=new Array(r);for(i=0;i<r;i++){n[i]=_createstroke(e[i],t)}this._strokes=n}else{this._strokes=[]}},count:function(){return this._strokes.length},getItem:function(e){var t=this._strokes[e];return t&&t.fetch?t.fetch(this._scope):t}});var $_fillCtors={"#":SolidBrush,l:LinearGradient,r:RadialGradient,g:GlassGradient,p:PaletteItem};var _createFill=function(e,t){var i=typeof e;if(i==="string"){if(e){if(e.charAt(0)=="#"){return new SolidBrush(e)}else if(e.indexOf("linear")==0){return new LinearGradient(e)}else if(e.indexOf("p(")==0){return new PaletteItem(e,t)}else if(e.indexOf("radial")==0){return new RadialGradient(e)}else if(e.indexOf("glass")==0){return new GlassGradient(e)}else{return new SolidBrush(e)}}return null}else if(i==="number"){return new SolidBrush(e)}return e};var _createFillEx=function(e,t){var i,r=typeof e;if(r==="string"){if(e){if(e.charAt(0)=="#"){i=new Color(e,true).forceAlpha(t);return new SolidBrush(i)}else if(e.indexOf("linear")==0){return new LinearGradient(e)}else if(e.indexOf("p(")==0){return new PaletteItem(e,scope)}else if(e.indexOf("radial")==0){return new RadialGradient(e)}else if(e.indexOf("glass")==0){return new GlassGradient(e)}else{i=new Color(e,true).forceAlpha(t);return new SolidBrush(i)}}return null}else if(r==="number"){i=new Color(e,true).forceAlpha(t);return new SolidBrush(i)}return e};var _createFills=function(e,t){var i=e;if(_isString(e)){e=e.trim();if(e){i=e.split(",")}}if(_isArray(i)&&i.length>0){return new FillCollection(i,t)}return null};var _createStroke=function(e,t){var i,r,n,s=typeof e;if(s==="string"){if(e.indexOf("p(")==0){return new PaletteItem(e,t)}else if(e){i=e.trim().split(",");if(i.length>2){r=i[2];if(r){r=r.trim();switch(r){case"dotted":return new SolidPen(i[0],i[1],[2,1]);case"dashed":return new SolidPen(i[0],i[1],[4,3]);default:return new SolidPen(i[0],i[1])}}}return new SolidPen(i[0],i[1])}return null}else if(s==="number"){return new SolidPen(e,1)}return e};var _createStrokeEx=function(e,t,i){var r,n,s,a,o=typeof e;if(o==="string"){if(e){r=e.trim().split(",");s=parseInt(r[1]);if(isNaN(s)||s<1){s=t}if(r.length>2){n=r[2];if(n){n=n.trim();switch(n){case"dotted":return new SolidPen(r[0],s,[2,1]);case"dashed":return new SolidPen(r[0],s,[4,3]);default:return new SolidPen(r[0],s)}}}a=new Color(e,true).forceAlpha(i);return new SolidPen(a,s)}return null}else if(o==="number"){a=new Color(e,true).forceAlpha(i);return new SolidPen(a,s)}return e};var _createStrokes=function(e,t){var i=e;if(_isString(e)){e=e.trim();if(e){i=e.split(",")}}if(_isArray(i)&&i.length>0){return new StrokeCollection(i,t)}return null};var _createFont=function(e){var t=[];var i=String(e);var r,n;var s=DEF_FONT_SIZE;if(i){r=i.split($$_FONT_REG);n=r.length;var a=null;var o=false;var l=false;if(n>0&&r[0]){a=r[0]}if(n>1&&r[1]){s=Number(r[1])}for(var h=2;h<n;h++){i=r[h];if(i){switch(i){case"bold":o=true;break;case"italic":l=true;break;default:break}}}if(l){t.push("italic")}if(o){t.push("bold")}t.push(s+"px");a&&t.push(a)}i=t.join(" ");return{font:i,size:s}};var _createShadow=function(e){if(typeof e==="string"){var t=e.trim().split(",");if(t.length>0){var i=t[0];if(i){e=Color.createFrom(i);if(e){var r={color:e,horz:1,vert:1,blur:1};if(t.length>1){e=parseInt(t[1]);if(!isNaN(e))r.horz=e;if(t.length>2){e=parseInt(t[2]);if(!isNaN(e))r.vert=e}if(t.length>3){e=parseInt(t[3]);if(!isNaN(e))r.blur=e}}return r}}}}else if(e&&e.color instanceof Color){return e}return null};var requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=requestAnimationFrame||function(e){setTimeout(e,10)};var DEF_FONT_FAMILY="Tahoma";var DEF_FONT_SIZE=12;var DEF_FONT=DEF_FONT_SIZE+"px "+DEF_FONT_FAMILY;var $_TEXT_OFF=0;var Graphics=function(e){this.ctx=e;!("imageSmoothingEnabled"in this.ctx)&&(this.ctx.webkitImageSmoothingEnabled=true);this.ctx.mozImageSmoothingEnabled=true;this.ctx.oImageSmoothingEnabled=true;this.ctx.imageSmoothingEnabled=true;this.ctx.setLineDash=this.ctx.setLineDash||function(){};this.LINES_REG=new RegExp("\\n|\\r\\n?")};Graphics.prototype.save=function(){var e=this.ctx;e.save();return this};Graphics.prototype.restore=function(){var e=this.ctx;e.restore();return this};Graphics.prototype.setCompositionOp=function(e){var t=this.ctx;t.globalCompositeOperation=e;return this};Graphics.prototype.translate=function(e,t){var i=this.ctx;i.translate(e,t);return this};Graphics.prototype.scale=function(e,t){var i=this.ctx;i.scale(e,t);return this};Graphics.prototype.rotate=function(e){var t=this.ctx;t.rotate(e);return this};Graphics.prototype.rotateAt=function(e,t,i){var r=this.ctx;r.translate(t,i);r.rotate(e);r.translate(-t,-i);return this},Graphics.prototype.clear=function(e,t,i,r){var n=this.ctx;n.clearRect(e,t,i,r);return this};Graphics.prototype.clip=function(){var e=this.ctx;e.clip();return this};Graphics.prototype.clipRect=function(e){var t=this.ctx;t.beginPath();t.rect(e.x,e.y,e.width,e.height);t.clip();return this};Graphics.prototype.clipRectEx=function(e){var t=this.ctx;t.beginPath();t.rect(e.x,e.y,e.width+1,e.height+1);t.clip();return this};Graphics.prototype.clipBounds=function(e,t,i,r){var n=this.ctx;n.beginPath();n.rect(e,t,i,r);n.clip();return this};Graphics.prototype.clipBoundsEx=function(e,t,i,r){var n=this.ctx;n.beginPath();n.rect(e,t,i+1,r+1);n.clip();return this};Graphics.prototype.clipRoundRect=function(e,t,i,r,n,s){var a=this.ctx;var o=e.x,l=e.y,h=e.right()+(s||0),u=e.bottom()+(s||0);a.beginPath();a.moveTo(o+t,l);a.lineTo(h-i,l);a.quadraticCurveTo(h,l,h,l+i);a.lineTo(h,u-n);a.quadraticCurveTo(h,u,h-n,u);a.lineTo(o+n,u);a.quadraticCurveTo(o,u,o,u-n);a.lineTo(o,l+t);a.quadraticCurveTo(o,l,o+t,l);a.clip();return this},Graphics.prototype.containsPoint=function(e,t){var i=this.ctx;return i.isPointInPath(e,t)};Graphics.prototype.setAlpha=function(e){var t=this.ctx;t.globalAlpha=e;return this};Graphics.prototype.setFill=function(e){var t=this.ctx;t.fillStyle=e;return this};Graphics.prototype.setStroke=function(e,t,i){var r=this.ctx;r.strokeStyle=e;r.lineWidth=t;r.setLineDash(i||[]);return this};Graphics.prototype.setShadow=function(e,t,i){var r=this.ctx;r.shadowColor=e;r.shadowBlur=t;r.shadowOffsetX=r.shadowOffsetY=i;return this};Graphics.prototype.$_applyShadow=function(e){var t=this.ctx;t.shadowColor=e.color.value();t.shadowOffsetX=e.horz;t.shadowOffsetY=e.vert;t.shadowBlur=e.blur;return this};Graphics.prototype.applyShadow=function(e){e&&this.$_applyShadow(e);return this},Graphics.prototype.clearShadow=function(){var e=this.ctx;e.shadowColor="transparent";return this};Graphics.prototype.createLinearGradient=function(e,t,i,r){var n=this.ctx;return n.createLinearGradient(e,t,i,r)};Graphics.prototype.createRadialGradient=function(e,t,i,r){var n=this.ctx;var s=i/2,a=r/2,o=Math.min(s,a);return n.createRadialGradient(s,a,0,s,a,o)};Graphics.prototype.setCompositeOp=function(e){var t=this.ctx;var i=t.globalCompositeOperation;t.globalCompositeOperation=e;return i};Graphics.prototype.getValue=function(e,t){var i=this.ctx;var r=i.getImageData(e,t,1,1).data;return r[3]*(1<<24)+(r[0]<<16)+(r[1]<<8)+r[2]};Graphics.prototype.getColor=function(e,t){var i=this.ctx;var r=i.getImageData(e,t,1,1).data;return new Color(r[3]*(1<<24)+(r[0]<<16)+(r[1]<<8)+r[2])};Graphics.prototype.drawBounds=function(e,t,i,r,n,s){var a=this.ctx;a.beginPath();a.rect(i,r,n,s);if(e){e.applyTo(this,i,r,n,s);a.fill()}if(t){t.applyTo(this);a.stroke()}return this};Graphics.prototype.drawBoundsI=function(e,t,i,r,n,s){var a=this.ctx;var o=t&&t.applyTo(this);if(!e&&!o)return;var l=o?t.width()%2/2:0;i+=l;r+=l;a.beginPath();a.rect(i,r,n,s);e&&e.applyTo(this,i,r,n,s)&&a.fill();o&&a.stroke();return this};Graphics.prototype.drawRect=function(e,t,i){var r=this.ctx;r.beginPath();r.rect(i.x,i.y,i.width,i.height);if(e){e.applyTo(this,i.x,i.y,i.width,i.height);r.fill()}if(t){t.applyTo(this);r.stroke()}return this};Graphics.prototype.fillAndClear=function(){var e=this.ctx;e.fill();e.shadowColor="transparent";return this};Graphics.prototype.drawRectI=function(e,t,i){var r=this.ctx;var n=t&&t.applyTo(this);if(!e&&!n)return;var s=n?t.width()%2/2:0,a=i.x+s,o=i.y+s;r.beginPath();r.rect(a,o,i.width,i.height);e&&e.applyTo(this,a,o,i.width,i.height)&&this.fillAndClear();n&&r.stroke();return this};Graphics.prototype.drawRoundRectI=function(e,t,i,r,n,s,a,o){var l=this.ctx;var h=t&&t.applyTo(this);if(!e&&!h)return;var u=h?t.width()%2/2:0,c=i.x+u,d=i.y+u,f=i.right()+u+(o||0),_=i.bottom()+u+(o||0);l.beginPath();l.moveTo(c+r,d);l.lineTo(f-n,d);l.quadraticCurveTo(f,d,f,d+n);l.lineTo(f,_-a);l.quadraticCurveTo(f,_,f-a,_);l.lineTo(c+a,_);l.quadraticCurveTo(c,_,c,_-a);l.lineTo(c,d+r);l.quadraticCurveTo(c,d,c+r,d);l.closePath();e&&e.applyTo(this,c,d,i.width,i.height)&&this.fillAndClear();h&&l.stroke();return this};Graphics.prototype.drawRoundRectIWith=function(e,t,i,r,n){var s=this.ctx;this.drawRoundRectI(e,t,i,r.topLeft,r.topRight,r.bottomLeft,r.bottomRight,n);return this};Graphics.prototype.drawRangedBounds=function(e,t,i,n,s,a,o,l){var h=this.ctx;h.beginPath();h.rect(r.x,r.y,r.width,r.height);if(!(e instanceof Color))color=e._color;if(!(t instanceof Color))color=t._color;if(e&&t){var u;switch(l){case 90:u=h.createLinearGradient(n,s,n,s+o);break;case 45:u=h.createLinearGradient(n,s,n+a,s+o);break;case 0:default:u=h.createLinearGradient(n,s,n+a,s)}u.addColorStop(0,e.value());u.addColorStop(1,t.value());h.fillStyle=u;h.fill()}if(i){i.applyTo(this);h.stroke()}},Graphics.prototype.drawCircle=function(e,t,i,r,n){var s=this.ctx;var a=t&&t.applyTo(this);if(!e&&!a)return;s.beginPath();s.arc(i,r,n,0,Math.PI*2);e&&e.applyTo(this,i-n,r-n,n*2,n*2)&&s.fill();a&&s.stroke();s.closePath();return this};Graphics.prototype.drawCircleBounds=function(e,t,i,r,n,s){var a=this.ctx;var o=t&&t.applyTo(this);if(!e&&!o)return;var l=i+n/2;var h=r+s/2;var u=Math.min(n,s)/2;a.beginPath();a.arc(l,h,u,0,Math.PI*2);e&&e.applyTo(this,i-u,r-u,u*2,u*2)&&a.fill();o&&a.stroke();a.closePath();return this};Graphics.prototype.drawCircleRect=function(e,t,i){var r=this.ctx;this.drawCircleBounds(e,t,i.x,i.y,i.width,i.height);return this};Graphics.prototype.drawEllipse=function(e,t,i,r,n,s){var a=this.ctx;var o=t&&t.applyTo(this);if(!e&&!o)return;var l=.5522848,h=n/2*l,u=s/2*l,c=i+n,d=r+s,f=i+n/2,_=r+s/2;a.beginPath();a.moveTo(i,_);a.bezierCurveTo(i,_-u,f-h,r,f,r);a.bezierCurveTo(f+h,r,c,_-u,c,_);a.bezierCurveTo(c,_+u,f+h,d,f,d);a.bezierCurveTo(f-h,d,i,_+u,i,_);a.closePath();e&&e.applyTo(this,i,r,n,s)&&a.fill();o&&a.stroke();return this};Graphics.prototype.drawTriangle=function(e,t,i){var r=this.ctx;var n=t&&t.applyTo(this);if(!e&&!n)return;var s=i.x+i.width/2;r.beginPath();r.moveTo(s,i.y);r.lineTo(i.right(),i.bottom());r.lineTo(i.x,i.bottom());r.closePath();e&&e.applyTo(this,i.x,i.y,i.width,i.height)&&r.fill();n&&r.stroke();return this};Graphics.prototype.drawDiamond=function(e,t,i){var r=this.ctx;var n=t&&t.applyTo(this);if(!e&&!n)return;var s=i.x+i.width/2;var a=i.y+i.height/2;r.beginPath();r.moveTo(s,i.y);r.lineTo(i.right(),a);r.lineTo(s,i.bottom());r.lineTo(i.x,a);r.closePath();e&&e.applyTo(this,i.x,i.y,i.width,i.height)&&r.fill();n&&r.stroke();return this};Graphics.prototype.drawCross=function(e,t,i){var r=this.ctx;var n=t&&t.applyTo(this);if(!e&&!n)return;var s=i.x+i.width/2;var a=i.y+i.height/2;var o=Math.max(1.5,i.width/5);var l=Math.max(1.5,i.height/5);r.beginPath();r.moveTo(s-o,i.y);r.lineTo(s+o,i.y);r.lineTo(s+o,a-l);r.lineTo(i.right(),a-l);r.lineTo(i.right(),a+l);r.lineTo(s+o,a+l);r.lineTo(s+o,i.bottom());r.lineTo(s-o,i.bottom());r.lineTo(s-o,a+l);r.lineTo(i.x,a+l);r.lineTo(i.x,a-l);r.lineTo(s-o,a-l);r.closePath();e&&e.applyTo(this,i.x,i.y,i.width,i.height)&&r.fill();n&&r.stroke();return this};Graphics.prototype.drawDounut=function(e,t,i,r,n,s){var a=this.ctx;var o=t&&t.applyTo(this);if(!e&&!o)return;a.beginPath();n>0&&a.arc(i,r,n,0,Math.PI*2,true);n>s&&a.arc(i,r,n-s,0,Math.PI*2,false);a.closePath();e&&e.applyTo(this,i-n,r-n,n*2,n*2)&&a.fill();o&&a.stroke();return this};Graphics.prototype.drawArcSector=function(e,t,i,r,n,s,a,o,l,h){var u=this.ctx;var c=t&&t.applyTo(this);if(!e&&!c)return;a+=Math.PI*3/2+l;u.beginPath();u.moveTo(i,r);n>0&&u.arc(i,r,n,a,a+o);u.lineTo(i,r);e&&e.applyTo(this,i-n,r-s,n*2,s*2)&&u.fill();c&&u.stroke();return this};Graphics.prototype.drawArcSector2=function(e,t,i,r,n,s,a,o,l,h,u,c){var d=this.ctx;var f=t&&t.applyTo(this);if(!e&&!f)return;l+=Math.PI*3/2+u;d.beginPath();n>0&&d.arc(i,r,n,l,l+h);a>0&&d.arc(i,r,a,l+h,l,true);d.closePath();e&&e.applyTo(this,i-a,r-o,a*2,o*2)&&d.fill();f&&d.stroke();return this};Graphics.prototype.drawLine=function(e,t,i,r,n){var s=this.ctx;if(e&&e.applyTo(this)){s.beginPath();s.moveTo(t,i);s.lineTo(r,n);s.stroke()}return this};Graphics.prototype.drawLineI=function(e,t,i,r,n){var s=this.ctx;if(e&&e.applyTo(this)){var a=e.width()%2/2;s.beginPath();if(t==r){s.moveTo(t+a,i);s.lineTo(r+a,n)}else if(i==n){s.moveTo(t,i+a);s.lineTo(r,n+a)}s.stroke()}return this};Graphics.prototype.drawHorzLine=function(e,t,i,r){var n=this.ctx;if(e&&e.applyTo(this)){n.beginPath();n.moveTo(t,r);n.lineTo(i,r);n.stroke()}return this};Graphics.prototype.drawHorzLineI=function(e,t,i,r,n){var s=this.ctx;if(e&&e.applyTo(this)){r+=e.width()%2/2;!n&&s.beginPath();s.moveTo(t,r);s.lineTo(i,r);!n&&s.stroke()}return this};Graphics.prototype.drawHLine=function(e,t,i,r){var n=this.ctx;if(e&&e.applyTo(this)){n.beginPath();n.moveTo(i,t);n.lineTo(r,t);n.stroke()}return this};Graphics.prototype.drawHLineI=function(e,t,i,r){var n=this.ctx;if(e&&e.applyTo(this)){t+=e.width()%2/2;n.beginPath();n.moveTo(i,t);n.lineTo(r,t);n.stroke()}return this};Graphics.prototype.drawVertLine=function(e,t,i,r){var n=this.ctx;if(e&&e.applyTo(this)){n.beginPath();n.moveTo(r,t);n.lineTo(r,i);n.stroke()}return this};Graphics.prototype.drawVertLineI=function(e,t,i,r,n){var s=this.ctx;if(e&&e.applyTo(this)){r+=e.width()%2/2;!n&&s.beginPath();s.moveTo(r,t);s.lineTo(r,i);!n&&s.stroke()}return this};Graphics.prototype.drawVLine=function(e,t,i,r){var n=this.ctx;if(e&&e.applyTo(this)){n.beginPath();n.moveTo(t,i);n.lineTo(t,r);n.stroke()}return this};Graphics.prototype.drawVLineI=function(e,t,i,r){var n=this.ctx;if(e&&e.applyTo(this)){t+=e.width()%2/2;n.beginPath();n.moveTo(t,i);n.lineTo(t,r);n.stroke()}return this};Graphics.prototype.drawLines=function(e,t){var i=this.ctx;if(e&&e.applyTo(this)){var r,n=false;if(_isArray(t)&&t.length>=2){i.beginPath();i.moveTo(t[0].x,t[0].y);for(r=1;r<t.length;r++){i.lineTo(t[r].x,t[r].y)}n=true}else if(arguments.length>=5){i.beginPath();i.moveTo(arguments[1],arguments[2]);for(r=3;r<arguments.length-1;r+=2){i.lineTo(arguments[r],arguments[r+1])}n=true}if(n){i.stroke()}}return this};Graphics.prototype.drawLinesI=function(e,t){var i=this.ctx;if(e&&e.applyTo(this)){var r,n,s,a=e.width()%2/2;rendered=false;if(isArray(t)&&t.length>=2){i.beginPath();i.moveTo(t[0].x+a,t[0].y+a);for(r=1;r<t.length;r++){i.lineTo(t[r].x,t[r].y)}rendered=true}else if(arguments.length>=5){s=[];for(r=1,n=arguments.length;r<n;r++){s[r]=arguments[r]+a}i.beginPath();i.moveTo(s[1],s[2]);for(r=3;r<n-1;r+=2){i.lineTo(s[r],s[r+1])}rendered=true}if(rendered){i.stroke()}}return this};Graphics.prototype.drawLinesArray=function(e,t){var i=this.ctx;if(e&&t&&t.length>=4&&e.applyTo(this)){i.beginPath();i.moveTo(t[0],t[1]);for(var r=1;r<t.length/2;r++){i.lineTo(t[r*2],t[r*2+1])}i.stroke()}return this};Graphics.prototype.drawLinesArrayI=function(e,t){var i=this.ctx;if(e&&t&&t.length>=4&&e.applyTo(this)){var r,n=e.width()%2/2;i.beginPath();i.moveTo(t[0],t[1]);for(r=1;r<t.length/2;r++){i.lineTo(t[r*2]+n,t[r*2+1]+n)}i.stroke()}return this};Graphics.prototype.drawSegments=function(e,t,r,n){var s=this.ctx;if(n>2&&e&&e.applyTo(this)){var a=r;if(t.length>=r+2){n=Math.min(r+n,t.length);s.beginPath();s.moveTo(t[a].x,t[a].y);for(i=a+1;i<n;i++){s.lineTo(t[i].x,t[i].y)}s.stroke()}}return this};Graphics.prototype.drawQuadratic=function(e,t,i,r,n,s,a){var o=this.ctx;if(e&&e.applyTo(this)){o.beginPath();o.moveTo(t,i);o.quadraticCurveTo(r,n,s,a);o.stroke()}return this};Graphics.prototype.drawCurve=function(e,t){var i=this.ctx;if(e&&e.applyTo(this)){i.beginPath();drawCurvedLines(i,t,0,t.length-1);i.stroke()}return this};Graphics.prototype.drawPolygon=function(e,t,i){var r=this.ctx;var n,s,a,o;if(i&&(s=i.length)>1){a=t&&t.applyTo(this);if(!e&&!a)return;r.beginPath();r.moveTo(i[0].x,i[0].y);for(n=1;n<s;n++){r.lineTo(i[n].x,i[n].y)}r.closePath();if(e){o=getPointsRect(i);e.applyTo(this,o.x,o.y,o.width,o.height)&&r.fill()}a&&r.stroke()}return this};Graphics.prototype.drawPolygonArray=function(e,t,i){var r=this.ctx;var n,s,a;if(i&&(s=i.length)>2){var o=t&&t.applyTo(this);if(!e&&!o)return;r.beginPath();r.moveTo(i[0],i[1]);s/=2;for(n=1;n<s;n++){r.lineTo(i[n*2],i[n*2+1])}r.closePath();if(e){a=getPointArrayRect(i);e.applyTo(this,a.x,a.y,a.width,a.height)&&r.fill()}o&&r.stroke()}return this};Graphics.prototype.drawHoledPolygonArray=function(e,t,i,r){var n=this.ctx;var s=n.globalCompositeOperation;this.drawPolygonArray(e,t,i);n.globalCompositeOperation="destination-out";this.drawPolygonArray(SolidBrush.BLACK,null,r);n.globalCompositeOperation=s;return this},Graphics.prototype.drawRange=function(e,t,i,r){var n=this.ctx;if(i&&i.length>1&&r&&r.length>1){var s=t&&t.applyTo(this);if(!e&&!s)return;n.beginPath();n.moveTo(i[0].x,i[0].y);for(var a=1,o=i.length;a<o;a++){n.lineTo(i[a].x,i[a].y)}for(var a=r.length-1;a>=0;a--){n.lineTo(r[a].x,r[a].y)}n.closePath();if(e){var l=getPointsRect(i.concat(r));e.applyTo(this,l.x,l.y,l.width,l.height)&&n.fill()}s&&n.stroke()}return this};Graphics.prototype.drawCurvedRange=function(e,t,i,r){var n=this.ctx;if(i&&i.length>1&&r&&r.length>1){var s=t&&t.applyTo(this);if(!e&&!s)return;n.beginPath();drawCurvedLines(n,i,0,i.length-1,true);var a=r[r.length-1];n.lineTo(a.x,a.y);drawCurvedLines(n,r,r.length-1,0,false);a=i[0];n.lineTo(a.x,a.y);if(e){var o=getPointsRect(i.concat(r));e.applyTo(this,o.x,o.y,o.width,o.height)&&n.fill()}s&&n.stroke()}return this};Graphics.prototype.drawCurvedStraightRange=function(e,t,i,r){var n=this.ctx;if(i&&i.length>1&&r&&r.length>1){var s=t&&t.applyTo(this);if(!e&&!s)return;n.beginPath();drawCurvedLines(n,i,0,i.length-1,true);var a=r[r.length-1];n.lineTo(a.x,a.y);for(var o=r.length-2;o>=0;o--){n.lineTo(r[o].x,r[o].y)}a=i[0];n.lineTo(a.x,a.y);if(e){var l=getPointsRect(i.concat(r));e.applyTo(this,l.x,l.y,l.width,l.height)&&n.fill()}s&&n.stroke()}return this};Graphics.prototype.drawStraightCurvedRange=function(e,t,i,r){var n=this.ctx;if(i&&i.length>1&&r&&r.length>1){var s=t&&t.applyTo(this);if(!e&&!s)return;n.beginPath();for(var a=0;a<i.length;a++){n.lineTo(i[a].x,i[a].y)}var o=r[r.length-1];n.lineTo(o.x,o.y);drawCurvedLines(n,r,r.length-1,0,false);o=i[0];n.lineTo(o.x,o.y);if(e){var l=getPointsRect(i.concat(r));e.applyTo(this,l.x,l.y,l.width,l.height)&&n.fill()}s&&n.stroke()}return this};Graphics.prototype.drawText=function(e,t,i,r,n,s,a){var o=this.ctx;if(i&&t&&t.applyTo(this)){o.beginPath();o.font=e?e.font:DEF_FONT;o.textAlign=s==TextAlign.CENTER?"center":s==TextAlign.RIGHT?"end":"start";o.textBaseline=a?a:"top";o.fillText(i,r,n)}return this};Graphics.prototype.drawTextSh=function(e,t,i,r,n,s,a,o){var l=this.ctx;if(r&&t){i&&this.$_applyShadow(i);this.drawText(e,t,r,n,s,a,o)}return this};Graphics.prototype.drawTextRect=function(e,t,i,r,n,s){var a=this.ctx;this.drawTextBounds(e,t,i,r.x,r.y,r.width,r.height,n,s);return this};Graphics.prototype.drawTextBounds=function(e,t,i,r,n,s,a,o,l){var h=this.ctx;if(i&&t&&t.applyTo(this)){var u=r;var c=n;var d=DEF_FONT_SIZE;h.beginPath();if(e){h.font=e.font;d=e.size}else{h.font=DEF_FONT}var f="start";if(o===TextAlign.CENTER){r+=s/2;f="center"}else if(o===TextAlign.RIGHT){r=r+s;f="end"}if(a!=d){switch(l){case"top":break;case"bottom":n=n+a-d;break;case"middle":default:n+=(a-d+$_TEXT_OFF)/2;break}}n=n+d/2;h.textAlign=f;h.textBaseline="middle";h.fillText(i,r,n);if(e){var _=-1e3;switch(e.deco){case"underline":_=_int(n+d/2+1)+.5;break;case"line-through":_=_int(n+1)+.5;break;case"overline":_=_int(n-d/2)-1.5;break}if(_>-1e3){h.beginPath();this.setStroke((e.line||t._color).value(),1);s=_int(h.measureText(i).width);if(o===TextAlign.CENTER){r-=_int(s/2)}else if(o===TextAlign.RIGHT){r-=s}h.moveTo(r,_);h.lineTo(r+s,_);h.stroke()}}}return this};Graphics.prototype.drawTextRectSh=function(e,t,i,r,n,s,a){var o=this.ctx;if(r&&t){i&&this.$_applyShadow(i);this.drawTextBounds(e,t,r,n.x,n.y,n.width,n.height,s,a)}return this};Graphics.prototype.drawTextBoundsSh=function(e,t,i,r,n,s,a,o,l,h){var u=this.ctx;if(r&&t){i&&this.$_applyShadow(i);this.drawTextBounds(e,t,r,n,s,a,o,l,h)}return this};Graphics.prototype.getTextRect=function(e,t,i,r,n,s,a,o,l){var h=this.ctx;if(l){l.width=l.height=0}else{l=new Rectangle}if(t){var u=DEF_FONT_SIZE;if(e){h.font=e.font;u=e.size}else{h.font=DEF_FONT}l.width=h.measureText(t).width;l.height=u;l.x=i;l.y=r;if(a===TextAlign.CENTER){l.x+=(n-l.width)/2}else if(a===TextAlign.RIGHT){l.x+=n-l.width}switch(o){case"top":break;case"bottom":l.y=l.bottom()-u;break;case"middle":default:l.y+=(s-u)/2;break}}return l};Graphics.prototype.drawTextRectExplicitSh=function(e,t,i,r,n,s,a){var o=this.ctx;if(r&&t){i&&this.$_applyShadow(i);this.drawTextBoundsExplicit(e,t,r,n.x,n.y,n.width,n.height,s,a)}return this};Graphics.prototype.drawTextRectExplicit=function(e,t,i,r,n,s){var a=this.ctx;this.drawTextBoundsExplicit(e,t,i,r.x,r.y,r.width,r.height,n,s);return this};Graphics.prototype.drawTextBoundsExplicit=function(e,t,i,r,n,s,a,o,l){var h=this.ctx;if(!i||!t){return}var u=s*a;if(isNaN(u)||u<=0){return}var c=typeof i=="string"?i.split(/\n|\r\n?/):i;if(c.length<=1){this.drawTextBounds(e,t,c[0],r,n,s,a,o,l);return}if(t.applyTo(this)){var d=DEF_FONT_SIZE;h.beginPath();if(e){h.font=e.font;d=e.size}else{h.font=DEF_FONT}var f=d+1;h.textBaseline="middle";var _,g,m,p;var v=f*c.length;var y=Math.min(c.length,Math.ceil(a/f));if(l=="top"||v>=a){}else{switch(l){case"bottom":n=n+a-v;break;case"middle":default:n+=(a-v)/2;break}}for(_=0;_<y;_++){g="start";if(o===TextAlign.CENTER){m=r+s/2;g="center"}else if(o===TextAlign.RIGHT){m=r+s;g="end"}else{m=r}p=n+f*_;p=p+d/2;h.textAlign=g;h.fillText(c[_],m,p);if(e){var S=-1e3;switch(e.deco){case"underline":S=_int(p+d/2+1)+.5;break;case"line-through":S=_int(p+1)+.5;break;case"overline":S=_int(p-d/2)-.5;break}if(S>-1e3){m=r;h.beginPath();this.setStroke((e.line||t._color).value(),1);s=_int(h.measureText(c[_]).width);if(o===TextAlign.CENTER){m-=_int(s/2)}else if(o===TextAlign.RIGHT){m-=s}h.moveTo(m,S);h.lineTo(m+s,S);h.stroke()}}}}return this};Graphics.prototype.getExplicitTextRect=function(e,t,i,r,n,s,a,o,l){var h=this.ctx;if(l){l.width=l.height=0}else{l=new Rectangle(i,r,0,0)}if(!t){return l}var u=typeof t=="string"?t.split(this.LINES_REG):t;if(u.length==1){return this.getTextRect(e,u[0],i,r,n,s,a,o,l)}var c=DEF_FONT_SIZE;if(e){h.font=e.font;c=e.size}else{h.font=DEF_FONT}var d=c+1;h.textBaseline="middle";var f=d*u.length;var _=Math.min(u.length,Math.ceil(s/d));var g,m,p,v,y;if(o=="top"||f>=s){}else{switch(o){case"bottom":r=r+s-f;break;case"middle":default:r+=(s-f)/2;break}}l.y=r;l.height=d*_;for(g=0;g<_;g++){m=u[g];y=h.measureText(m).width;if(a===TextAlign.CENTER){p=i+(n-y)/2}else if(a===TextAlign.RIGHT){p=i+n-y}else{p=i}if(l.width==0){l.x=p;l.width=y}else{l.setLeft(Math.min(l.x,p));l.setRight(Math.max(l.right(),p+y))}}return l};Graphics.prototype.drawTextRectWrapSh=function(e,t,i,r,n,s,a){var o=this.ctx;if(r&&t){i&&this.$_applyShadow(i);this.drawTextBoundsWrap(e,t,r,n.x,n.y,n.width,n.height,s,a)}return this};Graphics.prototype.drawTextRectWrap=function(e,t,i,r,n,s){var a=this.ctx;this.drawTextBoundsWrap(e,t,i,r.x,r.y,r.width,r.height,n,s);return this};Graphics.prototype.drawTextBoundsWrap=function(e,t,i,r,n,s,a,o,l){var h=this.ctx;if(!i||!t){return}var u=s*a;if(isNaN(u)||u<=0){return}var c=DEF_FONT_SIZE;if(e){h.font=e.font;c=e.size}else{h.font=DEF_FONT}var d=typeof i=="string"?i.split(this.LINES_REG):i;if(d.length<=1&&h.measureText(d[0]).width<=s){this.drawTextBounds(e,t,d[0],r,n,s,a,o,l);return}if(t.applyTo(this)){var f,_,g,m,p,v,y,S,C,w,x,b;var I=c+1;var T=Math.min(d.length,Math.ceil(a/I));var A=[];var E=0;var R=true;for(f=0;f<T&&E<=a;f++){p=0;S="";m=d[f];for(_=0;_<m.length&&E<=a;){v=m[_];if(R){R=false;v=v.trim();if(!v){if((C=h.measureText(v).width)>s){A.push(v)}else{S=v;p=C}v=m[++_]}}if(p+(C=h.measureText(v).width)<=s){S+=v;p=h.measureText(S).width}else{v=v.trim();if(v){if(S){A.push(S);S=""}if(C>s){while(v&&E<=a){for(g=2;g<=v.length;g++){y=v.substr(0,g);if(h.measureText(y).width>s){A.push(v.substr(0,g-1));v=v.substr(g-1);break}}if(!v||v.length==1||h.measureText(v).width<=s){A.push(v);break}}}else{S=v;p=0}}}_++}if(S){A.push(S)}}b=Math.min(A.length,Math.ceil(a/I));E=A.length*I;h.beginPath();h.textBaseline="middle";if(l=="top"||E>=a){}else{switch(l){case"bottom":n=n+a-E;break;case"middle":default:n+=(a-E)/2;break}}for(f=0;f<b;f++){w="start";p=r;if(o===TextAlign.CENTER){p+=s/2;w="center"}else if(o===TextAlign.RIGHT){p=r+s;w="end"}x=n+I*f;x=x+c/2;h.textAlign=w;h.fillText(A[f],p,x);if(e){var L=-1e3;switch(e.deco){case"underline":L=_int(x+c/2+1)+.5;break;case"line-through":L=_int(x+1)+.5;break;case"overline":L=_int(x-c/2)-.5;break}if(L>-1e3){p=r;h.beginPath();this.setStroke((e.line||t._color).value(),1);s=_int(h.measureText(A[f]).width);if(o===TextAlign.CENTER){p-=_int(s/2)}else if(o===TextAlign.RIGHT){p-=s}h.moveTo(p,L);h.lineTo(p+s,L);h.stroke()}}}}return this};Graphics.prototype.drawTextBoundsEllipse=function(e,t,i,r,n,s,a,o,l){var h=this.ctx;var u="...";h.font=e?e.font:DEF_FONT;var c=h.measureText(i).width;if(c>s){var d=h.measureText(u).width;if(d>s)this.drawTextBounds(e,t,i,r,n,s,a,o,l);else{for(var f=i.length;c>=s-d&&f-- >0;){c=h.measureText(i=i.substring(0,f)).width}i+=u;this.drawTextBounds(e,t,i,r,n,s,a,o,l)}}else{this.drawTextBounds(e,t,i,r,n,s,a,o,l)}};Graphics.prototype.getWrapTextRect=function(e,t,i,r,n,s,a,o,l){var h=this.ctx;if(l){l.width=l.height=0}else{l=new Rectangle(i,r,0,0)}if(!t){return l}var u=DEF_FONT_SIZE;if(e){h.font=e.font;u=e.size}else{h.font=DEF_FONT}var c=typeof t=="string"?t.split(/\n|\r\n?/):t;if(c.length==1&&h.measureText(c[0]).width<=n){return this.getTextRect(e,c[0],i,r,n,s,a,o,l)}var d=u+1;var f=Math.min(c.length,Math.ceil(s/d));var _=[];var g=0;var m=true;var p,v,y,S,C,w,x,b,I,T,A;for(p=0;p<f&&g<=s;p++){C=0;b="";S=c[p];for(v=0;v<S.length&&g<=s;){w=S[v];if(m){m=false;w=w.trim();if(!w){if((I=h.measureText(w).width)>n){g+=d;_.push(w)}else{b=w;C=I}w=S[++v]}}if(C+(I=h.measureText(w).width)<=n){b+=w;C=h.measureText(b).width+4}else{w=w.trim();if(w){if(b){_.push(b);g+=d;b=""}if(I>n){while(w&&g<=s){for(y=2;y<=w.length;y++){x=w.substr(0,y);if((I=h.measureText(x).width)>n){_.push(w.substr(0,y-1));g+=d;w=w.substr(y-1);break}}if(!w||w.length==1||(I=h.measureText(w).width)<=n){_.push(w);g+=d;break}}}else{b=w;C=0}}}v++}if(b||S==""){_.push(b);g+=d}}A=Math.min(_.length,Math.ceil(s/d));g=_.length*d;if(o=="top"||g>=s){}else{switch(o){case"bottom":r=r+s-g;break;case"middle":default:r+=(s-g)/2;break}}l.y=r;l.height=g;for(p=0;p<A;p++){var E=h.measureText(_[p]).width;if(a===TextAlign.CENTER){C=i+(n-E)/2}else if(a===TextAlign.RIGHT){C=i+n-E}else{C=i}if(l.width==0){l.x=C;l.width=E}else{l.setLeft(Math.min(l.x,C));l.setRight(Math.max(l.right(),C+E))}}return l};Graphics.prototype.drawTextRectA=function(e,t,i,r,n){var s=this.ctx;this.drawTextBoundsA(e,t,i,r.x,r.y,r.width,r.height,n);return this};Graphics.prototype.drawTextBoundsA=function(e,t,i,r,n,s,a,o){var l=this.ctx;if(t&&t.applyTo(this)){l.beginPath();l.save();l.translate(r+s/2,n+a/2);l.rotate(o);l.font=e?e.font:DEF_FONT;l.textAlign="center";l.textBaseline="middle";l.fillText(i,0,0);l.restore()}return this};Graphics.prototype.drawTextRectASh=function(e,t,i,r,n,s){var a=this.ctx;i&&this.$_applyShadow(i);this.drawTextBoundsA(e,t,r,n.x,n.y,n.width,n.height,s);return this};Graphics.prototype.getTextWidth=function(e,t){var i=this.ctx;if(t){i.font=e?e.font:DEF_FONT;return i.measureText(t).width}return 0};Graphics.prototype.getLinesWidth=function(e,t){var i=this.ctx;i.font=e?e.font:DEF_FONT;var r=t.split(/\n|\r\n?/);var n=r.length;if(n<=1){return i.measureText(t).width}else{var s=i.measureText(r[0]).width;for(var a=1;a<n;a++){s=Math.max(i.measureText(r[0]).width)}return s}};Graphics.prototype.drawImage=function(e,t,i,r,n,s,a,o,l){var h=this.ctx;try{h.drawImage.apply(h,arguments)}catch(e){}};Graphics.prototype.drawImage=function(e,t,i,r,n,s,a,o,l){var h=this.ctx;try{h.drawImage.apply(h,arguments)}catch(e){}};Graphics.prototype.drawImageAlpha=function(e,t,i,r,n,s,a,o,l,h){var u=this.ctx;arguments=_slice.call(arguments,1);arguments[0]=e;var c=u.globalAlpha;try{u.globalAlpha=t;u.drawImage.apply(u,arguments)}catch(e){}finally{u.globalAlpha=c}return this};Graphics.prototype.drawImageI=function(e,t,i,r,n,s,a,o,l){var h=this.ctx;arguments[1]=Math.floor(arguments[1]);arguments[2]=Math.floor(arguments[2]);try{h.drawImage.apply(h,arguments)}catch(e){}return this};Graphics.prototype.drawImageAlphaI=function(e,t,i,r,n,s,a,o,l,h){var u=this.ctx;arguments=_slice.call(arguments,1);arguments[0]=e;arguments[1]=Math.floor(arguments[1]);arguments[2]=Math.floor(arguments[2]);var c=u.globalAlpha;try{u.globalAlpha=t;u.drawImage.apply(u,arguments)}catch(e){}finally{u.globalAlpha=c}return this};Graphics.prototype.aL=function(e,t,i,r,n,s,a,o,l){var h=this.ctx;try{h.drawImage.apply(h,arguments)}catch(e){}return this};function getPointsRect(e){var t=e[0].x;var i=e[0].y;var r=t;var n=i;for(var s=1,a=e.length;s<a;s++){var o=e[s];t=Math.min(t,o.x);i=Math.min(i,o.y);r=Math.max(r,o.y);n=Math.max(n,o.y)}return{x:t,y:i,width:r-t,height:n-i}}function getPointArrayRect(e){var t,i,r;var n=e.length/2;var s=e[0];var a=e[1];var o=s;var l=a;for(t=1;t<n;t++){i=e[t*2];r=e[t*2+1];s=Math.min(s,i);a=Math.min(a,r);o=Math.max(o,i);l=Math.max(l,r)}return{x:s,y:a,width:o-s,height:l-a}}function drawCurvedLines(e,t,i,r,n){if(i==r)return;var s=i>r;var a=s?-1:1;var o=i;if(n||n===undefined){e.moveTo(t[o].x,t[o].y)}if(Math.abs(r-i)==1){e.lineTo(t[o+a].x,t[o+a].y);return}var l=.25;var h={x:0,y:0};var u={x:0,y:0};var c={x:0,y:0};var d={x:t[o+a].x-t[o].x,y:t[o+a].y-t[o].y};var f={x:0,y:0};var _={x:0,y:0};var g={x:0,y:0};var m={x:0,y:0};var p=Math.sqrt(d.x*d.x+d.y*d.y);d.x/=p;d.y/=p;var v=t[o+a].x-t[o].x;var y=t[o].x;var S=t[o].y;for(o+=a;o!=r;o+=a){c.x=-d.x;c.y=-d.y;d.x=t[o+a].x-t[o].x;d.y=t[o+a].y-t[o].y;p=Math.sqrt(d.x*d.x+d.y*d.y);d.x/=p;d.y/=p;if(d.x<c.x){f.x=c.x-d.x;f.y=c.y-d.y}else{f.x=d.x-c.x;f.y=d.y-c.y}var C=Math.sqrt(f.x*f.x+f.y*f.y);f.x/=C;f.y/=C;if(c.y*d.y>=0)f={x:1,y:0};h.x=-f.x*v*l;h.y=-f.y*v*l;if(o==a+i){e.quadraticCurveTo(t[o].x+h.x,t[o].y+h.y,t[o].x,t[o].y)}else{_.x=y+u.x;_.y=S+u.y;g.x=t[o].x+h.x;g.y=t[o].y+h.y;m.x=(_.x+g.x)/2;m.y=(_.y+g.y)/2;e.quadraticCurveTo(_.x,_.y,m.x,m.y);e.quadraticCurveTo(g.x,g.y,t[o].x,t[o].y)}v=t[o+a].x-t[o].x;u.x=f.x*v*l;u.y=f.y*v*l;y=t[o].x;S=t[o].y}e.quadraticCurveTo(y+u.x,S+u.y,t[o].x,t[o].y)}Graphics.getEllipsePoint=function(e,t,i,r,n,s,a){n=n+s;var o=a?-1:1;var l={};l.x=e+Math.cos(n*o)*i;l.y=t+Math.sin(-n*o)*r;return l};Graphics.getArcPoint=function(e,t,i,r,n,s,a,o,l){if(Math.abs(s)>2*Math.PI){s=2*Math.PI}if(l===UNDEFINED){l=.5}n+=Math.PI*3/2+a;var h=o?-1:1;s=n-s*h*l;var u={};u.x=e+Math.cos(s*h)*i;u.y=t+Math.sin(-s*h)*r;return u};var Drawings=function(){var d=null;var f=[];var _=[];this._render=function(){for(var e=0,t=f.length;e<t;e++){f[e].apply(d,_[e])}};this.clear=function(e){d=e;f=[];_=[]};this.clipRect=function(e){f.push(d.clipBounds);_.push([e.x,e.y,e.width,e.height])};this.clipRectEx=function(e){f.push(d.clipBoundsEx);_.push([e.x,e.y,e.width,e.height])};this.setAlpha=function(e){f.push(d.setAlpha);_.push([e])};this.drawBounds=function(e,t,i,r,n,s){f.push(d.drawBounds);_.push([e,t,i,r,n,s])};this.drawBoundsI=function(e,t,i,r,n,s){f.push(d.drawBoundsI);_.push([e,t,i,r,n,s])};this.drawRect=function(e,t,i){f.push(d.drawBounds);_.push([e,t,i.x,i.y,i.width,i.height])};this.drawRectI=function(e,t,i){f.push(d.drawBoundsI);_.push([e,t,i.x,i.y,i.width,i.height])};this.drawRoundRectI=function(e,t,i,r,n,s,a,o){f.push(d.drawRoundRectI);_.push([e,t,i.clone(),r,n,s,a,o])};this.drawRoundRectIWith=function(e,t,i,r,n){f.push(d.drawRoundRectIWith);_.push([e,t,i.clone(),r,n])};this.drawCircle=function(e,t,i,r,n){f.push(d.drawCircle);_.push([e,t,i,r,n])};this.drawEllipse=function(e,t,i,r,n,s){f.push(d.drawEllipse);_.push([e,t,i,r,n,s])};this.drawCircleRect=function(e,t,i){f.push(d.drawCircleRect);_.push([e,t,i.clone()])};this.drawTriangle=function(e,t,i){f.push(d.drawTriangle);_.push([e,t,i.clone()])};this.drawDiamond=function(e,t,i){f.push(d.drawDiamond);_.push([e,t,i.clone()])};this.drawArcSector=function(e,t,i,r,n,s,a,o,l,h){f.push(d.drawArcSector);_.push([e,t,i,r,n,s,a,o,l,h])};this.drawArcSector2=function(e,t,i,r,n,s,a,o,l,h,u,c){f.push(d.drawArcSector2);_.push([e,t,i,r,n,s,a,o,l,h,u,c])};this.drawLine=function(e,t,i,r,n){f.push(d.drawLine);_.push([e,t,i,r,n])};this.drawLineI=function(e,t,i,r,n){f.push(d.drawLineI);_.push([e,t,i,r,n])};this.drawHorzLine=function(e,t,i,r){f.push(d.drawHorzLine);_.push([e,t,i,r])};this.drawHorzLineI=function(e,t,i,r){f.push(d.drawHorzLineI);_.push([e,t,i,r])};this.drawVertLine=function(e,t,i,r){f.push(d.drawVertLine);_.push([e,t,i,r])};this.drawVertLineI=function(e,t,i,r){f.push(d.drawVertLineI);_.push([e,t,i,r])};this.drawLines=function(e,t){f.push(d.drawLines);_.push([e,t])};this.drawLinesI=function(e,t){f.push(d.drawLinesI);_.push([e,t])};this.drawCurve=function(e,t){f.push(d.drawCurve);_.push([e,t])};this.drawPolygon=function(e,t,i){f.push(d.drawPolygon);_.push([e,t,i])};this.drawPolygonArray=function(e,t,i){f.push(d.drawPolygonArray);_.push([e,t,i])};this.drawText=function(e,t,i,r,n,s,a){f.push(d.drawText);_.push([e,t,i,r,n,s,a])};this.drawTextBounds=function(e,t,i,r,n,s,a,o,l){f.push(d.drawTextBounds);_.push([e,t,i,r,n,s,a,o,l])};this.drawTextRect=function(e,t,i,r,n,s){f.push(d.drawTextBounds);_.push([e,t,i,r.x,r.y,r.width,r.height,n,s])};this.drawTextRectA=function(e,t,i,r,n){f.push(d.drawTextBoundsA);_.push([e,t,i,r.x,r.y,r.width,r.height,n])};this.drawImage=function(e,t,i,r,n,s,a,o,l){f.push(d.drawImage);_.push([e,t,i,r,n,s,a,o,l])};this.getTextWidth=function(e,t){return _graphics.gtTextWidth(e,t)}};var ShapeDrawing=defineClass("ShapeCellRenderer",null,{init:function(){this._super()},draw:function(e,t,i,r,n){if(i||r){var s=parseFloat(n);if(!isNaN(s)){s=s%360*Math.PI/180}else{s=0}this._doDraw(e,t,i,r,s)}},_doDraw:function(e,t,i,r,n){}},{getShape:function(e,t){var i=null;if(t){t=t.toLowerCase();if(t=="empty"){i=EmptyShape.Default}else if(t=="ellipse"||t=="circle"){i=e._ellipse||(e._ellipse=new EllipseShape)}else if($$_polygonShapes.hasOwnProperty(t)){i=e._polygon||(e._polygon=new PolygonShape);e._polygon.setShape(t)}}return i}});var PolygonShape=defineClass("PolygonShape",ShapeDrawing,{init:function(e){this._super();this.setShape(e)},shape:null,setShape:function(e){this._shape=e?e.toLowerCase():null},_doDraw:function(e,t,i,r,n){var s=this._shape;var a,o,l,h;if($$_polygonShapes.hasOwnProperty(s)){a=$$_polygonShapes[s];if(a){a=a.slice();for(l=0,h=a.length/2;l<h;l++){a[l*2]=t.x+a[l*2]*t.width;a[l*2+1]=t.y+a[l*2+1]*t.height}a.push(a[0],a[1]);if(n){e.save();e.rotateAt(n,t.x+t.width/2,t.y+t.height/2)}e.drawPolygonArray(i,r,a);if(n){e.restore()}}}else if($$_pairShapes.hasOwnProperty(s)){o=$$_pairShapes[s];if(o){if(n){}a=o[0];a=a.slice();for(l=0,h=a.length/2;l<h;l++){a[l*2]=t.x+a[l*2]*t.width;a[l*2+1]=t.y+a[l*2+1]*t.height}a.push(a[0],a[1]);e.drawPolygonArray(i,r,a);a=o[1];a=a.slice();for(l=0,h=a.length/2;l<h;l++){a[l*2]=t.x+a[l*2]*t.width;a[l*2+1]=t.y+a[l*2+1]*t.height}a.push(a[0],a[1]);e.drawPolygonArray(i,r,a);if(n){}}}}},{EMPTY:"empty",RECTANGLE:"rectangle",TRIANLGE:"triangle",INVERTED_TRIANLGE:"itriangle",RIGHT_TRIANLGE:"rtriangle",DIAMOND:"diamond",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",PLUS:"plus",MINUS:"minus",EQUAL:"equal",STAR:"star",PENTAGON:"pentagon"});var $$_polygonShapes={empty:null,rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],rtriangle:[0,0,0,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454],pentagon:[.5,0,.9755,.3454,.7938,.9045,.2061,.9045,.0244,.3454],hexagon:[.75,.0669,1,.5,.75,.933,.25,.933,0,.5,.25,.0669],octagon:[.6913,.038,.9619,.3086,.9619,.6913,.6913,.9619,.3086,.9619,.038,.6913,.038,.3086,.3086,.038],trapezium:[.3333,0,.6666,0,1,1,0,1],parallelogram:[.25,0,1,0,.75,1,0,1]};var $$_pairShapes={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]};var EllipseShape=defineClass("EllipseShape",ShapeDrawing,{init:function(e){this._super()},_doDraw:function(e,t,i,r){e.drawEllipse(i,r,t.x,t.y,t.width,t.height)}});var EmptyShape=defineClass("EmptyShape",ShapeDrawing,{init:function(){this._super()},_doDraw:function(e,t,i,r){}},null,function(e){e.Default=new e});var VisualContext=defineClass("VisualContext",EventAware,{init:function(){this._super()}});var CanvasContext=defineClass("CanvasContext",VisualContext,{init:function(e,t){this._super();this._name=e;this._opaque=t;this._canvas=document.createElement("canvas");this._ctx=this._canvas.getContext("2d");this._graphics=new Graphics(this._ctx);this._dirty=false;this._buffer=null;this._bufferCtx=null;if(!t){this._backBuff=this._backCtx=null}},name:function(){return this._name},isOpaque:function(){return this._opaque},isDirty:function(){return this._dirty},resize:function(e,t){if(e*_DPPX>this._canvas.width){this._canvas.width=e*_DPPX}if(t*_DPPX>this._canvas.height){this._canvas.height=t*_DPPX}},saveBack:function(e,t){var i=t.width;var r=t.height;var n=Math.max(0,i*_DPPX);var s=Math.max(0,r*_DPPX);var a=this._backBuff;if(n*s==0)return;if(!a){a=this._backBuff=_doc.createElement("canvas");this._backCtx=this._backBuff.getContext("2d")}if(n>a.width){a.width=n}if(s>a.height){a.height=s}if(n>0&&s>0){t.x=Math.max(0,t.x);t.y=Math.max(0,t.y);this._backCtx.clearRect(0,0,n,s);this._backCtx.drawImage(e,t.x*_DPPX,t.y*_DPPX,n,s,0,0,n,s)}},prepare:function(e,t,i,r){if(e&&(t||i)){var n=e;var s=n.x;var a=n.y;var o=Math.max(0,n.width);var l=Math.max(0,n.height);var h=this._buffer;if(!h){this._buffer=h=_doc.createElement("canvas");this._bufferCtx=h.getContext("2d")}if(o>h.width){h.width=o}if(l>h.height){h.height=l}if(o>0&&l>0){this._bufferCtx.drawImage(this._canvas,s,a,o,l,0,0,o,l)}r&&this._graphics.clear(0,0,this._canvas.width,this._canvas.height);if(t>0){n.x+=t;o-=t}else if(t<0){s-=t;o+=t}if(i>0){n.y+=i;l-=i}else if(i<0){a-=i;l+=i}if(o>0&&l>0){this._ctx.drawImage(this._buffer,s,a,o,l,n.x,n.y,o,l)}this._dirty=true}else if(r){this._graphics.clear(0,0,this._canvas.width,this._canvas.height)}this._graphics.save();_DPPX>1&&this._graphics.scale(_DPPX,_DPPX)},restore:function(){if(this._dirty){this._dirty=false}this._graphics.restore()},invalidate:function(e){this._dirty=true}});var VisualCache=defineClass("VisualCache",EventAware,{init:function(){this._super()}});var CanvasCache=defineClass("CanvasCache",VisualCache,{init:function(e,t){this._super();this._element=t;this._canvas=e.createElement("canvas");this._ctx=this._canvas.getContext("2d");this._graphics=new Graphics(this._ctx)},dispose:function(){},resize:function(e,t){if(e>this._canvas.width){this._canvas.width=e}if(t>this._canvas.height){this._canvas.height=t}},prepare:function(){this._graphics.clear(0,0,this._canvas.width,this._canvas.height);this._graphics.save()},restore:function(){this._graphics.restore()},invalidate:function(e){if(!this._dirty){this._dirty=true;this._container.invalidate()}}});var $$_layout_total=0;var $$_render_total=0;var UIComponent=defineClass("UIComponent",UIContainer,{init:function(e,t){this._super(e,t);var i,r,n=this._container;if(e){this._createChildren(n);this.invalidateLayout();this._registerEventHandlers(n)}else{i=this._canvas=_document.createElement("canvas");this._ctx=i.getContext("2d");n.appendChild(i);i.width=n.clientWidth*_DPPX;i.height=n.clientHeight*_DPPX;i.innerText="Your browser does not support HTML5 Canvas.";r=i.style;r.position="absolute";r.left="0px";r.top="0px";r.width="100%";r.height="100%";r.background="#fff";r.borderStyle="none";r.borderWidth="0px";r["-webkit-transform"]="translateZ(0)";this._defContext=new CanvasContext("defaultContext");this._defContext.resize(this._width,this._height);this._contexts=null;this._createChildren(n);this.invalidateLayout();this._registerEventHandlers(i)}this._imagePool=new ImagePool;this._imagePool.addListener(this);this._forceValidation=false},onImageLoaded:function(e){var t=this._imagePool.getImage(e);$_debug&&_console&&trace("Image loaded at "+e+" ["+t.width+","+t.height+"]");this.invalidateLayout()},getCanvasImage:function(){return this._canvas&&this._canvas.toDataURL()},getContext:function(e){if(this._contexts){for(var t=this._contexts.length;t--;){if(this._contexts[t].name()==e){return this._contexts[t]}}}return null},addContext:function(e){if(e){if(!this._contexts){this._contexts=[]}if(this._contexts.indexOf(e)<0){this._contexts.push(e);e.resize(this._width,this._height)}}},getImage:function(e,t){return this._imagePool.getImage(e,t)},clearImagePool:function(e){if(this._imagePool&&this._imagePool.clearImages){this._imagePool.clearImages(e)}},measureText:function(e,t){if(t){if(this.$_dom){var i=this.$_textMeasurer;i.textContent=t;i.style.font=e?e.font:DEF_FONT;return i.offsetWidth}else{this._ctx.font=e?e.font:"";return this._ctx.measureText(t).width+1}}return 0},measureTextRect:function(e,t,i,r,n,s,a,o,l){if(this.$_dom){var h=this.$_textMeasurer;return Dom.calcTextBounds(h,e,t,i,r,n,s,a,o,l)}else{var u;switch(l){case TextWrap.EXPLICIT:u=this._defContext._graphics.getExplicitTextRect(e,t,i,r,n,s,a,o);break;case TextWrap.NORMAL:u=this._defContext._graphics.getWrapTextRect(e,t,i,r,n,s,a,o);break;default:u=this._defContext._graphics.getTextRect(e,t,i,r,n,s,a,o);break}u.width++;return u}},invalidateElement:function(e){if(!e._dom){var t=e._elementContext;if(t){t.invalidate(e);this._defContext._dirty=true}else{t=e._context||this._defContext;t.invalidate(e)}}if(!this._drawing&&!this._updateRequested){window.requestAnimationFrame(this._containerRender);this._updateRequested=true}},validateElement:function(e){},scroll:function(e,t,i){this.$$_render(_getTimer(),e,t,i)},resetSize:function(e,t){var i=this._container.clientWidth,r=this._container.clientHeight;if(e||(!t||i>0&&r>0)&&(this._width!=i||this._height!=r)){this._width=i;this._height=r;if(this._defContext){this._canvas.width=i*_DPPX;this._canvas.height=r*_DPPX;this._defContext.resize(i,r);if(this._contexts){for(var n=0;n<this._contexts.length;n++){this._contexts[n].resize(i,r)}}}else{}this.invalidateLayout();(_isIE||_isFirefox||_isSafari)&&this.$$_render()}},isInvalidSize:function(e){var t=this._container;return!e&&(t.clientWidth==0||t.clientHeight==0)||this._width!=t.clientWidth||this._height!=t.clientHeight},adjustSize:function(e,t){e=isNaN(e)?1e3:Math.max(0,parseInt(e));t=isNaN(t)?50:Math.max(0,parseInt(t));var i=function(){var e=this._container;_dlog("### ADJSUT GRID SIZE ("+e.clientWidth+", "+e.clientHeight+"), ("+this._width+", "+this._height+") at ("+this.$_adjusting+", "+this.$_adjustDelay+")");if(this.isInvalidSize()){this.resetSize(false,true)}if(this.$_adjusting>0&&this.isInvalidSize()){this.$_adjustDelay=this.$_adjustDelay>0?t:20;this.$_adjusting-=this.$_adjustDelay;setTimeout(i,this.$_adjustDelay)}else{this.$_adjusting=0;this.$_adjustDelay=0}}.bind(this);this.resetSize(false,true);if(this.isInvalidSize()){var r=isNaN(this.$_adjusting)||this.$_adjusting<=0;if(r){this.$_adjusting=e||1e3;this.$_adjsutDelay=0;setTimeout(i)}}},_createRootElement:function(e){if(e){var t=new RootElement(e,"root",this);this._container.appendChild(t._dom);return t}else{return new RootElement(false,"root",this,this._defContext)}},_createFeedbackRoot:function(e){if(e){var t=new RootLayerElement(e,"feedbackRoot",this);this._container.appendChild(t._dom);return t}else{return new RootLayerElement(false,"feedbackRoot",this,this._defContext)}},$_validateChildren:function(e){var t=e._elements;if(t){for(var i=t.length;i--;){var r=t[i];r._dirty=r._nodraw=false;this.$_validateChildren(r)}}},_setForceValidation:function(e){this._forceValidation=e},_doLayout:function(e){},_doPrepareRender:function(e){},_beforeRender:function(e){},_afterRender:function(){},_doRender:function(e){var t=this._defContext._graphics;if(this._defContext._dirty){this._drawElement(this._rootElement,null,this._invalidated||this._forceValidation)}if(this._contexts){for(var i=0,r=this._contexts.length;i<r;i++){if(this._contexts[i]._dirty){this._drawElement(this._rootElement,this._contexts[i],true)}}}if(this._defContext._dirty){this._drawElement(this._feedbackRoot,null,true)}this.$_validateChildren(this._rootElement);this.$_validateChildren(this._feedbackRoot);this._doDrawBorder(t,e)},_doRenderHtml:function(e){this._drawElementHtml(this._rootElement,this._invalidated||this._forceValidation);this._drawElementHtml(this._feedbackRoot,this._invalidated||this._forceValidation);this.$_validateChildren(this._rootElement);this.$_validateChildren(this._feedbackRoot);this._doDrawBorderHtml(e)},_doDrawBorder:function(e,t){},_doDrawBorderHtml:function(e){},_drawElement:function(e,t,i){if(e._nodraw){return}var r,n,s,a;var o=e._elementContext;var l=t?t._graphics:this._defContext._graphics;var h=e.x();var u=e.y();l.save();l.translate(h,u);if(e._rotation!=0){l.rotate(e._rotation)}if(o&&!t){var c=Math.max(0,Math.min(this._width,e.width()));var d=Math.max(0,Math.min(this._height,e.height()));var f=c*_DPPX;var _=d*_DPPX;var g=e.contextOffsetX();var m=e.contextOffsetY();var p=o._graphics;o.resize(c,d);if(!o._opaque){if(this._invalidated){a=e.boundsByContainer();o.saveBack(this._defContext._canvas,a)}else if(f>0&&_>0){l.clear(0,0,f,_);if(o._backBuff){l.drawImage(o._backBuff,0,0,f,_,0,0,c,d)}}}if(o.isDirty()){p.save();try{p.scale(_DPPX,_DPPX);if(!o._opaque&&c>0&&d>0){p.clear(0,0,c,d)}p.translate(-h-g,-u-m);this._drawContextedElement(e,p,i)}finally{p.restore();o._dirty=false}}e.clip(l);l.save();try{l.translate(g,m);if(f>0&&_>0){l.drawImage(o._canvas,0,0,f,_,0,0,c,d)}}finally{l.restore()}}else{var v=e._mask;if(v){if(v instanceof UIElement){v._doDraw(l);l.clip()}else if(v instanceof Rectangle){l.clipRect(v)}}else{e.clip(l)}l.setAlpha(e._alpha);if(e._context==t&&(i||e._dirty)){e._graphics=l;e.draw(l,!this._invalidated)}var y=e._elements;if(y){for(r=0,n=y.length;r<n;r++){s=y[r];if(s._visible){this._drawElement(s,t,i)}}}}l.restore()},_drawContextedElement:function(e,t,i){var r,n,s,a;{t.save();t.translate(e.x(),e.y());if(e._mask){if(e._mask instanceof UIElement){e._mask._doDraw(t);t.clip()}else if(e._mask instanceof Rectangle){t.clipRect(e._mask)}}else{e.clip(t)}t.setAlpha(e._alpha);if(i||e._dirty){e._graphics=t;e.draw(t,e._elementContext._opaque&&!this._invalidated)}a=e._elements;if(a){for(r=0,n=a.length;r<n;r++){s=a[r];if(s._visible){this._drawContextedElement(s,t,i)}}}t.restore()}},_drawElementHtml:function(e,t){var i,r,n;if(t||e._dirty){e.drawHtml()}for(i=0,r=e.childCount();i<r;i++){n=e.getChild(i);if(n.visible()){if(n._dom instanceof SvgSprite){n._dom._singleton?this._drawElementSvgSingle(n,t):this._drawElementSvg(n,t)}else{this._drawElementHtml(n,t)}}}},_drawElementSvg:function(e,t){var i,r,n,s,a,o;if(t||e._dirty){i=e.$_svgElt=_document.createElementNS(SVGNS,"g");r=_document.createElementNS(SVGNS,"defs");e._parent.$_svgElt.appendChild(e.$_svgElt,r);i.setAttributeNS(null,"transform","translate("+e._x+","+e._y+")");n=new SvgGraphics(this._dom,r);n.renderOpen(e.$_svgElt);e.drawSvg(n)}for(s=0,a=e.childCount();s<a;s++){o=e.getChild(s);if(o.visible()){this._drawElementSvg(o,t)}}},_drawElementSvgSingle:function(e,t){var i,r,n,s,a,o;if(t||e._dirty){i=e.$_svgElt;if(i){Dom.clearChildren(i)}i=e.$_svgElt=_document.createElementNS(SVGNS,"g");r=null;e.$_g=new SvgGraphics(this._dom,r);e._parent.$_svgElt.appendChild(e.$_svgElt);i.setAttributeNS(null,"transform","translate("+e._x+","+e._y+")");n=e.$_g;e.clip(n);n.renderOpen(i);Dom.clearChildren(i);e.drawSvg(n)}for(s=0,a=e.childCount();s<a;s++){o=e.getChild(s);if(o.visible()){this._drawElementSvgSingle(o,t)}}},$_clearRenderTotals:function(){$$_layout_total=$$_render_total=0},$_getLayoutTotal:function(){return $$_layout_total},$_getRenderTotal:function(){return $$_render_total},$$_render:function(e,t,i,r){var n=$_debug?_getTimer():undefined;var s=this._width;var a=this._height;var o=new Rectangle(0,0,s,a);var l,h;if(!(s>0&&a>0)){return}this._layoutChildren(o);if($_debug){_dlog("rendering["+ ++this._rendered+"] at "+e);n=getTimer()}o=new Rectangle(0,0,s,a);if(this._layoutNeeded){this._layoutNeeded=false;this._doLayout(o);if($_debug){$$_layout_total+=n=_getTimer()-n;_dlog("## layouted in ["+this._rendered+", "+n+"]")}}else{this._doPrepareRender(o)}if($_debug){n=_getTimer()}if(!this._defContext){return}if(this._invalidated){this._defContext._dirty=true;if(this._contexts){for(l=0,h=this._contexts.length;l<h;l++){this._contexts[l]._dirty=true}}}this._defContext.prepare(t,i,r,this._invalidated);if(this._contexts){for(l=0;l<this._contexts.length;l++){this._contexts[l].prepare(null,0,0,this._contexts[l]._dirty)}}try{$_validated=0;o=new Rectangle(0,0,s,a);this._beforeRender(o);this._doRender(o);this._afterRender();if(s>0&&a>0){s*=_DPPX;a*=_DPPX;this._ctx.clearRect(0,0,s,a);this._ctx.drawImage(this._defContext._canvas,0,0,s,a,0,0,s,a);if(this._contexts){for(l=0;l<this._contexts.length;l++){this._ctx.drawImage(this._contexts[l]._canvas,0,0,s,a,0,0,s,a)}}}}finally{if(this._contexts){for(l=0;l<this._contexts.length;l++){this._contexts[l].restore()}}this._defContext.restore()}if($_debug){$$_render_total+=n=_getTimer()-n;_dlog("rendered elements["+$_validated+"] in ["+n+"]")}for(l=0,h=this._children.length;l<h;l++){var u=this._children[l];if(u._visible&&u._width>0&&u._height>0){u.resize();u.layoutContent();if(u._dirty){u.draw()}this._ctx.drawImage(u._canvas,0,0,u._width,u._height,u._x,u._y,u._width,u._height)}}},$$_renderHtml:function(e,t,i,r){var n=$_debug?_getTimer():undefined;var s=this._width;var a=this._height;var o;this._layoutChildren(new Rectangle(0,0,s,a));this._drawing=true;try{if($_debug){trace("rendering["+ ++this._rendered+"] at "+e);n=getTimer()}if(this._layoutNeeded){this._layoutNeeded=false;trace("layout...");this._doLayout(new Rectangle(0,0,s,a));if($_debug){$$_layout_total+=n=_getTimer()-n;_dlog("## layouted in ["+this._rendered+", "+n+"]")}}if($_debug){n=getTimer()}$_validated=0;var l=new Rectangle(0,0,s,a);this._beforeRender(l);this._doRenderHtml(l);this._afterRender();if($_debug){$$_render_total+=n=_getTimer()-n;_dlog("rendered elements["+$_validated+"] in ["+n+"]")}}finally{this._drawing=false}},_resizeHandler:function(e){this.resetSize()}});var UIElement=defineClass("UIElement",EventAware,{init:function(e,t){this._super();this._name=t;this._parent=null;this._elements=null;this._dirty=false;this._mouseEnabled=true;this._hovered=false;this._mask=null;this._nodraw=false;if(e){if(e instanceof SvgSprite){this._dom=e}else{this._dom=_document.createElement("div");this._dom.$_owner=this;this._dom.$_name=t;this._css=this._dom.style;this._css.boxSizing="border-box";this._css.position="absolute";this._css.padding="0px";this._css.margin="0px";this._css["-webkit-print-color-adjust"]="exact"}}else{this._context=null;this._graphics=null}},x:0,y:0,width:0,height:0,rotation:0,visible:true,alpha:1,clickable:false,renderCallback:null,right:function(){return this._x+this._width},bottom:function(){return this._y+this._height},setWidth:function(e){e=Math.max(0,e);if(e!=this._width){this._width=e;this.invalidate()}return this},setHeight:function(e){e=Math.max(0,e);if(e!=this._height){this._height=e;this.invalidate()}return this},setVisible:function(e){if(e!=this._visible){this._visible=e;this.invalidate(true);if(this._css){this._css.display=e?"block":"none"}else{}}return this},name:function(){return this._name},setName:function(e){this._name=e},container:function(){return this._parent&&this._parent.container()},parent:function(){return this._parent},childCount:function(){return this._elements?this._elements.length:0},count:function(){return this._elements?this._elements.length:0},visibleCount:function(){var e=this._elements;var t=0;if(e){for(var i=e.length;i--;){if(e[i]._visible)t++}}return t},isSingleton:function(){return this._parent&&this._parent.childCount()==1},position:function(){return{x:this._x,y:this._y}},bounds:function(){return new Rectangle(this._x,this._y,this._width,this._height)},clientRect:function(){return new Rectangle(0,0,this._width,this._height)},mouseX:function(){var e=this.container();if(e){var t=e._currentX;var i=this;while(i&&i!==UNDEFINED){t-=i._x;i=i._parent}return t}else{return NaN}},mouseY:function(){var e=this.container();if(e){var t=e._currentY;var i=this;while(i&&i!==UNDEFINED){t-=i._y;i=i._parent}return t}else{return NaN}},mask:function(){return this._mask},setMask:function(e){this._mask=e?e.clone():null},isLayer:function(){return false},setMouseEnabled:function(e){this._mouseEnabled=e},canHover:function(){return true},isHovered:function(){return this._hovered},hovered:function(){return this._hovered},setHovered:function(e){if(e!=this._hovered){this._hovered=e;if(this._hoveredChanged){this._hoveredChanged()}}},contextOffsetX:function(){return 0},contextOffsetY:function(){return 0},scrollLeft:function(){return this._dom?this._dom.scrollLeft:0},scrollTop:function(){return this._dom?this._dom.scrollTop:0},visibleInContainer:function(){var e=this;while(e){if(!e._visible)return false;e=e._parent}return true},setElementContext:function(e,t){t=arguments.length>1?t:true;function i(e){for(var t=e.childCount();t--;){e._elements[t]._elementContext=e._elementContext;i(e._elements[t])}}if(!e!=!this._elementContext){if(e){this._elementContext=new CanvasContext("elementContext",t)}else{this._elementContext=undefined}i(this)}},getChildren:function(){return this._elements?this._elements.concat():null},getChild:function(e){return this._elements?this._elements[e]:null},getChildIndex:function(e){return this._elements?this._elements.indexOf(e):-1},contains:function(e){return this._elements?this._elements.indexOf(e)>=0:false},getVisibleChild:function(e){var t=this._elements;if(t){var i=0;for(var r=0,n=t.length;r<n;r++){if(t[r]._visible){if(i++==e){return t[r]}}}}return null},getVisibleChildren:function(){var e=this._elements;if(e){var t=[];for(var i=0,r=e.length;i<r;i++){if(e[i]._visible){t.push(e[i])}}return t}return null},addChild:function(e,t){this.$_insertChild(-1,e,t);return e},$_setElementContext:function(e){this._elementContext=e;if(this._elements){for(var t=this._elements.length;t--;){this._elements[t].$_setElementContext(e)}}},insertChild:function(e,t,i){this.$_insertChild(e,t,i);return t},$_insertChild:function(e,t,i){if(t instanceof UIElement&&!this.contains(t)){if(!this._elements){this._elements=[]}var r=this._dom;if(e<0){if(r){if(r instanceof SvgSprite||t._dom instanceof SvgSprite){}else{r.appendChild(t._dom)}}else if(this._elementContext){t.$_setElementContext(this._elementContext)}else{t._context=i}this._elements.push(t)}else{if(r){if(r instanceof SvgSprite||this._dom instanceof SvgSprite){}else{this._elements.length>e?r.insertBefore(t._dom,this._elements[e]._dom):this._dom.appendChild(t._dom)}}else if(this._elementContext){t._elementContext=this._elementContext}else{t._context=i}this._elements.splice(e,0,t)}t._parent=this;t.$_attached(this);return true}return false},addChildren:function(e,t){if(_isArray(e)){for(var i=0,r=e.length;i<r;i++){this.$_insertChild(-1,e[i],t)}}},insertChildren:function(e,t,i){if(_isArray(t)){for(var r=0,n=t.length;r<n;r++){this.$_insertChild(e,t[r],i)&&e++}}},addElement:function(e,t){return this.addChild(e,t)},insertElement:function(e,t,i){return this.insertChild(e,t,i)},removeChild:function(e){if(e&&this._elements){var t=this._elements.indexOf(e);if(t>=0){return this.removeChildAt(t)}}return null},removeElement:function(e){return this.removeChild(e)},removeChildAt:function(e){if(e>=0&&e<this.childCount()){var t=this._elements[e];this._elements.splice(e,1);if(t._dom){if(this._dom instanceof SvgSprite){}else{this._dom.removeChild(t._dom)}}else{t._context=null}t._parent=null;t._dirty=false;t.$_detached(this);return t}return null},removeElementAt:function(e){return this.removeChildAt(e)},clear:function(){var e,t=this._dom,i=this._elements,r=i?i.length:0;if(r>0){for(e=0;e<r;e++){i[e]._parent=null;i[e].$_detached(this)}if(t){if(this._dom instanceof SvgSprite){}else{for(e=0;e<r;e++){t.removeChild(i[e]._dom)}}}this._elements=[];this.invalidate()}},hideAll:function(){var e=this._elements;var t=e?e.length:0;var i;if(this._dom){for(i=0;i<t;i++){e[i].setVisible(false)}}else{for(i=0;i<t;i++){e[i]._visible=false}}},setTool:function(e){var t=this._elements;var i=t?t.length:0;var r;if(e){this.$_tool=true;for(r=0;r<i;r++){t[r].setTool(true)}}else if(this.$_tool){this.$_tool=false;for(r=0;r<i;r++){t[r].setTool(false)}}},invalidate:function(e,t){if(e||!this._dirty){var i=this.container();if(i){i.invalidateElement(this);this._dirty=true}}if(t){var r=this._elements;if(r){for(var n=r.length;n--;){r[n].invalidate(e,true)}}}},validate:function(){if(this._dirty){this._dirty=false;var e=this.container();if(e){e.validateElement(this)}}},invalidateLayout:function(){var e=this.container();if(e){e.invalidateLayout()}},clip:function(e){},getBounds:function(e){if(!e){return new Rectangle(this._x,this._y,this._width,this._height)}else{return e.set(this._x,this._y,this._width,this._height)}},getClientRect:function(e){if(!e){return new Rectangle(0,0,this._width,this._height)}else{return e.set(0,0,this._width,this._height)}},containsInBounds:function(e,t){return e>=this._x&&e<this._x+this._width&&t>=this._y&&t<this._y+this._height},containsInClient:function(e,t){return e>=0&&e<this._width&&t>=0&&t<this._height},parentToElement:function(e,t,i){var r=this;while(r&&r!=e){t-=r._x;i-=r._y;r=r._parent}return{x:t,y:i}},translateBy:function(e,t){var i=e;if(!t){t=new Rectangle(0,0,this._width,this._height)}while(i&&i!==this){t.x-=i._x;t.y-=i._y;i=i._parent}return t},topBy:function(e,t){var i=this._y+t,r=this._parent;while(r&&r!==e){i+=r._y;r=r._parent}return i},boundsBy:function(e,t){var i=this._x,r=this._y,n=this._parent;if(t){i+=t.x;r+=t.y}while(n&&n!==e){i+=n._x;r+=n._y;n=n._parent}return t?new Rectangle(i,r,t.width,t.height):new Rectangle(i,r,this._width,this._height)},boundsByContainer:function(e){var t=this._x,i=this._y,r=this._parent;if(e){t+=e.x;i+=e.y}while(r&&r._x!==undefined){t+=r._x;i+=r._y;r=r._parent}return e?new Rectangle(t,i,e.width,e.height):new Rectangle(t,i,this._width,this._height)},pointByContainer:function(e){var t=this;e=e||{x:0,y:0};do{e.x+=t._x;e.y+=t._y;t=t._parent}while(t&&t._x!==undefined);return e},boundsByScreen:function(e){e=this.boundsByContainer(e);e=this.container().toScreen(e);return e},pointByScreen:function(e){var t=e?new Rectangle(e.x,e.y):null;t=this.boundsByScreen(t);return{x:t.x,y:t.y}},containerToElement:function(e,t,i){var r=this;while(r){e-=r._x;t-=r._y;r=r._parent}if(i){i.x=e;i.y=t;return i}else{return{x:e,y:t}}},clientRectByChild:function(e,t){var i=e;t=this.getClientRect(t);do{t.x-=i.x();t.y-=i.y();i=i._parent}while(i!=this);return t},move:function(e,t){this.setX(e);this.setY(t)},setPosition:function(e,t){this.setX(e);this.setY(t)},resize:function(e,t){this.setWidth(e);this.setHeight(t)},setSize:function(e,t){this.setWidth(e);this.setHeight(t)},setBounds:function(e,t,i,r){this.setX(e);this.setY(t);this.setWidth(i);this.setHeight(r)},setBoundsI:function(e,t,i,r){this.setX(e>>0);this.setY(t>>0);this.setWidth(i>>0);this.setHeight(r>>0)},setBoundsHtml:function(e,t,i,r){var n=this._css;this._x=e;this._y=t;this._width=i;this._height=r;n.left=e+"px";n.top=t+"px";n.width=i+"px";n.height=r+"px"},setRect:function(e){this.setX(e.x);this.setY(e.y);this.setWidth(e.width);this.setHeight(e.height)},setRectI:function(e){this.setX(_floor(e.x));this.setY(_floor(e.y));this.setWidth(_floor(e.width));this.setHeight(_floor(e.height))},draw:function(e,t){this._dirty=false;this._renderCallback?this._renderCallback(e):this._doDraw(e,t);$_validated++},drawHtml:function(){this._dirty=false;this._css.left=this._x+"px";this._css.top=this._y+"px";this._css.width=this._width+"px";this._css.height=this._height+"px";this._doClearHtml();this._doDrawHtml();$_validated++},drawSvg:function(e){this._dirty=false;this._renderCallback?this._renderCallback(e):this._doDrawSvg(e);$_validated++},moveDom:function(){this._css.left=this._x+"px";this._css.top=this._y+"px";this._css.width=this._width+"px";this._css.height=this._height+"px"},hitTest:function(e,t){return e>=0&&e<this._width&&t>=0&&t<this._height},containerToLocal:function(e){var t=e.x,i=e.y,r=this;while(r){t-=r._x;i-=r._y;r=r._parent}return{x:t,y:i}},localToContainer:function(e){var t=e.x,i=e.y,r=this;while(r){t+=r._x;i+=r._y;r=r._parent}return{x:t,y:i}},findChildAt:function(e,t,i){var r,n,s,a,o,l=this._elements,h=l?l.length:0;if(h>0){for(r=h-1;r>=0;r--){n=l[r];if(n.visible()){s=e-n._x;a=t-n._y;if(i||n._mouseEnabled){if(n.isLayer()||n.hitTest(s,a)){o=n.findChildAt(s,a,i);if(o){return o}if(!n.isLayer()&&n._mouseEnabled){return n}}}}}}return null},getParentAs:function(e){var t=this;while(t){if(t instanceof e){return t}t=t._parent}return null},isAncestorOf:function(e){var t=e;if(t){do{if(t===this)return true}while(t=t.parent())}return false},propertyChanged:function(e,t){this.invalidate()},$_attached:function(e){this._doAttached(e)},_doAttached:function(e){},$_detached:function(e){this._doDetached(e)},_doDetached:function(e){},_doDraw:function(e,t){},_doClearHtml:function(){},_doDrawHtml:function(){},_doDrawSvg:function(e){this._doDraw(e,false)},_hoveredChanged:function(){},$_setCssFill:function(e){if(_norgba){if(e){e.applyToCss(this._css)}else{this._css.background="";this._css.filter=""}}else{if(e instanceof LinearGradient){e.applyToCss(this._css)}else{this._css.background=e?e.css():"";this._css.filter=""}}},$_getGraphics:function(e,t,i){var r=this._svg;if(!r){r=this._svg=new SvgSprite(null,this.container());if(i){this._dom.insertBefore(r._svg,i)}else{this._dom.appendChild(r._svg)}}r._svg.style.visibility="visible";return r.getGraphics(e,t)}},{addChild:function(e,t){e.addChild(t)}});var RootElement=defineClass("RootElement",UIElement,{init:function(e,t,i,r){this._super(e,t);this._container=i;this._context=r},container:function(){return this._container}});var RootLayerElement=defineClass("RootLayerElement",UIElement,{init:function(e,t,i,r){this._super(e,t);this._container=i;this._context=r},container:function(){return this._container},isLayer:function(){return true}});var MaskElement=defineClass("MaskElement",UIElement,{init:function(e,t,i){this._super(false,e);this._target=t;this._render=i},_doDraw:function(e){if(this._render){this._render(e,this._target)}}});var LayerElement=defineClass("LayerElement",UIElement,{init:function(e,t,i){this._super(e,t);if(e){if(this._css){this._css.pointerEvents="none"}}else{this._clip=i;this._drawRect=null}},isLayer:function(){return true},clip:function(e){if(this._clip){var t=this._drawRect=this._drawRect||new Rectangle;this.getClientRect(t);e.clipRect(t)}}});var GraphicElement=defineClass("LayerElement",UIElement,{init:function(){this._super(true);if(this._css){this._css.pointerEvents="none"}},$_getGraphics:function(e,t){var i=this._svg;if(!i){i=this._svg=new SvgSprite(this,this.container())}return i.getGraphics(e,t)}});var $$_fileloc=$$_locproto.substr(0,4);var Keys=_enum("Keys",{BACK:8,TAB:9,ENTER:13,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,0:48,F2:113,F3:114,F4:115,A:65,C:67,D:68,I:73,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,QUOT:222});var Cursor=_enum("Cursor",{DEFAUT:"default",AUTO:"auto",POINTER:"pointer",WAIT:"wait",MOVE:"move",COL_RESIZE:"col-resize",ROW_RESIZE:"row-resize",CROSSHAIR:"crosshair",HORZ_RESIZE:"ew-resize",VERT_RESIZE:"ns-resize",NESW_RESIZE:"nesw-resize",NWSE_RESIZE:"nwse-resize",NO_DROP:"no-drop",NOT_ALLOWED:"not-allowed",GRAB:"grab",GRABBING:"grabbing"});var _touchToOffset=function(e,t){if(!t){alert("no touch");return}if(!e){alert("no container");return}if(!e._canvas){alert("no canvas");return}var i=e._canvas.getBoundingClientRect();t.x=t.pageX-i.left;t.y=t.pageY-i.top;return t};var TouchManager=defineClass("TouchManager",null,{init:function(e){this._super();this._container=e},touchStart:function(e){return false},touchMove:function(e){return false},touchEnd:function(e){},touchCancel:function(e){},_toOffset:function(e){return _touchToOffset(this._container,e)}});var DRAG_THRESHOLD=3;var VisualTool=defineClass("VisualTool",null,{init:function(e,t){this._super();this._owner=e;this._name=t;this._dragTracker=null;this._clickX=0;this._clickY=0;this._currX=0;this._currY=0;this._mousePressed=false;this._mousePressing=false},dragTracker:null,owner:function(){return this._owner},setDragTracker:function(e){if(e!==this._dragTracker){if(this._dragTracker){this._dragTracker.deactivate()}this._dragTracker=e;if(this._dragTracker){this._dragTracker.activate()}}},isDragging:function(){return this._dragTracker&&this._dragTracker.isDragging()},clickX:function(){return this._clickX},clickY:function(){return this._clickY},currX:function(){return this._currX},currY:function(){return this._currY},isEditing:function(){return false},touchManager:function(){return null},setMousePressing:function(){this._mousePressing=true},mousePressed:function(){return this._mousePressed},mousePressing:function(){return this._mousePressing},activate:function(){this._doActivate()},deactivate:function(){this._doDeactivate()},keyDown:function(e,t,i,r){var n=this._doKeyDown(e,t,i,r);return n},keyUp:function(e,t,i,r){return this._doKeyUp(e,t,i,r)},click:function(e){this._doClick(e.mouseX,e.mouseY)},dblclick:function(e){this._doDblClick(e.mouseX,e.mouseY)},mouseDown:function(e){this._mousePressed=true;this._mousePressing=false;var t=this._currX=this._clickX=e.mouseX;var i=this._currY=this._clickY=e.mouseY;if(this.isDragging()){this._stopDragTracker(t,i,false);this.setDragTracker(null)}this._doMouseDown(e.mouseX,e.mouseY,e.ctrlKey,e.shiftKey,e.button,_isMac&&e.metaKey)},mouseMove:function(e){var t=this._currX=e.mouseX;var i=this._currY=e.mouseY;var r=this.dragTracker();var n;if(r){if(r.isDragging()){if(!("$hasNotButtons"in VisualTool)){VisualTool.$hasNotButtons=_ieOld||_ieTen||_isSafari}if(VisualTool.$hasNotButtons&&e.button==0||e.buttons>0){if(!r.drag(t,i)){n=r.getNextRequest(t,i);if(n){this._stopDragTracker(t,i,true);this.setDragTracker(this._getDragTracker(n));this._startDragTracker(t,i)}}}else{this._stopDragTracker(t,i,true)}}else if(Math.abs(t-this._clickX)>=DRAG_THRESHOLD||Math.abs(i-this._clickY)>=DRAG_THRESHOLD){this._startDragTracker(t,i)}else{this._doMouseMove(t,i)}}else{this._doMouseMove(t,i,e.ctrlKey,e.shiftKey,_isMac&&e.metaKey)}},mouseUp:function(e){var t=this._currX=e.mouseX,i=this._currY=e.mouseY;try{if(this.isDragging()){var r=this._stopDragTracker(t,i,false)}else{this._doMouseUp(t,i,e)}}finally{this._mousePressed=this._mousePressing=false}},mouseEnter:function(e){this._doMouseEnter(e.mouseX,e.mouseY)},mouseLeave:function(e){this._doMouseLeave(e.mouseX,e.mouseY,e.type)},mouseOver:function(e){this._doMouseOver(e.mouseX,e.mouseY)},mouseOutside:function(){this._doMouseOutside()},mouseWheel:function(e){return this._doMouseWheel(e.mouseX,e.mouseY,e.wheelDelta,e.wheelDelta)},touchStart:function(e){return this.touchManager()?this.touchManager().touchStart(e):this._doTouchStart(e)},touchMove:function(e){return this.touchManager()?this.touchManager().touchMove(e):this._doTouchMove(e)},touchEnd:function(e){this.touchManager()?this.touchManager().touchEnd(e):this._doTouchEnd(e)},touchCancel:function(e){this.touchManager()?this.touchManager().touchCancel(e):this._doTouchCancel(e)},findElementAt:function(e,t,i){return this._owner.findElementAt(e,t,i)},setFocus:function(){return this._doSetFocus()},_doActivate:function(){},_doDeactivate:function(){},_doKeyDown:function(e,t,i){return false},_doKeyUp:function(e,t,i){return false},_doClick:function(e,t){},_doDblClick:function(e,t){},_doMouseDown:function(e,t){},_doMouseMove:function(e,t){},_doMouseUp:function(e,t){},_doMouseEnter:function(e,t){},_doMouseLeave:function(e,t){},_doMouseOver:function(e,t){},_doMouseOutside:function(){},_doMouseWheel:function(e,t,i,r){return false},_doTouchStart:function(e){return false},_doTouchMove:function(e){return false},_doTouchEnd:function(e){},_doTouchCancel:function(e){},_startDragTracker:function(e,t){if(this._dragTracker){if(this._dragTracker.start(e,t)){this._doDragTrackerStarted(this._dragTracker)}else{this._dragTracker=null}}},_stopDragTracker:function(e,t,i){var r,n=false;if(this.isDragging()){r=this._dragTracker;if(i){r.cancel()}else{r.drop(e,t);n=true}this.setDragTracker(null);this._doDragTrackerFinished(r,i);if(r.needRedraw()){this._owner&&this._owner.invalidate&&this._owner.invalidate()}}return n},_doDragTrackerStarted:function(e){_console&&_trace("dragTracker started: "+e.name())},_doDragTrackerFinished:function(e,t){_console&&_trace("dragTracker stopped: "+e.name()+", "+(t?"canceled":"completed"))},_doSetFocus:function(){}});var EditRequest=defineClass("EditRequest",null,{init:function(){this._super()},cursor:function(){return Cursor.AUTO},source:function(){return null},isSelectable:function(){return false},isDblClickable:function(){return false}});var DragTracker=defineClass("DragTracker",null,{init:function(e,t,i,r){this._super();this._container=e;this._name=t;this._active=false;this._completed=false;this._dragging=false;this._startX=i;this._startY=r;this._currentX=0;this._currentY=0},cancelable:false,needRedraw:false,container:function(){return this._container},name:function(){return this._name},isActive:function(){return this._active},isDragging:function(){return this._dragging},isStartWhenCreated:function(){return false},isCompleted:function(){return this._completed},activate:function(){if(!this._active){this._doActivate();this._active=true}},deactivate:function(){if(this._active){this.cancel();this._doDeactivate();this._active=false}},start:function(e,t){this.cancel();if(this._active&&this._doStart(e,t)){this._currentX=this._startX=e;this._currentY=this._startY=t;this._dragging=true;this._completed=false;this._showFeedback(e,t);return true}return false},drag:function(e,t){if(this._dragging){this._currentX=e;this._currentY=t;if(this._doDrag(e,t)){this._moveFeedback(e,t);return true}}return false},cancel:function(){try{if(this._dragging){try{this._dragging=false;this._doCanceled()}finally{this._doEnded()}}}finally{this._hideFeedback()}},drop:function(e,t){try{if(this._dragging){try{this._currentX=e;this._currentY=t;this._dragging=false;if(this._canAccept(e,t)){this._doCompleted(e,t);this._completed=true}else{this._doCanceled(e,t)}}finally{this._doEnded()}}}finally{this._hideFeedback()}},getNextRequest:function(e,t){return null},startX:function(){return this._startX},startY:function(){return this._startY},currentX:function(){return this._currentX},currentY:function(){return this._currentY},offsetX:function(){return this._currentX-this._startX},offsetY:function(){return this._currentY-this._startY},_showFeedback:function(e,t){},_moveFeedback:function(e,t){},_hideFeedback:function(){},_doActivate:function(){_console&&_trace(this._name+" activated")},_doDeactivate:function(){_console&&_trace(this._name+" deactivated")},_doStart:function(e,t){return true},_doDrag:function(e,t){return true},_doCanceled:function(){},_canAccept:function(e,t){return true},_doCompleted:function(){},_doEnded:function(){},_findElementAt:function(e,t,i){return this._container.findElementAt(e,t,i)}});var ToolTipOptions=defineClass("ToolTipOptions",null,{init:function(e){this._super();e&&this.assign(e)},minWidth:0,maxWidth:0,lineBreak:true,message:null,visible:true,styles:null,delay:300,duration:5e3,animation:false,assignSimple:function(e){if(typeof e=="string"){this._message=e;if(this._message){this._visible=true}}else if(typeof e=="boolean"){this._visible=Boolean(e)}}});var ToolTipView=defineClass("ToolTipView",EventAware,{init:function(e){this._super();this._container=e;this._span=null;this._element=this._createElement();this._showing=false},show:function(e,t,i){this._showing=true;try{this.$_show(e,t,i)}finally{this._showing=false}},$_show:function(e,t,i){var r,n,s,a,o,l,h,u,c,d=document.body,f=this._container._popupOwner||document.documentElement,n=e.styles(),_=e.message();if(!_){return}r=this._element;if(!r){return}if(e.lineBreak()){_=_.replace($_linebrreg,"<br>")}s=this._span;r.innerHTML=_;a=r.style;a.position="absolute";a.overflow="hidden";a.zIndex=3001;a.background=(n&&n.background()||SolidBrush.WHITE).css();a.color=(n&&n.color()||SolidPen.BLACK).css();a.border=(n&&n.border()||SolidPen.DIMGRAY).css();a.borderRadius=(n?n.borderRadius():0)+"px";a.boxShadow=n?n.toCssShadow():"1px 1px 2px #555";a.font=(o=n&&n.font())?o.font:DEF_FONT;a.padding=n?n.paddings():0;a.maxWidth=e.maxWidth()>0?e.maxWidth()+"px":"";a.minWidth=e.minWidth()>0?e.minWidth()+"px":"";a.transition=this._showed&&e.animation()?"0.5s ease-in-out":"";f.appendChild(r);l=_getBrowserSize();if(d.scrollWidth>d.clientWidth){l.height-=18}if(d.scrollHeight>d.clientHeight){l.width-=18}h=Dom.getBounds(f);u=Dom.getBounds(this._container._container);c=Dom.getBounds(r);t+=u.left-h.left;if(t+h.left+c.width>l.width){t-=c.width}i+=u.top-h.top+21;if(i+h.top+c.height>l.height){i-=c.height+21}a.left=Math.max(h.left,t)+"px";a.top=Math.max(h.top,i)+"px";this._showed=true},hide:function(){var e=this._element;if(e&&e.parentNode){e.parentNode.removeChild(e);this._showed=false}},_createElement:function(){var e=_doc.createElement("div");e.style.pointerEvents="none";e.onkeydown=function(e){if(e.keyCode==27){this.hide()}}.bind(this);Dom.disableSelection(e);return e}});var ToolTipManager=defineClass("ToolTipManager",EventAware,{init:function(e){this._super();this._owner=e;this._container=e.container();this._showCallback=ToolTipManager.prototype.$_show.bind(this)},visible:function(){return this._active},target:null,force:false,$_show:function(e,t,i){if(this._target===t&&e.duration()>0){if(e&&e.visible()){var r,n;if(!this._tipView){this._tipView=new ToolTipView(this._container)}if(this._force){var s=t.$_svgElt.getBoundingClientRect();var a={clientX:s.x||s.left,clientY:s.y||s.top};var o=this._container.toOffset(a);r=o.mouseX;n=o.mouseY}else{r=this._owner.mouseX();n=this._owner.mouseY()}this._tipView.show(e,r,n);this._active=true;this._closeCallback=i;this._closeTimer&&clearInterval(this._closeTimer);this._closeTimer=setTimeout(function(){this.close()}.bind(this),e.duration())}}},show:function(e,t,i){if(this._showTimer!==undefined){clearTimeout(this._showTimer);this._showTimer=undefined}if(!this._active){this.close();e=e instanceof ToolTipOptions?e:e?new ToolTipOptions(e):null;if(e.delay()>0){this._showTimer=setTimeout(this._showCallback,e.delay(),e,t,i)}else{this._showTimer=undefined;this.$_show(e,t,i)}}else if(e.animation()){this.$_show(e,t,i)}},close:function(){if(this._closeTimer!==undefined){clearTimeout(this._closeTimer);this._timer=undefined}if(this._active){this._tipView&&this._tipView.hide();this._active=false;this._closeCallback&&this._closeCallback()}}});var SVGNS="http://www.w3.org/2000/svg";var XLNS="http://www.w3.org/1999/xlink";var SVG_ALIGN={left:"start",center:"middle",right:"end"};var SVG_VALIGN={top:"hanging",middle:"middle",bottom:"baseline"};var SVG_DY={top:"1em",middle:".5em",center:".5em",bottom:"0"};var SVG_DEF_FONT={font:"Verdana",size:12};var SvgGraphics=defineClass("SvgGraphics",null,{init:function(e,t){this._super();this._svg=e;this._defs=t;this._elt=e;this._transforms=[];this._trans=""},renderOpen:function(e){this._elt=e;return this},renderClose:function(e){if(e!==this._elt){throw new Error("Invalid render close")}this._elt=null;return this},save:function(){this._trans="";this._transforms.push(this._trans);return this},restore:function(){var e=this._transforms.length;this._transforms.splice(e-1,1);this._trans=e>0?this._transforms[e-1]:"";return this},translate:function(e,t){this._trans+="translate("+e+","+t+") ";return this},rotate:function(e){this._trans+="rotate("+e*180/Math.PI+") ";return this},rotateAt:function(e,t,i){this._trans+="rotate("+e*180/Math.PI+","+t+","+i+") ";return this},scale:function(e,t){this._trans+="scale("+e+","+t+")";return this},clear:function(){var e;while(e=this._elt.lastChild){this._elt.removeChild(e)}if(this._defs){this._elt===this._svg&&this._svg.appendChild(this._defs)}return this},clipRect:function(e){return this.clipBounds(e.x,e.y,e.width,e.height)},clipBounds:function(e,t,i,r){if(this._defs){var n="ld"+SvgGraphics.$_nextId++;var s=_document.createElementNS(SVGNS,"clipPath");s.setAttribute("id",n);var a=_document.createElementNS(SVGNS,"rect");a.x.baseVal.value=e;a.y.baseVal.value=t;a.width.baseVal.value=i;a.height.baseVal.value=r;s.appendChild(a);this._defs.appendChild(s)}return this},clipRoundRect:function(e,t,i,r,n,s){this.clipRect(e);return this},applyShadow:function(e){return this},$_applyShadow:function(e){},clearShadow:function(){return this},drawLine:function(e,t,i,r,n){if(e){var s=_document.createElementNS(SVGNS,"line");this._elt.appendChild(s);s.x1.baseVal.value=t;s.x2.baseVal.value=r;s.y1.baseVal.value=i;s.y2.baseVal.value=n;e.svg(s)}return this},drawHLine:function(e,t,i,r){if(e){var n=_document.createElementNS(SVGNS,"line");this._elt.appendChild(n);n.x1.baseVal.value=i;n.x2.baseVal.value=r;n.y1.baseVal.value=t;n.y2.baseVal.value=t;e.svg(n)}return this},drawVLine:function(e,t,i,r){if(e){var n=_document.createElementNS(SVGNS,"line");this._elt.appendChild(n);n.x1.baseVal.value=t;n.x2.baseVal.value=t;n.y1.baseVal.value=i;n.y2.baseVal.value=r;e.svg(n)}return this},drawLineI:function(e,t,i,r,n){if(e){var s=_document.createElementNS(SVGNS,"line");this._elt.appendChild(s);var a=e?e.width()%2/2:0;if(t==r){s.x1.baseVal.value=t+a;s.x2.baseVal.value=r+a;s.y1.baseVal.value=i;s.y2.baseVal.value=n}else if(i==n){s.x1.baseVal.value=t;s.x2.baseVal.value=r;s.y1.baseVal.value=i+a;s.y2.baseVal.value=n+a}e.svg(s)}return this},drawHLineI:function(e,t,i,r){if(e){var n=_document.createElementNS(SVGNS,"line");this._elt.appendChild(n);t+=e.width()%2/2;n.x1.baseVal.value=i;n.x2.baseVal.value=r;n.y1.baseVal.value=t;n.y2.baseVal.value=t;e.svg(n)}return this},drawVLineI:function(e,t,i,r){if(e){var n=_document.createElementNS(SVGNS,"line");this._elt.appendChild(n);t+=e.width()%2/2;n.x1.baseVal.value=t;n.x2.baseVal.value=t;n.y1.baseVal.value=i;n.y2.baseVal.value=r;e.svg(n)}return this},drawLines:function(e,t){if(e){var i=_document.createElementNS(SVGNS,"polyline");this._elt.appendChild(i);var r=[];var n;if(_isArray(t)&&t.length>=2){r.push(t[0].x+","+t[0].y);for(n=1;n<t.length;n++){r.push(t[n].x+","+t[n].y)}}else if(arguments.length>=5){r.push(arguments[1]+","+arguments[2]);for(n=3;n<arguments.length-1;n+=2){r.push(arguments[n]+","+arguments[n+1])}}i.setAttributeNS(null,"points",r.join(" "));i.style.fill="none";e.svg(i)}return this},drawLinesI:function(e,t){if(e){var i=_document.createElementNS(SVGNS,"polyline");this._elt.appendChild(i);var r=[];var n=e.width()%2/2;var s;if(_isArray(t)&&t.length>=2){r.push(t[0].x+n+","+(t[0].y+n));for(s=1;s<t.length;s++){r.push(t[s].x+n+","+(t[s].y+n))}}else if(arguments.length>=5){var a=[];var o;for(s=1,o=arguments.length;s<o;s++){a[s]=arguments[s]+n}r.push(a[1]+","+a[2]);for(s=3;s<o-1;s+=2){r.push(a[s]+","+a[s+1])}}i.setAttributeNS(null,"points",r.join(" "));i.style.fill="none";e.svg(i)}return this},drawQuadratic:function(e,t,i,r,n,s,a){if(e){var o=_document.createElementNS(SVGNS,"path");o.setAttributeNS(null,"d",["M",t,i,"Q",r,n,s,a].join(" "));this._elt.appendChild(o);o.style.fill="none";e&&e.svg(o)}return this},drawCurve:function(e,t){if(e){var i=this.$_getCurvedLinePath(t,0,t.length-1);if(i){var r=_document.createElementNS(SVGNS,"path");r.setAttributeNS(null,"d",i.join(" "));this._elt.appendChild(r);r.style.fill="none";e&&e.svg(r)}}return this},drawCurvedRange:function(e,t,i,r){if(i&&i.length>1&&r&&r.length>1&&(e||t)){var n=this.$_getCurvedLinePath(i,0,i.length-1,true);if(n){var s=r[r.length-1];n.push("L",s.x,s.y);var a=this.$_getCurvedLinePath(r,r.length-1,0,false);if(a){n=n.concat(a)}s=i[0];n.push("L",s.x,s.y);var o=_document.createElementNS(SVGNS,"path");o.setAttributeNS(null,"d",n.join(" "));this._elt.appendChild(o);t&&t.svg(o);e?e.svg(o):o.style.fill="none"}}return this},$_getCurvedLinePath:function(e,t,i,r){if(e&&i!=t&&e.length>Math.max(i)){var n=[];var s=t>i;var a=s?-1:1;var o=t;if(r||r===undefined){n.push("M",e[o].x,e[o].y)}if(Math.abs(i-t)==2){n.push("L",e[o+a].x,e[o+a].y);return n}var l=.25;var h={x:0,y:0};var u={x:0,y:0};var c={x:0,y:0};var d={x:e[o+a].x-e[o].x,y:e[o+a].y-e[o].y};var f={x:0,y:0};var _={x:0,y:0};var g={x:0,y:0};var m={x:0,y:0};var p=Math.sqrt(d.x*d.x+d.y*d.y);d.x/=p;d.y/=p;var v=e[o+a].x-e[o].x;var y=e[o].x;var S=e[o].y;for(o+=a;o!=i;o+=a){c.x=-d.x;c.y=-d.y;d.x=e[o+a].x-e[o].x;d.y=e[o+a].y-e[o].y;p=Math.sqrt(d.x*d.x+d.y*d.y);d.x/=p;d.y/=p;if(d.x<c.x){f.x=c.x-d.x;f.y=c.y-d.y}else{f.x=d.x-c.x;f.y=d.y-c.y}var C=Math.sqrt(f.x*f.x+f.y*f.y);f.x/=C;f.y/=C;if(c.y*d.y>=0)f={x:1,y:0};h.x=-f.x*v*l;h.y=-f.y*v*l;if(o==a+t){n.push("Q",e[o].x+h.x,e[o].y+h.y,e[o].x,e[o].y)}else{_.x=y+u.x;_.y=S+u.y;g.x=e[o].x+h.x;g.y=e[o].y+h.y;m.x=(_.x+g.x)/2;m.y=(_.y+g.y)/2;n.push("Q",_.x,_.y,m.x,m.y);n.push("Q",g.x,g.y,e[o].x,e[o].y)}v=e[o+a].x-e[o].x;u.x=f.x*v*l;u.y=f.y*v*l;y=e[o].x;S=e[o].y}n.push("Q",y+u.x,S+u.y,e[o].x,e[o].y);return n}return null},drawRect:function(e,t,i){if(!e&&!t)return;var r=_document.createElementNS(SVGNS,"rect");this._elt.appendChild(r);r.x.baseVal.value=i.x;r.y.baseVal.value=i.y;r.width.baseVal.value=i.width;r.height.baseVal.value=i.height;e?e.svg(r):r.style.fillOpacity=0;t&&t.svg(r);return this},drawRectI:function(e,t,i){if(!e&&!t)return;var r=t?t.width()%2/2:0;var n=_document.createElementNS(SVGNS,"rect");n.x.baseVal.value=i.x+r;n.y.baseVal.value=i.y+r;n.width.baseVal.value=i.width;n.height.baseVal.value=i.height;this._elt.appendChild(n);e?e.svg(n):n.style.fillOpacity=0;t&&t.svg(n);return this},drawBounds:function(e,t,i,r,n,s){if(!e&&!t)return;var a=_document.createElementNS(SVGNS,"rect");a.x.baseVal.value=i;a.y.baseVal.value=s<0?r+s:r;a.width.baseVal.value=n;a.height.baseVal.value=_abs(s);this._elt.appendChild(a);e?e.svg(a):a.style.fillOpacity=0;t&&t.svg(a);return this},drawBoundsI:function(e,t,i,r,n,s){if(!e&&!t)return;var a=t?t.width()%2/2:0;var o=_document.createElementNS(SVGNS,"rect");o.x.baseVal.value=i+a;o.y.baseVal.value=s<0?r+s+a:r+a;o.width.baseVal.value=n;o.height.baseVal.value=_abs(s);this._elt.appendChild(o);e?e.svg(o):o.style.fillOpacity=0;t&&t.svg(o);return this},drawRoundRectI:function(e,t,i,r,n,s,a,o){this.drawRectI(e,t,i);return this},drawCircle:function(e,t,i,r,n){var s=_document.createElementNS(SVGNS,"circle");s.cx.baseVal.value=i;s.cy.baseVal.value=r;s.r.baseVal.value=n;this._elt.appendChild(s);e?e.svg(s):s.style.fillOpacity=0;t&&t.svg(s);return this},drawRangedBounds:function(e,t,i,n,s,a,o,l){var h=new LinearGradient;h._colors=[e,t];h._ratios=[0,1];h._angle=l;this.drawRectI(h,i,r);return this},drawCircleBounds:function(e,t,i,r,n,s){var a=i+n/2;var o=r+s/2;var l=Math.min(n,s)/2;var h=_document.createElementNS(SVGNS,"circle");h.cx.baseVal.value=a;h.cy.baseVal.value=o;h.r.baseVal.value=l;this._elt.appendChild(h);e?e.svg(h):h.style.fillOpacity=0;t&&t.svg(h);return this},drawCircleRect:function(e,t,i){this.drawCircleBounds(e,t,i.x,i.y,i.width,i.height);return this},drawEllipse:function(e,t,i,r,n,s){var a=_document.createElementNS(SVGNS,"ellipse");var o=n/2;var l=s/2;a.cx.baseVal.value=i+o;a.cy.baseVal.value=r+l;a.rx.baseVal.value=o;a.ry.baseVal.value=l;this._elt.appendChild(a);e?e.svg(a):a.style.fillOpacity=0;t&&t.svg(a);return this},$_arcSector2:function(e,t,i,r,n,s,a){var o=[[t+r*Math.cos(s),i+r*Math.sin(s)],[t+r*Math.cos(a),i+r*Math.sin(a)],[t+n*Math.cos(a),i+n*Math.sin(a)],[t+n*Math.cos(s),i+n*Math.sin(s)]];var l=a-s;var h=l%(Math.PI*2)>Math.PI?1:0;var u=[];u.push("M",o[0][0],o[0][1]);u.push("A",r,r,0,h,1,o[1][0],o[1][1]);u.push("L",o[2][0],o[2][1]);u.push("A",n,n,0,h,0,o[3][0],o[3][1]);u.push("z");e.setAttributeNS(null,"d",u.join(" "))},$_arcSector:function(e,t,i,r,n,s){var a=[[t+r*Math.cos(n),i+r*Math.sin(n)],[t+r*Math.cos(s),i+r*Math.sin(s)]];var o=s-n;var l=o%(Math.PI*2)>Math.PI?1:0;var h=[];h.push("M",t,i);h.push("L",a[0][0],a[0][1]);h.push("A",r,r,0,l,1,a[1][0],a[1][1]);h.push("z");e.setAttributeNS(null,"d",h.join(" "))},drawDounut:function(e,t,i,r,n,s){var a=_document.createElementNS(SVGNS,"path");var o=n;var l=n-s;var h=[];h.push("M",i,r);h.push("m",-o,0);h.push("a",o,o,0,1,0,o*2,0);h.push("a",o,o,0,1,0,-o*2,0);h.push("z");h.push("M",i,r);h.push("m",-l,0);h.push("a",l,l,0,0,1,l*2,0);h.push("a",l,l,0,0,1,-l*2,0);h.push("z");a.setAttributeNS(null,"d",h.join(" "));this._elt.appendChild(a);e?e.svg(a):a.style.fillOpacity=0;t&&t.svg(a);return this},drawArcSector2:function(e,t,i,r,n,s,a,o,l,h,u,c){var d=_document.createElementNS(SVGNS,"path");l+=Math.PI*3/2+u;this.$_arcSector2(d,i,r,a,n,l,l+h);this._elt.appendChild(d);e?e.svg(d):d.style.fillOpacity=0;t&&t.svg(d);return this},drawArcSector:function(e,t,i,r,n,s,a,o,l,h){var u=_document.createElementNS(SVGNS,"path");a+=Math.PI*3/2+l;this.$_arcSector(u,i,r,n,a,a+o);this._elt.appendChild(u);e?e.svg(u):u.style.fillOpacity=0;t&&t.svg(u);return this},drawPolygon:function(e,t,i){var r=i.length;var n=new Array(r);for(var s=0;s<r;s++){var a=i[s].x+","+i[s].y;n[s]=a}var o=_document.createElementNS(SVGNS,"polygon");o.setAttributeNS(null,"points",n.join(" "));this._trans&&o.setAttributeNS(null,"transform",this._trans);this._elt.appendChild(o);e?e.svg(o):o.style.fillOpacity=0;t&&t.svg(o);return this},drawPolygonArray:function(e,t,i){var r=_int(i.length/2);var n=new Array(r);for(var s=0;s<r;s++){var a=i[s*2]+","+i[s*2+1];n[s]=a}var o=_document.createElementNS(SVGNS,"polygon");o.setAttributeNS(null,"points",n.join(" "));this._trans&&o.setAttributeNS(null,"transform",this._trans);this._elt.appendChild(o);e?e.svg(o):o.style.fillOpacity=0;t&&t.svg(o);return this},drawHoledPolygonArray:function(e,t,i,r){var n=_document.createElementNS(SVGNS,"path");var s=0,a=i.length,o=[];o.push("M",i[s++],i[s++]);while(s<a){o.push("L",i[s++],i[s++])}o.push("z");s=r.length-1;o.push("M",r[s-1],r[s]);s-=2;while(s>0){o.push("L",r[s-1],r[s]);s-=2}o.push("z");n.setAttributeNS(null,"d",o.join(" "));this._elt.appendChild(n);e?e.svg(n):n.style.fillOpacity=0;t&&t.svg(n);return this},drawText:function(e,t,i,r,n,s,a,o){var l=_document.createElementNS(SVGNS,"text");e=e||SVG_DEF_FONT;l.setAttributeNS(null,"y",n);l.setAttributeNS(null,"dy",SVG_DY[a||"top"]);l.setAttributeNS(null,"x",r);l.setAttributeNS(null,"text-anchor",SVG_ALIGN[s]);l.setAttributeNS(null,"font-family",e.font);l.setAttributeNS(null,"font-size",e.size);e.deco&&l.setAttributeNS(null,"text-decoration",e.deco);l.textContent=i;t&&t.svg(l);this._elt.appendChild(l);if(!isNaN(o)){l.setAttributeNS(null,"transform","rotate("+o*180/Math.PI+","+r+","+n+")")}return this},drawTextSh:function(e,t,i,r,n,s,a,o){var l,h;e=e||SVG_DEF_FONT;if(i){l=_document.createElementNS(SVGNS,"text");l.setAttributeNS(null,"y",s+i.vert);l.setAttributeNS(null,"dy",SVG_DY[o||"top"]);l.setAttributeNS(null,"x",n+i.horz);l.setAttributeNS(null,"text-anchor",SVG_ALIGN[a]);l.setAttributeNS(null,"font-family",e.font);l.setAttributeNS(null,"font-size",e.size);e.deco&&l.setAttributeNS(null,"text-decoration",e.deco);l.textContent=r;i.color.svg(l);this._elt.appendChild(l)}h=_document.createElementNS(SVGNS,"text");h.setAttributeNS(null,"y",s);h.setAttributeNS(null,"dy",SVG_DY[o||"top"]);h.setAttributeNS(null,"x",n);h.setAttributeNS(null,"text-anchor",SVG_ALIGN[a]);h.setAttributeNS(null,"font-size",e.size);e.deco&&h.setAttributeNS(null,"text-decoration",e.deco);h.textContent=r;t&&t.svg(h);this._elt.appendChild(h);return this},drawTextRect:function(e,t,i,r,n,s){this.drawText(e,t,i,r.x+r.width/2,r.y+r.height/2,n,s);return this},drawTextRectSh:function(e,t,i,r,n,s,a){this.drawTextSh(e,t,i,r,n.x+n.width/2,n.y+n.height/2,s,a);return this},drawTextBounds:function(e,t,i,r,n,s,a,o,l){this.drawText(e,t,i,r+s/2,n+a/2,o,l);return this},drawTextBoundsSh:function(e,t,i,r,n,s,a,o,l){this.drawTextSh(e,t,i,r+s/2,n+a/2,o,l);return this},drawTextRectA:function(e,t,i,r,n){this.drawTextBoundsA(e,t,i,r.x,r.y,r.width,r.height,n);return this},drawTextBoundsA:function(e,t,i,r,n,s,a,o){r+=s/2;n+=a/2;this.drawText(e,t,i,r,n,"center","middle",o);return this},drawTextRectExplicitSh:function(e,t,i,r,n,s){this.drawTextRectA(e,t,r,n,s);return this},drawTextBoundsExplicitA:function(e,t,i,r,n,s,a,o,l){this.drawTextBoundsA(e,t,r,n,s,a,o,l);return this},drawImage:function(e,t,i,r,n){var s=_document.createElementNS(SVGNS,"image");s.setAttributeNS(XLNS,"href",e.src);s.setAttributeNS(null,"preserveAspectRatio","none");s.setAttributeNS(null,"x",t);s.setAttributeNS(null,"y",i);if(r<0){r=0}if(n<0){n=0}s.setAttributeNS(null,"width",r);s.setAttributeNS(null,"height",n);this._elt.appendChild(s);return this},drawImageAlpha:function(e,t,i,r,n,s){var a=_document.createElementNS(SVGNS,"image");a.setAttributeNS(XLNS,"href",e.src);a.setAttributeNS(null,"preserveAspectRatio","none");a.setAttributeNS(null,"x",i);a.setAttributeNS(null,"y",r);if(n<0){n=0}if(s<0){s=0}a.setAttributeNS(null,"width",n);a.setAttributeNS(null,"height",s);a.setAttributeNS(null,"opacity",t);this._elt.appendChild(a);return this},drawImageI:function(e,t,i,r,n){var s=_document.createElementNS(SVGNS,"image");t=Math.floor(t);i=Math.floor(i);s.setAttributeNS(XLNS,"href",e.src);s.setAttributeNS(null,"preserveAspectRatio","none");s.setAttributeNS(null,"x",t);s.setAttributeNS(null,"y",i);if(r<0){r=0}if(n<0){n=0}s.setAttributeNS(null,"width",r);s.setAttributeNS(null,"height",n);this._elt.appendChild(s);return this},drawImageAlphaI:function(e,t,i,r,n,s){var a=_document.createElementNS(SVGNS,"image");i=Math.floor(i);r=Math.floor(r);a.setAttributeNS(XLNS,"href",e.src);a.setAttributeNS(null,"preserveAspectRatio","none");a.setAttributeNS(null,"x",i);a.setAttributeNS(null,"y",r);if(n<0){n=0}if(s<0){s=0}a.setAttributeNS(null,"width",n);a.setAttributeNS(null,"height",s);a.setAttributeNS(null,"opacity",t);this._elt.appendChild(a);return this},aL:function(e,t,i,r,n){this.drawImage(e,t,i,r,n);return this}},{$_nextId:1e4});var SvgSprite=defineClass("SvgSprite",null,{init:function(e,t,i){this._super();var r=this._svg=document.createElementNS(SVGNS,"svg");var n=document.createElementNS(SVGNS,"defs");r.appendChild(n);r.$_svgPool=t;this._singleton=i;if(i)this._defs=n;e&&e._dom.appendChild(r);var s=r.style;s.position="absolute";s.background="";s.pointerEvents="none";r.contentText=r.innerText="Your browser does not support HTML5 Svg.";this._width=this._height=0;this._graphics=new SvgGraphics(r,n)},setParent:function(e){e._dom.appendChild(this._svg)},setBounds:function(e,t,i,r){var n=this._svg;n.width=this._width=i;n.height=this._height=r;n.style.left=e+"px";n.style.top=t+"px";if(i<0){i=0}if(r<0){r=0}n.setAttributeNS(null,"width",i);n.setAttributeNS(null,"height",r)},getGraphics:function(e,t){e&&this._graphics.clear();t&&this.setBounds(t.x,t.y,t.width,t.height);return this._graphics},render:function(e){var t=this._svg;var i=this._graphics;i.renderOpen(t);i.clear();e(t,i,this._width,this._height);i.renderClose(t)},renderAdd:function(e){var t=this._svg;var i=this._graphics;i.renderOpen(t);e(t,i,this._width,this._height);i.renderClose(t)}});var SingleTouchTracker=defineClass("SingleTouchTracker",null,{init:function(){this._super()},start:function(e,t){},move:function(e,t){},stop:function(e,t){}});var $_TAP_THRESHOLD=4;var $_DOUBLE_TAP_THRESHOLD=300;var $_LONG_TAP_THRESHOLD=700;var $_SWIPE_THRESHOLD=20;var SingleTouchManager=defineClass("SingleTouchManager",TouchManager,{init:function(e){this._super(e);this._touchId=undefined;this._started=null;this._seconded=null;this._startX=NaN;this._startY=NaN;this._tapped=0;this._dragging=false;this._prevX=NaN;this._prevY=NaN;this._longTapTimer=undefined;this._tracker=null;this._events=[]},touchHandler:null,tapHandler:null,doubleTapHandler:null,longTapHandler:null,dragStartHandler:null,dragHandler:null,dragEndHandler:null,swipeHandler:null,touchStart:function(e){clearTimeout(this._longTapTimer);var t=e.changedTouches;if(t.length>0){var i=this._toOffset(t[0]);if(this._tracker){this._tracker.stop(i.x,i.y);this._tracker=null}this._touchId=i.identifier;this._dragging=false;if(this._touchHandler&&(this._tracker=this._touchHandler(i.x,i.y))){this._tracker.start(i.x,i.y);return true}if(this._tapped==0){this._started=getTimer();this._prevX=this._startX=i.x;this._prevY=this._startY=i.y}else{this._seconded=getTimer();this._prevX=i.x;this._prevY=i.y}this._events=[];this._events.push({x:i.x,y:i.y,t:e.timeStamp});this._longTapTimer=setTimeout(function(){if(this._longTapHandler&&this._longTapHandler(this._startX,this._startY)){this._touchId=undefined;this._tapped=0}}.bind(this),$_LONG_TAP_THRESHOLD)}else{alert("no touch ?")}return false},touchMove:function(e){var t=this.$_findTouch(e);if(t){if(this._tracker){this._tracker.move(t.x,t.y);return true}if(this._dragging){this._dragHandler&&this._dragHandler(this._prevX,this._prevY,t.x,t.y)}else if(Math.abs(this._prevX-t.x)>$_TAP_THRESHOLD||Math.abs(this._prevY-t.y)>$_TAP_THRESHOLD){clearTimeout(this._longTapTimer);this._tapped=0;this._dragging=true;this._dragStartHandler&&this._dragStartHandler(this._startX,this._startY,t.x,t.y)}this._prevX=t.x;this._prevY=t.y;this._events.push({x:t.x,y:t.y,t:e.timeStamp});if(this._events.length>30)this._events.splice(0,15);return true}return false},touchEnd:function(e){clearTimeout(this._longTapTimer);if(this._touchId===undefined){return}var t=this.$_findTouch(e);if(t){if(this._tracker){this._tracker.stop(t.x,t.y)}else if(this._dragging){this._touchId=undefined;this._tapped=0;this._swipeHandler&&this.$_checkSwipe();this._dragEndHandler&&this._dragEndHandler(t.x,t.y)}else if(this._tapped==0){this._tapped=1;this._tapHandler&&this._tapHandler(this._startX,this._startY,e)}else if(this._tapped==1){this._touchId=undefined;var t=getTimer();if(t-this._started<$_DOUBLE_TAP_THRESHOLD){this._tapped=0;this._doubleTapHandler&&this._doubleTapHandler(this._startX,this._startY,e)}else{this._tapped=1;this._started=this._seconded;this._startX=this._prevX;this._starty=this._prevY;this._tapHandler&&this._tapHandler(this._prevX,this._prevY,e)}}else{alert("touch end")}}this._tracker=null},touchCancel:function(e){clearTimeout(this._longTapTimer);var t=this.$_findTouch(e);if(t){if(this._tracker){this._tracker.stop(t.x,t.y)}}},$_findTouch:function(e){var t=e.changedTouches;for(var i=0;i<t.length;i++){var r=t[i];if(r&&r.identifier==this._touchId){return this._toOffset(r)}}return null},$_checkSwipe:function(){var e=this._events;var t=e.length;if(t<2)return;var i=e[t-1];var r=e[t-2];for(var n=t-3;n>=0;n--){if(i.t-r.t>100){break}r=e[n]}var s=r.x;var a=r.y;var o=i.x;var l=i.y;var h=Math.sqrt(Math.pow(s-o,2)+Math.pow(a-l,2));var u=Math.max(16,i.t-r.t);var c=h/u;var d=.1;var f=.998;if(c>d){var _=Math.log(d/c)/Math.log(f);var g=c*(1-Math.pow(f,_+1))/(1-f);var m="right";var p=Math.round(Math.atan2(l-a,o-s)*180/Math.PI);if(p<0)p=360+p;if(p>45&&p<=135)m="bottom";else if(p>135&&p<=225)m="left";else if(p>225&&p<=315)m="top";this._swipeHandler(_,g,m)}}});var MobileContextMenu=defineClass("MobileContextMenu",null,{init:function(){this._super("focusView")},show:function(e){},close:function(){}});var MobileContextMenuView=defineClass("MobileContextMenuView",EventAware,{init:function(e){this._super();this._container=e;this._dom=new Dom(this.$_createElement())},show:function(e){},close:function(){},$_createElement:function(){}});var _sin=Math.sin;var _cos=Math.cos;var _tan=Math.tan;var _abs=Math.abs;var _max=Math.max;var _min=Math.min;function _isDate(e){if(typeof TimeShift!="undefined"&&e instanceof TimeShift.Date){return true}else{return toString.call(e)==="[object Date]"}}function _isNum(e){return e!==null&&!isNaN(e)}function _hasNum(){var e,t,i=arguments,r=i.length;for(e=0;e<r;e++){t=parseFloat(i[e]);if(!isNaN(t)){return true}}}function _pickNum(){var e,t,i=arguments,r=i.length;for(e=0;e<r;e++){t=parseFloat(i[e]);if(!isNaN(t)){return t}}}function _maxarr(e){return Math.max.apply(Math,e)}function _minarr(e){return Math.max.apply(Math,e)}function _sumarr(e){var t=0;for(var i=e.length;i--;)t+=e[i];return t}DLBase.prototype.hasProp=function(e){return DLBase.isProperty(this.constructor,e)};SolidBrush.prototype.setBrightness=function(e){this._brightness=_forceFloat(e,1);return this};SolidBrush.prototype.applyTo=function(e){if(!e.setFill)debugger;var t=this._brightness;e.setFill(t!==undefined?this._color.valueWithBrightness(t):this._color.value());return true};LinearGradient.prototype.setBrightness=function(e){return this};RadialGradient.prototype.setBrightness=function(e){return this};Graphics.prototype.drawTextRectWrapASh=function(e,t,i,r,n,s){if(r&&t){i&&this.$_applyShadow(i);this.drawTextBoundsWrapA(e,t,r,n.x,n.y,n.width,n.height,s)}return this};Graphics.prototype.drawTextBoundsWrapA=function(e,t,i,r,n,s,a,o){if(!i||!t){return}var l=s*a;if(isNaN(l)||l<=0){return}var h=this.$_ctx(),u=DEF_FONT_SIZE;if(e){h.font=e.font;u=e.size}else{h.font=DEF_FONT}var c=typeof i=="string"?i.split(this.LINES_REG):i;if(c.length<=1&&h.measureText(c[0]).width<=s){this.drawTextBoundsA(e,t,c[0],r,n,s,a,o);return}if(t.applyTo(this)){var d,f,_,g,m,p,v,y,S,C,w,x;var b=u+1;var I=Math.min(c.length,Math.ceil(a/b));var T=[];var A=0;var E=true;var R=s;for(d=0;d<I&&A<=a;d++){m=0;y="";g=c[d].split(/(\s+)/);for(f=0;f<g.length&&A<=a;){p=g[f];if(E){E=false;p=p.trim();if(!p){if((S=h.measureText(p).width)>R){T.push(p)}else{y=p;m=S}p=g[++f]}}if(m+(S=h.measureText(p).width)<=R){y+=p;m+=S}else{p=p.trim();if(p){if(y){T.push(y);y=""}if(S>R){while(p&&A<=a){for(_=2;_<=p.length;_++){v=p.substr(0,_);if(h.measureText(v).width>R){T.push(p.substr(0,_-1));p=p.substr(_-1);break}}if(!p||p.length==1||h.measureText(p).width<=R){T.push(p);break}}}else{y=p;m=0}}}f++}if(y){T.push(y)}}x=Math.min(T.length,Math.ceil(a/b));A=T.length*b;h.textBaseline="middle";h.beginPath();h.save();h.translate(r+s/2+_sin(o)*(A-b)/2,n+a/2);h.rotate(o);n-=_cos(o)*(A-b)/2;r=0;for(d=0;d<x;d++){m=r;C="center";w=n+b*d;h.textAlign=C;h.fillText(T[d],m,w);if(e){var L=-1e3;switch(e.deco){case"underline":L=_int(w+u/2+1)+.5;break;case"line-through":L=_int(w+1)+.5;break;case"overline":L=_int(w-u/2)-.5;break}if(L>-1e3){h.beginPath();this.setStroke((e.line||t._color).value(),1);s=_int(h.measureText(T[d]).width);if(align===TextAlign.CENTER){m-=_int(s/2)}else if(align===TextAlign.RIGHT){m-=s}h.moveTo(m,L);h.lineTo(m+s,L);h.stroke()}}}h.restore()}return this};Graphics.prototype.drawTextRectExplicitASh=function(e,t,i,r,n,s){if(r&&t){i&&this.$_applyShadow(i);this.drawTextBoundsExplicitA(e,t,r,n.x,n.y,n.width,n.height,s)}return this};Graphics.prototype.drawTextBoundsExplicitA=function(e,t,i,r,n,s,a,o){if(!i||!t){return}var l=s*a;if(isNaN(l)||l<=0){return}var h=typeof i=="string"?i.split(/\n|\r\n?/):i;if(h.length<=1){this.drawTextBoundsA(e,t,h[0],r,n,s,a,o);return}if(t.applyTo(this)){var u=this.$_ctx(),c=DEF_FONT_SIZE;u.beginPath();u.save();if(e){u.font=e.font;c=e.size}else{u.font=DEF_FONT}var d=c+1;u.textBaseline="middle";var f,_,g,m;var p=d*h.length;var v=Math.min(h.length,Math.ceil(a/d));u.translate(r+s/2+_sin(o)*(p-d)/2,n+a/2);u.rotate(o);n-=_cos(o)*(p-d)/2;r=0;for(f=0;f<v;f++){g=r;_="center";m=n+d*f;u.textAlign=_;u.fillText(h[f],g,m);if(e){var y=-1e3;switch(e.deco){case"underline":y=_int(m+c/2+1)+.5;break;case"line-through":y=_int(m+1)+.5;break;case"overline":y=_int(m-c/2)-.5;break}if(y>-1e3){u.beginPath();this.setStroke((e.line||t._color).value(),1);s=_int(u.measureText(h[f]).width);if(align===TextAlign.CENTER){g-=_int(s/2)}else if(align===TextAlign.RIGHT){g-=s}u.moveTo(g,y);u.lineTo(g+s,y);u.stroke()}}}u.restore()}return this};SvgGraphics.prototype.drawTextRectASh=function(e,t,i,r,n,s){if(r&&t){i&&this.$_applyShadow(i);this.drawTextBoundsWrapA(e,t,r,n.x,n.y,n.width,n.height,s)}return this};SvgGraphics.prototype.drawTextRectWrapASh=function(e,t,i,r,n,s){if(r&&t){i&&this.$_applyShadow(i);this.drawTextBoundsWrapA(e,t,r,n.x,n.y,n.width,n.height,s)}return this};SvgGraphics.prototype.drawTextBoundsWrapA=function(e,t,i,r,n,s,a,o){if(!i||!t){return}var l=s*a;if(isNaN(l)||l<=0){return}var h=this.$_ctx(),u=DEF_FONT_SIZE;if(e){h.font=e.font;u=e.size}else{h.font=DEF_FONT}var c=typeof i=="string"?i.split(this.LINES_REG):i;if(c.length<=1&&h.measureText(c[0]).width<=s){this.drawTextBoundsA(e,t,c[0],r,n,s,a,o);return this}this.drawTextBoundsA(e,t,c,r,n,s,a,o);return this;return this};SvgGraphics.prototype.drawTextRectExplicitASh=function(e,t,i,r,n,s){if(r&&t){i&&this.$_applyShadow(i);this.drawTextBoundsExplicitA(e,t,r,n.x,n.y,n.width,n.height,s)}return this};SvgGraphics.prototype.drawTextBoundsExplicitA=function(e,t,i,r,n,s,a,o){if(!i||!t){return}var l=s*a;if(isNaN(l)||l<=0){return}var h=typeof i=="string"?i.split(/\n|\r\n?/):i;if(h.length<=1){this.drawTextBoundsA(e,t,h[0],r,n,s,a,o);return this}this.drawTextBoundsA(e,t,h,r,n,s,a,o);return this;return this};SvgGraphics.prototype.drawTextRectWrapSh=function(e,t,i,r,n,s,a){this.drawTextSh(e,t,i,r,n.x+n.width/2,n.y+n.height/2,s,a);return this};SvgGraphics.prototype.drawRoundRectIWith=function(e,t,i,r,n){this.drawRectI(e,t,i);return this};SvgGraphics.prototype.drawRange=function(e,t,i,r){if(i&&i.length>1&&r&&r.length>1&&(e||t)){var n;var s=new Array(i.length+r.length);for(n=0;n<i.length;n++){s[n]=i[n].x+","+i[n].y}for(j=r.length;j--;){s[n++]=r[j].x+","+r[j].y}var a=_document.createElementNS(SVGNS,"polygon");a.setAttributeNS(null,"points",s.join(" "));this._trans&&a.setAttributeNS(null,"transform",this._trans);this._elt.appendChild(a);e?e.svg(a):a.style.fillOpacity=0;t&&t.svg(a);return this}};SvgGraphics.prototype.drawCurvedStraightRange=function(e,t,i,r){this.drawCurvedRange(e,t,i,r)};SvgGraphics.prototype.drawStraightCurvedRange=function(e,t,i,r){this.drawCurvedRange(e,t,i,r)};SvgGraphics.prototype.drawTextRect=function(e,t,i,r,n,s){this.drawText(e,t,i,r.x,r.y+_floor(r.height/2-1),n,s);return this};SvgGraphics.prototype.drawTextRectSh=function(e,t,i,r,n,s,a){this.drawTextSh(e,t,i,r,n.x+n.width/2,n.y+_floor(n.height/2-1),s,a);return this};var ImagePalette=defineClass("ImagePalette",Palette,{init:function(e,t,i){this._rootUrl=_toStr(i);this._super(e,t)},_createItem:function(e){return this._rootUrl+e}});PaletteManager.prototype.addImage=function(e,t,i,r){var n;if(e&&t&&!this._palettes.hasOwnProperty(e)){n=this._palettes[e]=new ImagePalette(this,t,i);!r&&this._changed()}return n};var $_palettemanager_add=PaletteManager.prototype.add;PaletteManager.prototype.add=function(e,t){var i,r=$_palettemanager_add.call(this,e,t);if(!r){if(e&&e.name&&(_isArray(i=e.images)||_isString(i))){r=this.addImage(e.name,i,e.rootUrl)}}return r};var _createImage=function(e,t){if(_isString(e)){if(e.indexOf("p(")==0){return new PaletteItem(e,t)}}return e};var $_ShapeDrawing_getShape=ShapeDrawing.getShape;ShapeDrawing.getShape=function(e,t){if(t=="rect")t="rectangle";return $_ShapeDrawing_getShape(e,t)};var _licsond;var CryptoJS=function(o,i){var e={},t=e.lib={},r=function(){},n=t.Base={extend:function(e){r.prototype=this;var t=new r;e&&t.mixIn(e);t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)});t.init.prototype=t;t.$super=this;return t},create:function(){var e=this.extend();e.init.apply(e,arguments);return e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=t.WordArray=n.extend({init:function(e,t){e=this.words=e||[];this.sigBytes=t!=i?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,i=e.words,r=this.sigBytes;e=e.sigBytes;this.clamp();if(r%4)for(var n=0;n<e;n++)t[r+n>>>2]|=(i[n>>>2]>>>24-8*(n%4)&255)<<24-8*((r+n)%4);else if(65535<i.length)for(n=0;n<e;n+=4)t[r+n>>>2]=i[n>>>2];else t.push.apply(t,i);this.sigBytes+=e;return this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-8*(t%4);e.length=o.ceil(t/4)},clone:function(){var e=n.clone.call(this);e.words=this.words.slice(0);return e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(4294967296*o.random()|0);return new l.init(t,e)}}),s=e.enc={},a=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],r=0;r<e;r++){var n=t[r>>>2]>>>24-8*(r%4)&255;i.push((n>>>4).toString(16));i.push((n&15).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r+=2)i[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new l.init(i,t/2)}},h=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],r=0;r<e;r++)i.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r++)i[r>>>2]|=(e.charCodeAt(r)&255)<<24-8*(r%4);return new l.init(i,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},c=t.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new l.init;this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e));this._data.concat(e);this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,r=t.sigBytes,n=this.blockSize,s=r/(4*n),s=e?o.ceil(s):o.max((s|0)-this._minBufferSize,0);e=s*n;r=o.min(4*e,r);if(e){for(var a=0;a<e;a+=n)this._doProcessBlock(i,a);a=i.splice(0,e);t.sigBytes-=r}return new l.init(a,r)},clone:function(){var e=n.clone.call(this);e._data=this._data.clone();return e},_minBufferSize:0});t.Hasher=c.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e);this.reset()},reset:function(){c.reset.call(this);this._doReset()},update:function(e){this._append(e);this._process();return this},finalize:function(e){e&&this._append(e);return this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new d.HMAC.init(i,t).finalize(e)}}});var d=e.algo={};return e}(Math);(function(){var e=CryptoJS,l=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,r=this._map;e.clamp();e=[];for(var n=0;n<i;n+=3)for(var s=(t[n>>>2]>>>24-8*(n%4)&255)<<16|(t[n+1>>>2]>>>24-8*((n+1)%4)&255)<<8|t[n+2>>>2]>>>24-8*((n+2)%4)&255,a=0;4>a&&n+.75*a<i;a++)e.push(r.charAt(s>>>6*(3-a)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,i=this._map,r=i.charAt(64);r&&(r=e.indexOf(r),-1!=r&&(t=r));for(var r=[],n=0,s=0;s<t;s++)if(s%4){var a=i.indexOf(e.charAt(s-1))<<2*(s%4),o=i.indexOf(e.charAt(s))>>>6-2*(s%4);r[n>>>2]|=(a|o)<<24-8*(n%4);n++}return l.create(r,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(s){function x(e,t,i,r,n,s,a){e=e+(t&i|~t&r)+n+a;return(e<<s|e>>>32-s)+t}function b(e,t,i,r,n,s,a){e=e+(t&r|i&~r)+n+a;return(e<<s|e>>>32-s)+t}function I(e,t,i,r,n,s,a){e=e+(t^i^r)+n+a;return(e<<s|e>>>32-s)+t}function T(e,t,i,r,n,s,a){e=e+(i^(t|~r))+n+a;return(e<<s|e>>>32-s)+t}for(var e=CryptoJS,t=e.lib,i=t.WordArray,r=t.Hasher,t=e.algo,A=[],n=0;64>n;n++)A[n]=4294967296*s.abs(s.sin(n+1))|0;t=t.MD5=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;16>i;i++){var r=t+i,n=e[r];e[r]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360}var i=this._hash.words,r=e[t+0],n=e[t+1],s=e[t+2],a=e[t+3],o=e[t+4],l=e[t+5],h=e[t+6],u=e[t+7],c=e[t+8],d=e[t+9],f=e[t+10],_=e[t+11],g=e[t+12],m=e[t+13],p=e[t+14],v=e[t+15],y=i[0],S=i[1],C=i[2],w=i[3],y=x(y,S,C,w,r,7,A[0]),w=x(w,y,S,C,n,12,A[1]),C=x(C,w,y,S,s,17,A[2]),S=x(S,C,w,y,a,22,A[3]),y=x(y,S,C,w,o,7,A[4]),w=x(w,y,S,C,l,12,A[5]),C=x(C,w,y,S,h,17,A[6]),S=x(S,C,w,y,u,22,A[7]),y=x(y,S,C,w,c,7,A[8]),w=x(w,y,S,C,d,12,A[9]),C=x(C,w,y,S,f,17,A[10]),S=x(S,C,w,y,_,22,A[11]),y=x(y,S,C,w,g,7,A[12]),w=x(w,y,S,C,m,12,A[13]),C=x(C,w,y,S,p,17,A[14]),S=x(S,C,w,y,v,22,A[15]),y=b(y,S,C,w,n,5,A[16]),w=b(w,y,S,C,h,9,A[17]),C=b(C,w,y,S,_,14,A[18]),S=b(S,C,w,y,r,20,A[19]),y=b(y,S,C,w,l,5,A[20]),w=b(w,y,S,C,f,9,A[21]),C=b(C,w,y,S,v,14,A[22]),S=b(S,C,w,y,o,20,A[23]),y=b(y,S,C,w,d,5,A[24]),w=b(w,y,S,C,p,9,A[25]),C=b(C,w,y,S,a,14,A[26]),S=b(S,C,w,y,c,20,A[27]),y=b(y,S,C,w,m,5,A[28]),w=b(w,y,S,C,s,9,A[29]),C=b(C,w,y,S,u,14,A[30]),S=b(S,C,w,y,g,20,A[31]),y=I(y,S,C,w,l,4,A[32]),w=I(w,y,S,C,c,11,A[33]),C=I(C,w,y,S,_,16,A[34]),S=I(S,C,w,y,p,23,A[35]),y=I(y,S,C,w,n,4,A[36]),w=I(w,y,S,C,o,11,A[37]),C=I(C,w,y,S,u,16,A[38]),S=I(S,C,w,y,f,23,A[39]),y=I(y,S,C,w,m,4,A[40]),w=I(w,y,S,C,r,11,A[41]),C=I(C,w,y,S,a,16,A[42]),S=I(S,C,w,y,h,23,A[43]),y=I(y,S,C,w,d,4,A[44]),w=I(w,y,S,C,g,11,A[45]),C=I(C,w,y,S,v,16,A[46]),S=I(S,C,w,y,s,23,A[47]),y=T(y,S,C,w,r,6,A[48]),w=T(w,y,S,C,u,10,A[49]),C=T(C,w,y,S,p,15,A[50]),S=T(S,C,w,y,l,21,A[51]),y=T(y,S,C,w,g,6,A[52]),w=T(w,y,S,C,a,10,A[53]),C=T(C,w,y,S,f,15,A[54]),S=T(S,C,w,y,n,21,A[55]),y=T(y,S,C,w,c,6,A[56]),w=T(w,y,S,C,v,10,A[57]),C=T(C,w,y,S,h,15,A[58]),S=T(S,C,w,y,m,21,A[59]),y=T(y,S,C,w,o,6,A[60]),w=T(w,y,S,C,_,10,A[61]),C=T(C,w,y,S,s,15,A[62]),S=T(S,C,w,y,d,21,A[63]);i[0]=i[0]+y|0;i[1]=i[1]+S|0;i[2]=i[2]+C|0;i[3]=i[3]+w|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32;var n=s.floor(i/4294967296);t[(r+64>>>9<<4)+15]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360;t[(r+64>>>9<<4)+14]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360;e.sigBytes=4*(t.length+1);this._process();e=this._hash;t=e.words;for(i=0;4>i;i++)r=t[i],t[i]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360;return e},clone:function(){var e=r.clone.call(this);e._hash=this._hash.clone();return e}});e.MD5=r._createHelper(t);e.HmacMD5=r._createHmacHelper(t)})(Math);(function(){var e=CryptoJS,t=e.lib,i=t.Base,h=t.WordArray,t=e.algo,r=t.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,r=i.hasher.create(),n=h.create(),s=n.words,a=i.keySize,i=i.iterations;s.length<a;){o&&r.update(o);var o=r.update(e).finalize(t);r.reset();for(var l=1;l<i;l++)o=r.finalize(o),r.reset();n.concat(o)}n.sigBytes=4*a;return n}});e.EvpKDF=function(e,t,i){return r.create(i).compute(e,t)}})();CryptoJS.lib.Cipher||function(s){var e=CryptoJS,t=e.lib,i=t.Base,a=t.WordArray,r=t.BufferedBlockAlgorithm,n=e.enc.Base64,o=e.algo.EvpKDF,l=t.Cipher=r.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i);this._xformMode=e;this._key=t;this.reset()},reset:function(){r.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},finalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(r){return{encrypt:function(e,t,i){return("string"==typeof t?_:f).encrypt(r,e,t,i)},decrypt:function(e,t,i){return("string"==typeof t?_:f).decrypt(r,e,t,i)}}}});t.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var h=e.mode={},u=function(e,t,i){var r=this._iv;r?this._iv=s:r=this._prevBlock;for(var n=0;n<i;n++)e[t+n]^=r[n]},c=(t.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e;this._iv=t}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize;u.call(this,e,t,r);i.encryptBlock(e,t);this._prevBlock=e.slice(t,t+r)}});c.Decryptor=c.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize,n=e.slice(t,t+r);i.decryptBlock(e,t);u.call(this,e,t,r);this._prevBlock=n}});h=h.CBC=c;c=(e.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,i=i-e.sigBytes%i,r=i<<24|i<<16|i<<8|i,n=[],s=0;s<i;s+=4)n.push(r);i=a.create(n,i);e.concat(i)},unpad:function(e){e.sigBytes-=e.words[e.sigBytes-1>>>2]&255}};t.BlockCipher=l.extend({cfg:l.cfg.extend({mode:h,padding:c}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=e.createEncryptor;else i=e.createDecryptor,this._minBufferSize=1;this._mode=i.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=t.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;e=e.salt;return(e?a.create([1398893684,1701076831]).concat(e).concat(t):t).toString(n)},parse:function(e){e=n.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var i=a.create(t.slice(2,4));t.splice(0,4);e.sigBytes-=16}return d.create({ciphertext:e,salt:i})}},f=t.SerializableCipher=i.extend({cfg:i.extend({format:h}),encrypt:function(e,t,i,r){r=this.cfg.extend(r);var n=e.createEncryptor(i,r);t=n.finalize(t);n=n.cfg;return d.create({ciphertext:t,key:i,iv:n.iv,algorithm:e,mode:n.mode,padding:n.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,i,r){r=this.cfg.extend(r);t=this._parse(t,r.format);return e.createDecryptor(i,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),e=(e.kdf={}).OpenSSL={execute:function(e,t,i,r){r||(r=a.random(8));e=o.create({keySize:t+i}).compute(e,r);i=a.create(e.words.slice(t),4*i);e.sigBytes=4*t;return d.create({key:e,iv:i,salt:r})}},_=t.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:e}),encrypt:function(e,t,i,r){r=this.cfg.extend(r);i=r.kdf.execute(i,e.keySize,e.ivSize);r.iv=i.iv;e=f.encrypt.call(this,e,t,i.key,r);e.mixIn(i);return e},decrypt:function(e,t,i,r){r=this.cfg.extend(r);t=this._parse(t,r.format);i=r.kdf.execute(i,e.keySize,e.ivSize,t.salt);r.iv=i.iv;return f.decrypt.call(this,e,t,i.key,r)}})}();(function(){for(var e=CryptoJS,t=e.lib.BlockCipher,i=e.algo,a=[],r=[],n=[],s=[],o=[],l=[],h=[],u=[],c=[],d=[],f=[],_=0;256>_;_++)f[_]=128>_?_<<1:_<<1^283;for(var g=0,m=0,_=0;256>_;_++){var p=m^m<<1^m<<2^m<<3^m<<4,p=p>>>8^p&255^99;a[g]=p;r[p]=g;var v=f[g],y=f[v],S=f[y],C=257*f[p]^16843008*p;n[g]=C<<24|C>>>8;s[g]=C<<16|C>>>16;o[g]=C<<8|C>>>24;l[g]=C;C=16843009*S^65537*y^257*v^16843008*g;h[p]=C<<24|C>>>8;u[p]=C<<16|C>>>16;c[p]=C<<8|C>>>24;d[p]=C;g?(g=v^f[f[f[S^v]]],m^=f[f[m]]):g=m=1}var w=[0,1,2,4,8,16,32,64,128,27,54],i=i.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes/4,e=4*((this._nRounds=i+6)+1),r=this._keySchedule=[],n=0;n<e;n++)if(n<i)r[n]=t[n];else{var s=r[n-1];n%i?6<i&&4==n%i&&(s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[s&255]):(s=s<<8|s>>>24,s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[s&255],s^=w[n/i|0]<<24);r[n]=r[n-i]^s}t=this._invKeySchedule=[];for(i=0;i<e;i++)n=e-i,s=i%4?r[n]:r[n-4],t[i]=4>i||4>=n?s:h[a[s>>>24]]^u[a[s>>>16&255]]^c[a[s>>>8&255]]^d[a[s&255]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,n,s,o,l,a)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3];e[t+3]=i;this._doCryptBlock(e,t,this._invKeySchedule,h,u,c,d,r);i=e[t+1];e[t+1]=e[t+3];e[t+3]=i},_doCryptBlock:function(e,t,i,r,n,s,a,o){for(var l=this._nRounds,h=e[t]^i[0],u=e[t+1]^i[1],c=e[t+2]^i[2],d=e[t+3]^i[3],f=4,_=1;_<l;_++)var g=r[h>>>24]^n[u>>>16&255]^s[c>>>8&255]^a[d&255]^i[f++],m=r[u>>>24]^n[c>>>16&255]^s[d>>>8&255]^a[h&255]^i[f++],p=r[c>>>24]^n[d>>>16&255]^s[h>>>8&255]^a[u&255]^i[f++],d=r[d>>>24]^n[h>>>16&255]^s[u>>>8&255]^a[c&255]^i[f++],h=g,u=m,c=p;g=(o[h>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[d&255])^i[f++];m=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[h&255])^i[f++];p=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[h>>>8&255]<<8|o[u&255])^i[f++];d=(o[d>>>24]<<24|o[h>>>16&255]<<16|o[u>>>8&255]<<8|o[c&255])^i[f++];e[t]=g;e[t+1]=m;e[t+2]=p;e[t+3]=d},keySize:8});e.AES=t._createHelper(i)})();var $$_licd;var _lic=CryptoJS.enc.Base64.parse(SmartChartLic);_lic=CryptoJS.enc.Utf8.stringify(_lic);_lic=CryptoJS.AES.decrypt(_lic,"kji_babo").toString(CryptoJS.enc.Utf8);var $$_lic=_licson=JSON.parse(_lic);var $$_licdom=$$_lic.domain=$$_lic.domain.split(";");$$_loc=$$_loc["hostname"];var _iseval=$$_lic["product"]!="prod";_runloc=_runloc["hostname"];var ExpressionStatementError=function(e,t){this.message=e;this.tokenPos=t};ExpressionStatementError.prototype=new Error;ExpressionStatementError.prototype.constructor=ExpressionStatementError;var $$_SEP_HEAD="${";var $$_SEP_TAIL="}";var ExpressionStatement=function(e,t){var i=null;var s=t;var o=[];var l=function(e){return{literal:e,evaluate:function(e,t){return e.literal}}};var h=function(e){return{ident:e,idKey:null,evaluate:function(e,t){if(e.idKey==null){e.idKey=t.isIdentifier(e.ident)}return t.evaluateIdentifier(e.idKey,e.ident)}}};var r=function(e){o.splice(0,o.length);if(!e){return}var t,i,r,n,s=e.length,a=0;while(a<s){t=e.indexOf($$_SEP_HEAD,a);if(t>=0){i=e.indexOf($$_SEP_TAIL,t+2);if(i>=0){if(t>a){r=e.substring(a,t);n=l(r);o.push(n)}r=e.substring(t+2,i).trim();if(r){n=h(r);o.push(n)}a=i+1}else{t=-1}}if(t<0){r=e.substr(a,s);n=l(r);o.push(n);break}}};this.source=function(){return i};this.setSource=function(e){if(e!=i){i=e;r(e)}};this.evaluate=function(e){try{var t,i,r,n="";for(t=0,i=o.length;t<i;t++){r=o[t].evaluate(o[t],e);if(r==null){n+=""}else{n+=r}}return n}catch(e){if(!s){throw e}}return null};r(e)};var ChartItemPosition=_enum("ChartItemPosition",{LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",FLOATING:"floating",ANCHORING:"anchoring",FILL:"fill",isVert:function(e){return e===ChartItemPosition.TOP||e===ChartItemPosition.BOTTOM},isHorz:function(e){return e===ChartItemPosition.LEFT||e===ChartItemPosition.RIGHT}});var ChartElementType=_enum("ChartElementType",{CHART:"chart",PLOT_AREA:"plotArea",DATA_POINT:"dataPoint"});var ChartAxisOrientation=_enum("ChartAxisOrientation",{HORIZONTAL:"horizontal",VERTICAL:"vertical"});var ChartAxisLocation=_enum("ChartAxisLocation",{NORMAL:"normal",OPPOSITE:"opposite",BETWEEN:"between"});var ChartAxisGridTickLocation=_enum("ChartAxisGridTickLocation",{DEFAULT:"default",VALUE:"value",CATEGORY:"category"});var NumericAxisBase=_enum("NumericAxisBase",{NONE:"none",BOTTOM:"bottom",CENTER:"center"});var DateTimeUnit=_enum("DateTimeUnit",{YEAR:"year",MONTH:"month",WEEK:"week",DAY:"day",HOUR:"hour",MINUTE:"minute",SECOND:"second",MILLISECOND:"millsecond"});var ChartStackMode=_enum("StackMode",{NONE:"none",NORMAL:"normal",FILL:"fill",OVERLAP:"overlap"});var BubbleSizePolicy=_enum("BubbleSizePolicy",{AREA:"area",DIAMETER:"diameter",RADIUS:"radiua"});var ItemWidthPolicy=_enum("ItemWidthPolicy",{EACH:"each",MAX:"max",MIN:"min"});var CrosshairOrientation=_enum("CrosshairOrientation",{BOTH:"both",HORIZONTAL:"horizontal",VERTICAL:"vertical",isVert:function(e){return e===CrosshairOrientation.BOTH||e===CrosshairOrientation.VERTICAL},isHorz:function(e){return e===CrosshairOrientation.BOTH||e===CrosshairOrientation.HORIZONTAL}});var ChartDataOrientation=_enum("ChartDataOrientation",{ROW:"row",COLUMN:"column"});var ChartDataDirection=_enum("ChartDataDirection",{DEFAULT:"default",VERTICAL:"vertical",HORIZONTAL:"horizontal"});var ChartItemPaneLocation=_enum("ChartItemPaneLocation",{PLOT_AREA:"plotArea",TITLE:"title",HEADER:"header",FOOTER:"footer",LEFT:"left",RIGHT:"right"});var ChartItemAnchorAlign=_enum("ChartItemAnchorAlign",{CENTER:"center",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",isVert:function(e){return e===ChartItemAnchorAlign.TOP||e===ChartItemAnchorAlign.BOTTOM},isHorz:function(e){return e===ChartItemAnchorAlign.LEFT||e===ChartItemAnchorAlign.RIGHT}});var ChartSeriesSortDirection=_enum("ChartSeriesSortDirection",{NONE:"none",ASCENDING:"ascending",DESCENDING:"descending"});var ChartLabelPosition=_enum("ChartLabelPosition",{DEFAULT:"default",FAR:"far",CENTER:"center",NEAR:"near",INNER:"inner",OUTER:"outer"});var ChartHorizontalAlign=_enum("ChartHorizontalAlign",{DEFAULT:"default",LEFT:"left",CENTER:"center",RIGHT:"right"});var ChartVerticalAlign=_enum("ChartVerticalAlign",{DEFAULT:"default",TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"});var ChartOverflowPolicy=_enum("ChartOverflowPolicy",{NONE:"none",JUSTIFY:"justify"});var ChartLineType=_enum("ChartLineType",{STRAIGHT:"straight",CURVED:"curved",STEPPED:"stepped"});var ChartItemDisplayOrder=_enum("ChartItemDisplayOrder",{FIRST:"first",LAST:"last",MAX:"max",MIN:"min"});var ChartAnimationTypes=_enum("ChartAnimationTypes",{PROP_SIZE:"size",PROP_RADIUS:"radius",PROP_WIDTH:"width",PROP_LOCATION:"location",PROP_POSITION:"position",PROP_ITEMS:"items",PROP_MASK:"mask",PROP_SLIDE:"slide",PROP_SLICE:"slice"});var ChartAnimationTrigger=_enum("ChartAnimationTrigger",{LOAD:"load",CHANGE:"change",CLICK:"click"});var ContentVisibility=_enum("ContentVisibility",{VISIBLE:"visible",HIDDEN:"hidden",COLLAPSED:"collapsed"});var ChartLegendLayout=_enum("ChartLegendLayout",{DEFAULT:"default",VERTICAL:"vertical",HORIZONTAL:"horizontal"});var ChartLegendItemAction=_enum("ChartLegendItemAction",{DISPLAY:"display",SLICE:"slice"});var ChartMaskShape=_enum("ChartMaskShape",{RECTANGLE:"rectangle",ELLIPSE:"ellipse"});var ChartMaskLocation=_enum("ChartMaskLocation",{LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",TOP_LEFT:"topLeft",TOP_RIGHT:"topRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_RIGHT:"bottomRight",CENTER:"center"});var SemicircleDirection=_enum("SemicircleDirection",{TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"});var TreemapTiling=_enum("TreemapTiling",{SQUARIFIED:"squarified",SLICEANDDICE:"sliceanddice"});var TreemapDirection=_enum("TreemapDirection",{VERTICAL:"vertical",HORIZONTAL:"horizontal"});var ContentAlign=function(e){this._horz=ContentAlign.FILL;this._vert=ContentAlign.FILL;if(e){this.assign(e)}};ContentAlign.createFrom=function(e){var t=new ContentAlign(e);return t};ContentAlign.prototype.assign=function(e){if(e instanceof ContentAlign){this._horz=e._horz;this._vert=e._vert}else if(e){this._horz=this._vert=ContentAlign.FILL;var t=e.trim().toLowerCase().split(",");for(var i=0;i<t.length;i++){var r=t[i].trim();if(r==ContentAlign.LEFT||r==ContentAlign.RIGHT||r==ContentAlign.CENTER){this._horz=r}if(r==ContentAlign.TOP||r==ContentAlign.BOTTOM||r==ContentAlign.MIDDLE){this._vert=r}}}};ContentAlign.prototype.clone=function(){return _clone(this)};ContentAlign.prototype.getHorz=function(){return this._horz};ContentAlign.prototype.getVert=function(){return this._vert};ContentAlign.FILL="fill";ContentAlign.LEFT="left";ContentAlign.CENTER="center";ContentAlign.RIGHT="right";ContentAlign.TOP="top";ContentAlign.MIDDLE="middle";ContentAlign.BOTTOM="bottom";var ScrollEventType={LINE_UP:"lineUp",LINE_DOWN:"lineDown",LINE_LEFT:"lineLeft",LINE_RIGHT:"lineRight",PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",PAGE_LEFT:"pageLeft",PAGE_RIGHT:"pageRight",THUMB_TRACK:"thumbTrack",THUMB_END:"thumbEnd"};var Alignment=_enum("Alignment",{NEAR:"near",CENTER:"center",FAR:"far"});var TextWrap=_enum("TextWrap",{NONE:"none",EXPLICIT:"explicit",NORMAL:"normal"});var TextOverflow=_enum("TextOverflow",{CLIP:"clip",ELLIPSIS:"ellipsis",PATH:"path"});var TextDecoration=_enum("TextDecoration",{NONE:"none",UNDERLINE:"underline",OVERLINE:"overline",LINE_THROUGH:"lineThrough"});var IconLocation=_enum("IconLocation",{LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",LEFT_SIDE:"leftSide",RIGHT_SIDE:"rightSide",TOP_SIDE:"topSide",BOTTOM_SIDE:"bottomSide",CENTER:"center",CENTER_BACK:"centerBack",NONE:"none"},{isHorz:function(e){return e==IconLocation.LEFT||e==IconLocation.RIGHT||e==IconLocation.LEFT_SIDE||e==IconLocation.RIGHT_SIDE||e==IconLocation.CENTER||e==IconLocation.CENTER_BACK},isVert:function(e){return e==IconLocation.TOP||e==IconLocation.BOTTOM||e==IconLocation.TOP_SIDE||e==IconLocation.BOTTOM_SIDE||e==IconLocation.CENTER||e==IconLocation.CENTER_BACK},isStrictVert:function(e){return e==IconLocation.TOP||e==IconLocation.BOTTOM||e==IconLocation.TOP_SIDE||e==IconLocation.BOTTOM_SIDE},isCenter:function(e){return e==IconLocation.CENTER||e==IconLocation.CENTER_BACK}});var Dimension=defineClass("Dimension",null,{init:function(e){this._super();this._value=NaN;this._valuePercent=false;if(e){this.setSize(e)}},size:null,minSize:null,maxSize:null,setSize:function(e){if(e!=this.size){this._size=e;var t=this.parse(e);this._value=t.value;this._valuePercent=t.percent}},fixed:function(){return!this._valuePercent&&!isNaN(this._value)},getDimension:function(e){var t=e;var i;if(!isNaN(this._value)){t=this._value?this._valuePercent?this._value*e/100:this._value:0}return t},equals:function(e){return this._value==e._value&&this._valuePercent==e._valuePercent},toString:function(){return this._size||""},parse:function(e){var t,i={value:NaN,percent:false};if(e){e=String(e).trim();if(e){t=e.length;i.percent=e.charAt(t-1)=="%";if(i.percent){e=e.substring(0,t-1);t=e.length;if(t>0){i.value=Number(e)}}else{i.value=Number(e)}}}return i}},{areEquals:function(e,t){if(e===t)return true;if(!e||!t)return false;return e.equals(t)}},function(e){e.NULL=new e});var $$_FONT_REG=new RegExp("\\s*,\\s*");var $$_STYLE_PROP_MAP={renderer:"setRenderer",fill:"setFill",color:"setColor",inactiveFill:"setInactiveFill",inactiveColor:"setInactiveColor",fills:"setFills",fillBrightness:"setFillBrightness",shadow:"setShadow",backgroundImage:"setBackgroundImage",border:"setBorder",borderLeft:"setBorderLeft",borderRight:"setBorderRight",borderTop:"setBorderTop",borderBottom:"setBorderBottom",borderRadius:"setBorderRadius",line:"setLine",lines:"setLines",textAlignment:"setTextAlignment",lineAlignment:"setLineAlignment",textRotation:"setTextRotation",textWrap:"setTextWrap",textFormat:"setTextFormat",numberFormat:"setNumberFormat",datetimeFormat:"setDatetimeFormat",booleanFormat:"setBooleanFormat",prefix:"setPrefix",suffix:"setSuffix",numberScale:"setNumberScale",numberSymbols:"setNumberSymbols",font:"setFont",fontName:"setFontName",fontSize:"setFontSize",fontBold:"setFontBold",fontItalic:"setFontItalic",textDecoration:"setTextDecoration",textDecorationColor:"setTextDecorationColor",textShadow:"setTextShadow",marginLeft:"setMarginLeft",marginRight:"setMarginRight",marginTop:"setMarginTop",marginBottom:"setMarginBottom",paddingLeft:"setPaddingLeft",paddingRight:"setPaddingRight",paddingTop:"setPaddingTop",paddingBottom:"setPaddingBottom",iconIndex:"setIconIndex",iconLocation:"setIconLocation",iconAlignment:"setIconAlignment",iconOffset:"setIconOffset",iconPadding:"setIconPadding",iconAlpha:"setIconAlpha",shapeName:"setShapeName",shapeLocation:"setShapeLocation",shapeAlignment:"setShapeAlignment",shapeOffset:"setShapeOffset",shapePadding:"setShapePadding",shapeSize:"setShapeSize",shapeRotation:"setShapeRotation",shapeInnerName:"setShapeInnerName",shapeInnerSize:"setShapeInnerSize",shapeInnerRotation:"setShapeInnerRotation"};var ChartStyles=defineClass("ChartStyles",null,{init:function(e,t,i,r){this._super(true);this._owner=e;this._name=t;this._parent=null;this._sysDefault=null;this._values=[];this._updateLock=0;this._fireEvents=!!r;this._scope=e&&e.getPaletteScope&&e.getPaletteScope();i&&this.extend(i,false)},name:null,hover:null,select:null,fireEvents:true,parent:function(){return this._parent},sysDefault:function(){return this._sysDefault},setParent:function(e,t){if(e!==this._parent){this._parent=e;if((t===undefined||t)&&this._fireEvents){this.changed(ChartStyles.STYLE_ALL)}}return this},setSysDefault:function(e,t){if(e!==this._sysDefault){this._sysDefault=e;if((t===undefined||t)&&this._fireEvents){this.changed(ChartStyles.STYLE_ALL)}}return this},isEmpty:function(){return this._values.length<=0},renderer:undefined,renderer_:function(){return this.searchStyles(ChartStyles.RENDERER)._renderer},setRenderer:function(e){if(e!==undefined){if(!this._values[ChartStyles.RENDERER]||e!==this._renderer){this._renderer=e;this._values[ChartStyles.RENDERER]=true;this._fireEvents&&this.changed(ChartStyles.RENDERER)}}else if(this._values[ChartStyles.RENDERER]){delete this._renderer;this._values[ChartStyles.RENDERER]=false;this._fireEvents&&this.changed(ChartStyles.RENDERER)}return this},fill:undefined,fill_:function(){var e=this.searchStyles(ChartStyles.FILL)._fill;return e&&e.fetch?e.fetch(this._scope):e},setFill:function(e){if(e!==undefined){if(!this._values[ChartStyles.FILL]||e!==this._fill){e=_createFill(e,this._scope);this._fill=e;this._values[ChartStyles.FILL]=true;this._fireEvents&&this.changed(ChartStyles.FILL)}}else if(this._values[ChartStyles.FILL]){delete this._fill;this._values[ChartStyles.FILL]=false;this._fireEvents&&this.changed(ChartStyles.FILL)}return this},background:function(){return this.fill()},color:undefined,color_:function(){var e=this.searchStyles(ChartStyles.COLOR)._color;return e&&e.fetch?e.fetch(this._scope):e},setColor:function(e){if(e!==undefined){if(!this._values[ChartStyles.COLOR]||e!==this._color){e=_createFill(e,this._scope);this._color=e;this._values[ChartStyles.COLOR]=true;this._fireEvents&&this.changed(ChartStyles.COLOR)}}else if(this._values[ChartStyles.COLOR]){delete this._color;this._values[ChartStyles.COLOR]=false;this._fireEvents&&this.changed(ChartStyles.COLOR)}return this},inactiveFill:undefined,inactiveFill_:function(){var e=this.searchStyles(ChartStyles.INACTIVE_FILL)._inactiveFill;return e&&e.fetch?e.fetch(this._scope):e},setInactiveFill:function(e){if(e!==undefined){if(!this._values[ChartStyles.INACTIVE_FILL]||e!==this._inactiveFill){e=_createFill(e,this._scope);this._inactiveFill=e;this._values[ChartStyles.INACTIVE_FILL]=true;this._fireEvents&&this.changed(ChartStyles.INACTIVE_FILL)}}else if(this._values[ChartStyles.INACTIVE_FILL]){delete this._inactiveFill;this._values[ChartStyles.INACTIVE_FILL]=false;this._fireEvents&&this.changed(ChartStyles.INACTIVE_FILL)}return this},inactiveColor:undefined,inactiveColor_:function(){var e=this.searchStyles(ChartStyles.INACTIVE_COLOR)._inactiveColor;return e&&e.fetch?e.fetch(this._scope):e},setInactiveColor:function(e){if(e!==undefined){if(!this._values[ChartStyles.INACTIVE_COLOR]||e!==this._inactiveColor){e=_createFill(e,this._scope);this._inactiveColor=e;this._values[ChartStyles.INACTIVE_COLOR]=true;this._fireEvents&&this.changed(ChartStyles.INACTIVE_COLOR)}}else if(this._values[ChartStyles.INACTIVE_COLOR]){delete this._inactiveColor;this._values[ChartStyles.INACTIVE_COLOR]=false;this._fireEvents&&this.changed(ChartStyles.INACTIVE_COLOR)}return this},fills:undefined,fills_:function(){return this.searchStyles(ChartStyles.FILLS)._fills},setFills:function(e){if(e!==undefined){if(!this._values[ChartStyles.FILLS]||e!==this._fills){this._fills=_createFills(e,this._scope);this._values[ChartStyles.FILLS]=true;this._fireEvents&&this.changed(ChartStyles.FILLS)}}else if(this._values[ChartStyles.FILLS]){delete this._fills;this._values[ChartStyles.FILLS]=false;this._fireEvents&&this.changed(ChartStyles.FILLS)}return this},fillBrightness:undefined,fillBrightness_:function(){return this.searchStyles(ChartStyles.FILL_BRIGHTNESS)._fillBrightness},setFillBrightness:function(e){if(e!==undefined){e=parseFloat(e);if(!this._values[ChartStyles.FILL_BRIGHTNESS]||e!==this._fillBrightness){this._fillBrightness=e;this._values[ChartStyles.FILL_BRIGHTNESS]=true;this._fireEvents&&this.changed(ChartStyles.FILL_BRIGHTNESS)}}else if(this._values[ChartStyles.FILL_BRIGHTNESS]){delete this._fillBrightness;this._values[ChartStyles.FILL_BRIGHTNESS]=false;this._fireEvents&&this.changed(ChartStyles.FILL_BRIGHTNESS)}return this},shadow:undefined,shadow_:function(){return this.searchStyles(ChartStyles.SHADOW)._shadow},setShadow:function(e){if(e!==undefined){e=_createShadow(e);if(!this._values[ChartStyles.SHADOW]||e!==this._shadow){this._shadow=e;this._values[ChartStyles.SHADOW]=true;this._fireEvents&&this.changed(ChartStyles.SHADOW)}}else if(this._values[ChartStyles.SHADOW]){delete this._shadow;this._values[ChartStyles.SHADOW]=false;this._fireEvents&&this.changed(ChartStyles.SHADOW)}return this},backgroundImage:undefined,backgroundImage_:function(){var e=this.searchStyles(ChartStyles.BACKGROUND_IMAGE)._backgroundImage;return e&&e.fetch?e.fetch(this._scope):e},setBackgroundImage:function(e){if(e!==undefined){if(!this._values[ChartStyles.BACKGROUND_IMAGE]||e!==this._backgroundImage){e=_createImage(e,this._scope);this._backgroundImage=e;this._values[ChartStyles.BACKGROUND_IMAGE]=true;this._fireEvents&&this.changed(ChartStyles.BACKGROUND_IMAGE)}}else if(this._values[ChartStyles.BACKGROUND_IMAGE]){delete this._backgroundImage;this._values[ChartStyles.BACKGROUND_IMAGE]=false;this._fireEvents&&this.changed(ChartStyles.BACKGROUND_IMAGE)}return this},border:undefined,border_:function(){var e=this.searchStyles(ChartStyles.BORDER)._border;return e&&e.fetch?e.fetch(this._scope):e},setBorder:function(e){if(e!==undefined){if(!this._values[ChartStyles.BORDER]||e!==this._border){e=_createStroke(e,this._scope);this._border=e;this._values[ChartStyles.BORDER]=true;this._fireEvents&&this.changed(ChartStyles.BORDER)}}else if(this._values[ChartStyles.BORDER]){delete this._border;this._values[ChartStyles.BORDER]=false;this._fireEvents&&this.changed(ChartStyles.BORDER)}return this},borderWidth:function(){var e=this.border();return e?e.width():0},borderLeft:undefined,borderLeft_:function(){var e=this.searchStyles(ChartStyles.BORDER_LEFT)._borderLeft;return e&&e.fetch?e.fetch(this._scope):e},setBorderLeft:function(e){if(e!==undefined){if(!this._values[ChartStyles.BORDER_LEFT]||e!==this._borderLeft){e=_createStroke(e,this._scope);this._borderLeft=e;this._values[ChartStyles.BORDER_LEFT]=true;this._fireEvents&&this.changed(ChartStyles.BORDER_LEFT)}}else if(this._values[ChartStyles.BORDER_LEFT]){delete this._borderLeft;this._values[ChartStyles.BORDER_LEFT]=false;this._fireEvents&&this.changed(ChartStyles.BORDER_LEFT)}return this},borderLeftWidth:function(){var e=this.borderLeft();return e?e.width():0},borderRight:undefined,borderRight_:function(){var e=this.searchStyles(ChartStyles.BORDER_RIGHT)._borderRight;return e&&e.fetch?e.fetch(this._scope):e},setBorderRight:function(e){if(e!==undefined){if(!this._values[ChartStyles.BORDER_RIGHT]||e!==this._borderRight){e=_createStroke(e,this._scope);this._borderRight=e;this._values[ChartStyles.BORDER_RIGHT]=true;this._fireEvents&&this.changed(ChartStyles.BORDER_RIGHT)}}else if(this._values[ChartStyles.BORDER_RIGHT]){delete this._borderRight;this._values[ChartStyles.BORDER_RIGHT]=false;this._fireEvents&&this.changed(ChartStyles.BORDER_RIGHT)}return this},borderRightWidth:function(){var e=this.borderRight();return e?e.width():0},borderHorzWidth:function(){var e=this.borderLeft();var t=e?e.width():0;e=this.borderRight();e&&(t+=e.width());return t},borderTop:undefined,borderTop_:function(){var e=this.searchStyles(ChartStyles.BORDER_TOP)._borderTop;return e&&e.fetch?e.fetch(this._scope):e},setBorderTop:function(e){if(e!==undefined){if(!this._values[ChartStyles.BORDER_TOP]||e!==this._borderTop){e=_createStroke(e,this._scope);this._borderTop=e;this._values[ChartStyles.BORDER_TOP]=true;this._fireEvents&&this.changed(ChartStyles.BORDER_TOP)}}else if(this._values[ChartStyles.BORDER_TOP]){delete this._borderTop;this._values[ChartStyles.BORDER_TOP]=false;this._fireEvents&&this.changed(ChartStyles.BORDER_TOP)}return this},borderTopWidth:function(){var e=this.borderTop();return e?e.width():0},borderBottom:undefined,borderBottom_:function(){var e=this.searchStyles(ChartStyles.BORDER_BOTTOM)._borderBottom;return e&&e.fetch?e.fetch(this._scope):e},setBorderBottom:function(e){if(e!==undefined){if(!this._values[ChartStyles.BORDER_BOTTOM]||e!==this._borderBottom){e=_createStroke(e,this._scope);this._borderBottom=e;this._values[ChartStyles.BORDER_BOTTOM]=true;this._fireEvents&&this.changed(ChartStyles.BORDER_BOTTOM)}}else if(this._values[ChartStyles.BORDER_BOTTOM]){delete this._borderBottom;this._values[ChartStyles.BORDER_BOTTOM]=false;this._fireEvents&&this.changed(ChartStyles.BORDER_BOTTOM)}return this},borderBottomWidth:function(){var e=this.borderBottom();return e?e.width():0},borderVertWidth:function(){var e=this.borderTop();var t=e?e.width():0;e=this.borderBottom();e&&(t+=e.width());return t},borderRadiuses:function(){return{topLeft:this.borderRadius(),topRight:this.borderRadius(),bottomLeft:this.borderRadius(),bottomRight:this.borderRadius()}},borderRadius:undefined,borderRadius_:function(){return this.searchStyles(ChartStyles.BORDER_RADIUS)._borderRadius},setBorderRadius:function(e){if(e!==undefined){if(!this._values[ChartStyles.BORDER_RADIUS]||e!==this._borderRadius){this._borderRadius=e;this._values[ChartStyles.BORDER_RADIUS]=true;this._fireEvents&&this.changed(ChartStyles.BORDER_RADIUS)}}else if(this._values[ChartStyles.BORDER_RADIUS]){delete this._borderRadius;this._values[ChartStyles.BORDER_RADIUS]=false;this._fireEvents&&this.changed(ChartStyles.BORDER_RADIUS)}return this},line:undefined,line_:function(){var e=this.searchStyles(ChartStyles.LINE)._line;return e&&e.fetch?e.fetch(this._scope):e},setLine:function(e){if(e!==undefined){if(!this._values[ChartStyles.LINE]||e!==this._line){e=_createStroke(e,this._scope);this._line=e;this._values[ChartStyles.LINE]=true;this._fireEvents&&this.changed(ChartStyles.LINE)}}else if(this._values[ChartStyles.LINE]){delete this._line;this._values[ChartStyles.LINE]=false;this._fireEvents&&this.changed(ChartStyles.LINE)}return this},lineWidth:function(){var e=this.line();return e?e.width():0},lines:undefined,lines_:function(){return this.searchStyles(ChartStyles.LINES)._lines},setLines:function(e){if(e!==undefined){if(!this._values[ChartStyles.LINES]||e!==this._lines){this._lines=_createStrokes(e,this._scope);this._values[ChartStyles.LINES]=true;this._fireEvents&&this.changed(ChartStyles.LINES)}}else if(this._values[ChartStyles.LINES]){delete this._lines;this._values[ChartStyles.LINES]=false;this._fireEvents&&this.changed(ChartStyles.LINES)}return this},fontName:undefined,fontName_:function(){return this.searchStyles(ChartStyles.FONT_NAME)._fontName},setFontName:function(e){if(e!==undefined){if(!this._values[ChartStyles.FONT_NAME]||e!==this._fontName){this._fontName=e;this._values[ChartStyles.FONT_NAME]=true;this._fireEvents&&this.changed(ChartStyles.FONT_NAME)}}else if(this._values[ChartStyles.FONT_NAME]){delete this._fontName;this._values[ChartStyles.FONT_NAME]=false;this._fireEvents&&this.changed(ChartStyles.FONT_NAME)}return this},fontSize:undefined,fontSize_:function(){return this.searchStyles(ChartStyles.FONT_SIZE)._fontSize},setFontSize:function(e){if(e!==undefined){if(_isFontText(e)){e=parseFloat(e.substr(0,e.length-2));if(!isNaN(e)){e=Math.round(e*97/76)}}else{e=parseInt(e)}if(!this._values[ChartStyles.FONT_SIZE]||e!==this._fontSize){this._fontSize=e;this._values[ChartStyles.FONT_SIZE]=true;this._fireEvents&&this.changed(ChartStyles.FONT_SIZE)}}else if(this._values[ChartStyles.FONT_SIZE]){delete this._fontSize;this._values[ChartStyles.FONT_SIZE]=false;this._fireEvents&&this.changed(ChartStyles.FONT_SIZE)}return this},fontBold:undefined,fontBold_:function(){return this.searchStyles(ChartStyles.FONT_BOLD)._fontBold},setFontBold:function(e){if(e!==undefined){e=e&&e!=="false";if(!this._values[ChartStyles.FONT_BOLD]||e!==this._fontBold){this._fontBold=e;this._values[ChartStyles.FONT_BOLD]=true;this._fireEvents&&this.changed(ChartStyles.FONT_BOLD)}}else if(this._values[ChartStyles.FONT_BOLD]){delete this._fontBold;this._values[ChartStyles.FONT_BOLD]=false;this._fireEvents&&this.changed(ChartStyles.FONT_BOLD)}return this},fontItalic:undefined,fontItalic_:function(){return this.searchStyles(ChartStyles.FONT_ITALIC)._fontItalic},setFontItalic:function(e){if(e!==undefined){e=e&&e!=="false";if(!this._values[ChartStyles.FONT_ITALIC]||e!==this._fontItalic){this._fontItalic=e;this._values[ChartStyles.FONT_ITALIC]=true;this._fireEvents&&this.changed(ChartStyles.FONT_ITALIC)}}else if(this._values[ChartStyles.FONT_ITALIC]){delete this._fontItalic;this._values[ChartStyles.FONT_ITALIC]=false;this._fireEvents&&this.changed(ChartStyles.FONT_ITALIC)}return this},textDecoration:undefined,textDecoration_:function(){return this.searchStyles(ChartStyles.TEXT_DECORATION)._textDecoration},setTextDecoration:function(e){if(e!==undefined){if(!this._values[ChartStyles.TEXT_DECORATION]||e!==this._textDecoration){this._textDecoration=e;this._values[ChartStyles.TEXT_DECORATION]=true;this._fireEvents&&this.changed(ChartStyles.TEXT_DECORATION)}}else if(this._values[ChartStyles.TEXT_DECORATION]){delete this._textDecoration;this._values[ChartStyles.TEXT_DECORATION]=false;this._fireEvents&&this.changed(ChartStyles.TEXT_DECORATION)}return this},textDecorationColor:undefined,textDecorationColor_:function(){return this.searchStyles(ChartStyles.TEXT_DECORATION_COLOR)._textDecorationColor},setTextDecorationColor:function(e){if(e!==undefined){if(!this._values[ChartStyles.TEXT_DECORATION_COLOR]||e!==this._textDecorationColor){e=_createStroke(e,this._scope);this._textDecorationColor=e;this._values[ChartStyles.TEXT_DECORATION_COLOR]=true;this._fireEvents&&this.changed(ChartStyles.TEXT_DECORATION_COLOR)}}else if(this._values[ChartStyles.TEXT_DECORATION_COLOR]){delete this._textDecorationColor;this._values[ChartStyles.TEXT_DECORATION_COLOR]=false;this._fireEvents&&this.changed(ChartStyles.TEXT_DECORATION_COLOR)}return this},textShadow:undefined,textShadow_:function(){return this.searchStyles(ChartStyles.TEXT_SHADOW)._textShadow},setTextShadow:function(e){if(e!==undefined){e=_createShadow(e);if(!this._values[ChartStyles.TEXT_SHADOW]||e!==this._textShadow){this._textShadow=e;this._values[ChartStyles.TEXT_SHADOW]=true;this._fireEvents&&this.changed(ChartStyles.TEXT_SHADOW)}}else if(this._values[ChartStyles.TEXT_SHADOW]){delete this._textShadow;this._values[ChartStyles.TEXT_SHADOW]=false;this._fireEvents&&this.changed(ChartStyles.TEXT_SHADOW)}return this},textAlignment:undefined,textAlignment_:function(){return this.searchStyles(ChartStyles.TEXT_ALIGNMENT)._textAlignment},setTextAlignment:function(e){if(e!==undefined){if(!this._values[ChartStyles.TEXT_ALIGNMENT]||e!==this._textAlignment){this._textAlignment=e;this._values[ChartStyles.TEXT_ALIGNMENT]=true;this._fireEvents&&this.changed(ChartStyles.TEXT_ALIGNMENT)}}else if(this._values[ChartStyles.TEXT_ALIGNMENT]){delete this._textAlignment;this._values[ChartStyles.TEXT_ALIGNMENT]=false;this._fireEvents&&this.changed(ChartStyles.TEXT_ALIGNMENT)}return this},lineAlignment:undefined,lineAlignment_:function(){return this.searchStyles(ChartStyles.LINE_ALIGNMENT)._lineAlignment},setLineAlignment:function(e){if(e!==undefined){if(!this._values[ChartStyles.LINE_ALIGNMENT]||e!==this._lineAlignment){this._lineAlignment=e;this._values[ChartStyles.LINE_ALIGNMENT]=true;this._fireEvents&&this.changed(ChartStyles.LINE_ALIGNMENT)}}else if(this._values[ChartStyles.LINE_ALIGNMENT]){delete this._lineAlignment;this._values[ChartStyles.LINE_ALIGNMENT]=false;this._fireEvents&&this.changed(ChartStyles.LINE_ALIGNMENT)}return this},textRotation:undefined,textRotation_:function(){return this.searchStyles(ChartStyles.TEXT_ROTATION)._textRotation},setTextRotation:function(e){if(e!==undefined){e=parseFloat(e);if(!this._values[ChartStyles.TEXT_ROTATION]||e!==this._textRotation){this._textRotation=e;this._values[ChartStyles.TEXT_ROTATION]=true;this._fireEvents&&this.changed(ChartStyles.TEXT_ROTATION)}}else if(this._values[ChartStyles.TEXT_ROTATION]){delete this._textRotation;this._values[ChartStyles.TEXT_ROTATION]=false;this._fireEvents&&this.changed(ChartStyles.TEXT_ROTATION)}return this},textWrap:undefined,textWrap_:function(){return this.searchStyles(ChartStyles.TEXT_WRAP)._textWrap},setTextWrap:function(e){if(e!==undefined){if(!this._values[ChartStyles.TEXT_WRAP]||e!==this._textWrap){this._textWrap=e;this._values[ChartStyles.TEXT_WRAP]=true;this._fireEvents&&this.changed(ChartStyles.TEXT_WRAP)}}else if(this._values[ChartStyles.TEXT_WRAP]){delete this._textWrap;this._values[ChartStyles.TEXT_WRAP]=false;this._fireEvents&&this.changed(ChartStyles.TEXT_WRAP)}return this},textFormat:undefined,textFormat_:function(){return this.searchStyles(ChartStyles.TEXT_FORMAT)._textFormat},setTextFormat:function(e){if(e!==undefined){if(!this._values[ChartStyles.TEXT_FORMAT]||e!==this._textFormat){this._textFormat=e;this._values[ChartStyles.TEXT_FORMAT]=true;this._fireEvents&&this.changed(ChartStyles.TEXT_FORMAT)}}else if(this._values[ChartStyles.TEXT_FORMAT]){delete this._textFormat;this._values[ChartStyles.TEXT_FORMAT]=false;this._fireEvents&&this.changed(ChartStyles.TEXT_FORMAT)}return this},numberFormat:undefined,numberFormat_:function(){return this.searchStyles(ChartStyles.NUMBER_FORMAT)._numberFormat},setNumberFormat:function(e){if(e!==undefined){if(!this._values[ChartStyles.NUMBER_FORMAT]||e!==this._numberFormat){this._numberFormat=e;this._values[ChartStyles.NUMBER_FORMAT]=true;this._numberFormatter=e?new DecimalFormatter(e):null;this._fireEvents&&this.changed(ChartStyles.NUMBER_FORMAT)}}else if(this._values[ChartStyles.NUMBER_FORMAT]){delete this._numberFormat;this._values[ChartStyles.NUMBER_FORMAT]=false;this._fireEvents&&this.changed(ChartStyles.NUMBER_FORMAT)}return this},datetimeFormat:undefined,datetimeFormat_:function(){return this.searchStyles(ChartStyles.DATETIME_FORMAT)._datetimeFormat},setDatetimeFormat:function(e){if(e!==undefined){if(!this._values[ChartStyles.DATETIME_FORMAT]||e!==this._datetimeFormat){this._datetimeFormat=e;this._values[ChartStyles.DATETIME_FORMAT]=true;this._fireEvents&&this.changed(ChartStyles.DATETIME_FORMAT)}}else if(this._values[ChartStyles.DATETIME_FORMAT]){delete this._datetimeFormat;this._values[ChartStyles.DATETIME_FORMAT]=false;this._fireEvents&&this.changed(ChartStyles.DATETIME_FORMAT)}return this},booleanFormat:undefined,booleanFormat_:function(){return this.searchStyles(ChartStyles.BOOLEAN_FORMAT)._booleanFormat},setBooleanFormat:function(e){if(e!==undefined){if(!this._values[ChartStyles.BOOLEAN_FORMAT]||e!==this._booleanFormat){this._booleanFormat=e;this._values[ChartStyles.BOOLEAN_FORMAT]=true;this._fireEvents&&this.changed(ChartStyles.BOOLEAN_FORMAT)}}else if(this._values[ChartStyles.BOOLEAN_FORMAT]){delete this._booleanFormat;this._values[ChartStyles.BOOLEAN_FORMAT]=false;this._fireEvents&&this.changed(ChartStyles.BOOLEAN_FORMAT)}return this},prefix:undefined,prefix_:function(){return this.searchStyles(ChartStyles.PREFIX)._prefix},setPrefix:function(e){if(e!==undefined){if(!this._values[ChartStyles.PREFIX]||e!==this._prefix){this._prefix=e;this._values[ChartStyles.PREFIX]=true;this._fireEvents&&this.changed(ChartStyles.PREFIX)}}else if(this._values[ChartStyles.PREFIX]){delete this._prefix;this._values[ChartStyles.PREFIX]=false;this._fireEvents&&this.changed(ChartStyles.PREFIX)}return this},suffix:undefined,suffix_:function(){return this.searchStyles(ChartStyles.SUFFIX)._suffix},setSuffix:function(e){if(e!==undefined){if(!this._values[ChartStyles.SUFFIX]||e!==this._suffix){this._suffix=e;this._values[ChartStyles.SUFFIX]=true;this._fireEvents&&this.changed(ChartStyles.SUFFIX)}}else if(this._values[ChartStyles.SUFFIX]){delete this._suffix;this._values[ChartStyles.SUFFIX]=false;this._fireEvents&&this.changed(ChartStyles.SUFFIX)}return this},numberScale:undefined,numberScale_:function(){return this.searchStyles(ChartStyles.NUMBER_SCALE)._numberScale},setNumberScale:function(e){if(e!==undefined){e=Math.max(0,parseInt(e));if(!this._values[ChartStyles.NUMBER_SCALE]||e!==this._numberScale){this._numberScale=e;this._values[ChartStyles.NUMBER_SCALE]=true;this._numberScaler=e>0?new NumberScales:null;this._fireEvents&&this.changed(ChartStyles.NUMBER_SCALE)}}else if(this._values[ChartStyles.NUMBER_SCALE]){delete this._numberScale;this._values[ChartStyles.NUMBER_SCALE]=false;this._fireEvents&&this.changed(ChartStyles.NUMBER_SCALE)}return this},numberSymbols:undefined,numberSymbols_:function(){return this.searchStyles(ChartStyles.NUMBER_SYMBOLS)._numberSymbols},setNumberSymbols:function(e){if(e!==undefined){if(!this._values[ChartStyles.NUMBER_SYMBOLS]||e!==this._numberSymbols){this._numberSymbols=e;this._values[ChartStyles.NUMBER_SYMBOLS]=true;this._fireEvents&&this.changed(ChartStyles.NUMBER_SYMBOLS)}}else if(this._values[ChartStyles.NUMBER_SYMBOLS]){delete this._numberSymbols;this._values[ChartStyles.NUMBER_SYMBOLS]=false;this._fireEvents&&this.changed(ChartStyles.NUMBER_SYMBOLS)}return this},marginLeft:undefined,marginLeft_:function(){return this.searchStyles(ChartStyles.MARGIN_LEFT)._marginLeft},setMarginLeft:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.MARGIN_LEFT]||e!==this._marginLeft){this._marginLeft=e;this._values[ChartStyles.MARGIN_LEFT]=true;this._fireEvents&&this.changed(ChartStyles.MARGIN_LEFT)}}else if(this._values[ChartStyles.MARGIN_LEFT]){delete this._marginLeft;this._values[ChartStyles.MARGIN_LEFT]=false;this._fireEvents&&this.changed(ChartStyles.MARGIN_LEFT)}return this},marginRight:undefined,marginRight_:function(){return this.searchStyles(ChartStyles.MARGIN_RIGHT)._marginRight},setMarginRight:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.MARGIN_RIGHT]||e!==this._marginRight){this._marginRight=e;this._values[ChartStyles.MARGIN_RIGHT]=true;this._fireEvents&&this.changed(ChartStyles.MARGIN_RIGHT)}}else if(this._values[ChartStyles.MARGIN_RIGHT]){delete this._marginRight;this._values[ChartStyles.MARGIN_RIGHT]=false;this._fireEvents&&this.changed(ChartStyles.MARGIN_RIGHT)}return this},marginTop:undefined,marginTop_:function(){return this.searchStyles(ChartStyles.MARGIN_TOP)._marginTop},setMarginTop:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.MARGIN_TOP]||e!==this._marginTop){this._marginTop=e;this._values[ChartStyles.MARGIN_TOP]=true;this._fireEvents&&this.changed(ChartStyles.MARGIN_TOP)}}else if(this._values[ChartStyles.MARGIN_TOP]){delete this._marginTop;this._values[ChartStyles.MARGIN_TOP]=false;this._fireEvents&&this.changed(ChartStyles.MARGIN_TOP)}return this},marginBottom:undefined,marginBottom_:function(){return this.searchStyles(ChartStyles.MARGIN_BOTTOM)._marginBottom},setMarginBottom:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.MARGIN_BOTTOM]||e!==this._marginBottom){this._marginBottom=e;this._values[ChartStyles.MARGIN_BOTTOM]=true;this._fireEvents&&this.changed(ChartStyles.MARGIN_BOTTOM)}}else if(this._values[ChartStyles.MARGIN_BOTTOM]){delete this._marginBottom;this._values[ChartStyles.MARGIN_BOTTOM]=false;this._fireEvents&&this.changed(ChartStyles.MARGIN_BOTTOM)}return this},marginHorz:function(){return this.marginLeft()+this.marginRight()},marginVert:function(){return this.marginTop()+this.marginBottom()},paddingLeft:undefined,paddingLeft_:function(){return this.searchStyles(ChartStyles.PADDING_LEFT)._paddingLeft},setPaddingLeft:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.PADDING_LEFT]||e!==this._paddingLeft){this._paddingLeft=e;this._values[ChartStyles.PADDING_LEFT]=true;this._fireEvents&&this.changed(ChartStyles.PADDING_LEFT)}}else if(this._values[ChartStyles.PADDING_LEFT]){delete this._paddingLeft;this._values[ChartStyles.PADDING_LEFT]=false;this._fireEvents&&this.changed(ChartStyles.PADDING_LEFT)}return this},paddingRight:undefined,paddingRight_:function(){return this.searchStyles(ChartStyles.PADDING_RIGHT)._paddingRight},setPaddingRight:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.PADDING_RIGHT]||e!==this._paddingRight){this._paddingRight=e;this._values[ChartStyles.PADDING_RIGHT]=true;this._fireEvents&&this.changed(ChartStyles.PADDING_RIGHT)}}else if(this._values[ChartStyles.PADDING_RIGHT]){delete this._paddingRight;this._values[ChartStyles.PADDING_RIGHT]=false;this._fireEvents&&this.changed(ChartStyles.PADDING_RIGHT)}return this},paddingTop:undefined,paddingTop_:function(){return this.searchStyles(ChartStyles.PADDING_TOP)._paddingTop},setPaddingTop:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.PADDING_TOP]||e!==this._paddingTop){this._paddingTop=e;this._values[ChartStyles.PADDING_TOP]=true;this._fireEvents&&this.changed(ChartStyles.PADDING_TOP)}}else if(this._values[ChartStyles.PADDING_TOP]){delete this._paddingTop;this._values[ChartStyles.PADDING_TOP]=false;this._fireEvents&&this.changed(ChartStyles.PADDING_TOP)}return this},paddingBottom:undefined,paddingBottom_:function(){return this.searchStyles(ChartStyles.PADDING_BOTTOM)._paddingBottom},setPaddingBottom:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.PADDING_BOTTOM]||e!==this._paddingBottom){this._paddingBottom=e;this._values[ChartStyles.PADDING_BOTTOM]=true;this._fireEvents&&this.changed(ChartStyles.PADDING_BOTTOM)}}else if(this._values[ChartStyles.PADDING_BOTTOM]){delete this._paddingBottom;this._values[ChartStyles.PADDING_BOTTOM]=false;this._fireEvents&&this.changed(ChartStyles.PADDING_BOTTOM)}return this},paddingHorz:function(){return this.paddingLeft()+this.paddingRight()},paddingVert:function(){return this.paddingTop()+this.paddingBottom()},spaceLeft:function(){return this.paddingLeft()+this.marginLeft()},spaceRight:function(){return this.paddingRight()+this.marginRight()},spaceHorz:function(){return this.paddingLeft()+this.paddingRight()+this.marginLeft()+this.marginRight()},spaceTop:function(){return this.paddingTop()+this.marginTop()},spaceBottom:function(){return this.paddingBottom()+this.marginBottom()},spaceVert:function(){return this.paddingTop()+this.paddingBottom()+this.marginTop()+this.marginBottom()},iconIndex:undefined,iconIndex_:function(){return this.searchStyles(ChartStyles.ICON_INDEX)._iconIndex},setIconIndex:function(e){if(e!==undefined){if(!this._values[ChartStyles.ICON_INDEX]||e!==this._iconIndex){this._iconIndex=e;this._values[ChartStyles.ICON_INDEX]=true;this._fireEvents&&this.changed(ChartStyles.ICON_INDEX)}}else if(this._values[ChartStyles.ICON_INDEX]){delete this._iconIndex;this._values[ChartStyles.ICON_INDEX]=false;this._fireEvents&&this.changed(ChartStyles.ICON_INDEX)}return this},iconLocation:undefined,iconLocation_:function(){return this.searchStyles(ChartStyles.ICON_LOCATION)._iconLocation},setIconLocation:function(e){if(e!==undefined){if(!this._values[ChartStyles.ICON_LOCATION]||e!==this._iconLocation){this._iconLocation=e;this._values[ChartStyles.ICON_LOCATION]=true;this._fireEvents&&this.changed(ChartStyles.ICON_LOCATION)}}else if(this._values[ChartStyles.ICON_LOCATION]){delete this._iconLocation;this._values[ChartStyles.ICON_LOCATION]=false;this._fireEvents&&this.changed(ChartStyles.ICON_LOCATION)}return this},iconAlignment:undefined,iconAlignment_:function(){return this.searchStyles(ChartStyles.ICON_ALIGNMENT)._iconAlignment},setIconAlignment:function(e){if(e!==undefined){if(!this._values[ChartStyles.ICON_ALIGNMENT]||e!==this._iconAlignment){this._iconAlignment=e;this._values[ChartStyles.ICON_ALIGNMENT]=true;this._fireEvents&&this.changed(ChartStyles.ICON_ALIGNMENT)}}else if(this._values[ChartStyles.ICON_ALIGNMENT]){delete this._iconAlignment;this._values[ChartStyles.ICON_ALIGNMENT]=false;this._fireEvents&&this.changed(ChartStyles.ICON_ALIGNMENT)}return this},iconOffset:undefined,iconOffset_:function(){return this.searchStyles(ChartStyles.ICON_OFFSET)._iconOffset},setIconOffset:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.ICON_OFFSET]||e!==this._iconOffset){this._iconOffset=e;this._values[ChartStyles.ICON_OFFSET]=true;this._fireEvents&&this.changed(ChartStyles.ICON_OFFSET)}}else if(this._values[ChartStyles.ICON_OFFSET]){delete this._iconOffset;this._values[ChartStyles.ICON_OFFSET]=false;this._fireEvents&&this.changed(ChartStyles.ICON_OFFSET)}return this},iconPadding:undefined,iconPadding_:function(){return this.searchStyles(ChartStyles.ICON_PADDING)._iconPadding},setIconPadding:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.ICON_PADDING]||e!==this._iconPadding){this._iconPadding=e;this._values[ChartStyles.ICON_PADDING]=true;this._fireEvents&&this.changed(ChartStyles.ICON_PADDING)}}else if(this._values[ChartStyles.ICON_PADDING]){delete this._iconPadding;this._values[ChartStyles.ICON_PADDING]=false;this._fireEvents&&this.changed(ChartStyles.ICON_PADDING)}return this},iconAlpha:undefined,iconAlpha_:function(){return this.searchStyles(ChartStyles.ICON_ALPHA)._iconAlpha},setIconAlpha:function(e){if(e!==undefined){e=parseFloat(e);if(!this._values[ChartStyles.ICON_ALPHA]||e!==this._iconAlpha){this._iconAlpha=e;this._values[ChartStyles.ICON_ALPHA]=true;this._fireEvents&&this.changed(ChartStyles.ICON_ALPHA)}}else if(this._values[ChartStyles.ICON_ALPHA]){delete this._iconAlpha;this._values[ChartStyles.ICON_ALPHA]=false;this._fireEvents&&this.changed(ChartStyles.ICON_ALPHA)}return this},shapeName:undefined,shapeName_:function(){return this.searchStyles(ChartStyles.SHAPE_NAME)._shapeName},setShapeName:function(e){if(e!==undefined){if(!this._values[ChartStyles.SHAPE_NAME]||e!==this._shapeName){this._shapeName=e;this._values[ChartStyles.SHAPE_NAME]=true;this._fireEvents&&this.changed(ChartStyles.SHAPE_NAME)}}else if(this._values[ChartStyles.SHAPE_NAME]){delete this._shapeName;this._values[ChartStyles.SHAPE_NAME]=false;this._fireEvents&&this.changed(ChartStyles.SHAPE_NAME)}return this},shapeLocation:undefined,shapeLocation_:function(){return this.searchStyles(ChartStyles.SHAPE_LOCATION)._shapeLocation},setShapeLocation:function(e){if(e!==undefined){if(!this._values[ChartStyles.SHAPE_LOCATION]||e!==this._shapeLocation){this._shapeLocation=e;this._values[ChartStyles.SHAPE_LOCATION]=true;this._fireEvents&&this.changed(ChartStyles.SHAPE_LOCATION)}}else if(this._values[ChartStyles.SHAPE_LOCATION]){delete this._shapeLocation;this._values[ChartStyles.SHAPE_LOCATION]=false;this._fireEvents&&this.changed(ChartStyles.SHAPE_LOCATION)}return this},shapeAlignment:undefined,shapeAlignment_:function(){return this.searchStyles(ChartStyles.SHAPE_ALIGNMENT)._shapeAlignment},setShapeAlignment:function(e){if(e!==undefined){if(!this._values[ChartStyles.SHAPE_ALIGNMENT]||e!==this._shapeAlignment){this._shapeAlignment=e;this._values[ChartStyles.SHAPE_ALIGNMENT]=true;this._fireEvents&&this.changed(ChartStyles.SHAPE_ALIGNMENT)}}else if(this._values[ChartStyles.SHAPE_ALIGNMENT]){delete this._shapeAlignment;this._values[ChartStyles.SHAPE_ALIGNMENT]=false;this._fireEvents&&this.changed(ChartStyles.SHAPE_ALIGNMENT)}return this},shapeOffset:undefined,shapeOffset_:function(){return this.searchStyles(ChartStyles.SHAPE_OFFSET)._shapeOffset},setShapeOffset:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.SHAPE_OFFSET]||e!==this._shapeOffset){this._shapeOffset=e;this._values[ChartStyles.SHAPE_OFFSET]=true;this._fireEvents&&this.changed(ChartStyles.SHAPE_OFFSET)}}else if(this._values[ChartStyles.SHAPE_OFFSET]){delete this._shapeOffset;this._values[ChartStyles.SHAPE_OFFSET]=false;this._fireEvents&&this.changed(ChartStyles.SHAPE_OFFSET)}return this},shapePadding:undefined,shapePadding_:function(){return this.searchStyles(ChartStyles.SHAPE_PADDING)._shapePadding},setShapePadding:function(e){if(e!==undefined){e=parseInt(e);if(!this._values[ChartStyles.SHAPE_PADDING]||e!==this._shapePadding){this._shapePadding=e;this._values[ChartStyles.SHAPE_PADDING]=true;this._fireEvents&&this.changed(ChartStyles.SHAPE_PADDING)}}else if(this._values[ChartStyles.SHAPE_PADDING]){delete this._shapePadding;this._values[ChartStyles.SHAPE_PADDING]=false;this._fireEvents&&this.changed(ChartStyles.SHAPE_PADDING)}return this},shapeSize:undefined,shapeSize_:function(){return this.searchStyles(ChartStyles.SHAPE_SIZE)._shapeSize},setShapeSize:function(e){if(e!==undefined){if(!this._values[ChartStyles.SHAPE_SIZE]||e!==this._shapeSize){this._shapeSize=ChartStyles.getDimension(e);this._values[ChartStyles.SHAPE_SIZE]=true;this._fireEvents&&this.changed(ChartStyles.SHAPE_SIZE)}}else if(this._values[ChartStyles.SHAPE_SIZE]){delete this._shapeSize;this._values[ChartStyles.SHAPE_SIZE]=false;this._fireEvents&&this.changed(ChartStyles.SHAPE_SIZE)}return this},shapeRotation:undefined,shapeRotation_:function(){return this.searchStyles(ChartStyles.SHAPE_ROTATION)._shapeRotation},setShapeRotation:function(e){if(e!==undefined){e=parseFloat(e);if(!this._values[ChartStyles.SHAPE_ROTATION]||e!==this._shapeRotation){this._shapeRotation=e;this._values[ChartStyles.SHAPE_ROTATION]=true;this._fireEvents&&this.changed(ChartStyles.SHAPE_ROTATION)}}else if(this._values[ChartStyles.SHAPE_ROTATION]){delete this._shapeRotation;this._values[ChartStyles.SHAPE_ROTATION]=false;this._fireEvents&&this.changed(ChartStyles.SHAPE_ROTATION)}return this},shapeInnerName:undefined,shapeInnerName_:function(){return this.searchStyles(ChartStyles.SHAPE_INNER_NAME)._shapeInnerName},setShapeInnerName:function(e){if(e!==undefined){if(!this._values[ChartStyles.SHAPE_INNER_NAME]||e!==this._shapeInnerName){this._shapeInnerName=e;this._values[ChartStyles.SHAPE_INNER_NAME]=true;this._fireEvents&&this.changed(ChartStyles.SHAPE_INNER_NAME)}}else if(this._values[ChartStyles.SHAPE_INNER_NAME]){delete this._shapeInnerName;this._values[ChartStyles.SHAPE_INNER_NAME]=false;this._fireEvents&&this.changed(ChartStyles.SHAPE_INNER_NAME)}return this},shapeInnerSize:undefined,shapeInnerSize_:function(){return this.searchStyles(ChartStyles.SHAPE_INNER_SIZE)._shapeInnerSize},setShapeInnerSize:function(e){if(e!==undefined){if(!this._values[ChartStyles.SHAPE_INNER_SIZE]||e!==this._shapeInnerSize){this._shapeInnerSize=Math.max(0,Math.min(1,e));this._values[ChartStyles.SHAPE_INNER_SIZE]=true;this._fireEvents&&this.changed(ChartStyles.SHAPE_INNER_SIZE)}}else if(this._values[ChartStyles.SHAPE_INNER_SIZE]){delete this._shapeInnerSize;this._values[ChartStyles.SHAPE_INNER_SIZE]=false;this._fireEvents&&this.changed(ChartStyles.SHAPE_INNER_SIZE)}return this},shapeInnerRotation:undefined,shapeInnerRotation_:function(){return this.searchStyles(ChartStyles.SHAPE_INNER_ROTATION)._shapeInnerRotation},setShapeInnerRotation:function(e){if(e!==undefined){if(!this._values[ChartStyles.SHAPE_INNER_ROTATION]||e!==this._shapeInnerRotation){this._shapeInnerRotation=e;this._values[ChartStyles.SHAPE_INNER_ROTATION]=true;this._fireEvents&&this.changed(ChartStyles.SHAPE_INNER_ROTATION)}}else if(this._values[ChartStyles.SHAPE_INNER_ROTATION]){delete this._shapeInnerRotation;this._values[ChartStyles.SHAPE_INNER_ROTATION]=false;this._fireEvents&&this.changed(ChartStyles.SHAPE_INNER_ROTATION)}return this},font:function(){var e,t,i,r,n=[],s=this.fontSize(),a=this.fontItalic(),o=this.fontBold();a&&n.push("italic");o&&n.push("bold");n.push(s+"px");if(e=this.fontName()){n.push(e)}t=n.join(" ");i="";r=this.textDecoration();if(r){if(r==="lineThrough")r="line-through";i=this.textDecorationColor();i=i?i._color:""}return{font:t,size:s,deco:r,line:i}},setFont:function(e){var t,i,r,n;e=e&&e.trim();if(e){t=e.split($$_FONT_REG);i=t.length;if(i>0&&t[0]){this.fontName(t[0])}if(i>1&&t[1]){this.fontSize(t[1])}for(r=2;r<i;r++){n=t[r];if(n){n=n.toLowerCase();switch(n){case"bold":this.setFontBold(true);break;case"italic":this.setFontItalic(true);break;case"underline":case"lineThrough":case"line-through":this.setTextDecoration(n);break}}}}return this},clone:function(){var e=new ChartStyles;e._owner=this._owner;e._name=this._name;e._parent=this._parent;e._sysDefault=this._sysDefault;e._values=this._values.concat();e._fireEvents=this.fireEvents;e._scope=this._scope;return e},getState:function(e,t){var i;switch(e){case"hover":i=this._hover;if(!i&&t){i=this._hover=new ChartStyles(this._owner,this._name+"Hover").setParent(this);i.extend(t)}break;case"select":i=this._select;if(!i&&t){i=this._select=new ChartStyles(this._owner,this._name+"Select").setParent(this);i.extend(t)}break}return i||this},setParentAndDefault:function(e,t){if(!(t instanceof ChartStyles))debugger;this._parent=e;this._sysDefault=t;return this},beginUpdate:function(){this._updateLock++},endUpdate:function(e){e=arguments.length>0?e:true;this._updateLock--;if(this._updateLock==0&&this._fireEvents){this.changed(ChartStyles.STYLE_ALL,e)}},hasValue:function(e){return typeof e==="string"?this._values[ChartStyles.STYLE_NAMES[e]]:this._values[e]},getValue:function(e){return this["_"+e]},clearValue:function(e){if(typeof e!="number"){e=ChartStyles.STYLE_NAMES[e]}e=_int(e);if(!isNaN(e)&&e>=0){delete this._values[e]}},clearValues:function(){this._values=[]},initialize:function(e){this._values=[];e&&this.extend(e)},extend:function(e,t){var i,r,n,s,a,o,l;t=arguments.length>1?t:true;this.beginUpdate();try{if(e instanceof ChartStyles){var h=e._values;if(h[ChartStyles.RENDERER]){this.setRenderer(e._renderer)}if(h[ChartStyles.FILL]){this.setFill(e._fill)}if(h[ChartStyles.COLOR]){this.setColor(e._color)}if(h[ChartStyles.INACTIVE_FILL]){this.setInactiveFill(e._inactiveFill)}if(h[ChartStyles.INACTIVE_COLOR]){this.setInactiveColor(e._inactiveColor)}if(h[ChartStyles.FILLS]){this.setFills(e._fills)}if(h[ChartStyles.FILL_BRIGHTNESS]){this.setFillBrightness(e._fillBrightness)}if(h[ChartStyles.SHADOW]){this.setShadow(e._shadow)}if(h[ChartStyles.BACKGROUND_IMAGE]){this.setBackgroundImage(e._backgroundImage)}if(h[ChartStyles.BORDER]){this.setBorder(e._border)}if(h[ChartStyles.BORDER_LEFT]){this.setBorderLeft(e._borderLeft)}if(h[ChartStyles.BORDER_RIGHT]){this.setBorderRight(e._borderRight)}if(h[ChartStyles.BORDER_TOP]){this.setBorderTop(e._borderTop)}if(h[ChartStyles.BORDER_BOTTOM]){this.setBorderBottom(e._borderBottom)}if(h[ChartStyles.BORDER_RADIUS]){this.setBorderRadius(e._borderRadius)}if(h[ChartStyles.LINE]){this.setLine(e._line)}if(h[ChartStyles.LINES]){this.setLines(e._lines)}if(h[ChartStyles.FONT_NAME]){this.setFontName(e._fontName)}if(h[ChartStyles.FONT_SIZE]){this.setFontSize(e._fontSize)}if(h[ChartStyles.FONT_BOLD]){this.setFontBold(e._fontBold)}if(h[ChartStyles.FONT_ITALIC]){this.setFontItalic(e._fontItalic)}if(h[ChartStyles.TEXT_DECORATION]){this.setTextDecoration(e._textDecoration)}if(h[ChartStyles.TEXT_DECORATION_COLOR]){this.setTextDecorationColor(e._textDecorationColor)}if(h[ChartStyles.TEXT_SHADOW]){this.setTextShadow(e._textShadow)}if(h[ChartStyles.TEXT_ALIGNMENT]){this.setTextAlignment(e._textAlignment)}if(h[ChartStyles.LINE_ALIGNMENT]){this.setLineAlignment(e._lineAlignment)}if(h[ChartStyles.TEXT_ROTATION]){this.setTextRotation(e._textRotation)}if(h[ChartStyles.TEXT_WRAP]){this.setTextWrap(e._textWrap)}if(h[ChartStyles.NUMBER_FORMAT]){this.setNumberFormat(e._numberFormat)}if(h[ChartStyles.TEXT_FORMAT]){this.setTextFormat(e._textFormat)}if(h[ChartStyles.DATETIME_FORMAT]){this.setDatetimeFormat(e._datetimeFormat)}if(h[ChartStyles.BOOLEAN_FORMAT]){this.setBooleanFormat(e._booleanFormat)}if(h[ChartStyles.PREFIX]){this.setPrefix(e._prefix)}if(h[ChartStyles.SUFFIX]){this.setSuffix(e._suffix)}if(h[ChartStyles.NUMBER_SCALE]){this.setNumberScale(e._numberScale)}if(h[ChartStyles.NUMBER_SYMBOLS]){this.setNumberSymbols(e._numberSymbols)}if(h[ChartStyles.MARGIN_LEFT]){this.setMarginLeft(e._marginLeft)}if(h[ChartStyles.MARGIN_RIGHT]){this.setMarginRight(e._marginRight)}if(h[ChartStyles.MARGIN_TOP]){this.setMarginTop(e._marginTop)}if(h[ChartStyles.MARGIN_BOTTOM]){this.setMarginBottom(e._marginBottom)}if(h[ChartStyles.PADDING_LEFT]){this.setPaddingLeft(e._paddingLeft)}if(h[ChartStyles.PADDING_RIGHT]){this.setPaddingRight(e._paddingRight)}if(h[ChartStyles.PADDING_TOP]){this.setPaddingTop(e._paddingTop)}if(h[ChartStyles.PADDING_BOTTOM]){this.setPaddingBottom(e._paddingBottom)}if(h[ChartStyles.PADDING_BOTTOM]){this.setPaddingBottom(e._paddingBottom)}if(h[ChartStyles.ICON_INDEX]){this.setIconIndex(e._iconIndex)}if(h[ChartStyles.ICON_LOCATION]){this.setIconLocation(e._iconLocation)}if(h[ChartStyles.ICON_ALIGNMENT]){this.setIconAlignment(e._iconAlignment)}if(h[ChartStyles.ICON_OFFSET]){this.setIconOffset(e._iconOffset)}if(h[ChartStyles.ICON_PADDING]){this.setIconPadding(e._iconPadding)}if(h[ChartStyles.ICON_ALPHA]){this.setIconAlpha(e._iconAlpha)}if(h[ChartStyles.SHAPE_NAME]){this.setShapeName(e._shapeName)}if(h[ChartStyles.SHAPE_LOCATION]){this.setShapeLocation(e._shapeLocation)}if(h[ChartStyles.SHAPE_ALIGNMENT]){this.setShapeAlignment(e._shapeAlignment)}if(h[ChartStyles.SHAPE_OFFSET]){this.setShapeOffset(e._shapeOffset)}if(h[ChartStyles.SHAPE_PADDING]){this.setShapePadding(e._shapePadding)}if(h[ChartStyles.SHAPE_SIZE]){this.setShapeSize(e._shapeSize)}if(h[ChartStyles.SHAPE_ROTATION]){this.setShapeRotation(e._shapeRotation)}if(h[ChartStyles.SHAPE_INNER_NAME]){this.setShapeInnerName(e._shapeInnerName)}if(h[ChartStyles.SHAPE_INNER_SIZE]){this.setShapeInnerSize(e._shapeInnerSize)}if(h[ChartStyles.SHAPE_INNER_ROTATION]){this.setShapeInnerRotation(e._shapeInnerRotation)}}else if(_isObject(e)){l=true;this.setMargin(e.margin);this.setPadding(e.padding);for(var i in e){var r=this[$$_STYLE_PROP_MAP[i]];if(r instanceof Function){r.call(this,e[i])}}}else if(_isString(e)){props=e.split(";");for(i in props){if(props[i]){s=props[i].split(":");if(s.length==2){a=s[0];o=s[1];if(a==="margin"){this.setMargin(o)}else if(a=="padding"){this.setPadding(o)}else{n=this[$$_STYLE_PROP_MAP[a]];if(n instanceof Function){n.call(this,o)}}}}}}if(l){if(e.hover){if(!this._hover){this._hover=new ChartStyles(this._owner,this._name+"_hover",null,this._fireEvents);this._hover._parent=this}this._hover.extend(e.hover)}if(e.select){if(!this._select){this._select=new ChartStyles(this._owner,this._name+"_select",null,this._fireEvents);this._select._parent=this}this._select.extend(e.select)}}}finally{this.endUpdate(t)}},proxy:function(){return{name:this._name,renderer:this._renderer,fill:this._fill,color:this._color,inactiveFill:this._inactiveFill,inactiveColor:this._inactiveColor,fills:this._fills,fillBrightness:this._fillBrightness,shadow:this._shadow,backgroundImage:this._backgroundImage,border:this._border,borderLeft:this._borderLeft,borderRight:this._borderRight,borderTop:this._borderTop,borderBottom:this._borderBottom,borderRadius:this._borderRadius,line:this._line,lines:this._lines,fontName:this._fontName,fontSize:this._fontSize,fontBold:this._fontBold,fontItalic:this._fontItalic,textDecoration:this._textDecoration,textDecorationColor:this._textDecorationColor,textShadow:this._textShadow,textAlignment:this._textAlignment,lineAlignment:this._lineAlignment,textRotation:this._textRotation,textWrap:this._textWrap,textFormat:this._textFormat,numberFormat:this._numberFormat,datetimeFormat:this._datetimeFormat,booleanFormat:this._booleanFormat,prefix:this._prefix,suffix:this._suffix,numberScale:this._numberScale,numberSymbols:this._numberSymbols,marginLeft:this._marginLeft,marginRight:this._marginRight,marginTop:this._marginTop,marginBottom:this._marginBottom,paddingLeft:this._paddingLeft,paddingRight:this._paddingRight,paddingTop:this._paddingTop,paddingBottom:this._paddingBottom,iconIndex:this._iconIndex,iconLocation:this._iconLocation,iconAlignment:this._iconAlignment,iconOffset:this._iconOffset,iconPadding:this._iconPadding,iconAlpha:this._iconAlpha,shapeName:this._shapeName,shapeLocation:this._shapeLocation,shapeAlignment:this._shapeAlignment,shapeOffset:this._shapeOffset,shapePadding:this._shapePadding,shapeSize:this._shapeSize,shapeRotation:this._shapeRotation,shapeInnerName:this._shapeInnerName,shapeInnerSize:this._shapeInnerSize,shapeInnerRotation:this._shapeInnerRotation}},deflatePaddings:function(e){if(!e)debugger;var t;e.x+=t=this.paddingLeft();e.width-=t+this.paddingRight();e.y+=t=this.paddingTop();e.height-=t+this.paddingBottom();return e},inflatePaddings:function(e){var t;e.x-=t=this.paddingLeft();e.width+=t+this.paddingRight();e.y-=t=this.paddingTop();e.height+=t+this.paddingBottom();return e},deflateMargins:function(e){var t;e.x+=t=this.marginLeft();e.width-=t+this.marginRight();e.y+=t=this.marginTop();e.height-=t+this.marginBottom();return e},inflateMargins:function(e){var t;e.x-=t=this.marginLeft();e.width+=t+this.marginRight();e.y-=t=this.marginTop();e.height+=t+this.marginBottom();return e},deflateSpaces:function(e){var t;e.x+=t=this.paddingLeft()+this.marginLeft();e.width-=t+this.paddingRight()+this.marginRight();e.y+=t=this.paddingTop()+this.marginTop();e.height-=t+this.paddingBottom()+this.marginBottom();return e},inflateSpaces:function(e){var t;e.x-=t=this.paddingLeft()+this.marginLeft();e.width+=t+this.paddingRight()+this.marginRight();e.y-=t=this.paddingTop()+this.marginTop();e.height+=t+this.paddingBottom()+this.marginBottom();return e},paddings:function(){return this.paddingTop()+"px "+this.paddingRight()+"px "+this.paddingBottom()+"px "+this.paddingLeft()+"px"},formatNumber:function(e,t){var i=this.searchObject("_numberFormatter"),r=i?i.format(e):_toStr(e);return t?r:this.decorateText(r)},scaleNumber:function(e,t){var i=this.searchObject("_numberFormatter"),r=this.numberSymbols(),n=this.searchObject("_numberScaler"),s=n?n.setSymbols(r).getScaledText(e,this.numberScale(),i):i?i.format(e):_toStr(e);return t?s:this.decorateText(s)},decorateText:function(e){var t;t=this.prefix();if(_defined(t))e=t+e;t=this.suffix();if(_defined(t))e=e+t;return e},toCssShadow:function(){var e=this.shadow();if(e){return e.horz+"px "+e.vert+"px "+e.blur+"px "+e.color.value()}return null},setMargin:function(e){var t,i,r,n,s,a,o;if(_isString(e)){t=e.split(",");if(t.length>=3){a=parseInt(t[0]);s=parseInt(t[1]);o=parseInt(t[2]);if(t.length>=4){n=parseInt(t[3])}}else if(t.length==2){a=o=parseInt(t[0]);s=n=parseInt(t[1])}else if(t.length==1){a=o=s=n=parseInt(t[0])}!isNaN(a)&&this.setMarginTop(a);!isNaN(o)&&this.setMarginBottom(o);!isNaN(n)&&this.setMarginTop(n);!isNaN(s)&&this.setMarginTop(s)}else if(!isNaN(r=parseInt(e))){this.setMarginLeft(r).setMarginRight(r).setMarginTop(r).setMarginBottom(r)}},setPadding:function(e){var t,i,r,n,s,a,o;if(_isString(e)){t=e.split(",");if(t.length>=3){a=parseInt(t[0]);s=parseInt(t[1]);o=parseInt(t[2]);if(t.length>=4){n=parseInt(t[3])}}else if(t.length==2){a=o=parseInt(t[0]);s=n=parseInt(t[1])}else if(t.length==1){a=o=s=n=parseInt(t[0])}!isNaN(a)&&this.setPaddingTop(a);!isNaN(o)&&this.setPaddingBottom(o);!isNaN(n)&&this.setPaddingLeft(n);!isNaN(s)&&this.setPaddingRight(s)}else if(!isNaN(r=parseInt(e))){this.setPaddingLeft(r).setPaddingRight(r).setPaddingTop(r).setPaddingBottom(r)}},searchStyles:function(e){if(this._values[e]){return this}var t=this._parent;while(t){if(t._values[e]){return t}t=t._parent}if(this._sysDefault&&this._sysDefault._values[e]){return this._sysDefault}t=this._parent;while(t){if(t._sysDefault&&t._sysDefault._values[e]){return t._sysDefault}t=t._parent}return ChartStyles.Default},searchObject:function(e){var t;if(t=this[e]){return t}var i=this._parent;while(i){if(t=i[e]){return t}i=i._parent}if(this._sysDefault&&(t=this._sysDefault[e])){return t}i=this._parent;while(i){if(i._sysDefault&&(t=i._sysDefault[e])){return t}i=i._parent}return null},changed:function(e,t){t=arguments.length>1?t:true;if(this._owner&&this._updateLock==0&&t){this._owner.stylesChanged(this,e)}}},{STYLE_ALL:-1,RENDERER:0,FILL:1,COLOR:2,INACTIVE_FILL:3,INACTIVE_COLOR:4,FILLS:5,FILL_BRIGHTNESS:8,SHADOW:9,BACKGROUND_IMAGE:10,BORDER:11,BORDER_LEFT:12,BORDER_RIGHT:13,BORDER_TOP:14,BORDER_BOTTOM:15,BORDER_RADIUS:20,LINE:21,LINES:22,FONT_NAME:23,FONT_SIZE:24,FONT_BOLD:25,FONT_ITALIC:26,TEXT_DECORATION:27,TEXT_DECORATION_COLOR:28,TEXT_SHADOW:29,TEXT_ALIGNMENT:30,LINE_ALIGNMENT:31,TEXT_ROTATION:32,TEXT_WRAP:33,TEXT_FORMAT:34,NUMBER_FORMAT:35,DATETIME_FORMAT:36,BOOLEAN_FORMAT:37,PREFIX:38,SUFFIX:39,NUMBER_SCALE:40,NUMBER_SYMBOLS:41,MARGIN_LEFT:42,MARGIN_RIGHT:43,MARGIN_TOP:44,MARGIN_BOTTOM:45,PADDING_LEFT:46,PADDING_RIGHT:47,PADDING_TOP:48,PADDING_BOTTOM:49,ICON_INDEX:50,ICON_LOCATION:51,ICON_ALIGNMENT:52,ICON_OFFSET:53,ICON_PADDING:54,ICON_ALPHA:55,SHAPE_NAME:56,SHAPE_LOCATION:65,SHAPE_ALIGNMENT:66,SHAPE_OFFSET:67,SHAPE_PADDING:68,SHAPE_SIZE:69,SHAPE_ROTATION:70,SHAPE_INNER_NAME:71,SHAPE_INNER_SIZE:73,SHAPE_INNER_ROTATION:74,STYLE_LAST:74,equalFonts:function(e,t){if(e==e)return true;return e&&t&&e.s==t.s&&e.size==t.size&&e.deco==t.deco&&e.line==t.line},getFillText:function(e){return e?e.toText():null},getStrokeText:function(e){return e?e.toText():null},getFillPaletteText:function(e){return e instanceof FillPalette?e.toString():e},getDimension:function(e){if(e!==null&&!(e instanceof Dimension)){e=new Dimension(e)}return e},getDimensionText:function(e){return e?e.toString():null},$_extendPropMap:function(e){for(var t in e){$$_STYLE_PROP_MAP[t]=e[t]}},$_extendNameMap:function(e){var t=ChartStyles.STYLE_NAMES;for(var i in e){t[i]=e[i]}}},function(e){e.Default=new e(null,"defaultStyles");t(e.Default);function t(e){e._renderer=null;e._fill=null;e._color=SolidBrush.BLACK;e._inactiveFill=SolidBrush.LTGRAY;e._inactiveColor=SolidBrush.GRAY;e._fills=null;e._fillBrightness=1;e._shadow=null;e._backgroundImage=null;e._border=null;e._borderLeft=null;e._borderRight=null;e._borderTop=null;e._borderBottom=null;e._borderRadius=0;e._line=SolidPen.GRAY;e._lines=null,e._fontName="Tahoma";e._fontSize=12;e._fontBold=false;e._fontItalic=false;e._textDecoration=null;e._textDecorationColor=null;e._textShadow=null;e._textAlignment=TextAlign.CENTER;e._lineAlignment=TextLayout.MIDDLE;e._textRotation=0;e._textWrap=TextWrap.NONE;e._textFormat=null;e._numberFormat=null;e._datetimeFormat=null;e._booleanFormat=null;e._prefix=null;e._suffix=null;e._numberScale=0;e._numberSymbols=undefined;e._marginLeft=0;e._marginRight=0;e._marginTop=0;e._marginBottom=0;e._paddingLeft=0;e._paddingRight=0;e._paddingTop=0;e._paddingBottom=0;e._iconIndex=0;e._iconLocation=IconLocation.LEFT_SIDE;e._iconAlignment=Alignment.CENTER;e._iconOffset=0;e._iconPadding=2;e._iconAlpha=1;e._shapeName=null;e._shapeLocation=IconLocation.LEFT_SIDE;e._shapeAlignment=Alignment.CENTER;e._shapeOffset=0;e._shapePadding=2;e._shapeSize=null;e._shapeRotation=0;e._shapeInnerName=null;e._shapeInnerSize=.5;e._shapeInnerRotation=0}e.STYLE_NAMES={renderer:e.RENDERER,fill:e.FILL,color:e.COLOR,inactiveFill:e.INACTIVE_FILL,inactiveColor:e.INACTIVE_COLOR,fills:e.FILLS,fillBrightness:e.FILL_BRIGHTNESS,shadow:e.SHADOW,backgroundImage:e.BACKGROUND_IMAGE,border:e.BORDER,borderLeft:e.BORDER_LEFT,borderRight:e.BORDER_RIGHT,borderTop:e.BORDER_TOP,borderBottom:e.BORDER_BOTTOM,borderRadius:e.BORDER_RADIUS,line:e.LINE,lines:e.LINES,fontName:e.FONT_NAME,fontSize:e.FONT_SIZE,fontBold:e.FONT_BOLD,fontItalic:e.FONT_ITALIC,textDecoration:e.TEXT_DECORATION,textDecorationColor:e.TEXT_DECORATION_COLOR,textShadow:e.TEXT_SHADOW,textAlignment:e.TEXT_ALIGNMENT,lineAlignment:e.LINE_ALIGNMENT,textRotation:e.TEXT_ROTATION,textWrap:e.TEXT_WRAP,textFormat:e.TEXT_FORMAT,numberFormat:e.NUMBER_FORMAT,datetimeFormat:e.DATETIME_FORMAT,booleanFormat:e.BOOLEAN_FORMAT,prefix:e.PREFIX,suffix:e.SUFFIX,numberScale:e.NUMBER_SCALE,numberSymbols:e.NUMBER_SYMBOLS,marginLeft:e.MARGIN_LEFT,marginRight:e.MARGIN_RIGHT,marginTop:e.MARGIN_TOP,marginBottom:e.MARGIN_BOTTOM,paddingLeft:e.PADDING_LEFT,paddingRight:e.PADDING_RIGHT,paddingTop:e.PADDING_TOP,paddingBottom:e.PADDING_BOTTOM,iconIndex:e.ICON_INDEX,iconLocation:e.ICON_LOCATION,iconAlignment:e.ICON_ALIGNMENT,iconOffset:e.ICON_OFFSET,iconPadding:e.ICON_PADDING,iconAlpha:e.ICON_ALPHA,shapeName:e.SHAPE_NAME,shapeLocation:e.SHAPE_LOCATION,shapeAlignment:e.SHAPE_ALIGNMENT,shapeOffset:e.SHAPE_OFFSET,shapePadding:e.SHAPE_PADDING,shapeSize:e.SHAPE_SIZE,shapeRotation:e.SHAPE_ROTATION,shapeInnerName:e.SHAPE_INNER_NAME,shapeInnerSize:e.SHAPE_INNER_SIZE,shapeInnerRotation:e.SHAPE_INNER_ROTATION}});ChartStylesProto=ChartStyles.prototype;ChartStylesProto.$_spd=ChartStylesProto.setParentAndDefault;ChartStylesProto.$_ssd=ChartStylesProto.setSysDefault;ChartStyles.CHANGED="onVisualStylesChanged";var DynamicStyle=defineClass("DynamicStyle",null,{init:function(){this._super()},apply:function(e,t){},_changed:function(){}});var DynamicStyleImpl=defineClass("DynamicStyleImpl",DynamicStyle,{init:function(e){this._super();this._exprNode=null;this._styleMap={};if(e){if(e.hasOwnProperty("expression")){this.setExpression(e.expression)}if(e.hasOwnProperty("styles")){this.setStyles(e.styles)}}},expression:null,callback:null,styles:null,setExpression:function(e){var t=e?e.toString():null;if(t!=this._expression){this._expression=t;this.$_buildExpression();this._changed()}return this},setCallback:function(e){if(e!==this._callback){this._callback=typeof e=="function"?e:null;this._changed()}return this},setStyles:function(e){if(e!=this._styles){this._styles=e;this.$_buildStyles();this._changed()}return this},apply:function(e,t){var i=false;if(this._callback){i=this._callback(e.scope())}else if(this._exprNode&&this._exprNode.evaluate(e)){i=true}if(i){for(var r in this._styleMap){var n=t[$$_STYLE_PROP_MAP[r]];if(n){n.call(t,this._styleMap[r])}}}},getAppliables:function(e,t){var i=false;if(this._callback){i=this._callback(e.scope())}else if(this._exprNode&&this._exprNode.evaluate(e)){i=true}if(i){for(var r in this._styleMap){var n=ChartStylesProto[$$_STYLE_PROP_MAP[r]];if(n){t[r]={setter:n,value:this._styleMap[r]}}}}return t},$_buildExpression:function(){if(this._expression){this._exprNode=ExpressionParser.Default.parse(this._expression);if(this._exprNode==null){this._exprNode=EmptyExpressionNode.Default}}else{this._exprNode=EmptyExpressionNode.Default}},$_buildStyles:function(){this._styleMap={};if(this._styles){for(var e in this._styles){this._styleMap[e]=this._styles[e]}}}});var DynamicStyleCase=defineClass("DynamicStyleCase",DynamicStyle,{init:function(e){this._super();this._callbacks=[];this._exprNodes=[];this._stylesMap=[];if(e){if(e.hasOwnProperty("callbacks")){this.setCallbacks(e.callbacks)}if(e.hasOwnProperty("expressions")){this.setExpressions(e.expressions)}if(e.hasOwnProperty("styles")){this.setStyles(e.styles)}}},expressions:null,callbacks:null,styles:null,setExpressions:function(e){if(e!=this._expressions){this._expressions=e;this.$_buildExpressions();this._changed()}},setCallbacks:function(e){if(e!==this._callbacks){this._callbacks=[];if(_isArray(e)){for(var t=0,i=e.length;t<i;t++){this._callbacks.push(typeof e[t]=="function"?e[t]:null)}}else if(typeof e=="function"){this._callbacks.push(e)}this._changed()}},setStyles:function(e){if(e!=this._styles){this._styles=_isArray(e)?e:[e];this.$_buildStyles();this._changed()}},apply:function(e,t){var i,r,n,s,a,o,l=Math.max(this._callbacks?this._callbacks.length:0,this._exprNodes?this._exprNodes.length:0);for(i=0;i<l;i++){if((r=this._callbacks[i])&&r(e.scope())||(n=this._exprNodes[i])&&n.evaluate(e)){s=this._stylesMap[i];for(a in s){o=s[a];if(o!==undefined){t[$$_STYLE_PROP_MAP[a]].call(t,o)}}break}}},getAppliables:function(e,t){var i,r,n,s,a,o,l=Math.max(this._callbacks?this._callbacks.length:0,this._exprNodes?this._exprNodes.length:0);for(i=0;i<l;i++){s=undefined;if((r=this._callbacks[i])&&r(e.scope())||(n=this._exprNodes[i])&&n.evaluate(e)){s=this._stylesMap[i]}if(s){for(a in s){o=s[a];if(o!==undefined){t[a]={setter:ChartStylesProto[$$_STYLE_PROP_MAP[a]],value:o}}}break}}return t},$_buildExpressions:function(){var e,t,i,r;this._exprNodes=[];if(_isArray(this._expressions)&&(e=this._expressions.length)>0){for(t=0;t<e;t++){i=this._expressions[t];if(i){r=ExpressionParser.Default.parse(i);if(r==null){r=EmptyExpressionNode.Default}this._exprNodes.push(r)}else{this._exprNodes.push(EmptyExpressionNode.Default)}}}this.$_buildStyles()},$_buildStyles:function(){var e,t,i,r,n,s=this._stylesMap=[];if(_isArray(this._styles)){t=Math.max(this._callbacks?this._callbacks.length:0,this._exprNodes?this._exprNodes.length:0);for(e=0;e<t;e++){styles=this._styles[e];if(styles){r={};if(styles){for(var n in styles){r[n]=styles[n]}}s.push(r)}else if(e>0){s.push(s[s.length-1])}else{s.push(null)}}}}});var DynamicStyleCollection=defineClass("DynamicStyleCollection",null,{init:function(){this._super();this._items=[]},count:function(){return this._items.length},getItem:function(e){return this._items[e]},clear:function(){this._items=[]},add:function(e){var t=this.$_createStyle(e);if(t&&this._items.indexOf(t)<0){this._items.push(t)}},getItems:function(){return this._items.slice()},setItems:function(e){var t,i,r;this._items=[];if(e){if(e instanceof DynamicStyleCollection){e=e.getItems()}else if(!_isArray(e)){e=[e]}for(t=0,i=e.length;t<i;t++){r=this.$_createStyle(e[t]);r&&this._items.push(r)}}},prepare:function(){},applyCheck:function(e,t,i){if(e&&t&&i){this.applyInternal(e,t,i)}},applyInternal:function(e,t,i){var r,n,s;for(r=0,n=this._items.length;r<n;r++){s=this._items[r];s.apply(e,t)}},getAppliables:function(e,t){var i,r,n;for(i=0,r=this._items.length;i<r;i++){n=this._items[i];n.getAppliables(e,t)}return t},toArray:function(){return this._items.concat()},proxy:function(){var e,t=[];for(e=0;e<this._items.length;e++){t.push(this._items[e].proxy())}return t},$_createStyle:function(e){var t=null;if(e instanceof DynamicStyle){t=e}else if(e){if(_isArray(e.callbacks)){t=new DynamicStyleCase;t.setCallbacks(e.callbacks);t.setStyles(e.styles)}else if(e.callback){t=new DynamicStyleImpl;t.setCallback(e.callback);t.setStyles(e.styles)}else if(_isArray(e.expressions)){t=new DynamicStyleCase;t.setExpressions(e.expressions);t.setStyles(e.styles)}else if(e.expression){t=new DynamicStyleImpl;t.setExpression(e.expression);t.setStyles(e.styles)}}return t}});var ChartStyleSheet=defineClass("ChartStyleSheet",null,{init:function(e,t,i){this._super();this._owner=e;this._name=t;this.constructor._init(e,this);i&&this._load(i)},name:function(){return this._name},default:function(){return this._default},chart:function(){return this._chart},title:function(){return this._title},subtitle:function(){return this._subtitle},plotArea:function(){return this._plotArea},"plotArea.crosshair":function(){return this["_plotArea.crosshair"]},tooltip:function(){return this._tooltip},backIndicator:function(){return this._backIndicator},zoomIndicator:function(){return this._zoomIndicator},axis:function(){return this._axis},"axis.title":function(){return this["_axis.title"]},"axis.tick":function(){return this["_axis.tick"]},"axis.tick.select":function(){return this["_axis.tick.select"]},"axis.grid":function(){return this["_axis.grid"]},"axis.grid.base":function(){return this["_axis.grid.base"]},"axis.lineIndicator":function(){return this["_axis.lineIndicator"]},"axis.bandIndicator":function(){return this["_axis.bandIndicator"]},categorizedAxis:function(){return this._categorizedAxis},linearAxis:function(){return this._linearAxis},datetimeAxis:function(){return this._datetimeAxis},polarAxis:function(){return this._polarAxis},series:function(){return this._series},seriesGroup:function(){return this._seriesGroup},"seriesGroup.stackLabel":function(){return this["_seriesGroup.stackLabel"]},areaSeries:function(){return this._areaSeries},areaRangeSeries:function(){return this._areaRangeSeries},barSeries:function(){return this._barSeries},barRangeSeries:function(){return this._barRangeSeries},boxplotSeries:function(){return this._boxplotSeries},waterfallSeries:function(){return this._waterfallSeries},bubbleSeries:function(){return this._bubbleSeries},candlestickSeries:function(){return this._candlestickSeries},"candlestickSeries.increasing":function(){return this["_candlestickSeries.increasing"]},"candlestickSeries.decreasing":function(){return this["_candlestickSeries.decreasing"]},ohlcSeries:function(){return this._ohlcSeries},columnRangeSeries:function(){return this._columnRangeSeries},columnSeries:function(){return this._columnSeries},lineSeries:function(){return this._lineSeries},stepLineSeries:function(){return this._stepLineSeries},errorBarSeries:function(){return this._errorBarSeries},scatterSeries:function(){return this._scatterSeries},scatterDataSeries:function(){return this._scatterSeries},histogramSeries:function(){return this._histogramSeries},pieSeries:function(){return this._pieSeries},polarLineSeries:function(){return this._polarLineSeries},polarAreaSeries:function(){return this._polarAreaSeries},polarColumnSeries:function(){return this._polarColumnSeries},treemapSeries:function(){return this._treemapSeries},heatmapSeries:function(){return this._heatmapSeries},chartlet:function(){return this._chartlet},legend:function(){return this._legend},"legend.item":function(){return this["_legend.item"]},"legend.marker":function(){return this["_legend.marker"]},colorScaler:function(){return this._colorScaler},scrollBar:function(){return this._scrollBar},"scrollBar.button":function(){return this["_scrollBar.button"]},"scrollBar.thumb":function(){return this["_scrollBar.thumb"]},_load:function(e){if(e){var t,i,r,n=this.constructor._regions;for(t=n.length;t--;){i=n[t];r=_getObj(e,i);if(_isObject(r)){this["_"+i].extend(r)}}this._owner&&this._owner.loadPalettes(e.palettes)}this._categorizedAxis.setParent(this._axis);this._linearAxis.setParent(this._axis);this._datetimeAxis.setParent(this._axis);this._polarAxis.setParent(this._axis);this._areaSeries.setParent(this._series);this._areaRangeSeries.setParent(this._series);this._barSeries.setParent(this._series);this._barRangeSeries.setParent(this._series);this._boxplotSeries.setParent(this._series);this._waterfallSeries.setParent(this._series);this._bubbleSeries.setParent(this._series);this._candlestickSeries.setParent(this._series);this._ohlcSeries.setParent(this._series);this._columnSeries.setParent(this._series);this._columnRangeSeries.setParent(this._series);this._lineSeries.setParent(this._series);this._stepLineSeries.setParent(this._series);this._errorbarSeries.setParent(this._series);this._scatterSeries.setParent(this._series);this._histogramSeries.setParent(this._series);this._pieSeries.setParent(this._series);this._polarLineSeries.setParent(this._series);this._polarAreaSeries.setParent(this._series);this._polarColumnSeries.setParent(this._series);this._treemapSeries.setParent(this._series);this._heatmapSeries.setParent(this._series)}},{},function(a){a._regions=["default","chart","title","subtitle","footer","plotArea","plotArea.crosshair","legend","legend.item","legend.marker","colorScaler","tooltip","backIndicator","zoomIndicator","axis","axis.title","axis.lineIndicator","axis.bandIndicator","axis.tick","axis.tick.select","axis.grid","axis.grid.base","categorizedAxis","categorizedAxis.title","categorizedAxis.grid","linearAxis","linearAxis.tick","datetimeAxis","datetimeAxis.grid","polarAxis","polarAxis.grid","polarAxis.label","seriesGroup","seriesGroup.stackLabel","series","series.marker","series.label","series.separator","series.sliced","series.hovered","areaSeries","areaRangeSeries","barSeries","barRangeSeries","boxplotSeries","boxplotSeries.upper","boxplotSeries.lower","waterfallSeries","bubbleSeries","bubbleSeries.label","bubbleSeries.marker","bubbleSeries.hover","errorBarSeries","candlestickSeries","candlestickSeries.increasing","candlestickSeries.decreasing","ohlcSeries","columnRangeSeries","columnSeries","lineSeries","stepLineSeries","pieSeries","scatterSeries","errorbarSeries","histogramSeries","polarLineSeries","polarAreaSeries","polarColumnSeries","treemapSeries","heatmapSeries","chartlet","scrollBar","scrollBar.button","scrollBar.thumb"];var e={palettes:[{name:"default",colors:["#539dc3","#95aa56","#d3b83d","#4695d8","#64af36","#e3bf30","#659ed5","#839a2a","#5f78ac","#9aa274","#ae9835","#439fb0","#4d7fb3","#bea832","#938167","#389f2c","#b1b642","#5684af","#36957b","#ab9a2d","#3d62ad"]}],default:{color:"#333",inactiveColor:SolidBrush.LTGRAY,fontName:"'Lucida Sans Unicode', 'Lucida Grande', sans-serif",fontSize:12,textAlignment:Alignment.CENTER,lineAlignment:Alignment.CENTER,textRotation:0,textWrap:TextWrap.NONE,textFormat:null,numberFormat:null,datetimeFormat:null,booleanFormat:null,prefix:null,suffix:null,numberScale:0,numberSymbols:undefined,shapeName:"circle",shapeSize:7},chart:{fontSize:12,color:"#333",paddingLeft:6,paddingRight:6,paddingTop:2,paddingBottom:2,fill:null,line:null,shadowStyle:"none"},title:{fill:null,line:null,fontSize:19,color:"#333",textAlignment:"center",lineAlignment:"middle",padding:4,marginTop:2,marginBottom:2},subtitle:{fill:null,border:null,fontSize:12,color:"#555",textAlignment:"center",lineAlignment:"middle",padding:4,margin:0},footer:{fill:null,border:null,fontSize:11,color:"#cc333333",textAlignment:"right",lineAlignment:"middle",paddingLeft:2,paddingRight:2,paddingTop:1,paddingBottom:1,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0},plotArea:{fill:null,border:null,crosshair:{line:"#70777777"}},axis:{line:"1px solid #ff888888",title:{fontSize:14,color:"#cc000000",textAlignment:"center",lineAlignment:"middle",textWrap:"explicit",paddingTop:2,paddingBottom:2,paddingLeft:4,paddingRight:4},tick:{fontSize:10,paddingTop:1,paddingBottom:1,paddingLeft:2,paddingRight:2,line:"#ccc",select:{fill:"#ff333333",color:"#ffffffff",numberFormat:"#,##0"}},grid:{fill:null,fills:null,line:"1px solid #33000000",base:{line:"1px solid #80000000"}},lineIndicator:{line:"1px, solid #88ff0000"},bandIndicator:{fill:"#22ff0000"}},categorizedAxis:{title:{},grid:{line:null}},linearAxis:{line:null,tick:{line:null},textAlignment:"right"},datetimeAxis:{grid:{border:null}},polarAxis:{fill:null,border:"1px solid #ff888888",grid:{line:"1px solid #33000000"},label:{}},seriesGroup:{separator:{line:null},stackLabel:{fontBold:true}},series:{background:SolidBrush.LTGRAY,border:null,fontSize:10,marker:{fill:"#ff000000",shapeSize:9},label:{fill:null,border:null,margin:0,padding:2,fontSize:12,line:"#aa000000"},separator:{line:null},hover:{fillBrightness:1.5}},areaSeries:{fill:"#33008800",line:"1 solid #aa008800"},barRangeSeries:{itemWidth:.7},barSeries:{fill:"#eee",border:"1px solid #808080",itemWidth:.7,negative:{}},boxplotSeries:{border:"1px solid #dd000000",upper:{},lower:{}},waterfallSeries:{line:"#777,1px,dashed"},bubbleSeries:{scale:1.3,fill:"#55000088",border:"1 solid #ff0000ff",label:{},marker:{},hover:{}},candlestickSeries:{itemWidth:.7,increasing:{},decreasing:{fill:"#0088ff"}},ohlcSeries:{itemWidth:.7,increasing:{},decreasing:{}},columnRangeSeries:{itemWidth:.7},columnSeries:{fill:"#eeeeee",border:"1px solid #808080",itemWidth:.7,negative:{}},lineSeries:{line:"1px solid #ff555555",legend:{symbolName:"circle"}},stepLineSeries:{},areaRangeSeries:{marker:{}},errorBarSeries:{},scatterSeries:{shapeName:"rectangle",shapeSize:11},histogramSeries:{},pieSeries:{border:"1px solid #ff555555",label:{}},polarLineSeries:{line:"1px solid #808080"},polarAreaSeries:{fill:"#ffffff",line:"1px solid #808080"},polarColumnSeries:{fill:"#eeeeee",border:"1px solid #808080",itemWidth:.7},treemapSeries:{fill:"#eeeeee",border:null},heatmapSeries:{fill:"#eeeeee",border:null},chartlet:{},legend:{fill:"#ffffffff",border:"1px solid #808080",paddingLeft:6,paddingRight:6,paddingTop:4,paddingBottom:4,marginTop:2,marginBottom:2,item:{fontSize:11,fill:null,inactiveColor:SolidBrush.LTGRAY,border:null,paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,marginLeft:0,marginTop:0,marginRight:0,marginBottom:0,textAlignment:"left"},marker:{fill:null,inactiveFill:SolidBrush.LTGRAY,border:null,marginLeft:2,marginRight:2,marginTop:2,marginBottom:2,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}},colorScaler:{fill:"#fff",line:"#fff",border:"1px solid #808080",paddingLeft:6,paddingRight:6,paddingTop:4,paddingBottom:4,marginTop:2,marginBottom:2},tooltip:{fill:"#fff",border:"#333333",fontSize:13,color:"#333333",shadow:"#333",paddingLeft:6,paddingRight:6,paddingTop:4,paddingBottom:4},backIndicator:{fill:"#eee",border:"#555",fontSize:13,color:"#333",shadow:null,paddingLeft:6,paddingRight:6,paddingTop:4,paddingBottom:4},zoomIndicator:{fill:"#eee",border:"#555",fontSize:13,color:"#333",shadow:null,paddingLeft:6,paddingRight:6,paddingTop:4,paddingBottom:4},scrollBar:{fill:SolidBrush.SCROLL,button:{fill:4281545523},thumb:{inactiveFill:4290822336,fill:4286611584}}};a._init=function(e,t){var i,r,n,s=a._regions;for(i=s.length;i--;){r=s[i];n="_"+r;t[n]=new ChartStyles(e,r,null)}};a.Default=new a(null,"default",e)});var ChartStylesText=defineClass("ChartStylesText",null,{init:function(e){this._super();this._parse(e)},count:function(){return this._lines.length},phraseCount:function(){var e,t;for(e=0,t=this._lines.length;e<t;e++){t+=this._lines[e].getCount()}return t},getLine:function(e){if(e<0||e>=this._lines.length)throw"Invalid line index: "+e;return this._lines[e]},evaluate:function(e){var t,i;for(t=0,i=this._lines.length;t<i;t++){this._lines[t].evaluate(e)}},_parse:function(e){this._lines=[];if(!e)return;var t,i,r,n,s,a,o,l=null,h=e.length;r=0;while(r<h){n=r;while(n<h){s=e.charAt(n);if(s=="<"||s=="\n"||s=="\r"&&e.charAt(n+1)=="\n"){break}n++}if(n>r){a=e.substring(r,n);i=new ChartStylesPhrase(null,a);if(l==null){l=new ChartStylesLine(i)}else{l.add(i)}}if((r=n)>=h){break}if(e.indexOf("<br/>",r)==r){if(l){this._lines.push(l);l=null}r+=5}else if(e.indexOf("<br>",r)==r){if(l){this._lines.push(l);l=null}r+=4}else if(e.indexOf("\n",r)==r){if(l){this._lines.push(l);l=null}r+=1}else if(e.indexOf("\r\n",r)==r){if(l){this._lines.push(l);l=null}r+=2}else if(e.indexOf("<a",r)==r){n=e.indexOf(">",r);if(n<0){throw"Untermintated tag: "+e.substr(r,20)}o=e.substring(r+7,n);r=n+1;n=e.indexOf("</a>",r);if(n<0){throw"Not exits link end tag"}a=e.substring(r,n);r=n+9;if(a){i=new ChartStylesPhrase(null,a);if(l==null){l=new ChartStylesLine(i)}else{l.add(i)}}}else if(e.indexOf("<styles",r)==r){n=e.indexOf(">",r);if(n<0){throw"Untermintated tag: "+e.substr(r,20)}o=e.substring(r+7,n);r=n+1;n=e.indexOf("</styles>",r);if(n<0){throw"Not exits styles end tag"}a=e.substring(r,n);r=n+9;if(a){t=this._createStyles(o);i=new ChartStylesPhrase(t,a);if(l==null){l=new ChartStylesLine(i)}else{l.add(i)}}}else{throw"Invalid tag: "+e.substr(r,10)}}if(l){this._lines.push(l)}},_createStyles:function(e){var t,i,r,n,s,a,o;var l=null;e=e&&e.trim();if(e){l=new ChartStyles;t=this._lex(e);i=t.length;if(i%3!=0){throw"Invalid styles text: "+e}for(r=0,n=i/3;r<n;r++){s=t[r*3];a=s.charAt(0);if(a=="'"||a=='"'||a=="="){throw"Invalid styles text: "+e}if(t[r*3+1]!="="){throw"Invalid styles text: "+e}o=t[r*3+2];a=o.charAt(0);if(a=="'"||a=='"'){o=o.substr(1,o.length-2)}l[s](o)}}return l},_lex:function(e){var t,i,r=[],n=e.length,s=0;while(true){while(s<n&&e.charAt(s)<=32)s++;if(s>=n)break;i=e[s];if(i=="="){r.push(i);s++}else if(i=="'"||i=='"'){t=e.indexOf(i,s+1);if(t<0){throw"Untermintated string: "+s}r.push(e.substring(s,t+1));s=t+1}else{t=s;while(t<n&&(i=e.charAt(t)).charCodeAt(0)>32&&i!="="&&i!="'"&&i!='"'){t++}r.push(e.substring(s,t));s=t}}return r}});var ChartStylesLine=function(e){this._phrases=e;this.x=this.y=this.w=this.h=0};ChartStylesLine.prototype={constructor:ChartStylesLine,count:function(){if(isArray(this._phrases))return this._phrases.length;else if(this._phrases)return 1;else return 0},text:function(){var e=this.count();if(e==1){return this._phrases.text}else if(e>1){var t="";for(var i=0;i<e;i++){t+=this._phrases[i].text}return t}else{return""}},get:function(e){if(e<0||e>=this.count())throw"Invalid phrase index: "+e;return this._phrases instanceof ChartStylesPhrase?this._phrases:this._phrases[e]},add:function(e){if(this._phrases instanceof ChartStylesPhrase){var t=this._phrases;this._phrases=[];this._phrases.push(t)}this._phrases.push(e)},evaluate:function(e){if(this._phrases instanceof ChartStylesPhrase){this._phrases.evalText(e)}else{for(var t=0,i=this._phrases.length;t<i;t++){this._phrases[t].evalText(e)}}}};var ChartStylesPhrase=function(e,t){this._styles=e;this._source=t;this._exprs=this.parse(t);this.x=this.y=this.w=this.h=0;this.view=UNDEFINED;this.text};ChartStylesPhrase.prototype={constructor:ChartStylesPhrase,styles:function(){return this._styles},source:function(){return this._source},evalText:function(e){var t=this._source;if(t&&e){var i,r,n=0,s;var a=this._exprs;var o=a.length/2;if(o>0){t="";for(r=0;r<o;r++){s=r*2;t+=this._source.substring(n,a[s]-2);i=this._source.substr(a[s],a[s+1]);i=e.getValue(i);t+=i;n=a[s]+a[s+1]+1}if(n<this._source.length){t+=this._source.substring(n)}}}return this.text=t},parse:function(e){var t=[];var i=e.length,r=0,n,s;while(r<i){if(e.indexOf("${",r)==r){n=r+2;s=e.indexOf("}",n);if(s>n){t.push(n,s-n);r=s+1}else{r=n}}else{r++}}return t}};var ChartTool=defineClass("ChartTool",VisualTool,{init:function(e,t){this._super(e);this._chartView=e.chartView()},chartView:function(){return this._chartView},layoutChanged:function(){this._doLayoutChanged()},_plotArea:function(e,t){return this._chartView.bodyView().plotAreaView()},_doLayoutChanged:function(){}});var ChartViewSelectionTool=defineClass("ChartViewSelectionTool",ChartTool,{init:function(e){this._super(e,"selectionTool");this._tipManager=this._chartView._tipManager;this._tipOptions=new ToolTipOptions({animation:true});this._tipTarget=null;this._tipCloseCallback=function(){this._tipTarget=null}.bind(this);this._scrollTool=new ChartAxisScrollTool(e);this._crossManager=new CrosshairManager(e);this._chartView.model()&&this._crossManager.setModel(this._chartView.model().plotArea().crosshair());this._clickElement=null},hoveredView:null,setHoveredView:function(e,t){var i,r,n="",s=this._chartView,a=s.options(),o,l,h,u;if(e instanceof ChartSeriesItemView){if(e.model().detail()){s.container().setCursor(Cursor.POINTER)}else if(a.scatter().draggable){s.container().setCursor(a._seriesCursor||Cursor.POINTER)}}else if(e instanceof ChartElement&&e.cursor()){s.container().setCursor(e.cursor())}if(e!==this._hoveredView||t){this._hoveredView=e;if(a.showTooltip()&&e&&e.tooltip&&(r=e.tooltip())){i=this._tipOptions;if(a.tooltipAllSeries()){o=s.getSeriesViews();for(var c=0;c<o.length;c++){l=o[c];if(l._itemCount-1>=e.index()){seriesItemView=l.getItem(e.index());h=seriesItemView.tooltip();u=h.getMessage(seriesItemView);if(u){n+=u+a.tooltipSeparator()}}}}else{n=r.getMessage(e)}i.setStyles(r.styles()).setDelay(a.tooltipDelay()).setDuration(a.tooltipDuration()).setMessage(n);if(t){this._showForceTooltip(e,i)}else{this._showTooltip(e,i)}}else{}}},setModel:function(e){this._crossManager.setModel(e?e.plotArea().crosshair():null)},_doCancel:function(e){if(this._dragTracker&&this._dragTracker.cancelable()){}},_doKeyDown:function(e,t,i,r){switch(e){case Keys.BACK:this.$_gotoPredecessor();return true}},_doMouseDown:function(e,t,i,r,n,s){var a=this._clickElement=this.findElementAt(e,t,true);this._scrollTool.stop();if(this._scrollTool.start(a,e,t)){return}if(this._chartView.isZoomable()){this.setDragTracker(new ChartZoomTracker(this._chartView))}},_doMouseMove:function(e,t,i,r){var n,s,a,o,l,h=this._chartView;if(this._scrollTool.isScrolling()){this._scrollTool.move(e,t)}else if(this.dragTracker()){this._hideTooltip()}else{h.container().restoreCursor();n=this.findElementAt(e,t,true);s=this._plotArea();a=s&&s.model()&&s.model().crosshair().enabled();if(a){this._crossManager.setFocus(e,t,s,n)}else{this._crossManager.hide()}this._tipManager.force(false);this._tipManager.setTarget(n);h.hovering()&&this.setHoveredView(n);l=this._getEditRequest(n,e,t,i,r);if(l&&l.cursor()){grid.container().setCursor(l.cursor())}}},_doMouseUp:function(e,t){var i,r,n,s=this._chartView,a=this.findElementAt(e,t,true);if(this._scrollTool.isScrolling()){this._scrollTool.stop(e,t)}else if(a&&a===this._clickElement){if(a instanceof ChartBackIndicator){this.$_gotoPredecessor()}else if(a instanceof ChartZoomIndicator){s.model().getXAxis(0).zoomOut(1)}else if(a instanceof ChartSeriesItemView){i=s.model().getSubchart(a.model().detail());if(i){this._chartView.setDrillDown(i)}else{r=a.model();n=r.series();n.$_itemClicked(r);s.fireEvent(ChartView.SERIES_CLICKED,r)}}else if(a instanceof ChartAxisLabelView){a.parent().$_itemClicked(a);s.fireEvent(ChartView.AXIS_LABEL_CLICKED,a)}else if(a instanceof ChartLegendItemView&&a.model().legend().clickable()){this._legendItemClicked(a.model())}else if(a instanceof SeriesLegendItemView&&a.model().legend().clickable()){this._legendItemClicked(a.model())}}},onMouseLeave:function(e){this._crossManager.hide()},_doDblClick:function(e,t){if(this.isDragging()){return false}var i=this.findElementAt(e,t,true)},_showTooltip:function(e,t){var i=this._tipManager;if(e&&t){i.show(t,e,null);this._tipTarget=e}},_showForceTooltip:function(e,t){var i=this._tipManager;if(e&&t){i._active=false;i.show(t,e,null);this._tipTarget=e}},_hideTooltip:function(){this._tipManager.close();this._tipTarget=null},_getEditRequest:function(e,t,i,r,n){},_legendItemClicked:function(e){var t,i=e.legend();switch(i.clickAction()){case ChartLegendItemAction.SLICE:t=e.source();t.series().setItemProperty(t,"sliced",!t.sliced());break;case ChartLegendItemAction.DISPLAY:default:e.setActive(!e.active());break}},$_gotoPredecessor:function(){this._chartView.gotoParent()}});var ChartDragTracker=defineClass("ChartDragTracker",DragTracker,{init:function(e,t){this._super(e.container(),t);this._chart=e},chart:function(){return this._chart}});var ChartZommFeedback=defineClass("ChartZommFeedback",LayerElement,{init:function(e){this._super(e._dom,"zoomTracker",true)},_doDraw:function(e){var t=new SolidBrush(536870912);var i=Math.min(this._start,this._end);var r=Math.max(this._start,this._end);e.drawBoundsI(t,null,i,0,r-i,this.height())},_doDrawHtml:function(){this._doDraw(this.$_getGraphics(true))}});var ChartZoomTracker=defineClass("ChartZoomTracker",ChartDragTracker,{init:function(e){this._super(e,"zoomTracker");this._feedback=new ChartZommFeedback(e)},isStartWhenCreated:function(){return true},_doStart:function(e,t){var i=this._feedback;this.chart().container().addFeedback(i);var r=this.chart().bodyView().plotAreaView().boundsByContainer();i.setRectI(r);this._startX=i.containerToElement(e,t).x;i._start=i._end=this._startX;return true},_doEnded:function(){this.chart().container().removeFeedback(this._feedback);this.chart().container().invalidate()},_doDrag:function(e,t){var i=this._feedback;var e=i.containerToElement(e,t).x;i._end=e;i.invalidate();this.chart().container().invalidate();return true},_doCompleted:function(){var e=this.chart().model().getXAxis(0);var t=this._feedback;var i=Math.min(t._start,t._end);var r=Math.max(t._start,t._end);if(r>i){var n=t.width();var s=e.getCategoryIndexAt(n,i);var a=e.getCategoryIndexAt(n,r);e.zoomIn(s,a)}}});var Easing=_extend(null,{LINEAR:"linear",QUAD_IN:"quadIn",QUAD_OUT:"quadOut",QUAD_INOUT:"quadInOut",CUBIC_IN:"cubicIn",CUBIC_OUT:"cubicOut",CUBIC_INOUT:"cubicInOut",QUART_IN:"quartIn",QUART_OUT:"quartOut",QUART_INOUT:"quartInOut",QUINT_IN:"quintIn",QUINT_OUT:"quintOut",QUINT_INOUT:"quintInOut",SINE_IN:"sineIn",SINE_OUT:"sineOut",SINE_INOUT:"sineInOut",EXPO_IN:"expoIn",EXPO_OUT:"expoOut",EXPO_INOUT:"expoInOut",CIRC_IN:"circIn",CIRC_OUT:"circOut",CIRC_INOUT:"circInOut",ELASTIC_IN:"elasticIn",ELASTIC_OUT:"elasticOut",ELASTIC_INOUT:"elasticInOut",BACK_IN:"backIn",BACK_OUT:"backOut",BACK_INOUT:"backInOut",BOUNCE_IN:"bounceIn",BOUNCE_OUT:"bounceOut",BOUNCE_INOUT:"bounceInOut",Equations:{linear:function(e,t,i,r){return i*e/r+t},quadIn:function(e,t,i,r){return i*(e/=r)*e+t},quadOut:function(e,t,i,r){return-i*(e/=r)*(e-2)+t},quadInOut:function(e,t,i,r){if((e/=r/2)<1)return i/2*e*e+t;return-i/2*(--e*(e-2)-1)+t},cubicIn:function(e,t,i,r){return i*(e/=r)*e*e+t},cubicOut:function(e,t,i,r){return i*((e=e/r-1)*e*e+1)+t},cubicInOut:function(e,t,i,r){if((e/=r/2)<1)return i/2*e*e*e+t;return i/2*((e-=2)*e*e+2)+t},quartIn:function(e,t,i,r){return i*(e/=r)*e*e*e+t},quartOut:function(e,t,i,r){return-i*((e=e/r-1)*e*e*e-1)+t},quartInOut:function(e,t,i,r){if((e/=r/2)<1)return i/2*e*e*e*e+t;return-i/2*((e-=2)*e*e*e-2)+t},quintIn:function(e,t,i,r){return i*(e/=r)*e*e*e*e+t},quintOut:function(e,t,i,r){return i*((e=e/r-1)*e*e*e*e+1)+t},quintInOut:function(e,t,i,r){if((e/=r/2)<1)return i/2*e*e*e*e*e+t;return i/2*((e-=2)*e*e*e*e+2)+t},sineIn:function(e,t,i,r){return-i*Math.cos(e/r*(Math.PI/2))+i+t},sineOut:function(e,t,i,r){return i*Math.sin(e/r*(Math.PI/2))+t},sineInOut:function(e,t,i,r){return-i/2*(Math.cos(Math.PI*e/r)-1)+t},expoIn:function(e,t,i,r){return e==0?t:i*Math.pow(2,10*(e/r-1))+t},expoOut:function(e,t,i,r){return e==r?t+i:i*(-Math.pow(2,-10*e/r)+1)+t},expoInOut:function(e,t,i,r){if(e==0)return t;if(e==r)return t+i;if((e/=r/2)<1)return i/2*Math.pow(2,10*(e-1))+t;return i/2*(-Math.pow(2,-10*--e)+2)+t},circIn:function(e,t,i,r){return-i*(Math.sqrt(1-(e/=r)*e)-1)+t},circOut:function(e,t,i,r){return i*Math.sqrt(1-(e=e/r-1)*e)+t},circInOut:function(e,t,i,r){if((e/=r/2)<1)return-i/2*(Math.sqrt(1-e*e)-1)+t;return i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},elasticIn:function(e,t,i,r){if(e==0)return t;if((e/=r)==1)return t+i;var n=r*.3;return-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-n/4)*(2*Math.PI)/n))+t},elasticOut:function(e,t,i,r){if(e==0)return t;if((e/=r)==1)return t+i;var n=r*.3;return i*Math.pow(2,-10*e)*Math.sin((e*r-n/4)*(2*Math.PI)/n)+i+t},elasticInOut:function(e,t,i,r){if(e==0)return t;if((e/=r/2)==2)return t+i;var n=r*(.3*1.5);if(e<1)return-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-n/4)*(2*Math.PI)/n))+t;return i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-n/4)*(2*Math.PI)/n)*.5+i+t},backIn:function(e,t,i,r){var n=1.70158;return i*(e/=r)*e*((n+1)*e-n)+t},backOut:function(e,t,i,r){var n=1.70158;return i*((e=e/r-1)*e*((n+1)*e+n)+1)+t},backInOut:function(e,t,i,r){var n=1.70158;if((e/=r/2)<1)return i/2*(e*e*(((n*=1.525)+1)*e-n))+t;return i/2*((e-=2)*e*(((n*=1.525)+1)*e+n)+2)+t},bounceIn:function(e,t,i,r){return i-Equations.bounceOut(r-e,0,i,r)+t},bounceOut:function(e,t,i,r){if((e/=r)<1/2.75)return i*(7.5625*e*e)+t;if(e<2/2.75)return i*(7.5625*(e-=1.5/2.75)*e+.75)+t;if(e<2.5/2.75)return i*(7.5625*(e-=2.25/2.75)*e+.9375)+t;return i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},bounceInOut:function(e,t,i,r){if(e<r/2)return Equations.bounceIn(e*2,0,i,r)*.5+t;return Equations.bounceOut(e*2-r,0,i,r)*.5+i*.5+t}}});var ChartAnimation=defineClass("ChartAnimation",null,{init:function(e){this._super();this._id=e},active:true,trigger:ChartAnimationTrigger.LOAD,nexts:null,duration:1e3,delay:0,easing:Easing.CIRC_IN,setNexts:function(e){e=_asArray(e);if(e!==this._nexts){this._nexts=e.slice()}},setDuration:function(e){if(e!==this._duration){this._duration=this.$_getTime(e,1e3)}},setDelay:function(e){if(e!==this._delay){this._delay=this.$_getTime(e,0)}},setEasing:function(e){e=e||Easing.CIRC_IN;if(e!==this._easing){this._easing=e}},id:function(){return this._id},displayName:function(){return this._id||this.toString()},prepare:function(e){this._doPrepare(e)},_doPrepare:function(e){},_calculate:function(e,t,i){i=_pickNum(i,this._start);if(!isNaN(i)){return i+(e-i)*t}else{return e*t}},$_getTime:function(e,t){if(typeof e=="string"){e=e.trim().toLowerCase();if(e){if(e.charAt(e.length-1)=="s"){e=parseFloat(e.substr(0,e.length-1))*1e3}else{e=parseFloat(e)}return e}else{return t}}else{e=Number(e);return isNaN(e)?t:e}}},{create:function(e){var t;if(e){if(e.property){t=new ChartPropAnimation(e.id,e.property)}else if(e.style){t=ChartStyleAnimation.create(e.id,e.style)}}t&&t.assign(e);return t}});var ChartAnimationRun=defineClass("ChartAnimationRun",null,{init:function(e,t){this._super();this._target=e;this._model=t;this._started=(new Date).getTime();this._stopped=false;this._rate=0;this._index=0;t.prepare(this)},target:function(){return this._target},model:function(){return this._model},rate:function(){return this._rate},index:function(){return this._index},finished:function(){return this._stopped},calculate:function(e,t){return this._model._calculate(e,this._rate,t)},update:function(){var e,t=this._target,i=this._model,r=i._delay,n=(new Date).getTime(),s=Easing.Equations[i._easing];if(s){if(n-this._started>r){this._rate=s(n-r-this._started,0,1,i._duration);if(i instanceof ChartPropAnimation&&(t.getChartEffect&&(e=t.getChartEffect(i.property())))instanceof ChartEffect){e.setRate(this._rate)}return n-r-this._started<i._duration}else{return true}}else{return false}},stop:function(){var e,t=this._target,i=this._model;this._rate=1;if(i instanceof ChartPropAnimation&&(t.getChartEffect&&(e=t.getChartEffect(i.property())))instanceof ChartEffect){e.setRate(0)}this._stopped=true}});var ChartAnimationManager=defineClass("ChartAnimationManager",EventAware,{init:function(e){this._super();_assert(!!e,"animation callback is null.");this._callback=e;this._models={};this._modelMap={};this._runs=[];this._targetRuns={};this._target=null;this._trigger=null;this._timer=null},active:function(){return this._timer!=null},animating:function(e){function t(e,t){var i=e.getRuns(t);return i&&i.length>0}if(this.active()){if(e){return t(this,e)}else{return this._runs&&this._runs.length>0}}},propAnimating:function(e,t){function r(e,t){var i,r;if(e){for(i=e.length;i--;){r=e[i].model();if(r instanceof ChartPropAnimation&&r._property==t){return true}}}}function i(e,t,i){return r(runs=e.getRuns(t),i)}if(this.active()){if(e){return i(this,e,t)}else{return r(this._runs,t)}}},add:function(e,t){if(!e&&!t){return 0}var i,r,n,s,a,o=this._models,l=t||e.animations(),h=0;if(l&&l.length>0){n=o[e.$_hash];if(!n){n=[];o[e.$_hash]=n;n.$_target=e}for(i=0,r=l.length;i<r;i++){s=l[i];if(s instanceof ChartAnimation){n.push(s);h++;a=s.id();if(_isString(a)&&a){s.$_target=e;this._modelMap[a]=s}}}}return h},clear:function(e){delete this._models[e.$_hash]},clearTrigger:function(e){var t,i,r,n,s=[],a=this._models;for(t in a){i=a[t];for(r=i.length;r--;){if(i[r].trigger()===e){i.splice(r,1)}}if(i.length<1){s.push(t)}}for(r=s.length;r--;){delete a[s[r]]}},clearAll:function(){this._models={}},_createRun:function(e,t){var i,r=new ChartAnimationRun(e,t);if(t instanceof ChartPropAnimation&&(e.getChartEffect&&(i=e.getChartEffect(t.property())))instanceof ChartEffect){i.assign(t)}return r},run:function(e,t,i){function r(e,t,i,r,n,s){var a,o,l,h=t.$_target,u=t.length;for(a=0;a<u;a++){o=t[a];if(o.active()&&o.trigger()===i){if(!r||o.property()==r){l=e._createRun(h,o);n.push(l);s.push(l)}}}}this.stop();if(t){var n,s,a,o=this._runs=[];this._targetRuns={};if(e){s=e.$_hash;n=this._models[s];this._targetRuns[s]=a=[];r(this,n,t,i,o,a)}else{for(s in this._models){n=this._models[s];this._targetRuns[s]=a=[];r(this,n,t,i,o,a)}}if(o.length>0){this.timerHandler();this._timer=setInterval(this.timerHandler.bind(this),10);this._callback(ChartAnimationManager.ACTIVE);_trace(">>>","Animation Manager activated...")}}},runItem:function(e,t){e=e||t.$_target;if(e){run=this._createRun(e,t)}},stop:function(){if(this._timer){clearInterval(this._timer);this._timer=null;this._runs=null;this._callback(ChartAnimationManager.DEACTIVE);_trace(">>>","Animation Manager deactivated.")}},getRuns:function(e,t){if(t||this.active()){return this._targetRuns[e.$_hash]}return null},getProperty:function(e,t,i,r){var n,s,a,o=this.getRuns(e);if(o){for(n=o.length;n--;){s=o[n];a=s._model;if(a instanceof ChartPropAnimation&&a._property==t){return s.calculate(i,r)}}}return i},getStyle:function(e,t,i,r){var n,s,a,o=this.getRuns(e);if(o){for(n=o.length;n--;){s=o[n];a=s._model;if(a instanceof ChartStyleAnimation&&a._style==t){return s.calculate(i,r)}}}return i},timerHandler:function(){var e,t,i,r,n,s=this._runs,a=s&&s.length>0,o=false;if(a){for(e=s.length-1;e>=0;e--){t=s[e];if(t.finished()){s.splice(e,1);i=t.model();this._callback.call(this,ChartAnimationManager.STOP,t.target(),i);r=i.nexts();if(r){for(j=0;j<r.length;j++){i=this._modelMap[r[j]];if(i){t=this._createRun(i.$_target,i);n=n||[];n.push(t)}}}}else{if(!t.update()){t.stop()}o=true}}}if(n){for(e=0;e<n.length;e++){t=n[e];s=this._targetRuns[t._target.$_hash];if(!s){this._targetRuns[t._target.$_hash]=s=[]}s.push(t)}this._runs=this._runs.concat(n);this._callback.call(this,ChartAnimationManager.INVALIDATE)}else if(a&&!o){this.stop();this._callback.call(this,ChartAnimationManager.INVALIDATE)}else{this._callback.call(this,ChartAnimationManager.INVALIDATE)}}},{ACTIVE:"active",DEACTIVE:"deactive",STOP:"stop"});var ChartPropAnimation=defineClass("ChartPropAnimation",ChartAnimation,{init:function(e,t){this._super(e);this._property=t},property:function(){return this._property},displayName:function(){return this._property}});var ChartStyleAnimation=defineClass("ChartStyleAnimation",ChartAnimation,{init:function(e,t){this._super(e);this._style=t},style:function(){return this._style},_calculate:function(e,t,i){return e*t},displayName:function(){return this._style}},{create:function(e,t){if(t=="shapeSize"){return new ChartDiemnsionAnimation(e,t)}else{var i=t.split("."),r=i[0],n=i[1];if(n=="alpha"){return new ChartAlphaAnimation(e,r)}else if(n=="red"||n=="green"||n=="blue"){return new ChartRgbAnimation(e,r,n.charAt(0))}else if(n=="brightness"){return new ChartBrightAnimation(e,r)}else if(n=="width"){}return new ChartStyleAnimation(e,t)}}});var ChartAlphaAnimation=defineClass("ChartAlphaAnimation",ChartStyleAnimation,{init:function(e,t){this._super(e,t)},_calculate:function(e,t,i){if(e instanceof SolidBrush){var r,n=e.color();if(!isNaN(this._start)){r=this._start+(1-this._start)*t}else{r=t}r=Math.max(0,Math.min(1,n.a()*r));n=Color.createWithArgb(r,n.r(),n.g(),n.b());return new SolidBrush(n)}return this._super(e,t)}});var ChartRgbAnimation=defineClass("ChartRgbAnimation",ChartStyleAnimation,{init:function(e,t,i){this._super(e,t);this._rgb=i},_calculate:function(e,t,i){if(e instanceof SolidBrush){var r=e.color(),n=this._rgb,s=_floor(r.r()*(n=="r"?t:1)),a=_floor(r.g()*(n=="g"?t:1)),o=_floor(r.b()*(n=="b"?t:1));r=Color.createWithArgb(r.a(),s,a,o);return new SolidBrush(r)}return this._super(e,t)}});var ChartDiemnsionAnimation=defineClass("ChartDiemnsionAnimation",ChartStyleAnimation,{init:function(e,t){this._super(e,t)},_doPrepare:function(e){this._dimStart=_defined(this._start)&&new Dimension(this._start);this._dim=new Dimension},_calculate:function(e,t,i){var i=_pick(i,this._start),r=this._dim;if(!i||e.fixed()==i.fixed()){r._valuePercent=e._valuePercent;i=i?i._value:0;r._value=i+(e._value-i)*t;return r}return e}});var ChartEffect=defineClass("ChartEffect",null,{init:function(e,t){this._super();this._owner=e;this._rate=0;t&&this.assign(t)},owner:function(){return this._owner},rate:function(){return this._rate},setRate:function(e){if(this._doUpdate(e)){this._owner.chartEffectUpdated(this)}},_changed:function(){this._owner.chartEffectChanged(this)},_doUpdate:function(e){this._rate=e;return true}});var ChartMaskEffect=defineClass("ChartMaskEffect",ChartEffect,{init:function(e){this._super(e)},shape:EnumProp(ChartMaskShape,ChartMaskShape.RECTANGLE),origin:EnumProp(ChartMaskLocation,ChartMaskLocation.LEFT),getMask:function(e,t){function i(e,t){var i=-t.getX(),r=-t.getY(),n=t.width(),s=t.height();e.drawBounds(null,null,i,r,n,s)}function r(e,t){var i=t.getRunProperty(ChartAnimationTypes.PROP_MASK),r=0,n=0,s=t.width(),a=t.height(),o=t.getAnimationAttr(ChartAnimationTypes.PROP_MASK,"start");if(o=="ellipse"){r=r+s/2;n=n+a/2;s/=3/2;a/=3/2;s*=i;a*=i;e.drawEllipse(SolidBrush.Null,null,r-s,n-a,s*2,a*2)}else{switch(o){case"hcenter":s*=i;r+=(t.width()-s)/2;break;case"vcenter":a*=i;n+=(t.height()-a)/2;break;case"center":s*=i;r+=(t.width()-s)/2;a*=i;n+=(t.height()-a)/2;break;case"top":a*=i;break;case"bottom":a*=i;n+=t.height()-a;break;case"right":s*=i;r+=t.width()-s;break;case"left":default:s*=i;break}e.drawBounds(SolidBrush.Null,null,r,n,s,a)}}var n=this._rate;return n>0?new Rectangle(0,0,e*n,t):null}});var Chart=defineClass("Chart",EventAware,{init:function(){this._super();this._defaultStyles=new ChartStyles(this,"default");this._axisStyles=new ChartStyles(this,"axis");this._seriesStyles=new ChartStyles(this,"series");this._styles=new ChartStyles(this,"chart");this._tooltipStyles=new ChartStyles(this,"tooltip");this._backIndicatorStyles=new ChartStyles(this,"backIndicator");this._zoomIndicatorStyles=new ChartStyles(this,"zoomIndicator");this._dataProvider=new ChartDataProvider(this);this._titlePane=new ChartTitlePane(this,"title");this._headerPane=new ChartVPane(this,"header");this._footerPane=new ChartVPane(this,"footer");this._leftPane=new ChartHPane(this,"left");this._rightPane=new ChartHPane(this,"right");var e=function(e,t){this._legendItemActivated(e,t)}.bind(this);this._legendPane=new ChartLegendPane(this,"legend",e);this._leftLegendPane=new SeriesLegendPane(this,"leftLegend",e);this._rightLegendPane=new SeriesLegendPane(this,"rightLegend",e);this._topLegendPane=new SeriesLegendPane(this,"topLegend",e);this._bottomLegendPane=new SeriesLegendPane(this,"bottomLegend",e);this._plotArea=new ChartPlotArea(this);this._axes=[];this._xAxes=[];this._yAxes=[];this._series=[];this._seriesAll=[];this._seriesLoading=false;this._seriesDirty=false;this._data=[]},stylesChanged:function(e){this._changed()},getPaletteScope:function(){return this},getPalette:function(e){return this._palettes?this._palettes._palettes[e]:null},getPaletteIndex:function(e){return e},name:null,delegate:null,predecessor:null,palettes:null,title:null,subtitle:null,legend:null,titlePane:null,headerPane:null,footerPane:null,leftPane:null,rightPane:null,legendPane:null,leftLegendPane:null,rightLegendPane:null,topLegendPane:null,bottomLegendPane:null,plotArea:null,xAxes:null,yAxes:null,series:null,subcharts:null,styles:null,backIndicatorStyles:null,zoomIndicatorStyles:null,hovering:false,crosshair:null,data:null,toggleSeriesWhenLegendClick:true,resizeDelay:10,title_:function(){return this._titlePane.title()},setTitle:function(e){this._titlePane.setTitle(e);return this},subtitle_:function(){return this._titlePane.subtitle()},setSubtitle:function(e){this._titlePane.setSubtitle(e);return this},legend_:function(){return this._legendPane.legend()},setLegend:function(e){this._legendPane.setLegend(e);return this},setTitlePane:function(e){if(e!=this._titlePane){this._titlePane.assign(e)}return this},setHeaderPane:function(e){if(e!=this._headerPane){this._headerPane.assign(e)}return this},setFooterPane:function(e){if(e!=this._footerPane){this._footerPane.assign(e)}return this},setLeftPane:function(e){if(e!=this._leftPane){this._leftPane.assign(e)}return this},setRightPane:function(e){if(e!=this._rightPane){this._rightPane.assign(e)}return this},setLegendPane:function(e){if(e!=this._legendPane){this._legendPane.assign(e)}return this},setLeftLegendPane:function(e){if(e!=this._leftLegendPane){this._leftLegendPane.assign(e)}return this},setRightLegendPane:function(e){if(e!=this._rightLegendPane){this._rightLegendPane.assign(e)}return this},setTopLegendPane:function(e){if(e!=this._topLegendPane){this._topLegendPane.assign(e)}return this},setBottomLegendPane:function(e){if(e!=this._bottomLegendPane){this._bottomLegendPane.assign(e)}return this},setPlotArea:function(e){if(e!==this._plotArea){this._plotArea.assign(e)}return this},xAxes_:function(){return this._xAxes.slice()},setXAxes:function(e){var t,i,r,n=this._xAxes=[];if(e instanceof ChartAxis){this.$_addAxis(e,n)}else if(_isArray(e)){for(t=0,i=e.length;t<i;t++){r=e[t];if(r instanceof ChartAxis){this.$_addAxis(r,n)}}}return this},yAxes_:function(){return this._yAxes.slice()},setYAxes:function(e){var t,i,r,n=this._yAxes=[];if(e instanceof ChartAxis){this.$_addAxis(e,n)}else if(_isArray(e)){for(t=0,i=e.length;t<i;t++){r=e[t];if(r instanceof ChartAxis){this.$_addAxis(r,n)}}}return this},series_:function(){return this._series.slice()},$_addSeries:function(e,t){var i,r;if(t){if((r=e.length)>0){for(i=0;i<r;i++){if(e[i]===t||!e[i].mixableWith(t)){return false}}}e.push(t);t.tooltip&&t.tooltip().styles().setParent(this._tooltipStyles);return true}return false},setSeries:function(e){var t,i=this._series.length;this._series=[];if(e instanceof ChartSeries||e instanceof ChartSeriesGroup){this.$_addSeries(this._series,e)}else{for(t=0,i=e.length;t<i;t++){this.$_addSeries(this._series,e[t])}}this._seriesLoading=true;this._seriesDirty=true;return this},subcharts_:function(){return this._subcharts&&this._subcharts.slice()},setSubcharts:function(e){if(e!==this._subcharts){this._subcharts=e}return this},setData:function(e){if(e===this._data){return}this._data.length=0;if(!e){return}var t,i,r,n,s=e;if(!isArray(s)){s=[e]}for(t=0,i=s.length;t<i;t++){r=s[t];n=null;if("url"in r){n=new RemoteChartData(r.id)}else{n=new LocalChartData(r.id)}if(n){n.assign(r);this._data.push(n);if(n instanceof RemoteChartData){this.loadRemoteData(n)}}}},setStyles:function(e){if(e!=this._styles){this._styles.extend(e)}return this},setBackIndicagtorStyles:function(e){if(e!=this._backIndicatorStyles){this._backIndicatorStyles.extend(e)}return this},setZoomIndicagtorStyles:function(e){if(e!=this._zoomIndicatorStyles){this._zoomIndicatorStyles.extend(e)}return this},isPolar:function(){var e=this.getMainSeries();return e&&e.isPolar()},isInverted:function(){var e=this.getMainSeries();return e&&e.inverted()},seriesAll:function(){return this._seriesAll.slice()},seriesLoading:function(){return this._seriesLoading},seriesDirty:function(){return this._seriesDirty},seriesCount:function(){return this._series.length},isZoomable:function(){for(i=0;i<this._xAxes.length;i++){if(this._xAxes[i].isZoomable())return true}for(i=0;i<this._yAxes.length;i++){if(this._yAxes[i].isZoomable())return true}return false},setStyleSheet:function(e){this._styleSheet=e;if(e){var t,i,r,n;t=this._defaultStyles.$_spd(null,e.default());i=this._axisStyles.$_spd(e.axis(),t);r=this._seriesStyles.$_spd(e.series(),t);this._styles.$_spd(e.chart(),t);this._titlePane.setStyleSheet(t,e);this._legendPane.setStyleSheet(t,e);this._plotArea.setStyleSheet(t,e);for(n=0;n<this._xAxes.length;n++){this._xAxes[n].setStyleSheet(i,e)}for(n=0;n<this._yAxes.length;n++){this._yAxes[n].setStyleSheet(i,e)}for(n=0;n<this._series.length;n++){this._series[n].setStyleSheet(r,e)}this._tooltipStyles.$_spd(e.tooltip(),t);this._backIndicatorStyles.$_spd(e.backIndicator(),t);this._zoomIndicatorStyles.$_spd(e.zoomIndicator(),t)}},invalidate:function(){this._seriesLoading=true;this._seriesDirty=true},loadData:function(e){this._dataProvider.load(e)},hasData:function(e){return this._dataProvider.hasData(e)},getData:function(e){return this._dataProvider.getData(e)},getAxes:function(e,t,i){var r,n,s,a,o=this.isInverted(),l=[];if(i){s=this._xAxes;for(r=0,n=s.length;r<n;r++){a=s[r];if(a instanceof PolarAxis){l.push(a)}}s=this._yAxes;for(r=0,n=s.length;r<n;r++){a=s[r];if(a instanceof LinearAxis){l.push(a)}}}else if(e==ChartAxisOrientation.HORIZONTAL){s=o?this._yAxes:this._xAxes;for(r=0,n=s.length;r<n;r++){a=s[r];if(a instanceof CartesianAxis&&a.location()==t){l.push(a)}}}else if(e==ChartAxisOrientation.VERTICAL){s=o?this._xAxes:this._yAxes;for(r=0,n=s.length;r<n;r++){a=s[r];if(a instanceof CartesianAxis&&a.location()==t){l.push(a)}}}return l},getSeriesLegends:function(e){var t,i,r,n,s=this._seriesAll,a=!_defined(e),o=null;for(t=0,i=s.length;t<i;t++){r=s[t];n=r.legend();if(n&&n.visible()&&(a||n.position()==e)){if(!o){o=[]}o.push(n)}n=r.colorScaler();if(n&&n.visible()&&(a||n.position()==e)&&r.colorScale){n.setScale(r.colorScale());if(!o){o=[]}o.push(n)}}return o},getSubchart:function(e){var t,i=this._subcharts;if(i){for(t=i.length;t--;){if(i[t].name()===e){return i[t]}}}},getLegendItems:function(){var e,t,i,r,n,s=[];for(e=0,i=this._series.length;e<i;e++){n=this._series[e];if(n instanceof ChartSeries){if(n.itemsLegend()){for(t=0,r=n.itemCount();t<r;t++){s.push(n.getItem(t))}}else{s.push(n)}}else if(n instanceof ChartSeriesGroup){for(t=0,r=n.count();t<r;t++){s.push(n.getItem(t))}}}return s},prepareLayout:function(){if(this._seriesDirty){this.$_disconnectSeries();this.$_collectAxes();this.$_collectSeries();this.$_connectSeries()}else if(this._itemsDirty){this.$_refreshSeriesItems()}},endLayout:function(){this._seriesLoading=this._seriesDirty=this._itemsDirty=false},getXAxis:function(e){return this._xAxes[e]},getYAxis:function(e){return this._yAxes[e]},getMainSeries:function(){return this._series[0]},getSeries:function(e){return this._series[e]},_changed:function(e){},chartObjectChanged:function(e){if(e instanceof ChartSeries){this._seriesDirty=true}this._fireRequestUpdate()},loadRemoteData:function(e){if(e.url()){e.load(this.dataLoadCallback.bind(this))}},dataLoadCallback:function(e){if(e){var t,i;for(t=0,i=this._series.length;t<i;t++){this._series[t].chartDataChanged(e.id)}for(t=0,i=this._axes.length;t<i;t++){this._axes[t].chartDataChanged(e.id)}this._changed()}},$_collectAxes:function(){this._axes=this._xAxes.concat(this._yAxes)},$_addAxis:function(e,t){if(e&&t){for(var i=t.length;i--;){if(t[i]===e){return}}t.push(e);if(this._styleSheet){e.setStyleSheet(this._defaultStyles,this._styleSheet)}}},$_resetAxisTicks:function(e,t,i,r,n){if(e.update(this,i||r)){if(e instanceof CartesianAxis){var s;if(this.isPolar()){s=Math.min(n.height,n.width)*this.plotArea().polarSize()}else{s=t==ChartAxisOrientation.VERTICAL?n.height:n.width}e.refreshTicks(this,t,s)}else{e.refreshTicks(this,t,0)}}},$_collectSeries:function(){function e(e,t,i){var r,n,s;if(t instanceof ChartSeriesGroup){n=t;for(r=0;r<n.count();r++){s=n.getItem(r);if(s.visible()){if(s instanceof ChartSeriesGroup){}else{s.update(e,true);i.push(s)}}}n.update(e,true)}else if(t.visible()){t.update(e,true);i.push(t)}}var t,i,r,n=this._series,s=[];for(t=0,i=n.length;t<i;t++){r=n[t];e(this,r,s)}return this._seriesAll=s},$_disconnectSeries:function(){var e,t,i=this._series;for(e=0,t=i.length;e<t;e++){i[e].disconnectFromAxis()}},$_connectSeries:function(){var e,t,i,r=this._series;for(e=0,t=r.length;e<t;e++){i=r[e];if(i.visible()){r[e].disconnectFromAxis();r[e].connectToAxes(this._xAxes,this._yAxes)}}return r},$_refreshSeriesItems:function(){for(var e=this._seriesAll.length;e--;){this._seriesAll[e].$_refreshVisibleItems()}},_legendItemActivated:function(e,t){if(this._toggleSeriesWhenLegendClick){if(e.source().series){var i=e.source().series();if(t==false){i.setItemProperty(e.source(),"sliced",false)}i.setItemProperty(e.source(),"visible",t);this._itemsDirty=true}else{e.source().setVisible(t);this._itemsDirty=true}}this._fireLegendItemActivated(e,t)},$_seriesVisibleChanged:function(e,t){this._seriesDirty=true;this._fireSeriesVisibleChanged(e,t)},$_setSeriesItemPropChanged:function(e,t){this._fireSeriesItemPropChanged(e,t)},_fireLegendItemActivated:function(e,t){this.fireEvent(Chart.LEGEND_ITEM_ACTIVATED,e,t)},_fireSeriesVisibleChanged:function(e,t){this.fireEvent(Chart.SERIES_VISIBLE_CHANGED,e,t)},_fireRequestUpdate:function(){this.fireEvent(Chart.REQUEST_UPDATE)},_fireSeriesItemPropChanged:function(e,t){this.fireEvent(Chart.SERIES_ITEM_PROP_CHANGED,e,t)}},{LEGEND_ITEM_ACTIVATED:"onChartLegendItemActivated",SERIES_VISIBLE_CHANGED:"onChartSeriesVisibleChanged",REQUEST_UPDATE:"onChartRequestUpdate",SERIES_ITEM_PROP_CHANGED:"onChartSeriesItemPropChanged"},function(){});var ChartObject=defineClass("ChartObject",null,{init:function(e,t){this._super();this._owner=e;this._palettes=e?e._palettes:null;this._createChildren();this._styles=new ChartStyles(this,t||"chartObject");this._needUpdate=true},stylesChanged:function(e){this._changed()},getPaletteScope:function(){return this},getPalette:function(e){var t=this._palettes;if(!t){this._palettes=t=this._owner.palettes()}return t._palettes[e]},getPaletteIndex:function(e){return e},styles:null,visible:true,cursor:null,owner:function(){return this._owner},chart:function(){var e=this.owner();if(e instanceof Chart)return e;return e&&e.chart()},setStyles:function(e){if(e!=this._styles){this._styles.extend(e)}return this},setVisible:function(e){if(e!=this._visible){this._visible=e;this._doVisibleChanged()}},setStyleSheet:function(e,t){if(!t)debugger;if(!t[this._styleSheetRegion()])debugger;this._styles.$_spd(t[this._styleSheetRegion()](),e)},update:function(e,t){if(this._styleDirty||this._needUpdate||t){try{this._doUpdate(e,t)}finally{this._styleDirty=this._needUpdate=false}return true}return false},updateSimple:function(e,t){if(this._styleDirty||this._needUpdate||t){try{this._doUpdate(e,t)}finally{this._styleDirty=this._needUpdate=false}return true}return false},chartDataChanged:function(e){this._doChartDataChanged(e)},invalidate:function(){this._needUpdate=true},assignSimple:function(e){this.setVisible(!!e)},propertyChanged:function(e,t){this._changed()},_createChildren:function(){},_styleSheetRegion:function(){},_changed:function(){this.invalidate();this._owner&&this._owner.chartObjectChanged&&this._owner.chartObjectChanged(this)},_doVisibleChanged:function(){},_doChartDataChanged:function(e){},_doUpdate:function(e,t){},_doUpdateSimple:function(e,t){},setPercentSizeProp:function(e,t){if(!(t instanceof PercentSize)){t=PercentSize.createFrom(t)}e="_"+e;if(!PercentSize.equals(t,this[e])){this[e]=t;this._changed()}},getChartData:function(e,t){var i,r,n=e.data();for(i=0,r=n.length;i<r;i++){if(n[i].id()==t){return n[i]}}return null}});var ChartAnimationable=defineClass("ChartAnimationable",ChartObject,{init:function(e,t){this._super(e,t);this._animations=[]},getChartEffect:function(e){},chartEffectChanged:function(e){},chartEffectUpdated:function(e){this._changed()},animations:null,animations_:function(){return this._animations.slice()},setAnimations:function(e){var t,i,r,n;if(e!==this._animations){n=this._animations=[];if(_isArray(e)){for(t=0,i=e.length;t<i;t++){r=ChartAnimation.create(e[t]);r&&n.push(r)}}else if(_isObject(e)){r=ChartAnimation.create(e);r&&n.push(r)}}return this},addAnimation:function(e){if(e){if(this._animations.indexOf(e)<0){this._animations.push(e)}}}});var ChartPositionable=defineClass("ChartPositionable",ChartObject,{init:function(e,t){this._super(e,t)},position:ChartItemPosition.FLOATING,left:undefined,right:undefined,top:undefined,bottom:undefined,width:undefined,height:undefined,minWidth:undefined,maxWidth:undefined,minHeight:undefined,maxHeight:undefined,setLeft:function(e){this.setPercentSizeProp("left",e)},setRight:function(e){this.setPercentSizeProp("right",e)},setTop:function(e){this.setPercentSizeProp("top",e)},setBottom:function(e){this.setPercentSizeProp("bottom",e)},setWidth:function(e){this.setPercentSizeProp("width",e)},setHeight:function(e){this.setPercentSizeProp("height",e)},setMinWidth:function(e){this.setPercentSizeProp("minWidth",e)},setMaxWidth:function(e){this.setPercentSizeProp("maxWidth",e)},setMinHeight:function(e){this.setPercentSizeProp("minHeight",e)},setMaxHeight:function(e){this.setPercentSizeProp("maxHeight",e)},isFloating:function(){return this._position==ChartItemPosition.FLOATING},isVertical:function(){return this._position==ChartItemPosition.LEFT||this._position==ChartItemPosition.RIGHT}});var ChartAction=defineClass("ChartAction",ChartObject,{init:function(e){this._super(null,"chartAction");this._name=e},name:null,caption:null,callback:null});var ChartLabelBase=defineClass("ChartLabelBase",ChartObject,{init:function(e,t,i){this._super(e,t||"label");i&&this._styles.setParent(i);this._styles.setBorder(null);this._styles.setFill(null)},position:ChartLabelPosition.DEFAULT,offsetX:IntProp(0),offsetY:IntProp(0),offset:IntProp(7),horizontalAlign:ChartHorizontalAlign.DEFAULT,verticalAlign:ChartVerticalAlign.DEFAULT,_changed:function(){this._owner&&this._owner.labelChanged(this)}});var ChartLegendMarker=defineClass("ChartLegendMarker",ChartObject,{init:function(e){this._super(e.owner(),"legendMarker")},width:17,height:15});var ChartLegendBase=defineClass("ChartLegendBase",ChartPositionable,{init:function(e,t){this._super(e,t||"legend");this._marker=new ChartLegendMarker(this);this._itemStyles=new ChartStyles(this,"legendItem");this._items=[]},marker:null,itemStyles:null,clickable:true,layout:EnumProp(ChartLegendLayout,ChartLegendLayout.DEFAULT),itemGap:8,source:null,clickAction:ChartLegendItemAction.DISPLAY,layoutNeeded:true,setMarker:function(e){if(e!==this._marker){this._marker.assign(e);this._changed()}},setItemStyles:function(e){if(e!==this._itemStyles){this._itemStyles.extend(e);this._changed()}},items:function(){return this._items.slice()},_styleSheetRegion:function(){return"legend"},setStyleSheet:function(e,t){this._styles.$_spd(t.legend(),e);this._itemStyles.$_spd(t["legend.item"](),e);this._marker.styles().$_spd(t["legend.marker"](),e)},_doUpdate:function(e,t){this._refreshItems()}});var ChartLegendItem=defineClass("ChartLegendItem",ChartObject,{init:function(e,t){this._super(e.owner(),"legendItem");this._legend=e;this._source=t;t.setLegendItem&&t.setLegendItem(this)},active:true,setActive:function(e){if(e!=this._active){this._active=!!e;if(this._legend){var t=this._legend._itemToggleCallback;t&&t(this,this._active)}}},legend:function(){return this._legend},source:function(){return this._source}});var ChartLegend=defineClass("ChartLegend",ChartLegendBase,{init:function(e,t){this._super(e,"chartLegend");this.setPosition(ChartItemPosition.BOTTOM);t&&this.assign(t)},itemToggleCallback:null,_refreshItems:function(){function e(e,t){for(var i=e.length;i--;){if(e[i].source==t){return e[i]}}return null}var t=this.source();if(!t){this._items=[];return}var i=t.getLegendItems();if(!i||i.length<1){this._items=[];return}var r,n,s,a=[],o=this._styles;for(r=0,n=i.length;r<n;r++){t=i[r];s=e(this._items,t);if(s==null){s=this._createItem(t)}s.setActive(t.visible());a.push(s);s.styles().setParent(this._itemStyles)}this._items=a},_createItem:function(e){var t=new ChartLegendItem(this,e);return t}});var SeriesLegendItem=defineClass("SeriesLegendItem",ChartObject,{init:function(e,t){this._super(e.owner(),"legendItem");this._legend=e;this._source=t},active:true,displayName:null,setActive:function(e){if(e!=this._active){this._active=!!e;if(this._legend){var t=this._legend._itemToggleCallback;t&&t(this,this._active)}}},legend:function(){return this._legend},source:function(){return this._source}});var SeriesLegend=defineClass("SeriesLegend",ChartLegendBase,{init:function(e,t){this._super(e,"seriesLegend");this._source=t;this.setPosition(ChartItemPosition.FLOATING)},_refreshItems:function(){var e,t;if(this._source){this._count=this._source.itemCount();for(e=0;e<this._count;e++){if(this._items.length<=e){this._items.push(this._createItem(this._source.getItem(e)))}t=this._items[e];this._source.setItemLegend(e,t);this._items[e]._source=this._source.getItem(e)}}else{this._count=0}},_createItem:function(e){var t=new SeriesLegendItem(this,e);return t}});var ChartPlotArea=defineClass("ChartPlotArea",ChartAnimationable,{init:function(e){this._super(e);this._itemPane=new ChartItemPane(e,"plotAreaItemPane");this._crosshair=new ChartCrosshair(this);this._mask=new ChartMaskEffect(this);this._seriesMask=new ChartMaskEffect(this)},items:null,crosshair:null,mask:null,seriesMask:null,polarSize:.8,circular:false,items_:function(){return this._itemPane.items()},setItems:function(e){this._itemPane.setItems(e);return this},setCrosshair:function(e){if(e!==this._corsshair){this._crosshair.assign(e)}return this},setMask:function(e){if(e!==this._mask){this._mask.assign(e)}return this},setSeriesMask:function(e){if(e!==this._seriesMask){this._seriesMask.assign(e)}return this},_styleSheetRegion:function(){return"plotArea"},setStyleSheet:function(e,t){this._super(e,t);this._crosshair.setStyleSheet(e,t)},getChartEffect:function(e){switch(e){case"mask":return this._mask;case"seriesMask":return this._seriesMask}}});var ChartColorScaleItem=defineClass("ChartColorScaleItem",null,{init:function(e){this._super();e&&this.assign(e)},color:null,value:null,label:null,setColor:function(e){if(e!=this._color){this._color=new Color(e)}}});var ChartColorScale=defineClass("ChartColorScale",null,{init:function(){this._super();this._fills={};this.setDefaultFill("#fff")},showValues:true,showLabels:false,defaultFill:null,stops:null,setDefaultFill:function(e){if(e!==this._defaultFill){this._defaultFill=_createFillEx(e,1)}},stops_:function(){return this._stops&&this._stops.slice()},setStops:function(e){if(e!==this._stops){this._stops=_isArray(e)&&e.length>1?this.$_loadStops(e):null}},count:function(){return this._stops.length},getFill:function(e){var t,i,r,n,s,a,o,l=this._fills[e];if(!l){r=this._stops;a=r[0]._color;n=r[0]._value;for(t=1,i=r.length;t<i;t++){o=r[t]._color;s=r[t]._value;if(e>=n&&e<s){l=new SolidBrush(Color.createFromRange(a,o,s-n,e-n));this._fills[e]=l;break}a=o;n=s}}return l||this._defaultFill},$_loadStops:function(e){var t,i,r=e.length,n=[];for(t=0;t<r;t++){i=new ChartColorScaleItem(e[t]);n.push(i)}return n}});var ChartColorScaler=defineClass("ChartColorScaler",ChartPositionable,{init:function(e){this._super(e,"colorScaler");this.setPosition(ChartItemPosition.BOTTOM)},scale:null,barWidth:13,defaultStepSize:24,gradient:true,setScale:function(e){if(e!=this._scale){this._scale=e}},stops:function(){return this._scale&&this._scale.stops()},stepCount:function(){return this._scale?this._scale.count():0},_styleSheetRegion:function(){return"colorScaler"},_doUpdate:function(e,t){}});var ChartItemBackground=defineClass("ChartItemBackground",ChartObject,{init:function(){this._super()}});var ChartItem=defineClass("ChartItem",ChartObject,{init:function(e,t){this._super(e);this._initContent(e);if(t){this._id=t.id;this.assign(t)}},id:null,anchor:null,anchorAlign:EnumProp(ChartItemAnchorAlign,ChartItemAnchorAlign.RIGHT),floating:false,left:undefined,top:undefined,right:undefined,bottom:undefined,width:undefined,height:undefined,minWidth:undefined,maxWidth:undefined,minHeight:undefined,maxHeight:undefined,zindex:IntProp(0),setLeft:function(e){_defined?this.setPercentSizeProp("left",e):this._left=undefined},setTop:function(e){_defined?this.setPercentSizeProp("top",e):this._top=undefined},setRight:function(e){_defined?this.setPercentSizeProp("right",e):this._right=undefined},setBottom:function(e){_defined?this.setPercentSizeProp("bottom",e):this._bottom=undefined},setWidth:function(e){_defined?this.setPercentSizeProp("width",e):this._width=undefined},setHeight:function(e){_defined?this.setPercentSizeProp("height",e):this._height=undefined},setMinWidth:function(e){_defined?this.setPercentSizeProp("minWidth",e):this._minWidth=undefined},setMaxWidth:function(e){_defined?this.setPercentSizeProp("maxWidth",e):this._maxWidth=undefined},setMinHeight:function(e){_defined?this.setPercentSizeProp("minHeight",e):this._minHeight=undefined},setMaxHeight:function(e){_defined?this.setPercentSizeProp("maxHeight",e):this._maxHeight=undefined},getAnchorItem:function(){return this._anchor?this._parent.itemById(this._anchor):null},_initContent:function(e){}});var ChartTextItem=defineClass("ChartTextItem",ChartItem,{init:function(e,t){this._super(e,t)},text:null,assignSimple:function(e){if(_isBoolean(e)){this.setVisible(e)}else if(_isString(e)){this.setText(e);this.setVisible(!!e)}},styleSheetRegion:function(){return"textItem"}});var ChartImageItem=defineClass("ChartImageItem",ChartItem,{init:function(e,t){this._super(e,t)},url:null,imageWidth:IntProp(32),imageHeight:IntProp(32),setImageWidth:function(e){e=Math.max(0,_forceInt(e));if(e!=this._imageWidth){this._imageWidth=e}},setImageHeight:function(e){e=Math.max(0,_forceInt(e));if(e!=this._imageHeight){this._imageHeight=e}},styleSheetRegion:function(){return"imageItem"}});var ChartShapeItem=defineClass("ChartShapeItem",ChartItem,{init:function(e,t){this._super(e,t)},styleSheetRegion:function(){return"shapeItem"}});var ChartItemPane=defineClass("ChartItemPane",ChartObject,{init:function(e,t){this._super(e);this._name=t;this._items=[];this._itemMap={}},items:null,name:function(){return this._name},items_:function(){return this._items.slice()},setItems:function(e){if(e!==this._items){var t,i,r,n,s=this._owner.delegate();this._items=[];this._itemMap={};if(_isArray(e)){for(t=0,i=e.length;t<i;t++){r=e[t];n=s.getItem(this._owner,r);if(n){this.$_internalAddItem(n);n.assign(r)}}}this._changed()}},count:function(){return this._items.length},empty:function(){return this._items.length<=0},checkVisible:function(){return this.visible()&&!this.empty()},getItem:function(e){return this._items[e]},itemById:function(e){return this._itemMap[e]},getLayoutItems:function(){return this._items},update:function(e){},styleSheetRegion:function(){return"itemPane"},$_internalAddItem:function(e){this._items.push(e);e._id&&(this._itemMap[e._id]=e);e._parent=this}});var ChartVPane=defineClass("ChartVPane",ChartItemPane,{init:function(e,t){this._super(e,t)},minHeight:undefined,maxHeight:undefined,height:undefined});var ChartHPane=defineClass("ChartHPane",ChartItemPane,{init:function(e,t){this._super(e,t)},minHeight:undefined,maxHeight:undefined,height:undefined});var ChartTitlePane=defineClass("ChartTitlePane",ChartHPane,{init:function(e,t){this._super(e,t);this._title=new ChartTextItem(this,{id:"title",text:""});this._title._parent=this;this._itemMap["title"]=this._title;this._subtitle=new ChartTextItem(this,{id:"subtitle",text:"Subtitle",visible:false,anchor:"title",anchorAlign:"bottom"});this._subtitle._parent=this;this._itemMap["subtitle"]=this._subtitle},title:null,subtitle:null,setTitle:function(e){if(e!==this._title){this._title.assign(e);this._changed()}return this},setSubtitle:function(e){if(e!==this._subtitle){this._subtitle.assign(e);this._changed()}return this},setStyleSheet:function(e,t){this._title.styles().$_spd(t.title(),e);this._subtitle.styles().$_spd(t.subtitle(),e)},empty:function(){return this._super()&&!this._titie.visible()&&!this._subtitle.visible()},getLayoutItems:function(){return this._items.concat(this._title,this._subtitle)}});var ChartLegendPane=defineClass("ChartLegendPane",ChartHPane,{init:function(e,t,i){this._super(e,t);this._legend=new ChartLegend(e,{id:"legend"});this._legend._parent=this;this._legend._itemToggleCallback=i;this._itemMap["legend"]=this._legend},legend:null,setLegend:function(e){if(e!==this._legend){this._legend.assign(e);this._changed()}return this},setStyleSheet:function(e,t){this._legend.setStyleSheet(e,t);this._legend.styles().$_spd(t.legend(),e);this._legend.marker().styles().$_spd(t["legend.marker"](),e)},empty:function(){return this._super()&&!this._legend.visible()},getLayoutItems:function(){return this._items.concat(this._legend)}});var SeriesLegendPane=defineClass("SeriesLegendPane",ChartObject,{init:function(e,t,i){this._super(e,t);this._itemToggleCallback=i;this._legends=null},legends:null,minHeight:undefined,maxHeight:undefined,height:undefined,itemToggleCallback:function(){return this._itemToggleCallback},legends_:function(){return this._legends&&this._legends.slice()},setLegends:function(e){e=_asArray(e);if(e!==this._legends){this._legends=e?[]:null;if(e){for(var t=e.length;t--;){if(e[t].visible()){this._legends.push(e[t]);e[t]._itemToggleCallback=this._itemToggleCallback}}}}},empty:function(){return!this._legends||this._legends.length<1},checkVisible:function(){return this.visible()&&!this.empty()}});var ChartAxisTitle=defineClass("ChartAxisTitle",ChartObject,{init:function(e){this._super(e,"axisTitle")},text:null,assignSimple:function(e){this.setText(e)},_styleSheetRegion:function(){return"axis.title"}});var ChartAxisTick=defineClass("ChartAxisTick",ChartObject,{init:function(e){this._super(e,"axisTick")},lineLength:5,offset:5,labelInterval:1,minTickSpace:4,labelCallback:null,lineLength_:function(){return Math.max(0,this._lineLength)},minTrackSpace_:function(){return Math.max(1,this._minTickSpace)},labelInterval_:function(){return Math.max(1,this._labelInterval)},getSelectStyles:function(){return this._styles.getState("select",this._selectStyles)},_styleSheetRegion:function(){return"axis.tick"},setStyleSheet:function(e,t){this._super(e,t);this._selectStyles=t["axis.tick.select"]()}});var ChartAxisGrid=defineClass("ChartAxisGrid",ChartObject,{init:function(e){this._super(e,"axisGrid");this._baseStyles=new ChartStyles(null,"axisGridBase");this._styles.setLine("#20000000");this._baseStyles.setLine("#60000000")},hideEndLine:false,baseStyles:null,tickLocation:EnumProp(ChartAxisGridTickLocation,ChartAxisGridTickLocation.DEFAULT),setBaseStyles:function(e){if(e!==this._baseStyles){this._baseStyles.extend(e)}return this},_styleSheetRegion:function(){return"axis.grid"},setStyleSheet:function(e,t){this._super(e,t);this._baseStyles.$_spd(t["axis.grid.base"](),e)}});var ChartAxisIndicatorLabel=defineClass("ChartAxisIndicatorLabel",ChartLabelBase,{init:function(e,t){this._super(e,"indicatorLabel",t);this._runtime=AxisIndicatorStatementRuntime.Default},text:null,setText:function(e){if(e!=this._text){this._text=e;this._statement=e?new ExpressionStatement(e):null}return this},getText:function(){return this._statement?this._statement.evaluate(this._runtime.setIndicator(this._owner)):this._text},assignSimple:function(e){this.setText(e)}});var ChartAxisIndicator=defineClass("ChartAxisIndicator",ChartObject,{init:function(e,t,i){this._super(e.owner(),t||"axisIndicator");this._axis=e;this._label=new ChartAxisIndicatorLabel(this,this._styles);i&&this.assign(i)},label:null,front:false,series:null,setLabel:function(e){if(e!==this._label){this._label.assign(e);this._changed()}return this},axis:function(){return this._axis},labelChanged:function(e){this._changed()},getCalcedValue:function(e){var t,i;if((t=this._label._styles.numberFormat())!=this._format||this._formatter){this._formatter=t?new DecimalFormatter(t):null;this._format=t}i=this._calcedValue;return this._formatter?this._formatter.format(i):i}});var ChartAxisBandIndicator=defineClass("ChartAxisBandIndicator",ChartAxisIndicator,{init:function(e,t){this._super(e,"axisBandIndicator",t)},startValue:undefined,endValue:undefined,startCategory:undefined,endCategory:undefined,getStartValue:function(e){return this._startValue},getEndValue:function(e){return this._endValue},getStartCategory:function(e){return e.getCategoryOf(this._startCategory)},getEndCategory:function(e){return e.getCategoryOf(this._endCategory)},_styleSheetRegion:function(){return"axis.bandIndicator"}});var ChartAxisLineIndicator=defineClass("ChartAxisLineIndicator",ChartAxisIndicator,{init:function(e,t){this._super(e,"axisLineIndicator",t)},value:undefined,category:undefined,setValue:function(e){if(e!=this._value){this._value=e;this._valueNode=_isString(e)&&e?ExpressionParser.Default.parse(e,null):null}return this},getValue:function(e){return this._calcedValue=this._valueNode?this._evaluate(this._valueNode):this._value},_styleSheetRegion:function(){return"axis.lineIndicator"}});var ChartAxisScrollBar=defineClass("ChartAxisScrollBar",ChartObject,{init:function(e){this._super(e,"scrollBar");this._buttonStyles=new ChartStyles(this,"scrollButton");this._thumbStyles=new ChartStyles(this,"scrollThumb")},reversed:false,barWidth:11,buttonStyles:null,thumbStyles:null,lineScrollSize:IntProp(1),pageScrollSize:IntProp(1),minThumbSize:IntProp(20),setButtonStyles:function(e){if(e!==this._buttonStyles){this._buttonStyles.extend(e)}return this},setThumbStyles:function(e){if(e!==this._thumbStyles){this._thumbStyles.extend(e)}return this},displayWidth:function(){return this._visible?this._barWidth:0},_styleSheetRegion:function(){return"scrollBar"},setStyleSheet:function(e,t){this._super(e,t);var i=this._styleSheetRegion();this._buttonStyles.$_spd(t[i+".button"](),e);this._thumbStyles.$_spd(t[i+".thumb"](),e)}});var ChartAxis=defineClass("ChartAxis",ChartObject,{init:function(e,t){this._super(e,t||"axis");this._name=t;this._title=new ChartAxisTitle(this);this._tick=new ChartAxisTick(this);this._grid=new ChartAxisGrid(this);this._frontGrid=new ChartAxisGrid(this);this._indicators=[];this._scrollBar=new ChartAxisScrollBar;this._sources=[];this._series=null;this._seriesAll=[];this._styles.setLine("#ccc")},name:null,title:null,tick:null,grid:null,frontGrid:null,indicators:null,scrollBar:null,orientation:ChartAxisOrientation.VERTICAL,locationRate:1,setTitle:function(e){if(e!=this._title){this._title.assign(e);this._changed()}return this},setTick:function(e){if(e!==this._tick){this._tick.assign(e);this._changed()}return this},setGrid:function(e){if(e!==this._grid){this._grid.assign(e);this._changed()}return this},setFrontGrid:function(e){if(e!==this._frontGrid){this._frontGrid.assign(e);this._changed()}return this},indicators_:function(){return this._indicators.slice()},setIndicators:function(e){function t(e,t){var i=null;switch(t.type){case"band":i=new ChartAxisBandIndicator(e,t);break;case"line":i=new ChartAxisLineIndicator(e,t);break;default:if(_defined(t.startValue)||_defined(t.startCategory)){i=new ChartAxisBandIndicator(e,t)}else{i=new ChartAxisLineIndicator(e,t)}break}return i}var i,r,n,s=this.styles();if(e!==this._indicators){this._indicators=[];if(_isArray(e)){for(r=0,n=e.length;r<n;r++){i=t(this,e[r]);if(i){this._indicators.push(i)}}}else if(e){i=t(this,e);this._indicators.push(i)}this._changed()}return this},setScrollBar:function(e){if(e!==this._scrollBar){this._scrollBar.assign(e)}},sources:function(){return this._sources.slice()},isValueAxis:function(){return this._series&&this._series.isValueAxis(this)},isVertical:function(){return this._orientation==ChartAxisOrientation.VERTICAL},isContinuous:function(){return false},mainSeries:function(){return this._series},displayName:function(){return this.title().text()||this.name()},palettes:function(){return this._owner.palettes()},isScrollable:function(){return false},isUserScrollable:function(){return false},isZoomable:function(){return false},isOppositeOf:function(e){return this._location===ChartAxisLocation.OPPOSITE},getSeries:function(e,t){for(var i=this._seriesAll.length;i--;){if(this._seriesAll[i].name()==e){return this._seriesAll[i]}}return t?this._series:null},getSeriesAt:function(e){return this._seriesAll[e]},addSource:function(e){var t=this._sources;if(t.indexOf(e)<0){if(this._connectableWith(e)){t.push(e);if(!this._series){if(e instanceof ChartSeries){this._series=e}else{this._series=e.getItem(0)}}this._changed();return true}}return false},removeSource:function(e){var t,i=false,r=this._sources,n=r.indexOf(e);if(n>=0){r.splice(n,1);if(e===this._series||e instanceof ChartSeriesGroup&&e.getItem(0)==this._series){this._series=null}this._changed();i=true}if(!this._series&&r.length>0){this._series=r instanceof ChartSeries?r:r[0]}return i},refreshTicks:function(e,t,i){this._orientation=t;this._doRefreshTicks(e,i)},getTickList:function(){},getTickNumber:function(){},getTick:function(e){},getTickPosition:function(e){},getGridTickCount:function(){return this.getTickNumber()},getGridPosition:function(e){return this.getTickPosition(e)},_styleSheetRegion:function(){return"axis"},setStyleSheet:function(e,t){this._super(e,t);if(t){var i,r=e.parent();this._title.setStyleSheet(r,t);this._tick.setStyleSheet(r,t);this._grid.setStyleSheet(r,t);this._frontGrid.setStyleSheet(r,t);this._scrollBar.setStyleSheet(r,t);for(i=this._indicators.length;i--;){this._indicators[i].setStyleSheet(r,t)}}},_connectableWith:function(e){return true},_doPrepareLayout:function(){},_doUpdate:function(e){var t,i,r,n,s=this._sources,a=this._seriesAll=[];if(s){for(i=0,n=s.length;i<n;i++){t=s[i];if(t instanceof ChartSeries){a.push(t)}else{for(r=0;r<t.count();r++){a.push(t.getItem(r))}}}}},_doRefreshTicks:function(e,t){},_calculateRange:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f,_,g=t,m=i;if(isNaN(g)||isNaN(g)){h=[];u=[];for(s=0,o=this._sources.length;s<o;s++){c=this._sources[s];if(c instanceof ChartSeriesGroup&&c.stackMode()===ChartStackMode.FILL){g=c.minValue();m=Math.max(c.maxValue(),g);break}else if(c instanceof ChartSeries&&(_=c.group())){if(c.itemCount()>0&&c.groupIndex()==0){h.push(_.getMinValueAt(this));u.push(_.getMaxValueAt(this))}}else if(c["getMinValueAt"]&&c["getMaxValueAt"]){h.push(c.getMinValueAt(this));u.push(c.getMaxValueAt(this))}else if(_isArray(c)){for(a=0,l=c.length;a<l;a++){h.push(c[a]);u.push(c[a])}}}o=h.length;if(o>0){for(s=0;s<o;s++){d=h[s];f=u[s];if(isNaN(g)){if(!isNaN(d))g=d;if(!isNaN(f))m=f}else if(!isNaN(d)&&!isNaN(f)){g=Math.min(d,f,g);m=Math.max(d,f,m)}}if(_isNum(e)){g=Math.min(e,g)}}if(isNaN(g)||isNaN(m)){g=0;m=1}}g=isNaN(t)?g:t;m=isNaN(i)?m:i;return{minValue:g,maxValue:m}},_calculateDateRange:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f=null,_=null;if(t!==null&&i!==null){f=t;_=i}else{o=[];l=[];for(r=0,s=this._sources.length;r<s;r++){h=this._sources[r];if(h instanceof ChartSeries&&(d=h.group())){if(h.getGroupIndex()==0){o.push(d.getMinDateAt(this));l.push(d.getMaxDateAt(this))}}else if(h["getMinDateAt"]&&h["getMaxDateAt"]){o.push(h.getMinDateAt(this));l.push(h.getMaxDateAt(this))}else if(_isArray(h)){for(n=0,a=h.length;n<a;n++){o.push(h[n]);l.push(h[n])}}}s=o.length;if(s>0){for(r=0;r<s;r++){u=o[r];c=l[r];if(f===null){f=u;_=c}else{f=_minDate(_minDate(u,c),f);_=_maxDate(_maxDate(u,c),_)}}if(_defined(e)){f=_minDate(e,f)}}if(f===null||_===null){f=new Date(0);_=new Date(1)}}f=t instanceof Date?t:f;_=i instanceof Date?i:_;return{minValue:f,maxValue:_}},_collectCategories:function(e){function u(e,t){var i,r;for(i=0,r=t.length;i<r;i++){if(e==t[i].label){return i}}return-1}function s(e,t){var i,r,n,s,a,o=Math.min(e.itemCount(),t.length),l=e.labelField();if(l){i=t.slice();for(r=0;r<o;r++){n=e.getItem(r);if(n){a=n.getProp(l,null);if(a){s=u(a,i);if(s>=0){n._category=i[s];i.splice(s,1)}else{n._category=ChartAxisCategory.Invalid}}else{n._category=t[r]}}}}else{for(r=0;r<o;r++){n=e.getItem(r);if(n){n._category=t[r]}}}}function a(e,t){var i,r,n=e.count();for(i=0;i<n;i++){r=e.getItem(i);if(r instanceof ChartSeries){s(r,t)}else if(r instanceof ChartSeriesGroup){a(r,t)}}}function o(e,t,i){var r,n,s,a,o,l,h=t.getCategoryField(e);if(h){r=t.itemCount();n=i.slice();for(s=0;s<r;s++){a=t.getItem(s);o=a.getProp(h);l=u(o,n);if(l<0){i.push(a._category=new ChartAxisCategory(o))}else{a._category=n[l];n.splice(l,1)}}}}function l(e,t,i){var r,n,s=t.count();for(r=0;r<s;r++){n=t.getItem(r);if(n instanceof ChartSeries){o(e,n,i)}else if(n instanceof ChartSeriesGroup){l(e,n,i)}}}var t,i,r,n,h=[],c=this._sources,d=c.length;if(_isArray(e)&&(i=e.length)>0){for(t=0;t<i;t++){r=new ChartAxisCategory(e[t]);h.push(r);r.index=t}for(t=0;t<d;t++){n=c[t];if(n instanceof ChartSeries){s(n,h)}else if(n instanceof ChartSeriesGroup){a(n,h)}}}else{for(t=0;t<d;t++){n=c[t];if(n instanceof ChartSeries){o(this,n,h)}else if(n instanceof ChartSeriesGroup){l(this,n,h)}}for(t=h.length;t--;){h[t].index=t}}return h},_handleScrollEvent:function(e,t,i,r){},_updateScrollBar:function(e){}});var CartesianAxis=defineClass("CartesianAxis",ChartAxis,{init:function(e,t){this._super(e,t)},location:ChartAxisLocation.NORMAL,reversed:false,_connectableWith:function(e){return e instanceof ChartSeries||e instanceof ChartSeriesGroup}});var ChartAxisCategory=function(e){if(_isObject(e)){this.label=_toStr(e.label);this.width=e.hasOwnProperty("width")?e.width:1;this.paddingNear=e.hasOwnProperty("paddingNear")?e.paddingNear:0;this.paddingFar=e.hasOwnProperty("paddingFar")?e.paddingFar:0}else if(_defined(e)){this.label=_toStr(e);this.width=1;this.paddingNear=0;this.paddingFar=0}this.index=-1};ChartAxisCategory.prototype.toString=function(){return this.label};ChartAxisCategory.Invalid=new ChartAxisCategory;var CategorizedAxis=defineClass("CategorizedAxis",CartesianAxis,{init:function(e){this._super(e);this._categoriesDirty=false;this._categories=null;this._categoryList=[];this._positions=[];this._ends=[];this._unit;this._zoomHistory=[];this._grid.setVisible(false)},data:null,scrollable:false,zoomable:false,firstIndent:0,lastIndent:0,startIndex:0,displayCount:0,paddingNear:0,paddingFar:0,padding:0,categories:null,padding_:NullFunc,focusedIndex:-1,categoriesStyles:null,setPadding:function(e){this.setPaddingNear(e);this.setPaddingFar(e);return this},categories_:function(){return this._categories?this._categories.slice():null},setCategories:function(e){this._categories=e&&e.slice();this.invalidate()},setCategoriesStyles:function(e){this._categoriesStyles=e&&e.slice();this.invalidate()},setStartIndex:function(e){e=Math.max(0,Math.min(e,this._categoryList.length-this._displayCount));if(e!=this._startIndex){this._startIndex=e;this.invalidate()}},setFocusedIndex:function(e){if(e!=this._focudedIndex){this._focusedIndex=e}},categoryCount:function(){return this._categoryList.length},visibleCount:function(){return this._displayCount>0?Math.min(this._displayCount,this._categoryList.length):this._categoryList.length},getCategory:function(e){return this._categoryList[e]},getCategoryOf:function(e){var t,i=this._categoryList;for(t=i.length;t--;){if(i[t].label==e)return i[t]}},getCategoryIndexAt:function(e,t){if(t<=0){return 0}for(var i=0,r=this._categoryList.length;i<r-1;i++){if(t>_floor(this.getCategoryPosition(i)*e)&&t<=_floor((this.getCategoryPosition(i)+this.getCategoryWidth(i))*e)){return i}}return r-1},getCategoryAt:function(e,t){return this._categoryList(this.getCategoryIndexAt(e,t))},getCategoryPosition:function(e){var t=(e instanceof ChartSeriesItem?e.categoryIndex():e)-this._startIndex;return t>=0?this._positions[t]*this._locationRate:NaN},getCategoryWidth:function(e){var t=(e instanceof ChartSeriesItem?e.categoryIndex():e)-this._startIndex;return t>=0?this._positions[t+1]-this._positions[t]:NaN},getDisplayPosition:function(e){var t=(e instanceof ChartSeriesItem?e.categoryIndex():e)-this._startIndex;return t>=0?this._ends[t*2]:NaN},getDisplayWidth:function(e){var t=(e instanceof ChartSeriesItem?e.categoryIndex():e)-this._startIndex;return t>=0?this._ends[t*2+1]-this._ends[t*2]:-1},getPositionOf:function(e){var t=this._categoryList,i=this._positions,r=-1;if(_isNumber(e)){r=parseInt(e)}else{for(var n=t.length;n--;){if(t[n].label==e){r=n;break}}}if(r>=0){return i[r]+(i[r+1]-i[r])/2}},scroll:function(e){if(e){this._startIndex+=e;this.invalidate()}},isZoomed:function(){return this._zoomHistory.length>0},$_addZoom:function(e,t){this._startIndex=e;this.setDisplayCount(t-e+1);this._zoomHistory.push({start:e,end:t});this.invalidate()},$_removeZoom:function(e){var t=this._zoomHistory;e=Math.min(Math.max(e,1),t.length);if(e>0){t.length=t.length-e;if(t.length>0){var i=t[t.length-1];this._startIndex=i.start;this.setDisplayCount(i.end-i.start+1)}else{this._startIndex=this._zoomStart;this.setDisplayCount(this._zoomCount)}}},zoomIn:function(e,t){if(this.isZoomable()){e=Math.max(0,e);t=Math.min(this.categoryCount(),t);if(t>=e){if(this._zoomHistory.length<1){this._zoomStart=this.startIndex();this._zoomCount=this.displayCount()}this.$_addZoom(e,t)}}},zoomOut:function(e){e=arguments.length>0?e:1;this.$_removeZoom(e)},clearZoom:function(){var e=this._zoomHistory;if(e.length>0){e.length=0;this._startIndex=this._zoomStart;this.setDisplayCount(this._zoomCount)}},_styleSheetRegion:function(){return"categorizedAxis"},isScrollable:function(){return true},isUserScrollable:function(){return this._scrollable},isZoomable:function(){return this.isUserScrollable()&&this._zoomable},connectableWith:function(e){this._super(e)},invalidate:function(){this._invalidateCategories()},_doChartDataChanged:function(e){this._invalidateCategories()},_doUpdate:function(e,t){function i(e,t,i){var r,n,s,a,o,l,h,u,c=e.count();switch(e.stackMode()){case ChartStackMode.NONE:l=0;for(a=0;a<c;a++){r=e.getItem(a);l+=r.clusterWidth()}n=t;for(a=0;a<c;a++){r=e.getItem(a);s=r.clusterWidth()/l;s*=i;r.clusterInfo={index:a,position:n,width:s};n+=s}break;case ChartStackMode.OVERLAP:case ChartStackMode.FILL:case ChartStackMode.NORMAL:default:n=t;for(a=0;a<c;a++){r=e.getItem(a);r.clusterInfo={index:a,position:n,width:i}}break}}this._super(e,t);var r,n,s,a,o=[],l=0,h=this._sources;if(!h||h.length<1){return}for(r=0;r<h.length;r++){n=h[r];if(n.checkVisible()&&n.isClusterable()&&n.clusteredAxis()==this){l+=n.clusterWidth();o.push(n)}}s=0;for(r=0;r<o.length;r++){n=o[r];a=n.clusterWidth()/l;n.clusterInfo={index:r,position:s,width:a};if(n instanceof ChartSeriesGroup){i(n,s,a)}s+=a}this.invalidate()},_doRefreshTicks:function(e,t){if(this._categoriesDirty){this._categoryList=this._collectCategories(this.categories());this._positions=this.calcPositions();this._ends=this.calcEnds(this._positions);this._categoriesDirty=false}},calcPositions:function(){var e,t,i,r,n=this.visibleCount(),s=this._categoryList,a=new Array(n+1),o=this.firstIndent(),l=this.lastIndent(),h=o+l;if(n>0){e=0;for(r=0;r<n;r++){e+=s[r].width}t=e+h;this._unit=i=1/e*(e/t);a[0]=o/t;for(r=1;r<n;r++){a[r]=a[r-1]+i*s[r-1].width}a[n]=(t-l)/t}return a},calcEnds:function(e){var t,i,r,n=e.length-1,s=[];for(t=0;t<n;t++){i=e[t+1]-e[t];r=this._categoryList[t].paddingNear;s[t*2]=e[t]+i*r+this._paddingNear*i;r=this._categoryList[t].paddingFar;s[t*2+1]=e[t+1]-i*r-this._paddingFar*i}return s},getTick:function(e){return this._categoryList[e]},getTickList:function(){return this._categoryList.concat()},getTickNumber:function(){return this._categoryList.length},getTickPosition:function(e){return this._positions[e-this._startIndex]},getGridTickCount:function(){return this.getTickNumber()+1},getGridPosition:function(e){var t=this._positions,i=e-this._startIndex-1;switch(this._grid.tickLocation()){case ChartAxisGridTickLocation.VALUE:return t[i]+(t[i+1]-t[i])/2;default:return t[i+1]}},_handleScrollEvent:function(e,t,i,r){switch(t){case ScrollEventType.LINE_UP:case ScrollEventType.LINE_DOWN:case ScrollEventType.LINE_RIGHT:case ScrollEventType.LINE_LEFT:this.setStartIndex(this.startIndex()+i);break;case ScrollEventType.PAGE_UP:case ScrollEventType.PAGE_DOWN:case ScrollEventType.PAGE_RIGHT:case ScrollEventType.PAGE_LEFT:this.setStartIndex(this.startIndex()+e._page*i);break;case ScrollEventType.THUMB_TRACK:this.setStartIndex(r);break;default:this.setStartIndex(r);break}},_updateScrollBar:function(e){e.setProperties(0,this._categoryList.length,this._displayCount);e.setPosition(this._startIndex)},_invalidateCategories:function(){if(!this._categoriesDirty){this._categoriesDirty=true;this.invalidate()}}});var CategorizedReverseAxis=defineClass("CategorizedReverseAxis",CategorizedAxis,{init:function(e){this._super(e)},setCategories:function(e){if(_toArray(e)){this._categories=e&&e.slice().reverse();this.invalidate()}}});var TIC_MULTIPLES=[1,2,2.5,5,10];function correctFloat(e){return parseFloat(e.toPrecision(14))}var DefaultNumericAxisMeasurer=function(){var c=0;var d=function(e,t,i){if(e!=t){i=Math.max(1,i);if(e<=-1){e=Math.floor(e)}if(t>=1){t=Math.ceil(t)}var r,n,s,a=t-e,o=a/i;c=_int(Math.log(o)*Math.LOG10E);r=Math.pow(10,c);for(n=0,s=TIC_MULTIPLES.length;n<s;n++){o=r*TIC_MULTIPLES[n];if(a/o<=i){if(TIC_MULTIPLES[n]==2.5){c--}break}}return o}else{return 1}};this.createTicks=function(e,t,i,r,n){var s,a=[],o=isNaN(i)?d(e,t,r):i,l=-Math.min(0,c),h=_floor(e/o)*o,u=_ceil(t/o)*o;h=l?Number(h.toFixed(l)):h;u=l?Number(u.toFixed(l)):u;if(h<0&&u>0){s=0;a.push(s);while(s<u&&a.length<n){s+=o;a.push(s);s=l?Number(s.toFixed(l)):s}s/=2;if(s>u){a[a.length-1]=s}s=0;while(s>h&&a.length<n){s-=o;a.unshift(s);s=l?Number(s.toFixed(l)):s}s/=2;if(s<h){a[0]=s}}else if(h!=u){s=h;while(s<u&&a.length<n){a.push(s);s+=o;s=l?Number(s.toFixed(l)):s}a.push(s)}else{if(u>0){a.push(0,u)}else if(h<0){a.push(h,0)}else{a.push(0,1)}}this.interval=o;this.magnitude=c;return a}};DefaultNumericAxisMeasurer.Default=new DefaultNumericAxisMeasurer;var LinearAxis=defineClass("LinearAxis",CartesianAxis,{init:function(e,t){this._super(e,t);this._cacledCount=0;this._calcedMin=NaN;this._calcedMax=NaN;this._calcedInterval=NaN;this._tickList=[]},baseMode:NumericAxisBase.BOTTOM,baseValue:0,minValue:NaN,maxValue:NaN,fitInterval:true,maxPadding:0,minPadding:0,tickCount:0,tickIntervalWidth:IntProp(70),ticks:null,measurer:DefaultNumericAxisMeasurer.Default,setBaseValue:function(e){e=parseFloat(e);if(e!=this._baseValue){this._baseValue=e;this._changed()}return this},calcedBaseValue:function(){return isNaN(this._baseValue)?this._calcedMin:this._baseValue},measuredMinimum:function(){return this._calcedMin},measuredMaximum:function(){return this._calcedMax},getPositionOf:function(e){return(e-this._calcedMin)/(this._calcedMax-this._calcedMin)*this._locationRate},getValueAt:function(e){return this._calcedMin+(this._calcedMax-this._calcedMin)*e},isValid:function(){return this._calcedMax>this._calcedMin},_styleSheetRegion:function(){return"linearAxis"},isContinuous:function(){return true},_doRefreshTicks:function(e,t){var i,r,n,s,a,o,l,h;this._tickList=this.$_parseTicks();if(this._tickList){this._calcedInterval=NaN}else{i=this._calculateRange(this.baseValue(),this.minValue(),this.maxValue());this._calcedMin=i.minValue;this._calcedMax=i.maxValue;this._calcedCount=this._tickCount;if(this._calcedCount<=0){this._calcedCount=_floor(t/this._tickIntervalWidth)}r=this.measurer();this._tickList=r.createTicks(this._calcedMin,this._calcedMax,this._tickInterval,this._calcedCount,t);this._calcedInterval=r.interval;n=r.magnitude;s=this._tickList.length;a=this._tickList[0];o=this._tickList[s-1];l=Number(this.maxPadding());this._lastFitted=h=!this._polar&&this.fitInterval();if(!h){o=this._tickList[s-1]=this._calcedMax}if(l>0){l=(o-a)*l;if(h){if(o===this._calcedMax){this._tickList.push(o+l)}}else{this._tickList[s-1]+=l}l=_round10(this._tickList[s-1],n-1);this._tickList[s-1]=l}}this._calcedMin=this._tickList[0];this._calcedMax=this._tickList[this._tickList.length-1]},getTickList:function(){return this._tickList.slice()},getTickNumber:function(){return this._tickList.length},getTick:function(e){return this._tickList[e]},getTickPosition:function(e){return this.getPositionOf(this._tickList[e])},$_parseTicks:function(){var e,t,i,r,n,s=null,a=this.ticks();if(!isArray(a)&&a){e=String(a).trim();a=e&&e.split(",")}if(a){n=[];for(i=0,t=a.length;i<t;i++){r=Number(String(a[i]).trim());if(!isNaN(r)){n.push(r)}}if(n.length>0){n.sort(function(e,t){return e-t});a=n}else{a=[]}t=a.length;if(!isNaN(this._minValue)&&(t==0||this._minValue<a[0])){a.unshift(this._minValue)}t=a.length;if(!isNaN(this._maxValue)&&(t==0||this._maxValue>a[t-1])){a.push(this._maxValue)}t=a.length;if(!isNaN(this._baseValue)&&t>0){if(this._baseValue<a[0]){a.unshift(this._baseValue)}else if(this._baseValue>a[t-1]){a.push(this._baseValue)}}if((t=a.length)>=2){s=[];for(i=0;i<t;i++){s.push(a[i])}}}this._calcedCount=s?s.length:0;return s}});var TIME_MSEC=0;var TIME_SEC=1;var TIME_MIN=2;var TIME_HOUR=3;var TIME_DAY=4;var TIME_WEEK=5;var TIME_MON=6;var TIME_YEAR=7;var TIME_INTERVALS=[1,1e3,1e3*60,1e3*60*60,36e5*24,36e5*24*7,36e5*24*31,31556952e3];var TIME_MULTIPLES=[[1,2,5,10,20,25,50,100,200,500],[1,2,5,10,15,30],[1,2,3,4,6,8,12],[1,2],[1,2],[1,2,3,4,6],[1,2,2.5,5,10]];var DefaultDateTimeAxisMeasurer=function(){function h(e,t,i){var r,n;r=e/i;for(n=0;n<t.length;n++){e=t[n];if(r<=(t[n]+(t[n+1]||t[n]))/2){break}}return e*i}function v(e){var t,i,r,n,s,a,o,l=TIME_INTERVALS;for(t=TIME_MSEC;t<TIME_YEAR;t++){i=t;r=l[t];n=TIME_MULTIPLES[t];if(t<TIME_YEAR){s=(r*n[n.length-1]+l[t+1])/2;if(e<=s){break}}}if(i==TIME_YEAR&&e<5*r){n=[1,2,5]}t=e/r;a=Math.pow(10,_int(Math.log(t)/Math.LN10));o=h(t,n,i===TIME_YEAR?a:1);return{interval:r,count:o,unit:i}}this.createTicks=function(e,t,i,r,n,s){var a,o,l,h,u,c,d,f,_=1,g=new Date(e),m=[],p=TIME_INTERVALS;if(isNaN(i)){l=Math.min(_forceFloat(r,1e5),s/n);a=v((t-e)/l);o=a.interval;l=a.count}else{o=i;l=1}if(defined(e)){g.setMilliseconds(0);if(o>=p[TIME_SEC]){g.setSeconds(o>=p[TIME_MIN]?0:l*_int(g.getSeconds()/l))}if(o>=p[TIME_MIN]){g.setMinutes(o>=p[TIME_HOUR]?0:l*_int(g.getMinutes()/l))}if(o>=p[TIME_HOUR]){g.setHours(o>=p[TIME_DAY]?0:l*_int(g.getHours()/l))}if(o>=p[TIME_DAY]){g.setDate(o>=p[TIME_MON]?1:l*_int(g.getDate()/l))}if(o>=p[TIME_MON]){g.setMonth(o>=p[TIME_YEAR]?0:l*_int(g.getMonth()/l));c=g.getFullYear()}if(o>=p[TIME_YEAR]){c-=c%l;g.setFullYear(c)}if(o===p[TIME_WEEK]){g.setDate(g.getDate()-g.getDay()+_)}h=1;c=g.getFullYear();u=g.getTime();d=g.getMonth();f=g.getDate();while(u<t&&m.length<s){m.push(u);if(o===p[TIME_YEAR]){u=new Date(c+h*l,0)}else if(o===p[TIME_MON]){u=new Date(c,d+h*l)}else if(o===p[TIME_DAY]||o===p[TIME_WEEK]){u=new Date(c,d,f+h*l*(o===p[TIME_DAY]?1:7))}else{u+=o*l}h++}m.push(u)}return m}};DefaultDateTimeAxisMeasurer.Default=new DefaultDateTimeAxisMeasurer;var DateTimeAxis=defineClass("DateTimeAxis",CartesianAxis,{init:function(e){this._super(e);this._calcedCount=0;this._calcedMin=null;this._calcedMax=null;this._calcedInterval=NaN;this._tickList=[]},baseValue:null,minValue:null,maxValue:null,fitInterval:true,maxPadding:.05,minPadding:.05,tickCount:IntProp_0,tickIntervalWidth:IntProp(70),tickInterval:NaN,ticks:null,measurer:DefaultDateTimeAxisMeasurer.Default,toDate:function(e){if(e instanceof Date)return e;if(typeof e==="string"){return new Date(e)}if(e&&e.getTime)return new Date(e.getTime);if(_isNumber(e)&&_toStr(e).length==13){return new Date(e)}return undefined},setMinValue:function(e){e=this.toDate(e);if(e!=this._minValue){this._minValue=e}},setMaxValue:function(e){e=this.toDate(e);if(e!=this._maxValue){this._maxValue=e}},measuredMinimum:function(){return this._calcedMin},measuredMaximum:function(){return this._calcedMax},getPositionOf:function(e){return(e-this._calcedMin)/(this._calcedMax-this._calcedMin)},getValueAt:function(e){return this._calcedMin+(this._calcedMax-this._calcedMax)*e},getCategoryPosition:function(e){var t=e.getDate(e.series().dateField()).getTime()-3600*1e3*24/2;return(t-this._calcedMin.getTime())/(this._calcedMax.getTime()-this._calcedMin.getTime())},getCategoryWidth:function(e){return.03},_styleSheetRegion:function(){return"datetimeAxis"},isContinuous:function(){return true},_doRefreshTicks:function(e,t){var i,r,n,s,a,o,l,h;this._tickList=this.$_parseTicks();if(this._tickList){this._calcedInterval=NaN}else{i=this._calculateDateRange(null,this.minValue(),this.maxValue());if(i.minValue.getTime()===i.maxValue.getTime()&&e.model&&e.model()&&e.model()._CLType==="line"){i.maxValue=i.maxValue.getTime()+1}this._calcedMin=i.minValue;this._calcedMax=i.maxValue;this._calcedCount=_forceFloat(this._tickCount,0);if(this._calcedCount<=0){this._calcedCount=_floor(t/this._tickIntervalWidth)}r=this.measurer();this._tickList=r.createTicks(this._calcedMin,this._calcedMax,this._tickInterval,this._calcedCount,this._tickIntervalWidth,t);this._calcedInterval=r.interval;s=this._tickList.length;this._tickList[0]=this._calcedMin;this._tickList[s-1]=this._calcedMax;n=r.magnitude;a=this._tickList[0];o=this._tickList[s-1];l=Number(this.maxPadding());h=false}},getTickList:function(){return this._tickList.slice()},getTick:function(e){return this._tickList[e]},getTickNumber:function(){return this._tickList.length},getTickPosition:function(e){return this.getPositionOf(this._tickList[e])},$_parseTicks:function(){var e,t,i,r,n,s=null,a=this.ticks();if(!isArray(a)&&a){e=String(a).trim();a=e&&e.split(",")}if(a){n=[];for(i=0,t=a.length;i<t;i++){r=Number(String(a[i]).trim());if(!isNaN(r)){n.push(r)}}if(n.length>0){n.sort(function(e,t){return e-t});a=n}else{a=[]}t=a.length;if(!isNaN(this._minValue)&&(t==0||this._minValue<a[0])){a.unshift(this._minValue)}t=a.length;if(!isNaN(this._maxValue)&&(t==0||this._maxValue>a[0])){a.push(this._maxValue)}t=a.length;if(!isNaN(this._baseValue)&&t>0){if(this._baseValue<a[0]){a.unshift(this._baseValue)}else if(this._baseValue>a[t-1]){a.push(this._baseValue)}}if((t=a.length)>=2){s=[];for(i=0;i<t;i++){s.push(a[i])}}}this._calcedCount=s?s.length:0;return s}});var PolarAxis=defineClass("PolarAxis",ChartAxis,{init:function(e,t){this._super(e,t)},originAngle:Math.PI*3/2,startAngle:0,clockwise:true,spokeCount:function(){return 0},getTickPoints:function(e,t){var i,r,n,s,a,o,l;pts=[],spokes=this.spokeCount();if(spokes>0){i=Math.min(e.width,e.height)/2;i*=t;r=e.x+e.width/2;n=e.y+e.height/2;s=2*Math.PI/spokes;a=0;for(o=0;o<spokes;o++){l=this.getPointOf(a,r,n,i);a+=s;pts.push(l)}}return pts},getPositionOf:function(e){return 1},getPointOf:function(e,t,i,r){return Graphics.getEllipsePoint(t,i,r,r,this._startAngle+e,this._originAngle,this._clockwise)},_styleSheetRegion:function(){return"polarAxis"}});var CategorizedPolarAxis=defineClass("CategorizedPolarAxis",PolarAxis,{init:function(e,t){this._super(e,t);this._categoriesDirty=false;this._categories=null;this._categoryList=[]},startOffset:0,paddingNear:0,paddingFar:0,padding:0,displayCount:0,categories:null,padding_:NullFunc,setPadding:function(e){this.setPaddingNear(e);this.setPaddingFar(e);return this},categories_:function(){return this._categories?this._categories.slice():null},setCategories:function(e){this._categories=e&&e.slice();this._invalidateCategories()},categoryCount:function(){return this._categoryList.length},visibleCount:function(){return this._displayCount>0?Math.min(this._displayCount,this._categoryList.length):this._categoryList.length},getCategory:function(e){return this._categoryList[e]},getCategoryAt:function(e,t){if(t<=0){return this._categoryList[0]}for(var i=0,r=this._categoryList.length;i<r-1;i++){if(t>_floor(this.getCategoryPosition(i)*e)&&t<=_floor((this.getCategoryPosition(i)+this.getCategoryWidth(i))*e)){return this._categoryList[i]}}return this._categoryList[r-1]},getCategoryPosition:function(e){var t=e instanceof ChartSeriesItem?e._category.index:e-this._startIndex;return this._positions[t]*this._locationRate},getCategoryWidth:function(e){var t=e instanceof ChartSeriesItem?e._category.index:e-this._startIndex;return(this._positions[t+1]-this._positions[t])*this._locationRate},getDisplayPosition:function(e){var t=e instanceof ChartSeriesItem?e._category.index:e-this._startIndex;return this._ends[t*2]*this._locationRate},getDisplayWidth:function(e){var t=e instanceof ChartSeriesItem?e._category.index:e-this._startIndex;return(this._ends[t*2+1]-this._ends[t*2])*this._locationRate},getPositionOf:function(e){var t=this._categoryList,i=this._positions,r=-1;if(_isNumber(e)){r=parseInt(e)}else{for(var n=t.length;n--;){if(t[n].label==e){r=n;break}}}if(r>=0){return(i[r]+(i[r+1]-i[r])/2)*this._locationRate}},spokeCount:function(){return this.visibleCount()},connectableWith:function(e){this._super(e)},invalidate:function(){this._invalidateCategories()},_doChartDataChanged:function(e){this._invalidateCategories()},_collectCategories:function(e){var t,i,r,n=this._super(e);if(n){i=n.length;for(t=0;t<i;t++){r=n[t];if(r.label===undefined){r.label=_int(360/i*t)+""}}}return n},_doPrepareLayout:function(){if(this._categoriesDirty){this._categoryList=this._collectCategories(this.categories())}},_doUpdate:function(e,t){function i(e,t,i){var r,n,s,a,o,l,h,u,c=e.count();switch(e.stackMode()){case ChartStackMode.NONE:l=0;for(a=0;a<c;a++){r=e.getItem(a);l+=r.clusterWidth()}n=t;for(a=0;a<c;a++){r=e.getItem(a);s=r.clusterWidth()/l;s*=i;r.clusterInfo={index:a,position:n,width:s};n+=s}break;case ChartStackMode.OVERLAP:case ChartStackMode.FILL:case ChartStackMode.NORMAL:default:n=t;for(a=0;a<c;a++){r=e.getItem(a);r.clusterInfo={index:a,position:n,width:i}}break}}this._super(e,t);var r,n,s,a,o=[],l=0,h=this._sources;if(!h||h.length<1){return}for(r=0;r<h.length;r++){n=h[r];if(n.checkVisible()&&n.isClusterable()&&n.clusteredAxis()==this){l+=n.clusterWidth();o.push(n)}}s=0;for(r=0;r<o.length;r++){n=o[r];a=n.clusterWidth()/l;n.clusterInfo={index:r,position:s,width:a};if(n instanceof ChartSeriesGroup){i(n,s,a)}s+=a}this.invalidate()},_doRefreshTicks:function(e,t){if(this._categoriesDirty){this._positions=this.calcPositions();this._ends=this.calcEnds(this._positions);this._categoriesDirty=false}},calcPositions:function(){var e,t,i,r,n=this.visibleCount(),s=this._categoryList,a=new Array(n+1);if(n>0){e=0;for(r=0;r<n;r++){e+=s[r].width}t=e;this._unit=i=1/e*(e/t);a[0]=0;for(r=1;r<n;r++){a[r]=a[r-1]+i*s[r-1].width}a[n]=1}return a},calcEnds:function(e){var t,i,r,n=e.length-1,s=[];for(t=0;t<n;t++){i=e[t+1]-e[t];r=this._categoryList[t].paddingNear;s[t*2]=e[t]+i*r+this._paddingNear*i;r=this._categoryList[t].paddingFar;s[t*2+1]=e[t+1]-i*r-this._paddingFar*i}return s},getTick:function(e){return this._categoryList[e]},getTickList:function(){return this._categoryList.concat()},getTickNumber:function(){return this._categoryList.length},_invalidateCategories:function(){if(!this._categoriesDirty){this._categoriesDirty=true;this.invalidate()}}});var LinearPolarAxis=defineClass("LinearPolarAxis",PolarAxis,{init:function(e){this._super(e)}});var ChartData=defineClass("ChartData",null,{init:function(e){this._super();this._id=e},id:function(){return this._id}});var ChartDataProvider=defineClass("ChartDataProvider",null,{init:function(){this._super();this._items=[];this._map={}},load:function(e){var t,i,r,n;e=_makeArray(e);for(t=0,i=e.length;t<i;t++){r=e[t];n=null;if(_isObject(r)&&r.id){if(_isArray(r.values)){n=new LocalChartData(r.id);n.setValues(r.values)}}if(n){this._items.push(n);this._map[n.id()]=n}}},hasData:function(e){return this._map.hasOwnProperty(e)},getData:function(e){return this._map[e]}});var LocalChartData=defineClass("LocalChartData",ChartData,{init:function(e){this._super(e);this._values=null},values:null,setValues:function(e){var t;if(e&&(t=e.length)>0){this._values=[];for(var i=0;i<t;i++){this._values.push(e[i])}}else{this._values=null}},rowCount:function(){return this._values?this._values.length:0},getRow:function(e){if(!this._values||e<0||e>=this._values.length){throw"Invalid row index: "+e}return this._values[e]}});var RemoteChartData=defineClass("RemoteChartData",ChartData,{init:function(e){this._super(e);this._values=null;this._completeHandler=null},url:null,method:"GET",params:null,showProgress:true,rows:null,rowCount:function(){return this._values?this._values.length:0},getRow:function(e){if(!this._values||e<0||e>=this._values.length){throw"Invalid row index: "+e}return this._values[e]},load:function(e){this._completeHandler=e;asyncAjax(this.url(),this.$_loadCallback.bind(this),this.method())},$_loadCallback:function(e,t,i){if(i){alert(i)}else{this._doCompleted(e)}},_doCompleted:function(e){var t=JSON.parse(e);this._values=null;if(t){if(this.rows()){t=t[this.rows()]}this._values=t;if(!isArray(this._values)){this._values=[t]}}if(this._completeHandler){this._completeHandler(this)}}});var Tooltip=defineClass("Tooltip",null,{init:function(e){this._super();this._styles=new ChartStyles(this,"Tooltip");this._text=e},styles:null,text:null,messageCallback:null,setStyles:function(e){if(e!==this._styles){this._styles.extend(e)}},setMessageCallback:function(e){if(e!=this._messageCallback){this._messageCallback=e}},getMessage:function(e){return this._text}});var SeriesItemTooltip=defineClass("SeriesItemTooltip",Tooltip,{init:function(e){this._super();this._series=e;this._buildStatement()},series:null,runtime:null,setText:function(e){if(e!=this._value){this._text=e;this._buildStatement()}},getMessage:function(e){var t,i,r;if(this._messageCallback){return this._messageCallback(e.model(),e.series())}else{if(e instanceof ChartSeriesItemView){t=e.model().$_tooltipExpr()}if(!t){t=this._expr}var r=t.evaluate(this._runtime);return r}},_buildStatement:function(){this._expr=new ExpressionStatement(this._text||this._series.getTooltipStatement())}});var SeriesItemTooltipRuntime=defineClass("SeriesItemTooltipRuntime",ExpressionRuntime,{init:function(){this._super();this._formats={}},setItem:function(e){this._item=e;this._series=e.series()},isIdentifier:function(e){if(e){var t,i=e.indexOf(":");if(i>=0){t=e.substr(i+1);e=e.substr(0,i)}if(e=="series")return 0;i=this._series.isTooltipField(e);if(i>=0){this._formats[++i]=t;return i}}return-1},evaluateIdentifier:function(e,t){if(e==0){return this._series.displayName()}else if(e>0){var i,r,n=this._series.getTooltipFieldValue(this._item,e-1,t);if(_isDate(n)){i=this._formats[e];r=i&&DateTimeWriter.getWriter(i);return r?r.getText(n):n}else if(_isNumber(n)){i=this._formats[e];r=i&&DecimalFormatter.getFormatter(i);return i?r.format(n):n}else{return String(n!==undefined?n:e)}}}});var ChartCrosshair=defineClass("ChartCrosshair",ChartObject,{init:function(e){this._super(e)},orientation:CrosshairOrientation.BOTH,enabled:false,syncTooltip:true,plotArea:function(){return this._owner},chart:function(){return this._owner._owner},assignSimple:function(e){this.setEnabled(!!e)},_styleSheetRegion:function(){return"plotArea.crosshair"}});var CrosshairView=defineClass("CrosshairView",UIElement,{init:function(e){this._super(e||"crossHairView");this._focusX=NaN;this._focusY=NaN;this._plotView=null;this._targetView=null;this._axisViews=null;this.setMouseEnabled(false)},model:null,line:null,setFocus:function(e,t,i,r){var n,s,a,o,l,h=this._model.orientation(),u=this._plotView,c=this._targetView,d=null;e=parseInt(e);t=parseInt(t);if(u!==i){u=this._plotView=i;this._axisViews=u.chartView().bodyView().getMainAxisViews()}l=u.boundsByContainer();if(e!==this._focusX||t!==this._focusY){this._focusX=Math.max(l.x,Math.min(e,l.right()));this._focusY=Math.max(l.y,Math.min(t,l.bottom()));this.container().invalidate()}if(u.isAncestorOf(r)&&c!==r){c=this._targetView=r}if(c instanceof ChartSeriesView){d=c.model()}else if(c instanceof ChartSeriesItemView){d=c.model().series()}else{d=u.chartView().model().getMainSeries()}this._series=d;if(a=this._axisViews){if(d){for(n=a.length;n--;){o=a[n];if(!o.isVertical()&&CrosshairOrientation.isVert(h)||o.isVertical()&&CrosshairOrientation.isHorz(h)){s=o.containerToElement(e,t);o.showFocus(d,s.x,s.y)}else{o.hideFocus()}}}else{for(n=a.length;n--;){a[n].hideFocus()}}}},_doDraw:function(e){var t,i=this._model.orientation(),r=this._line||new SolidPen("#80000000");x=this._focusX,y=this._focusY;if(this._model&&!isNaN(x)&&!isNaN(y)){t=this._plotView.boundsByContainer();if(CrosshairOrientation.isVert(i)){e.drawLineI(r,x,t.y,x,t.bottom())}if(CrosshairOrientation.isHorz(i)){e.drawLineI(r,t.x,y,t.right(),y)}}},_hideAxisFocus:function(){if(this._axisViews){for(var e=this._axisViews.length;e--;){this._axisViews[e].hideFocus()}}this._plotView=null;this._focusX=this._focusY=NaN}});var CrosshairManager=defineClass("CrosshairManager",null,{init:function(e){this._super();this._chart=e.chartView();this._view=null},model:null,focusedSeries:function(){return this._view&&this._view._series},setFocus:function(e,t,i,r){this._show(e,t,i,r)},hide:function(){if(this._view){this._view._hideAxisFocus();this._chart.removeToolElement(this._view)}},_show:function(e,t,i,r){var n=this._view;if(!n){n=this._view=new CrosshairView}if(this._chart.addToolElement(n)){n.setRect(this._chart.clientRect())}n.setModel(this._model);n.setLine(this.model().styles().line());n.setFocus(e,t,i,r)}});var ChartSeriesItemProxy=defineClass("ChartSeriesItemProxy",null,{init:function(e){this._super();this._series=e;this._source=null;this._items=[];this._prevItems=null},sortDir:ChartSeriesSortDirection.NONE,count:function(){return this._items.length},setSortDir:function(e){if(e!=this._sortDir){this._sortDir=e;this._refreshItems()}},getItem:function(e,t){if(!this._items||e<0||e>=this._items.length){if(t)return null;throw"Invalid item index: "+e}return this._items[e]},refresh:function(e){this._source=e;this._buildItems()},_buildItems:function(){var e,t,i,r=this._source;this._items=[];if(r){for(e=0,t=r.length;e<t;e++){i=r[e];if(i){i._index=e}this._items.push(i)}}},_refreshItems:function(){}});var PlottingSource=defineClass("PlottingSource",ChartAnimationable,{init:function(e,t,i){this._super(e,i);this._name=t;this._xAxisObj=null;this._yAxisObj=null},name:null,xAxis:0,yAxis:0,zindex:0,clusterWidth:1,xAxisObj:function(){return this._xAxisObj},yAxisObj:function(){return this._yAxisObj},isPolar:function(){return false},inverted:function(){return false},getCategoryField:function(e){return this.labelField?this.labelField():"label"},checkVisible:function(){return this._visible},mixableWith:function(e){return false},disconnectFromAxis:function(){this._xAxisObj&&this._xAxisObj.removeSource(this);this._yAxisObj&&this._yAxisObj.removeSource(this);this._xAxisObj=this._yAxisObj=null},connectToAxes:function(e,t){var i,r,n;i=this.xAxis();if(_isNumber(i)){this._connectXAxis(e[i])}else if(_isString(i)){for(r=0;r<e.length;r++){n=e[r];if(n.name()==i&&this._connectXAxis(n)){break}}}if(!this._xAxisObj&&e.length>0){this._connectXAxis(e[0])}i=this.yAxis();if(_isNumber(i)){this._connectYAxis(t[i])}else if(_isString(i)){for(r=0;r<t.length;r++){n=t[r];if(n.name()==i&&this._connectYAxis(n)){break}}}if(!this._yAxisObj&&t.length>0){this._connectYAxis(t[0])}},connectToAxis:function(e,t){_defined(e)&&this._connectXAxis(e);_defined(t)&&this._connectYAxis(t)},connectableXAxis:function(e){return e instanceof CartesianAxis},connectableYAxis:function(e){return e instanceof CartesianAxis},getLegendColor:function(){return this.styles().background()},setVisible:function(e){this._super(e);if(this._legendItem!=null){this._legendItem.setActive(e)}this._owner&&this._owner.$_seriesVisibleChanged(this,this._visible)},_connectXAxis:function(e){if(e&&this.connectableXAxis(e)){this._xAxisObj=e;e.addSource(this);return true}},_connectYAxis:function(e){if(e&&this.connectableYAxis(e)){this._yAxisObj=e;e.addSource(this);return true}},isClusterable:function(){return false},clusteredAxis:function(){return null}});var ChartSeriesItem=defineClass("ChartSeriesItem",null,{init:function(e,t){this._super();this._series=e;this._index=-1;this._data=t;if(_isObject(t)){this.setTooltip(t.tooltip);if(t.visible===false){this.setVisible(t.visible)}}this._runStyles=e.$_createItemRunStyles(this);this._runLabelStyles=e._label.$_createItemRunStyles(this)},stylesChanged:function(e){this._changed()},getPaletteScope:function(){return this},getPalette:function(e){var t=this._series._owner.palettes();return t&&t._palettes[e]},getPaletteIndex:function(e){return this._index},visible:true,data:null,detail:null,styles:null,labelStyles:null,tooltip:null,styles_:function(){return this._styles||this._runStyles},setStyles:function(e){var t;if(e!=this._styles&&e!=(t=this._series._styles)){if(e){if(!this._styles){this._styles=new ChartStyles(this._series,"seriesItem",null).setParent(t,false)}this._styles.extend(e)}else{this._styles=null}}},labelStyles_:function(){return this._labelStyles||this._runLabelStyles},setLabelStyles:function(e){var t;if(e!=this._labelStyles&&e!=(t=this._runLabelStyles)){if(e){if(!this._labelStyles){this._labelStyles=new ChartStyles(this._series,"seriesItemLabel",null).setParent(t,false)}this._labelStyles.extend(e)}else{this._labelStyles=null}}},setTooltip:function(e){if(e!=this._tooltip){this._tooltip=e;this._tooltipExpr=e?new ExpressionStatement(e):null}},series:function(){return this._series},chart:function(){return this._series.owner()},index:function(){return this._index},displayIndex:function(){return this._vindex},displayName:function(){return this._series.displayName()+":"+this._index},categoryIndex:function(){return this._category?this._category.index:-1},getProp:function(e,t){if(_isObject(this._data)){if(this._data.hasOwnProperty(e)){return this._data[e]}return undefined}else if(t!==undefined){return t}else{return this._data}},pickProp:function(e,t){var i=this._data;if(_isObject(i)){if(i.hasOwnProperty(e)){return i[e]}if(i.hasOwnProperty(t)){return i[t]}}},setProp:function(e,t){this._data[e]=t},getDate:function(e,t){var i;if(this._data.hasOwnProperty(e)){i=this._data[e];if(!(i instanceof Date)&&_defined(i)){this._data[e]=i=new Date(i)}}else if(t&&this._data.hasOwnProperty(t)){i=this._data[t];if(!(i instanceof Date)&&_defined(i)){this._data[t]=i=new Date(i)}}else{}return i},getNumber:function(e){var t;if(this._data.hasOwnProperty(e)){t=this._data[e];this._data[e]=t=parseFloat(t)}else{}return t},getRunStyles:function(){return this._runStyles},getItemStyles:function(){return this._styles||this._runStyles},_changed:function(){this._series.$_itemPropChanged(this)},$_tooltipExpr:function(){return this._tooltipExpr}});var ChartSeriesAggregator=defineClass("ChartSeriesAggregator",null,{init:function(){this._super();this._max=NaN;this._min=NaN;this._med=NaN;this._maxItem=null;this._minItem=null},aggregate:function(e,t){var i,r,n,s=Math.min(e.length,t.length);if(s>0){this._max=this._min=this._med=n=t[0];this._maxItem=this._minItem=e[0]}else{this._max=this._min=this._med=NaN;this._maxItem=this._minItem=null;return}for(i=1;i<s;i++){r=t[i];if(r>this._max){this._max=r;this._maxItem=e[i]}else if(r<this._min){this._min=r;this._minItem=e[i]}n+=r}this._med=n/s}});var ChartSeriesLabel=defineClass("ChartSeriesLabel",ChartLabelBase,{init:function(e,t){this._super(e,"chartLabel",t);this._runStyles=new ChartStyles(this,"chartLabelRun");this._runStyles.setParent(this._styles,false);this._dynamicStyles=new DynamicStyleCollection;this._itemRuntime=ChartSeriesItemRuntime.Default;this._itemView=null},getPaletteIndex:function(e){return this._itemView?this._itemView.index():0},labelField:null,text:null,callback:null,dynamicStyles:null,setText:function(e){if(e!=this._text){this._text=e;if(_isString(e)){e=e.trim();this._statement=e?new ExpressionStatement(e):null}else{this._statement=null}}return this},setCallback:function(e){e=_asFunction(e);if(e!==this._callback){this._callback=e;this._changed()}return this},setDynamicStyles:function(e){if(e!=this._dynamicStyles){this._dynamicStyles.setItems(e);this._changed()}return this},prepareItemStyles:function(e){var t=this._itemRuntime,i=e._model,r=i._runLabelStyles;r.clearValues();t.setItem(i,e);this._dynamicStyles.applyInternal(t,r);return i.labelStyles()},getText:function(e){var t=this._callback,i=this._statement;if(t){return t(e)}if(i){return i.evaluate(ChartSeriesLabelStatementRuntime.Default.setItem(e))}return undefined},$_createItemRunStyles:function(e){var t=new ChartStyles(e,"itemLabelRun",null,false);t.setParent(this._styles);return t}});var ChartSeries=defineClass("ChartSeries",PlottingSource,{init:function(e,t){this._super(e,t,"series");this._dynamicStyles=new DynamicStyleCollection;this._itemRuntime=ChartSeriesItemRuntime.Default;this._itemAnisTarget=new DLBase;this._label=new ChartSeriesLabel(this,this._styles);this._itemAnimations=[];this._filterNode=null;this._group=null;this._groupIndex=-1;this._visibleIndex=-1;this._itemsDirty=false;this._itemList=null;this._visibleItems=null;this._itemProxy=new ChartSeriesItemProxy(this);this._itemView=null;this._tooltipRuntime=new SeriesItemTooltipRuntime(this);this._tooltip=new SeriesItemTooltip(this);this._values=null;this._aggregator=new ChartSeriesAggregator;this._mask=new ChartMaskEffect(this)},getPaletteIndex:function(e){return _defined(this._palIndex)?this._palIndex:e},labelChanged:function(e){this._changed()},dynamicStyles:null,label:null,legend:null,legendItem:null,colorScaler:null,dataDirection:EnumProp(ChartDataDirection,ChartDataDirection.DEFAULT),valueField:"value",filter:null,visibleOnly:false,itemsLegend:false,summaryMode:EnumProp(SummaryMode,SummaryMode.NONE),nanValue:0,caption:null,items:null,itemAnimations:null,mask:null,itemAnisTarget:function(){return this._itemAnisTarget},overflow:EnumProp(ChartOverflowPolicy,ChartOverflowPolicy.JUSTIFY),itemDisplayOrder:EnumProp(ChartItemDisplayOrder,ChartItemDisplayOrder.FIRST),data:null,tooltip:null,dataTipField:"dataTip",descriptionField:"description",fields:null,aggregating:false,dateFormat:null,setDynamicStyles:function(e){if(e!=this._dynamicStyles){this._dynamicStyles.setItems(e);this._changed()}return this},setLabel:function(e){if(e!==this._label){this._label.assign(e);this._changed()}return this},setLegend:function(e){if(e!==this._legend){if(_defined(e)){this._legend=this._legend||new SeriesLegend(this.owner(),this);this._legend.assign(e)}else{this._legend=null}this._changed()}return this},setColorScaler:function(e){if(e!==this._colorScaler){if(_isObject(e)){if(!this._colorScaler){this._colorScaler=new ChartColorScaler(this)}this._colorScaler.assign(e)}else{this._colorScaler=null}this._changed()}return this},setItems:function(e){if(e!==this._items){this._items=e;this.invalidateItems()}return this},setFilter:function(e){if(e!=this._filter){this._filter=e;this._filterNode=e?ExpressionParser.Default.parse(e,null):null}return this},setDateFormat:function(e){},setTooltip:function(e){if(e!=this._tooltip){this._tooltip.assign(e)}return this},palettes:function(){return this._owner._palettes},setFields:function(e){if(_isArray(e)){this._fields=e}else if(e){var t=String(e);this._fields=t.trim().split(",")}else{this._fields=null}},fieldList:function(){return this._fields||this.defaultFieldList()},itemAnimations_:function(){return this._itemAnimations.slice()},setItemAnimations:function(e){var t,i,r,n;if(e!==this._itemAnimations){n=this._itemAnimations=[];if(e){for(t=0,i=e.length;t<i;t++){r=ChartAnimation.create(e[t]);n.push(r)}}}},setMask:function(e){if(e!==this._mask){this._mask.assign(e)}},group:function(){return this._group},groupIndex:function(){return this._groupIndex},visibleIndex:function(){return this._visibleIndex},legendRenderer:function(){return null},itemCount:function(){return this._itemList?this._itemList.length:0},displayCount:function(){return this._visibleItems?this._visibleItems.length:0},viewsPerItem:function(){return 1},textsPerItem:function(){return 1},isPolar:function(){return false},displayName:function(){return this._caption||this._name||"Series"},labelAxis:function(){return this.xAxisObj()},valueAxis:function(){return this.yAxisObj()},defaultFieldList:function(){return ChartSeries.FIELDS},indexOf:function(e){return this._itemList?this._itemList.indexOf(e):-1},getItem:function(e,t){return this._itemList?this._itemList[e]:null},getVisibleItem:function(e){return this._visibleItems?this._visibleItems[e]:null},setItemProperty:function(e,t,i){if(this.indexOf(e)>=0&&e.hasProp(t)){var r=e.getProperty(t);if(r!=i){e.setProperty(t,i);this._owner.$_setSeriesItemPropChanged(e,t)}}},getItemProp:function(e,t){var i,r,n=e.index();switch(t){case"value":case"number":return this._values[n];case"category":case"label":i=this.labelAxis();if(i){if(i instanceof DateTimeAxis){r=e.getProp(t);if(r&&!r.getTime)r=new Date(r);return r}else if(i.isContinuous()){return e.getProp(t)}else{if(e.categoryIndex()>=0){return i.getCategory(e.categoryIndex()).label}return i.getTick(n).label}}return n;default:return e.getProp(t)}return undefined},getItemStyles:function(e,t,i,r){var n;this._palIndex=e.index();if(i)n=this._styles.hover();else if(r)n=this._styles.select();return n||t},getItemCaption:function(e){return null},setItemLegend:function(e,t){var i,r,n,s=this.getItem(e);if(s){t.setDisplayName(this.getItemCaption(s))}},addItemAnimation:function(e){if(e){if(this._itemAnimations.indexOf(e)<0){this._itemAnimations.push(e)}}},getMinValueAt:function(e){return NaN},getMaxValueAt:function(e){return NaN},getMinDateAt:function(e){return null},getMaxDateAt:function(e){return null},getLabels:function(e){return null},createItem:function(e){var t,i,r,n,s;if(_defined(e)){t=e;if(_isArray(e)){t=this._parseItemData(e);if(!t)return null}else if(_isObject(e)){t=e}else{t={};t[this.valueField()]=e}s=this._doCreateItem(t);if(_isObject(e.styles)){s.setStyles(e.styles)}if(_isString(e.detail)){s.setDetail(e.detail)}return s}return null},_parseItemData:function(e){if(e.length>0){var t,i,r,n,s=this.fieldList();t={};if(s=this._fields){for(r=s.length;r--;){t[s[r]]=e[r]}}else if(s=this.defaultFieldList()){for(r=s.length,n=Math.min(r,e.length);r--,n--;){t[s[r]]=e[n]}}return t}},_doCreateItem:function(e){return new ChartSeriesItem(this,e)},prepareItemStyles:function(e){var t=this._itemRuntime,i=e._model,r=i.getRunStyles();r.clearValues();t.setItem(i,e);this._dynamicStyles.applyInternal(t,r);return i.getItemStyles()},$_sourceToItem:function(e,t){if(_isArray(e)||_isObject(e)){return e}var i=t?t.data():{};i[this.valueField()]=e;return i},addItem:function(e,t){this._items.push(this.$_sourceToItem(e));this.invalidateItems();if(t&&this._xAxisObj.isScrollable()){this._xAxisObj.scroll(1)}},addItems:function(e,t){if(_isArray(e)){for(var i=e.length;i--;){e[i]=this.$_sourceToItem(e[i])}this._items=this._items.concat(e);this.invalidateItems();if(t&&this._xAxisObj.isScrollable()){this._xAxisObj.scroll(e.length)}}},updateItemAt:function(e,t){this._items[e]=this.$_sourceToItem(t,this._itemList[e]);this.invalidateItems()},updateItem:function(e,t,i){for(var r=0,n=this.itemCount();r<n;r++){if(this.getItem(r).getProp(e)===t){this._items[r]=this.$_sourceToItem(i,this._itemList[r]);this.invalidateItems();break}}},deleteItems:function(e){e.sort(function(e,t){return e-t});for(var t=e.length;t--;){this._items.splice(e[t],1)}this.invalidateItems()},_styleSheetRegion:function(){return"series"},setStyleSheet:function(e,t){this._super(e,t);var i=e.parent();this._legend&&this._legend.setStyleSheet(i,t);this._colorScaler&&this._colorScaler.setStyleSheet(i,t)},getChartEffect:function(e){switch(e){case"mask":return this._mask}},propertyChanged:function(e,t){this.invalidateItems()},_doChartDataChanged:function(e){this.invalidateItems()},_doUpdateSimple:function(e,t){if(this._itemsDirty||t){this._doRefreshItems(e);this._itemsDirty=false}},_doUpdate:function(e,t){var i,r,n,s,a=e.series();this._group=null;this._groupIndex=-1;for(i=0,r=a.length;i<r;i++){n=a[i];if(n instanceof ChartSeriesGroup){s=n.indexOf(this);if(s>=0){this._group=n;this._groupIndex=s;break}}}if(this._itemsDirty||t){this._doRefreshItems(e);this._itemsDirty=false}},mixableWith:function(e){return e===this||e.constructor===this.constructor},_doRefreshItems:function(e){var t,i=this.items();this._values=[];if(e.hasData(i)){t=e.getData(i);if(t){this._itemList=this.parseData(this._data,t)}}else if(i){this._itemList=this.parseItems(i)}this.$_refreshVisibleItems();if(this.aggregating()){this._aggregator.aggregate(this._itemList,this._values)}this._itemProxy.refresh(this._itemList)},$_refreshVisibleItems:function(){var e,t,i,r,n=this._itemList;if(n){this._visibleItems=[];i=0;for(e=0,t=n.length;e<t;e++){r=n[e];if(r){if(r.visible()){r._vindex=i++;this._visibleItems.push(r)}else{item_vindex=-1}}else{this._visibleItems.push(null);i++}}}else{this._visibleItems=null}},_checkItemVisible:function(e){},parseData:function(e,t){var i,r,n,s=this.valueField(),a=[];for(i=0,r=t.rowCount();i<r;i++){n=this.createItem(t.getRow(i));this._checkItemVisible(n);a.push(n);this._values.push(n!=null?parseFloat(n.getProp(s)):NaN)}return a},parseItems:function(e){var t,i,r,n,s,a=this.valueField(),o=[];if(_isArray(e)){for(t=0,i=e.length;t<i;t++){o.push(s=this.createItem(e[t]));this._checkItemVisible(s);this._values.push(s?parseFloat(s.getProp(a)):NaN)}}else if(typeof e==="string"){n=e.split(",");for(t=0,i=n.length;t<i;t++){o.push(s=this.createItem(n[t]));this._checkItemVisible(s);this._values.push(s?parseFloat(s.getProp(a)):NaN)}}else if(e instanceof ValueGenerator){e.refresh();for(t=0,i=e.valueCount();t<i;t++){r=e.valueAt(t);o.push(s=this.createItem(r));this._checkItemVisible(s);this._values.push(s?parseFloat(s.getProp(a)):NaN)}}else{o.push(s=this.createItem(e));this._checkItemVisible(s);this._values.push(s?parseFloat(s.getProp(a)):NaN)}return o},getDataConfig:function(){return{id:null}},$_itemPropChanged:function(e){this._changed()},itemsChanged:function(e){invalidateItems()},dataChanged:function(e){invalidateItems()},dataOrientationChanged:function(e){invalidateItems()},invalidateItems:function(){this._itemsDirty=true;this._changed()},collectValues:function(e,t){var i,r,n,s=this.valueField(),a=this.itemCount(),o=[];if(a>0){for(i=0;i<a;i++){r=this.getItem(i);n=r?r.getProp(s):NaN;o.push(t&&n>e||!t&&n<e?n:e)}}return o},getLowerValues:function(e){return this.collectValues(e,false)},getUpperValues:function(e){return this.collectValues(e,true)},calcMinValue:function(e){var t,i,r,n,s=this.itemCount();if(s>0){t=NaN;i=0;while(i<s){n=this.getItem(i++);r=n?n.getNumber(e):NaN;if(!isNaN(r)){t=r;break}}for(;i<s;i++){n=this.getItem(i);r=n?n.getNumber(e):NaN;if(!isNaN(r)){t=Math.min(t,r)}}return t}return NaN},calcMaxValue:function(e){var t,i,r,n,s=this.itemCount();if(s>0){t=NaN;i=0;while(i<s){n=this.getItem(i++);r=n?n.getNumber(e):NaN;if(!isNaN(r)){t=r;break}}for(;i<s;i++){n=this.getItem(i);r=n?n.getNumber(e):NaN;if(!isNaN(r)){t=Math.max(t,r)}}return t}return NaN},collectDates:function(e,t){var i,r;var n=this.itemCount();var s=[];if(n>0){e=e.getTime();for(i=0;i<n;i++){r=this._values[i].getTime();s.push(t&&r>e||!t&&r<e?r:e)}}return s},getLowerDates:function(e){return this.collectDates(e,false)},getUpperDates:function(e){return this.collectDates(e,true)},calcMinDate:function(e,t){var i,r,n,s,a=this.itemCount();if(a>0){i=null;n=0;while(n<a){s=this.getItem(n++);if(s){r=s.getDate(e);if(!r&&t){r=s.getDate(t)}}else{r=null}if(r){i=r;break}}for(;n<a;n++){s=this.getItem(n);if(s){r=s.getDate(e);if(!r&&t){r=s.getDate(t)}}else{r=null}if(r&&r.getTime()<i.getTime()){i=r}}return i instanceof Date?i:i!==null?new Date(i):null}return null},calcMaxDate:function(e,t){var i,r,n,s,a=this.itemCount();if(a>0){i=null;n=0;while(n<a){s=this.getItem(n++);if(s){r=s.getDate(e);if(!r&&t){r=s.getDate(t)}}else{r=null}if(r){i=r;break}}for(;n<a;n++){s=this.getItem(n);if(s){r=s.getDate(e);if(!r&&t){r=s.getDate(t)}}else{r=null}if(r&&r.getTime()>i.getTime()){i=r}}return i instanceof Date?i:i!==null?new Date(i):null}return null},extractLabels:function(e){var t,i,r,n=this.itemCount();if(n>0){t=[];for(i=0;i<n;i++){r=this.getItem(i);t.push(r?r.getProp(e):null)}return t}return null},isClusterable:function(){return false},isItemField:function(e){return this.fieldList().indexOf(e)>=0},getItemFieldValue:function(e,t){return this.getItemProp(e,t)},getTooltipStatement:function(){return"${label}: <b>${value}</b>"},getItemTooltip:function(e){this._tooltipRuntime.setItem(e);this._tooltip.setRuntime(this._tooltipRuntime);return this._tooltip},isTooltipField:function(e){if(e=="yaxis")return 100;return this.fieldList().indexOf(e)},getTooltipFieldValue:function(e,t){var i;if(t==100){i=this._yAxisObj;if(!i&&this._group)i=this._group._yAxisObj;return i.displayName()}value=this.getItemProp(e,this.fieldList()[t]);if(this.valueAxis()instanceof DateTimeAxis){return this._getDateValue(value)}return value},_getDateValue:function(e){if(!(e instanceof Date)&&_defined(e)){e=new Date(e)}return e},$_itemClicked:function(e){this._doItemClicked(e)},_doItemClicked:function(e){},_getItemParentStyles:function(){return this._styles},$_createItemRunStyles:function(e){return new ChartStyles(e,"itemRun",null,false).setParent(this._getItemParentStyles())}},{LABEL:"label",VALUE:"value"},function(e){e.FIELDS=[e.LABEL,e.VALUE]});var SeriesStackLabel=defineClass("SeriesStackLabel",ChartObject,{init:function(e){this._super(e,"stackLabel")},visible:false,labelCallback:null,_styleSheetRegion:function(){return"seriesGroup.stackLabel"},setStyleSheet:function(e,t){this._super(e,t)}});var ChartSeriesGroup=defineClass("ChartSeriesGroup",PlottingSource,{init:function(e,t){this._super(e,t);this._separatorStyles=new ChartStyles(this,"separator");this._stackLabel=new SeriesStackLabel(this);this._series=[]},separatorStyles:null,stackLabel:null,reversed:false,stackMode:EnumProp(ChartStackMode,ChartStackMode.NONE),minValue:0,maxValue:100,setMinValue:function(e){this._minValue=_forceFloat(e,0)},setMaxValue:function(e){this._maxValue=_forceFloat(e,0)},series:function(){return this._series.slice()},setSeparatorStyles:function(e){if(e!==this._separatorStyles){this._separatorStyles.extend(e)}return this},setStackLabel:function(e){if(e!==this._stackLabel){this._stackLabel.assign(e);this._changed()}return this},setSeries:function(e){var t,i;this._series=[];if(e instanceof ChartSeries){this.addSeries(e)}else{for(t=0,i=e.length;t<i;t++){this.addSeries(e[t])}}this._changed();return this},count:function(){return this._series.length},visibleSeries:function(){return this._visibles.slice()},visibleCount:function(){return this._visibles.length},addSeries:function(e){var t,i;if(e instanceof ChartSeries){if(this._series.length<1){this._series.push(e);return true}else{for(t=0,i=this._series.length;t<i;t++){if(e===this._series[t]||!this.containableWith(e)){return false}}this._series.push(e);return true}}return false},indexOf:function(e){var t,i;for(t=0,i=this._series.length;t<i;t++){if(this._series[t]===e){return t}}return-1},getItem:function(e){return this._series[e]},getVisibleItem:function(e){return this._visibles[e]},seriesByName:function(e){var t,i;for(t=0,i=this._series.length;t<i;t++){if(this._series[t].name()===e){return this._series[t]}}return null},collectValues:function(e,t){var i,r,n,s,a,o=this._series.length,l=[];for(r=0;r<o;r++){i=this._series[r];if(i.visible()){n=t?i.getUpperValues(e):i.getLowerValues(e);for(s=0,a=n.length;s<a;s++){if(s>=l.length){l.push(n[s])}else{l[s]+=n[s]}}}}return l},getLowerValues:function(e){return this.collectValues(e,false)},getUpperValues:function(e){return this.collectValues(e,true)},getMinValueAt:function(e){var t,i,r,n,s,a=NaN,o=this._series.length;if(o>0){if(this.stackMode()==ChartStackMode.NONE||this.stackMode()==ChartStackMode.OVERLAP){t=0;while(t<o){i=this._series[t++];if(i.getMinValueAt&&i.visible()){a=i.getMinValueAt(e);break}}while(t<o){i=this._series[t++];if(i.getMinValueAt&&i.visible()){a=Math.min(a,i.getMinValueAt(e))}}}else{s=e.baseValue();r=this.getLowerValues(s);a=s;for(t=0,n=r.length;t<n;t++){a=Math.min(r[t],a)}}}return a},getMaxValueAt:function(e){var t,i,r,n,s=NaN,a=this._series.length;if(a>0){if(this.stackMode()==ChartStackMode.NONE||this.stackMode()==ChartStackMode.OVERLAP){t=0;while(t<a){i=this._series[t++];if(i.getMaxValueAt&&i.visible()){s=i.getMaxValueAt(e);break}}while(t<a){i=this._series[t++];if(i.getMaxValueAt&&i.visible()){s=Math.max(s,i.getMaxValueAt(e))}}}else{r=e.baseValue();n=this.getUpperValues(r);s=r;for(t=0,len=n.length;t<len;t++){s=Math.max(n[t],s)}}}return s},getMinDateAt:function(e){var t,i,r,n,s,a=null,o=this._series.length;if(o>0){if(this.stackMode()==StackMode.NONE||this.stackMode()==StackMode.OVERLAP){t=0;while(t<o){i=this._series[t++];if(i.visible()&&i.getMinDateAt&&i.styles().visible()){a=i.getMinDateAt(e);break}}while(t<o){i=this._series[t++];if(i.visible()&&i.getMinDateAt&&i.styles().visible()){a=_minDate(a,i.getMinDateAt(e))}}}else{s=e.baseValue();r=this.getLowerValues(s);a=s;for(t=0,n=r.length;t<n;t++){a=_minDate(r[t],a)}}}return a},getMaxDateAt:function(e){var t,i,r,n=null,s=this._series.length;if(s>0){if(this.stackMode()==StackMode.NONE||this.stackMode()==StackMode.OVERLAP){t=0;while(t<s){i=this._series[t++];if(i.visible()&&i.getMaxDateAt&&i.styles().visible()){n=i.getMaxDateAt(e);break}}while(t<s){i=this._series[t++];if(i.visible()&&i.getMaxDateAt&&i.styles().visible()){n=_maxDate(n,i.getMaxDateAt(e))}}}else{r=e.baseValue();vals=this.getUpperValues(r);n=r;for(t=0,len=vals.length;t<len;t++){n=_maxDate(vals[t],n)}}}return n},checkVisible:function(){if(this._visible){for(var e=this._series.length;e--;){if(this._series[e].visible())return true}}return false},assign:function(e){this._super(e)},_styleSheetRegion:function(){return"seriesGroup"},setStyleSheet:function(e,t){this._super(e,t);for(var i=this._series.length;i--;){this._series[i].setStyleSheet(e,t)}this._stackLabel.styles().$_spd(t["seriesGroup.stackLabel"](),e)},_doUpdate:function(e,t){this._doUpdateSeries()},isClusterable:function(){return false},containableWith:function(e){return true},_doUpdateSeries:function(){this._visibles=this._series.filter(function(e){e._visibleIndex=-1;return e.visible()});this._reversed&&this._visibles.reverse();this._visibles.forEach(function(e,t){e._visibleIndex=t})}});var CartesianSeries=defineClass("CartesianSeries",ChartSeries,{init:function(e,t){this._super(e,t)},labelField:"label",dateField:"date",labelStart:0,labelInterval:1,setLabelStart:function(e){e=_forceFloat(e,0);if(e!=this._labelStart){this._labelStart=e}},setLabelInterval:function(e){e=_forceFloat(e,1);if(e>0&&e!=this._labelInterval){this._labelInterval=e}},isScrollable:function(){return true},displayCount:function(){var e=this.itemCount(),t=this.xAxisObj();if(!(t instanceof CategorizedAxis)){t=this.yAxisObj()}return t instanceof CategorizedAxis?t.categoryCount():e},xAxisObj:function(){return this.group()?this.group().xAxisObj():this._xAxisObj},yAxisObj:function(){return this.group()?this.group().yAxisObj():this._yAxisObj},mixableWith:function(e){return e instanceof CartesianSeries},isValueAxis:function(e){return e===this.yAxisObj()},getMinValueAt:function(e){var t=e===this.labelAxis(),i=t?this.labelField():this.valueField(),r=this.calcMinValue(i);if(isNaN(r)){if(t){r=this._labelStart}}return r},getMaxValueAt:function(e){var t=e===this.labelAxis(),i=t?this.labelField():this.valueField(),r=this.calcMaxValue(i);if(isNaN(r)){if(t){r=this._labelStart+(this.itemCount()-1)*this._labelInterval}}return r},getMinDateAt:function(e){var t,i,r=e===this.labelAxis();if(r){t=this.dateField();i=this.calcMinDate(t,this.labelField()!=t?this.labelField():null)}else{i=this.calcMinDate("low")}if(!i){if(r){i=new Date(this._labelStart)}}return i},getMaxDateAt:function(e){var t,i,r=e===this.labelAxis();if(r){t=this.dateField();i=this.calcMaxDate(t,this.labelField()!=t?this.labelField():null)}else{i=this.calcMaxDate("high")}if(!i){if(r){i=new Date(this._labelStart+(this.itemCount()-1)*this._labelInterval)}}return i},getLabels:function(e){return this.extractLabels(this.labelField())}});var CartesianSeriesGroup=defineClass("CartesianSeriesGroup",ChartSeriesGroup,{init:function(e,t){this._super(e,t)}});var ClusterableSeries=defineClass("ClusterableSeries",CartesianSeries,{init:function(e,t){this._super(e,t)}});var XYSeries=defineClass("XYSeries",CartesianSeries,{init:function(e,t){this._super(e,t);this.setValueField("y")},xField:"x",yField:"y",labelField:function(){return this.xField()},isValueAxis:function(e){return e===this.yAxisObj()},getMinValueAt:function(e){var t=e.orientation()===ChartAxisOrientation.HORIZONTAL?this.xField():this.yField();return this.calcMinValue(t)},getMaxValueAt:function(e){var t=e.orientation()===ChartAxisOrientation.HORIZONTAL?this.xField():this.yField();return this.calcMaxValue(t)},defaultFieldList:function(){return XYSeries.FIELDS}},{X:"x",Y:"y"},function(e){e.FIELDS=[e.X,e.Y]});var ColumnSeries=defineClass("ColumnSeries",ClusterableSeries,{init:function(e,t){this._super(e,t)},itemWidth:.7,itemShape:null,createItem:function(e){var t=this._super(e);t.setProp("shape",this._itemShape);return t},_styleSheetRegion:function(){return"columnSeries"},isClusterable:function(){return true},clusteredAxis:function(){return this.xAxisObj()},getTooltipStatement:function(){var e=this._super();return"<b>${yaxis}</b><br>"+e}});var ColumnSeriesGroup=defineClass("ColumnSeriesGroup",CartesianSeriesGroup,{init:function(e,t){this._super(e,t)},itemWidth:1,isClusterable:function(){return true},clusteredAxis:function(){return this.xAxisObj()},containableWith:function(e){return e instanceof ColumnSeries},mixableWith:function(e){return true}});var ColumnRangeSeries=defineClass("ColumnRangeSeries",CartesianSeries,{init:function(e,t){this._super(e,t);this.tooltip().setText(ColumnRangeSeries.TIP_TEXT)},itemWidth:.7,itemShape:null,lowField:"low",highField:"high",setLowField:function(e){e=e||"low";this._lowField=e},setHighField:function(e){e=e||"high";this._highField=e},_styleSheetRegion:function(){return"columnRangeSeries"},isClusterable:function(){return true},clusteredAxis:function(){return this.xAxisObj()},textsPerItem:function(){return 2},getItemProp:function(e,t){switch(t){case"low":return e.getProp(this.lowField());case"high":return e.getProp(this.highField())}return this._super(e,t)},getMinValueAt:function(e){return this.calcMinValue(this.lowField())},getMaxValueAt:function(e){return this.calcMaxValue(this.highField())},defaultFieldList:function(){return ColumnRangeSeries.FIELDS}},{LOW:"low",HIGH:"high",TIP_TEXT:"${label}: ${low} - ${high}"},function(e){e.FIELDS=[ChartSeries.LABEL,e.LOW,e.HIGH]});var BarSeries=defineClass("BarSeries",ColumnSeries,{init:function(e,t){this._super(e,t)},_styleSheetRegion:function(){return"barSeries"},inverted:function(){return true}});var BarSeriesGroup=defineClass("BarSeriesGroup",CartesianSeriesGroup,{init:function(e,t){this._super(e,t)},itemWidth:1,inverted:function(){return true},isClusterable:function(){return true},clusteredAxis:function(){return this.xAxisObj()},containableWith:function(e){return e instanceof BarSeries},mixableWith:function(e){return true}});var BarRangeSeries=defineClass("BarRangeSeries",ColumnRangeSeries,{init:function(e,t){this._super(e,t)},_styleSheetRegion:function(){return"barRangeSeries"},inverted:function(){return true},isClusterable:function(){return true},textsPerItem:function(){return 2},getMinValueAt:function(e){return this.calcMinValue(this.lowField())},getMaxValueAt:function(e){return this.calcMaxValue(this.highField())}});var LineSeries=defineClass("LineSeries",CartesianSeries,{init:function(e,t){this._super(e,t);this._markerStyles=new ChartStyles(this,"seriesMarker").setParent(this._styles)},lineType:ChartLineType.STRAIGHT,markerStyles:null,setMarkerStyles:function(e){if(e!=this._markerStyles){this._markerStyles.extend(e)}return this},_styleSheetRegion:function(){return"lineSeries"},_getItemParentStyles:function(){return this._markerStyles},setStyles:function(e){this._super(e);if(e&&e.marker){this.setMarkerStyles(e.marker)}},getItemProp:function(e,t){var i,r,n=e.index();switch(t){case"value":case"number":return this._values[n];case"category":case"label":i=this.labelAxis();if(i){if(i instanceof DateTimeAxis){r=e.getProp(t);if(r&&!r.getTime)r=new Date(r);return r}else if(i.isContinuous()){if(e._data&&!e._data.hasOwnProperty(t)){return this.displayName()}return e.getProp(t)}else{if(e.categoryIndex()>=0){return i.getCategory(e.categoryIndex()).label}return i.getTick(n).label}}return n;default:return e.getProp(t)}return undefined}});var AreaSeries=defineClass("AreaSeries",LineSeries,{init:function(e,t){this._super(e,t);this._lowStyles=new ChartStyles(this,"areaLow").setParent(this._styles)},baseValue:undefined,lowStyles:null,setBaseValue:function(e){e=parseFloat(e);if(isNaN(e)){e=undefined}if(e!=this._baseValue){this._baseValue=e;this._changed()}},setLowStyles:function(e){if(e!=this._lowStyles){this._lowStyles.extend(e)}return this},_styleSheetRegion:function(){return"areaSeries"}});var AreaSeriesGroup=defineClass("AreaSeriesGroup",CartesianSeriesGroup,{init:function(e,t){this._super(e,t)},containableWith:function(e){return e instanceof AreaSeries},mixableWith:function(e){return true}});var AreaRangeSeries=defineClass("AreaRangeSeries",LineSeries,{init:function(e,t){this._super(e,t);this.tooltip().setText(AreaRangeSeries.TIP_TEXT)},lowField:null,highField:null,labelField_:function(){return this._labelField||AreaRangeSeries.LABEL},lowField_:function(){return this._lowField||AreaRangeSeries.LOW},highField_:function(){return this._highField||AreaRangeSeries.HIGH},_styleSheetRegion:function(){return"areaRangeSeries"},viewsPerItem:function(){return 2},textsPerItem:function(){return 2},_checkItemVisible:function(e){if(e){e.$_valid=!isNaN(parseFloat(e.getProp(this.lowField())))&&!isNaN(parseFloat(e.getProp(this.highField())))}},getItemProp:function(e,t){switch(t){case"low":return e.getProp(this.lowField());case"high":return e.getProp(this.highField())}return this._super(e,t)},getMinValueAt:function(e){return this.calcMinValue(this.lowField())},getMaxValueAt:function(e){return this.calcMaxValue(this.highField())},getLabels:function(e){return this.extractLabels(this.labelField())},defaultFieldList:function(){return AreaRangeSeries.FIELDS}},{LOW:"low",HIGH:"high",TIP_TEXT:"${label}: ${low} - ${high}"},function(e){e.FIELDS=[ChartSeries.LABEL,e.LOW,e.HIGH]});var CandlestickSeriesItem=defineClass("CandlestickSeriesItem",ChartSeriesItem,{init:function(e,t){this._super(e,t);this._runIncreasingStyles=new ChartStyles(this,"increasingRun",null,false).setParent(e._increasingStyles);this._runDecreasingStyles=new ChartStyles(this,"decreasingRun",null,false).setParent(e._decreasingStyles)},increasingStyles:null,decreasingStyles:null,increasingStyles_:function(){return this._increasingStyles||this._runIncreasingStyles},setIncreasingStyles:function(e){var t;if(e!=this._increasingStyles&&e!=(t=this._series._increasingStyles)){if(e){if(!this._increasingStyles){this._increasingStyles=new ChartStyles(this,"increasingItem",null).setParent(t,false)}this._increasingStyles.extend(e)}else{this._increasingStyles=null}}},decreasingStyles_:function(){return this._decreasingStyles||this._runDecreasingStyles},setDecreasingStyles:function(e){var t;if(e!=this._decreasingStyles&&e!=(t=this._series._decreasingStyles)){if(e){if(!this._decreasingStyles){this._decreasingStyles=new ChartStyles(this,"decreasingItem",null).setParent(t,false)}this._decreasingStyles.extend(e)}else{this._decreasingStyles=null}}},getRunStyles:function(){var e=this._series,t=this.getProp(e.openField()),i=this.getProp(e.closeField());if(t<i){return this._runIncreasingStyles}else if(t>i){return this._runDecreasingStyles}return this._super()},getItemStyles:function(){var e=this._series,t=this.getProp(e.openField()),i=this.getProp(e.closeField());if(t<i){return this._increasingStyles||this._runIncreasingStyles}else if(t>i){return this._decreasingStyles||this._runDecreasingStyles}return this._super()}});var CandlestickSeries=defineClass("CandlestickSeries",CartesianSeries,{init:function(e,t){this._super(e,t);this._increasingStyles=new ChartStyles(this,"increasing").setParent(this._styles);this._decreasingStyles=new ChartStyles(this,"decreasing").setParent(this._styles)},increasingStyles:null,decreasingStyles:null,itemWidth:.7,lowField:null,highField:null,openField:null,closeField:null,setIncreasingStyles:function(e){if(e!==this._increasingStyles){this._increasingStyles.extend(e)}return this},setDecreasingStyles:function(e){if(e!==this._decreasingStyles){this._decreasingStyles.extend(e)}return this},lowField_:function(){return this._lowField||CandlestickSeries.LOW},highField_:function(){return this._highField||CandlestickSeries.HIGH},openField_:function(){return this._openField||CandlestickSeries.OPEN},closeField_:function(){return this._closeField||CandlestickSeries.CLOSE},_styleSheetRegion:function(){return"candlestickSeries"},setStyleSheet:function(e,t){this._super(e,t);this._increasingStyles.setSysDefault(t["candlestickSeries.increasing"]());this._decreasingStyles.setSysDefault(t["candlestickSeries.decreasing"]())},setStyles:function(e){this._super(e);if(e){if(e.increasing){this.setIncreasingStyles(e.increasing)}if(e.decreasing){this.setDecreasingStyles(e.decreasing)}}return this},_parseItemData:function(e){if(e.length>=5){var t=this._super(e.slice(1));t.label=e[0];return t}else{return this._super(e)}},_doCreateItem:function(e){return new CandlestickSeriesItem(this,e)},isClusterable:function(){return true},clusteredAxis:function(){return this.xAxisObj()},getItemProp:function(e,t){switch(t){case"open":return e.getProp(this.openField());case"high":return e.getProp(this.highField());case"low":return e.getProp(this.lowField());case"close":return e.getProp(this.closeField())}return this._super(e,t)},getMinValueAt:function(e){return this.calcMinValue(this.lowField())},getMaxValueAt:function(e){return this.calcMaxValue(this.highField())},defaultFieldList:function(){return CandlestickSeries.FIELDS},textsPerItem:function(){return 2}},{LOW:"low",OPEN:"open",CLOSE:"close",HIGH:"high",TIP_TEXT:"${label}<br>Open: ${open}<br>High: ${high}<br>Low: ${low}<br>Close: ${close}"},function(e){e.FIELDS=[ChartSeries.LABEL,e.LOW,e.OPEN,e.CLOSE,e.HIGH]});var OhlcSeries=defineClass("OhlcSeries",CandlestickSeries,{init:function(e,t){this._super(e,t)},_styleSheetRegion:function(){return"ohlcSeries"}});var BoxplotSeries=defineClass("BoxplotSeries",CartesianSeries,{init:function(e,t){this._super(e,t);this._lowerStyles=new ChartStyles(this,"boxplotLower");this._lowerStyles.setParent(this._styles,false);this._upperStyles=new ChartStyles(this,"boxplotUpper");this._upperStyles.setParent(this._styles,false)},itemWidth:.7,lowerStyles:null,upperStyles:null,minField:null,maxField:null,lowerField:null,upperField:null,medianField:null,setLowerStyles:function(e){if(e!=this._lowerStyles){this._lowerStyles.extend(e)}return this},setUpperStyles:function(e){if(e!=this._upperStyles){this._upperStyles.extend(e)}return this},minField_:function(){return this._minField||BoxplotSeries.MIN},maxField_:function(){return this._maxField||BoxplotSeries.MAX},lowerField_:function(){return this._lowerField||BoxplotSeries.LOWER},upperField_:function(){return this._upperField||BoxplotSeries.UPPER},medianField_:function(){return this._medianField||BoxplotSeries.MEDIAN},_styleSheetRegion:function(){return"boxplotSeries"},isClusterable:function(){return true},clusteredAxis:function(){return this.xAxisObj()},textsPerItem:function(){return 3},getItemProp:function(e,t){switch(t){case"max":case"maximum":return e.getProp(this.maxField());case"min":case"minimum":return e.getProp(this.minField());case"upper":return e.getProp(this.upperField());case"lower":return e.getProp(this.lowerField());case"median":return e.getProp(this.medianField())}return this._super(e,t)},getMinValueAt:function(e){return this.calcMinValue(this.minField())},getMaxValueAt:function(e){return this.calcMaxValue(this.maxField())},defaultFieldList:function(){return BoxplotSeries.FIELDS}},{MIN:"min",MAX:"max",LOWER:"lower",UPPER:"upper",MEDIAN:"median",TIP_TEXT:"${label}<br>Maximum: ${max}<br>Upper: ${upper}<br>Median: ${median}<br>Lower: ${lower}<br>Minimum: ${min}<br>"},function(e){e.FIELDS=[ChartSeries.LABEL,e.MIN,e.LOWER,e.MEDIAN,e.UPPER,e.MAX]});var WaterfallSeriesItem=defineClass("WaterfallSeriesItem",ChartSeriesItem,{init:function(e,t){this._super(e,t)},isSum:function(){return this._data&&this._data.isSum},cumulative:function(){return this._data&&this._data.cumulative},startValue:function(){return this._startValue},endValue:function(){return this._endValue},lowValue:function(){return Math.min(this._startValue,this._endValue)},highValue:function(){return Math.max(this._startValue,this._endValue)},increased:function(){return this._endValue>=this._startValue},decreased:function(){return this._endValue<this._startValue},range:function(){var e=this.getScale(this._endValue);var t=this.getScale(this._startValue);var i=Math.max(e,t);if(i>0){return Number(Math.abs(this._endValue-this._startValue).toFixed(i))}else{return Math.abs(this._endValue-this._startValue)}},getScale:function(e){var t,i;if(!isNaN(e)){t=e+"";i=t.indexOf(".");if(i>-1){return t.substr(i+1,t.length).length}else{return 0}}else{return 0}}});var WaterfallSeries=defineClass("WaterfallSeries",CartesianSeries,{init:function(e,t){this._super(e,t);this._decreaseStyles=new ChartStyles(this,"decrease");this._decreaseStyles.setParent(this._styles,false);this._sumStyles=new ChartStyles(this,"sum");this._sumStyles.setParent(this._styles,false)},startValue:0,itemWidth:.7,decreaseStyles:null,sumStyles:null,sumField:"isSum",setDecreaseStyles:function(e){if(e!=this._decreaseStyles){this._decreaseStyles.extend(e)}return this},setSumStyles:function(e){if(e!=this._sumStyles){this._sumStyles.extend(e)}return this},_styleSheetRegion:function(){return"waterfallSeries"},getItemProp:function(e,t){switch(t){case"isSum":return e.getProp(this.sumField())}return this._super(e,t)},defaultFieldList:function(){return WaterfallSeries.FIELDS},isClusterable:function(){return true},clusteredAxis:function(){return this.xAxisObj()},_doCreateItem:function(e){return new WaterfallSeriesItem(this,e)},_doRefreshItems:function(e){this._super(e);var t,i,r=this.valueField(),n=this._startValue,s=n,a=n,o=this.itemCount();this._calcedMin=this._calcedMax=NaN;for(t=0;t<o;t++){i=this.getItem(t);if(i.isSum()){i._startValue=0;i._endValue=n}else{i._startValue=n;n=i._endValue=n+i.getProp(r);s=Math.min(n,s);a=Math.max(n,a)}}this._calcedMin=s;this._calcedMax=a},calcMinValue:function(e){return this._calcedMin},calcMaxValue:function(e){return this._calcedMax}},{SUM:"isSum"},function(e){e.FIELDS=[ChartSeries.LABEL,ChartSeries.VALUE,e.SUM]});var ScatterSeries=defineClass("ScatterSeries",XYSeries,{init:function(e,t){this._super(e,t)},followLegendStyle:false,_styleSheetRegion:function(){return"scatterSeries"},getItemProp:function(e,t){switch(t){case"x":return e.getProp(this.xField());case"y":return e.getProp(this.yField())}return this._super(e,t)},getTooltipStatement:function(){return ScatterSeries.TIP_TEXT}},{TIP_TEXT:"${x}, ${y}"});var ScatterDataSeries=defineClass("ScatterDataSeries",ScatterSeries,{init:function(e,t){this._super(e,t)},followLegendStyle:false,_styleSheetRegion:function(){return"scatterSeries"},dataField:"data",getItemProp:function(e,t){switch(t){case"x":return e.getProp(this.xField());case"y":return e.getProp(this.yField());case"data":return e.getProp(this.dataField())}return this._super(e,t)},getTooltipStatement:function(){return ScatterDataSeries.TIP_TEXT},defaultFieldList:function(){return ScatterDataSeries.FIELDS},isTooltipField:function(e){if(e=="yaxis")return 100;var t=-1,i;if(_isString(e)&&(t=e.indexOf("."))>-1){i=e.substring(0,t);if(i==this.dataField()){e=i}}return this.fieldList().indexOf(e)},getTooltipFieldValue:function(e,t,i){if(_isString(i)&&(s=i.indexOf("."))>-1){dField=i.substring(0,s);if(dField==this.dataField()){var r=i.split(".");var n=e._data&&e._data.data;if(_isObject(n)){for(var s=0,a=r.length;s<a;s++){var o=r[s];var l=n[o];if(!_isObject(l)&&l!=null){return l}}}}}return this.getItemProp(e,this.fieldList()[t])}},{TIP_TEXT:"${x}, ${y}",X:"x",Y:"y",DATA:"data"},function(e){e.FIELDS=[e.X,e.Y,e.DATA]});var ErrorBarSeries=defineClass("ErrorBarSeries",XYSeries,{init:function(e,t){this._super(e,t)},target:null,lowField:"low",highField:"high",itemWidth:.7,_styleSheetRegion:function(){return"errorBarSeries"},textsPerItem:function(){return 0},getItemProp:function(e,t){switch(t){case"low":return e.getProp(this.lowField());case"high":return e.getProp(this.highField())}return this._super(e,t)},_doRefreshItems:function(e){this._super(e)},getMinValueAt:function(e){return this.calcMinValue(this.lowField())},getMaxValueAt:function(e){return this.calcMaxValue(this.highField())},defaultFieldList:function(){return ErrorBarSeries.FIELDS}},{LOW:"low",HIGH:"high"},function(e){e.FIELDS=[ChartSeries.LABEL,e.LOW,e.HIGH]});var BubbleSeries=defineClass("BubbleSeries",XYSeries,{init:function(e,t){this._super(e,t)},volumeField:null,sizePolicy:BubbleSizePolicy.AREA,volumeField_:function(){return this._volumeField||"volume"},_styleSheetRegion:function(){return"bubbleSeries"},valueField:function(){return this.volumeField()},getItemProp:function(e,t){switch(t){case"vol":case"volume":return e.getProp(this.volumeField())}return this._super(e,t)},defaultFieldList:function(){return BubbleSeries.FIELDS}},{VOLUME:"volume",TIP_TEXT:"(${x}, ${y}), ${volume}"},function(e){e.FIELDS=[XYSeries.X,XYSeries.Y,e.VOLUME]});var HistogramSeries=defineClass("HistogramSeries",CartesianSeries,{init:function(e,t){this._super(e,t)},minValue:NaN,maxValue:NaN,binField:"value",binCount:10,binInterval:NaN,binRanges:null,_styleSheetRegion:function(){return"histogramSeries"},_doCreateItem:function(e){return new HistogramSeriesItem(this,e)},parseData:function(e,t){var i,r,n,s,a,o=this.binField(),l=[],h=[];for(i=0,r=t.rowCount();i<r;i++){s=undefined;n=t.getRow(i);if(_defined(n)){if(_isArray(n)){s=n[0]}else if(_isObject(n)){s=n[o]}else{s=n}s=parseFloat(s);if(!isNaN(s)){l.push(s)}}}h=this._buildBins(l);h.sort(function(e,t){return e._xFrom-t._xFrom});return h},parseItems:function(e){return[]},calcMinValue:function(e){var t,i,r=this._itemList;if(e=="label"){return r[0]._xFrom}else{i=r[0].frequency();for(t=1;t<r.length;t++){i=Math.min(i,r[t].frequency())}return i}},calcMaxValue:function(e){var t,i,r=this._itemList,n=r.length;if(e=="label"){return r[n-1]._xTo}else{max=r[0].frequency();for(t=1;t<n;t++){max=Math.max(max,r[t].frequency())}}return max},_buildBins:function(e){var t,i,r,n=this._binField||"value",s=[];r=_asArray(this._binRanges);if(r){this.$_buildRanges(e,r,s)}else if(!isNaN(this._binInterval)){this.$_buildInterval(e,this._binInterval,s)}else if(!isNaN(parseInt(this._binCount))){this.$_buildCount(e,parseInt(this._binCount),s)}return s},$_buildRanges:function(e,t,i){},$_buildInterval:function(e,t,i){var r,n,s,a,o,l,h={};for(r=e.length;--r;){n=e[r];s=_floor(n/t)*t;if(!h[s]){h[s]=[]}h[s].push(n)}for(s in h){a=Number(s);i.push(new HistogramSeriesItem(this,a,a+t,h[s]))}},$_buildCount:function(e,t,i){}});var HistogramSeriesItem=defineClass("HistogramSeriesItem",ChartSeriesItem,{init:function(e,t,i,r){this._super(e);this._xFrom=t;this._xTo=i;this._values=r;this._data=r.length},xFrom:function(){return this._xFrom},xTo:function(){return this._xTo},values:function(){return this._values},frequency:function(){return this._values.length}});var RadialSeries=defineClass("RadialSeries",ChartSeries,{init:function(e,t){this._super(e,t)},startAngle:0,totalAngle:360,radius:1,innerRadius:0,offsetX:0,offsetY:0,labelField:null,startAngleRad:function(){return isNaN(this._startAngle)?0:this._startAngle/_RADIAN},totalAngleRad:function(){return this._totalAngle/_RADIAN},setTotalAngle:function(e){this._totalAngle=isNaN(e)?360:Math.max(0,Math.min(360,e))},labelField_:function(){return this._labelField||"label"},isPolar:function(){return true},xAxisObj:function(){return this.group()?this.group().xAxisObj():this._xAxisObj},yAxisObj:function(){return this.group()?this.group().yAxisObj():this._yAxisObj},mixableWith:function(e){return e instanceof RadialSeries&&e.xAxisObj()==this.yAxisObj()},getItemProp:function(e,t){var i;if(t=="label"||t=="category"){if((i=this.xAxisObj()).getCategory){return i.getCategory(e.index())}else{return e.index()}}return this._super(e,t)},getMinValueAt:function(e){return this.calcMinValue(this.valueField())},getMaxValueAt:function(e){return this.calcMaxValue(this.valueField())},getLabels:function(e){return this.extractLabels(this.labelField())},getItemCaption:function(e){var t=this.xAxisObj();if(t&&t.getCategory){return t.getCategory(e.index())}else{return e.getProp(this._labelField)}},connectableXAxis:function(e){return e instanceof PolarAxis},connectableYAxis:function(e){return e instanceof CartesianAxis}});var PieSeriesItem=defineClass("PieSeriesItem",ChartSeriesItem,{init:function(e,t){this._super(e,t);this._runSeparatorStyles=new ChartStyles(this,"separatorRun",null,false).setParent(e._separatorStyles)},separatorStyles:null,sliced:false,separatorStyles_:function(){return this._separatorStyles||this._runSeparatorStyles},setSeparatorStyles:function(e){var t;if(e!=this._separatorStyles&&e!=(t=this._series._separatorStyles)){if(e){if(!this._separatorStyles){this._separatorStyles=new ChartStyles(this,"separator",null).setParent(t,false)}this._separatorStyles.extend(e)}else{this._separatorStyles=null}}},sliced_:function(){return this.getProp("sliced")},setSliced:function(e){if(this.getProp("sliced")!=e){this.setProp("sliced",e);this._changed()}},setVisible:function(e){this._super(e);if(this.getProp("visible")!=e){this.setProp("visible",e);this._changed()}},displayName:function(){return this._category.label}});var PieSeries=defineClass("PieSeries",RadialSeries,{init:function(e,t){this._super(e,t);this._separatorStyles=new ChartStyles(this,"pieSeparator").setParent(this._styles);this.label().setText("${label}, ${value}")},separatorStyles:null,tickLength:7,labelOffset:7,slicedOffset:20,slicedField:null,slicedAnimating:true,multiSliced:false,setSeparatorStyles:function(e){if(e!==this._separatorStyles){this._separatorStyles.extend(e)}return this},slicedField_:function(){return this._slicedField||"sliced"},_styleSheetRegion:function(){return"pieSeries"},_doCreateItem:function(e){return new PieSeriesItem(this,e)},_doItemClicked:function(e){if(!this._multiSliced){for(var t=this.displayCount();t--;){if(this.getVisibleItem(t)!==e){this.setItemProperty(this.getVisibleItem(t),"sliced",false)}}}this.setItemProperty(e,"sliced",!e.sliced())}});var RadarSeries=defineClass("RadarSeries",RadialSeries,{init:function(e,t){this._super(e,t);this._separatorStyles=new ChartStyles(this,"seprator").setParent(this._styles)},assign:function(e){this._super(e)},_styleSheetRegion:function(){return"radarSeries"},_doCreateItem:function(e){}});var PolarSeries=defineClass("PolarSeries",RadialSeries,{init:function(e,t){this._super(e,t)}});var PolarLineSeries=defineClass("PolarLineSeries",PolarSeries,{init:function(e,t){this._super(e,t);this._markerStyles=new ChartStyles(this,"seriesMarker").setParent(this._styles)},markerStyles:null,setMarkerStyles:function(e){if(e!=this._markerStyles){this._markerStyles.extend(e)}return this},_styleSheetRegion:function(){return"polarLineSeries"},_getItemParentStyles:function(){return this._markerStyles},setStyles:function(e){this._super(e);if(e&&e.marker){this.setMarkerStyles(e.marker)}}});var PolarAreaSeries=defineClass("PolarAreaSeries",PolarLineSeries,{init:function(e,t){this._super(e,t)},_styleSheetRegion:function(){return"polarAreaSeries"}});var PolarColumnSeries=defineClass("PolarColumnSeries",PolarSeries,{init:function(e,t){this._super(e,t)},itemOffset:0,itemWidth:.9,_styleSheetRegion:function(){return"polarColumnSeries"},isClusterable:function(){return true},clusteredAxis:function(){return this.xAxisObj()}});var PolarColumnSeriesGroup=defineClass("PolarColumnSeriesGroup",ChartSeriesGroup,{init:function(e,t){this._super(e,t)},itemWidth:1,isPolar:function(){return true},isClusterable:function(){return true},clusteredAxis:function(){return this.xAxisObj()},connectableXAxis:function(e){return e instanceof PolarAxis},connectableYAxis:function(e){return e instanceof CartesianAxis},containableWith:function(e){return e instanceof PolarColumnSeries},mixableWith:function(e){return true}});var PolarAreaSeriesGroup=defineClass("PolarAreaSeriesGroup",ChartSeriesGroup,{init:function(e,t){this._super(e,t)},containableWith:function(e){return e instanceof PolarAreaSeries},mixableWith:function(e){return true}});var TreemapSeriesItem=defineClass("TreemapSeriesItem",ChartSeriesItem,{init:function(e,t){this._super(e,t)}});var TreemapSeriesLevel=defineClass("TreemapSeriesLevel",null,{init:function(){this._super()},level:1,tilingAlgorithm:EnumProp(TreemapTiling,TreemapTiling.SQUAREFIED)});var TreemapSeriesNode=defineClass("TreemapSeriesNode",null,{init:function(e,t,i,r,n){this._super();this._parent=e;this._seriesItem=t;this._tilingAlgorithm=n;this._children=i?this.$_createChildren(i,r.width,r.height):[]},tilingAlgorithm:EnumProp(TreemapTiling,TreemapTiling.SLICE_AND_DICE),direction:EnumProp(TreemapDirection,TreemapDirection.VERTICAL),alternating:true,count:function(){return this._children.length},parent:function(){return this._parent},series:function(){this._parent.series()},seriesItem:function(){return this._seriesItem},level:function(){return this._parent.level()+1},vertical:function(){return this._direction===TreemapDirection.VERTICAL},bounds:function(){return this.$_rect},getChild:function(e){return this._children[e]},$_createChildren:function(e,t,i){var r=this.vertical();e=this.$_getSorted(e);nodes=this._tilingAlgorithm==TreemapTiling.SQUARIFIED?this.$_squarified(e,r,t,i):this.$_sliceAndDice(e,r,t,i);return nodes},$_getValues:function(e){var i=this.series().valueField(),t=0,r=e.map(function(e){var t=e.getProp(i);e.$_value=t;return t});return r},$_getSorted:function(e){this.$_getValues(e);return e.sort(function(e,t){return e.$_value<=t.$_value?e:t})},$_squarified:function(e,t,i,r){function n(e,t,i,r){return Math.max(r*r*i/(e*e),e*e/(r*r*t))}function s(e){var t=0;for(var i=e.length;i--;)t+=e[i].$_value;return t}function a(e){return Math.max.apply(Math,e.map(function(e){return e.$_value}))}function o(e){return Math.max.apply(Math,e.map(function(e){return e.$_value}))}var l,h,u,c,d,f,_,g,m,p,v,y,S,C,w,x,b,I,T,A,E,R,L=this._tilingAlgorithm,P=[];for(l=0,cnt=e.length,f=0;l<cnt;l++){h=e[l].$_value;if(!isNaN(h)){f+=h}}u=i*r/f;I=r<i;T=I?r:i;y=S=0;x=i;b=r;m=[];e.push({$_value:0,$_hash:$$_getNextHash()});while(e.length>0){d=e[0];h=d.$_value;cnt=m.length;if(cnt>0){f=s(m);_=a(m);g=o(m);if(h==0){p=v=0}else{p=n(f,Math.min(_,h),Math.max(g,h),T);v=n(f,_,g,T)}}if(cnt==0||p<v){m.push(d);e.shift()}else{C=y;w=S;A=f/T*u;for(l=0;l<m.length;l++){R=new TreemapSeriesNode(this,m[l],null,c,L);E=m[l].$_value/A*u;R.$_vert=I;if(I){R.$_rect=new Rectangle(C,w,A,E);w+=E}else{R.$_rect=new Rectangle(C,w,E,A);C+=E}R.$_last=e.length==1;P.push(R)}if(I){y+=A;x-=A}else{S+=A;b-=A}I=b<x;T=I?b:x;m=[]}}return P},$_sliceAndDice:function(e,t,i,r){var n,s,a,o,l,h,u,c=this._tilingAlgorithm,d=e.length,f=t,_=y*S,g=new Rectangle(0,0,y,S),m=0,p=0,v=0,y=i,S=r,C=[];for(n=0;n<d;n++){s=e[n].$_value;if(!isNaN(s))m+=s}while(e.length>1){a=e[0];o=new TreemapSeriesNode(this,a,null,g,c);s=a.$_value;l=s/m;o.$_vert=f;if(f){u=S;h=_int(y*l);o.$_rect=new Rectangle(p,v,h,u);p+=h;y-=h}else{h=y;u=_int(S*l);o.$_rect=new Rectangle(p,v,h,u);v+=u;S-=u}C.push(o);m-=s;f=!f;e.shift()}a=e[0];o=new TreemapSeriesNode(this,a,null,g,c);o.$_vert=f;if(f){o.$_rect=new Rectangle(p,v,i-p,S)}else{o.$_rect=new Rectangle(p,v,y,r-v)}o.$_last=true;C.push(o);return C}});var TreemapSeriesRootNode=defineClass("TreemapSeriesRootNode",TreemapSeriesNode,{init:function(e,t,i,r){this._series=e;this._super(null,null,t,i,r)},series:function(){return this._series},level:function(){return 0}});var TreemapSeries=defineClass("TreemapSeries",CartesianSeries,{init:function(e,t){this._super(e,t);this._rootNode=null;this._separatorStyles=new ChartStyles(this,"treemapSeparator").setParent(this._styles);this._levels=[]},tilingAlgorithm:EnumProp(TreemapTiling,TreemapTiling.SLICEANDDICE),direction:EnumProp(TreemapDirection,TreemapDirection.VERTICAL),separatorStyles:null,setSeparatorStyles:function(e){if(e!==this._separatorStyles){this._separatorStyles.extend(e)}return this},_styleSheetRegion:function(){return"treemapSeries"},isScrollable:function(){return false},_doCreateItem:function(e){return new TreemapSeriesItem(this,e)},_doRefreshItems:function(e){this._super(e)},_doItemClicked:function(e){},$_rootNode:function(){return this._rootNode},$_buildLayout:function(e){var t=this._itemList.slice();this._rootNode=new TreemapSeriesRootNode(this,t,e,this._tilingAlgorithm);return this._rootNode}});var HeatmapSeriesItem=defineClass("HeatmapSeriesItem",ChartSeriesItem,{init:function(e,t){this._super(e,t);this._separatorStyles=new ChartStyles(this,"heatmapItemSeparator").setParent(this._styles)}});var HeatmapSeries=defineClass("HeatmapSeries",CartesianSeries,{init:function(e,t){this._super(e,t);this._colorScale=new ChartColorScale},colorScale:null,columnField:null,rowField:null,separatorStyles:null,setColorScale:function(e){if(e!==this._colorScale){this._colorScale.assign(e)}},columnField_:function(){return this._columnField||"column"},rowField:function(){return this._rowField||"row"},setSeparatorStyles:function(e){if(e!==this._separatorStyles){this._separatorStyles.extend(e)}return this},getScaledFill:function(e){return this._colorScale.getFill(e)},_styleSheetRegion:function(){return"heatmapSeries"},isScrollable:function(){return false},displayCount:function(){return this.itemCount()},getCategoryField:function(e){return e===this._yAxisObj?this.rowField():this.columnField()},getItemProp:function(e,t){switch(t){case"col":case"column":return e.getProp(this.columnField());case"row":return e.getProp(this.rowField())}return this._super(e,t)},_doCreateItem:function(e){return new HeatmapSeriesItem(this,e)},_doItemClicked:function(e){},defaultFieldList:function(){return HeatmapSeries.FIELDS}},{COLUMN:"column",ROW:"row",VALUE:"value",TIP_TEXT:"(${column}, ${row}), ${value}"},function(e){e.FIELDS=[e.COLUMN,e.ROW,e.VALUE]});var $$_debug_layout=false;var ChartComponent=defineClass("ChartComponent",UIComponent,{init:function(e,t,i){this._super(e,t);this._createBackgroundElements(e);this._chartContainer=new LayerElement(e);this.addElement(this._chartContainer);this._chartView=this._createChartView(e,this,i);this._chartView.addListener(this);this._initEvents(i);this._chartContainer.addElement(this._chartView);this._prepareLayers(e);this.setDefaultTool(this._createDefaultTool());this.fireEvent("onLoad")},_initEvents:function(e){var t=e.events;if(t&&_isObject(t)){for(var i in t){this[i]=t[i]}}},chartView:function(){return this._chartView},addFeedback:function(e){this._feedbackView.addElement(e)},removeFeedback:function(e){this._feedbackView.removeElement(e)},_blockContextMenu:function(){return this._chartView.options().preventSystemMenu()},_beforeRender:function(e){this._chartView._beforeRender(e)},_afterRender:function(e){this._chartView._afterRender(e)},_doLayout:function(e){var t,i,r,n=this._chartView,s=e.clone();this._chartContainer.setRect(s);if(!this.$_dom){r=n.model();if(r){t=r.styles().border();if(t){i=t.width();i&&s.inflate(-i,-i)}}}n.setRect(s);this._feedbackView.setRect(s);s.x=s.y=0;n._doLayout(s)},_doDrawBorder:function(e,t){var i=this._chartView._model;if(i){var r,n,s,a,o=i._styles.border();if(o){r=o.width();if(r>0){n=t.x+_int(r/2);s=t.y+_int(r/2);if(!this._invalidated&&!o.opaque()){a=r>1?new SolidPen(4294967295,r):SolidPen.WHITE;e.drawBoundsI(null,a,n,s,t.width-r,t.height-r)}e.drawBoundsI(null,o,n,s,t.width-r,t.height-r)}}}},_doDrawBorderHtml:function(e){var t=this._chartView._model;if(t){var i=t._styles.border();if(i){this._container.style.border=i.css()}else{this._container.style.border="";this._container.style.borderStyle="none"}}},onImageLoaded:function(e){this._super(e);this._chartView._imageLoaded=true},_createBackgroundElements:function(e){},_createChartView:function(e,t,i){return new ChartView(e,t,i)},_prepareLayers:function(e){this._feedbackView=new LayerElement(e,"feedbackLayer");this.addElement(this._feedbackView)},_createDefaultTool:function(){return new ChartViewSelectionTool(this)},_resizeHandler:function(e){if(_isIE&&window.screen.availWidth==window.screen.width){var t=this._chartView._model._resizeDelay;if(t!=null&&!_isNumber(t)){t=Number(t)}setTimeout(function(){this.resetSize()}.bind(this),t)}else{this.resetSize()}}});var ChartOptions=defineClass("ChartOptions",null,{init:function(e){this._super()},stylesChanged:function(e){},preventSystemMenu:false,showTooltip:true,tooltipDelay:300,tooltipDuration:4e3,tooltipAllSeries:false,tooltipSeparator:"</br>",draggable:false,scatter:{draggable:false},seriesCursor:Cursor.POINTER});var ChartView=defineClass("ChartView",LayerElement,{init:function(e,t,i){this._super(e,"chartView");this._container=t;this._offsetX=0;this._offsetY=0;if(e){e=this.$_svg=new SvgSprite(this,t,true);this.$_svgElt=this.$_svg._svg}else{this._context=t._context;this._toolContext=new CanvasContext("toolContext");t.addContext(this._toolContext)}this._options=new ChartOptions(this);this._palettes=new PaletteManager(this);this._model=null;this._delegate=new ChartDelegate(this);this._plotAreaRenderer=ChartPlotAreaRenderer.Default;this._polarPlotRenderer=PolarPlotAreaRenderer.Default;this._legendRenderer=null;this._legendItemRenderer=null;this._loading=false;if(!_isValidAddr($$_licdom,_runloc)){this.addCredits(e)}this._createElements(e);this._animations=new ChartAnimationManager(this.$_animationCallback.bind(this));this._tipManager=new ToolTipManager(this);if(i){this.loadChart(i)}else{this.invalidateLayout()}},addCredits:function(e){var t=new Image;var i=this._container;t.src=$$_image64+_wm_;var r=new LayerElement(false,"lic_wvm");r._doDraw=function(e){e.aL(t,i._width-t.width+20,i._height-t.height+20,t.width-30,t.height-10)};r.setAlpha(.8);r._dom=e;this.addElement(this._wvm=r)},onPaletteChanged:function(e){this.refreshView()},onChartLegendItemActivated:function(e,t,i){this.invalidateLayout()},onChartSeriesVisibleChanged:function(e,t,i){this.invalidateLayout()},onChartRequestUpdate:function(e){!this._loading&&this.invalidateLayout()},onChartSeriesItemPropChanged:function(e,t,i){},debug:false,options:null,styleSheet:null,delegate:null,model:null,hovering:true,setDebug:function(e){if(e!=this._debug){this._debug=e;this.invalidateLayout()}},setOptions:function(e){if(e!==this._options){this._options.assign(e);this.invalidateLayout()}},setStyleSheet:function(e){if(e!==this._styleSheet){this._styleSheet=e;this._applyStyleSheet()}},setDelegate:function(e){if(e!=this._delegate){this._delegate=e;this.invalidateLayout()}},setModel:function(e){e=_cast(e,Chart);if(e!==this._model){this._animations.clearAll();this._tipManager.close();var t=this._model;if(t){t.removeListener(this)}t=this._model=e;if(t){t.addListener(this)}this._chartPaneView.setModel(e);this._activeTool&&this._activeTool.setModel(e);if(this._model){this._loading=true;this._model.setDelegate(this._delegate);this._model.setPalettes(this._palettes);this._model.$_collectSeries();this._applyStyleSheet()}e.invalidate();this.invalidateLayout(true)}},layout:function(){return this.delegate().getLayout(this._model)},animations:function(){return this._animations},animating:function(e){return this._animations.animating(e)},titlePaneView:function(){return this._chartPaneView._titlePaneView},headerPaneView:function(){return this._chartPaneView._headerPaneView},footerPaneView:function(){return this._chartPaneView._footerPaneView},leftPaneView:function(){return this._chartPaneView._leftPaneView},rightPaneView:function(){return this._chartPaneView._rightPaneView},leftLegendPaneView:function(){return this._chartPaneView._leftLegendPaneView},rightLegendPaneView:function(){return this._chartPaneView._rightLegendPaneView},topLegendPaneView:function(){return this._chartPaneView._topLegendPaneView},bottomLegendPaneView:function(){return this._chartPaneView._bottomLegendPaneView},bodyView:function(){return this._chartPaneView._bodyView},legendPaneView:function(){return this._chartPaneView._legendPaneView},plotAreaRenderer:function(){return this._plotAreaRenderer||ChartPlotAreaRenderer.Default},setPlotAreaRenderer:function(e){if(e!=this._plotAreaRenderer){this._plotAreaRenderer=e}},polarPlotRenderer:function(){return this._polarPlotRenderer||PolarPlotAreaRenderer.Default},setPolarPlotRenderer:function(e){if(e!=this._polarPlotRenderer){this._polarPlotRenderer=e}},legendRenderer:function(){return this._legendRenderer||ChartLegendRenderer.Default},setLegendRenderer:function(e){if(e!=this._legendRenderer){this._legendRenderer=e}},legendItemRenderer:function(){return this._legendItemRenderer||ChartLegendItemRenderer.Default},setLegendItemRenderer:function(e){if(e!=this._legendItemRenderer){this._legendItemRenderer=e}},seriesLegendRenderer:function(){return this._seriesLegendRenderer||SeriesLegendRenderer.Default},setLegendRenderer:function(e){if(e!=this._seriesLegendRenderer){this._seriesLegendRenderer=e}},seriesLegendItemRenderer:function(){return this._seriesLegendItemRenderer||SeriesLegendItemRenderer.Default},setSeriesLegendItemRenderer:function(e){if(e!=this._seriesLegendItemRenderer){this._seriesLegendItemRenderer=e}},isZoomable:function(){return this._model&&this._model.isZoomable()},addToolElement:function(e){if(e&&!this._toolLayer.contains(e)){this._toolLayer.addElement(e,this._toolContext);return true}return false},removeToolElement:function(e){if(this._toolLayer.contains(e)){this._toolLayer.removeElement(e);return true}return false},loadChart:function(e){var t=DefaultChartConfigurer.Default.loadChart(this,e);if(t&&e){t._CLType=e.type}this.setModel(t);return t},setDrillDown:function(e){if(e instanceof Chart&&e!==this._model){e.setPredecessor(this._model);this.setModel(e)}},gotoParent:function(){var e=this._model.predecessor();if(e){this._model.setPredecessor(null);this.setModel(e)}},loadPalettes:function(e,t){if(e){t&&this._palettes.clear(true);this._palettes.addPalettes(e)}return this},registerFillPalette:function(e,t){return this._palettes.addFill(e,t)},registerStrokePalette:function(e,t){return this._palettes.addStroke(e,t)},unregisterPalette:function(e){return this._palettes.remove(e)},refreshView:function(){this.invalidateLayout()},getSeriesView:function(e){var t=this.bodyView().plotAreaView();return t.getSeriesView(e)},getSeriesViews:function(){var e=this.bodyView().plotAreaView();return e.getSeriesViews()},container:function(){return this._container},_beforeRender:function(e){},_afterRender:function(e){},_doDraw:function(e){if(this._model){var t,i=this._model.styles(),r=i.fill(),n=null;if(r||n){t=new Rectangle(0,0,this.width(),this.height());i.deflateMargins(t);e.drawRoundRectIWith(r,n,t,i.borderRadiuses(),-1)}}},drawHtml:function(){var e=this.$_svgElt;e.setAttributeNS(null,"width",this.width()||0);e.setAttributeNS(null,"height",this.height()||0);this._super()},_doDrawHtml:function(){if(this._model){var e,t=this._model.styles(),i=t.fill(),r=null;if(i||r){e=new Rectangle(0,0,this.width(),this.height());t.deflateMargins(e);if(i){this._css.background=i.css()}if(r){this._css.border=r.css()}}}},_doLayout:function(e){var t,i,r,n,s,a=false,o=this._model;try{if(o){o.prepareLayout();r=this._animations;if(this._loading){r.add(o.plotArea());a=true}if(o.seriesLoading()){n=o.seriesAll();if(n&&n.length>0){for(t=n.length;t--;){i=n[t];r.add(i);r.add(i.itemAnisTarget(),i.itemAnimations());r.add(i,i.animations())}a=true}}if(a){r.run(null,ChartAnimationTrigger.LOAD);r.clearTrigger(ChartAnimationTrigger.LOAD)}}s=this.layout();if(s){s.layout(this._chartPaneView,e)}o.endLayout()}finally{this._loading=false}},resize:function(e,t){var i,r=false;if(this._container._container){i=this._container._container.getBoundingClientRect();if(isNaN(e)){e=i.width;if(e!=0){r=true}}if(isNaN(t)){t=i.height;if(t!=0){r=true}}}this.setWidth(e);this.setHeight(t);r&&this.invalidate(true)},_createElements:function(e){this.addElement(this._chartPaneView=this._mainPaneView=new ChartPaneElement(e,this));this.addElement(this._toolLayer=new LayerElement(e,"toolLayer"))},_modelChanged:function(){this.invalidateLayout()},_applyStyleSheet:function(){var e=this.model();if(e){var t=this._styleSheet||ChartStyleSheet.Default;e.setStyleSheet(t)}},$_animationCallback:function(e,t,i){switch(e){case ChartAnimationManager.INVALIDATE:this.invalidateLayout(true);break;case ChartAnimationManager.ACTIVE:_dlog("### Animation activated...");break;case ChartAnimationManager.DEACTIVE:_dlog("### Animation deactivated.");this.fireEvent(ChartView.RENDER);break;case ChartAnimationManager.STOP:_dlog("### Animation stopped: "+i.displayName());this.invalidateLayout(true);break}}},{RENDER:"onRender",SERIES_CLICKED:"onSeriesClicked",AXIS_LABEL_CLICKED:"onAxisLabelClicked"});var ChartPaneElement=defineClass("ChartPaneElement",LayerElement,{init:function(e,t){this._super(e,"chartPaneView");this._chartView=t;this._createElements(e)},model:null,setModel:function(e){var t=_cast(e,Chart);if(t!=this._model){this._model=t;this._titlePaneView.setModel(t&&t.titlePane());this._headerPaneView.setModel(t&&t.headerPane());this._footerPaneView.setModel(t&&t.footerPane());this._leftPaneView.setModel(t&&t.leftPane());this._rightPaneView.setModel(t&&t.rightPane());this._bodyView.setModel(t);this._legendPaneView.setModel(t&&t.legendPane());this._leftLegendPaneView.setModel(t&&t.leftLegendPane());this._rightLegendPaneView.setModel(t&&t.rightLegendPane());this._topLegendPaneView.setModel(t&&t.topLegendPane());this._bottomLegendPaneView.setModel(t&&t.bottomLegendPane())}},chartView:function(){return this._chartView},titlePaneView:function(){return this._titlePaneView},headerPaneView:function(){return this._headerPaneView},footerPaneView:function(){return this._footerPaneView},leftPaneView:function(){return this._leftPaneView},rightPaneView:function(){return this._rightPaneView},leftLegendPaneView:function(){return this._leftLegendPaneView},rightLegendPaneView:function(){return this._rightLegendPaneView},topLegendPaneView:function(){return this._topLegendPaneView},bottomLegendPaneView:function(){return this._bottomLegendPaneView},bodyView:function(){return this._bodyView},legendPaneView:function(){return this._legendPaneView},_createElements:function(e){this.addElement(this._titlePaneView=new ChartItemPaneElement(e,"titlePaneView"));this.addElement(this._headerPaneView=new ChartItemPaneElement(e,"headerPaneView"));this.addElement(this._footerPaneView=new ChartItemPaneElement(e,"footerPaneView"));this.addElement(this._leftPaneView=new ChartItemPaneElement(e,"leftPaneView"));this.addElement(this._rightPaneView=new ChartItemPaneElement(e,"rightPaneView"));this.addElement(this._leftLegendPaneView=new SeriesLegendPaneElement(e,"leftLegendPaneView",true));this.addElement(this._rightLegendPaneView=new SeriesLegendPaneElement(e,"rightLegendPaneView",true));this.addElement(this._topLegendPaneView=new SeriesLegendPaneElement(e,"topLegendPaneView"));this.addElement(this._bottomLegendPaneView=new SeriesLegendPaneElement(e,"bottomLegendPaneView"));this.addElement(this._bodyView=new ChartBodyElement(e,"bodyView"));this.addElement(this._legendPaneView=new ChartLegendPaneElement(e,"legendPaneView"))}});var AxisIndicatorStatementRuntime=defineClass("AxisIndicatorStatementRuntime",ExpressionRuntime,{init:function(){this._super()},setIndicator:function(e){this._indicator=e;return this},isIdentifier:function(e){e=e.toLowerCase();if(AxisIndicatorStatementRuntime.IDENTS.hasOwnProperty(e)){return AxisIndicatorStatementRuntime.IDENTS[e]}return this._super(e)},evaluateIdentifier:function(e){switch(e){case AxisIndicatorStatementRuntime.ID_VALUE:return this._indicator.getCalcedValue("value")}return this._super(e)}},{ID_VALUE:5},function(e){e.IDENTS={value:e.ID_VALUE};e.Default=new e});var ChartSeriesFilterRuntime=defineClass("ChartSeriesFilterRuntime",ExpressionRuntime,{init:function(){this._super()},prepare:function(e,t){this._dataSource=e;this._fieldCount=e?e.fieldCount():0;this._synchronizer=t},setRow:function(e){this._item=e;return this},scope:function(){return this._item},isIdentifier:function(e){e=e.toLowerCase();if(ChartSeriesFilterRuntime.IDENTS.hasOwnProperty(e)){return ChartSeriesFilterRuntime.IDENTS[e]}return this._super(e)},evaluateIdentifier:function(e){switch(e){case ChartSeriesFilterRuntime.ID_ROW:return this._item.index();case ChartSeriesFilterRuntime.ID_DATA_ROW:return this._item.dataIndex();case ChartSeriesFilterRuntime.ID_CHECKED:return this._grid.isChecked(this._item);case ChartSeriesFilterRuntime.ID_STATE:switch(this._item.dataState()){case DataRowState.CREATED:return"c";case DataRowState.UPDATED:return"u";case DataRowState.DELETED:return"d";case DataRowState.CREATE_AND_DELETED:return"x"}return UNDEFINED;case ChartSeriesFilterRuntime.ID_TAG:return this._item.dataTag()}return this._super(e)},evaluateIndexerI:function(e,t){if(this._item){if(e===ChartSeriesFilterRuntime.ID_VALUES){if(t<0||t>=this._fieldCount){_invalidFieldIndex(t)}return this._item.getValue(t)}else if(e===ChartSeriesFilterRuntime.ID_CURR){return this._synchroizer?this._synchroizer.getValue(t):undefined}return this._super(e,t)}else{return undefined}},evaluateIndexerS:function(e,t){if(e==ChartSeriesFilterRuntime.ID_VALUES){if(this._dataSource){var i=this._dataSource.getFieldIndex(t);if(i<0||i>=this._fieldCount){_invalidFieldIndex(t)}return this._item.getValue(i)}else{return undefined}}else if(e===ChartSeriesFilterRuntime.ID_CURR){return this._synchroizer?this._synchroizer.getValue(t):undefined}return this._super(e,t)}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_STATE:3,ID_TAG:4,ID_VALUES:5,ID_CURR:6},function(e){e.IDENTS={row:e.ID_ROW,datarow:e.ID_DATA_ROW,checked:e.ID_CHECKED,state:e.ID_STATE,tag:e.ID_TAG,values:e.ID_VALUES,curr:e.ID_CURR};e.Default=function(){return e.$_Default||(e.$_Default=new e)}});var ChartSeriesValueRuntime=defineClass("ChartSeriesValueRuntime",ExpressionRuntime,{init:function(){this._super()},setSeries:function(e){this._series=e;this._summary=e&&e._summary},isIdentifier:function(e){e=e.toLowerCase();if(ChartSeriesValueRuntime.IDENTS.hasOwnProperty(e)){return ChartSeriesValueRuntime.IDENTS[e]}return this._super(e)},evaluateIdentifier:function(e){if(this._summary){switch(e){case ChartSeriesValueRuntime.ID_MIN:return this._summary.min;case ChartSeriesValueRuntime.ID_MAX:return this._summary.max;case ChartSeriesValueRuntime.ID_AVG:return this._summary.avg;case ChartSeriesValueRuntime.ID_SUM:return this._summary.sum}}return NaN}},{ID_MIN:0,ID_MAX:1,ID_AVG:2,ID_SUM:3},function(e){e.IDENTS={min:e.ID_MIN,max:e.ID_MAX,avg:e.ID_AVG,sum:e.ID_SUM};e.Default=function(){return e.$_Default||(e.$_Default=new e)}});var ChartSeriesItemRuntime=defineClass("ChartSeriesItemRuntime",ExpressionRuntime,{init:function(){this._super();this._item=null;this._series=null},setItem:function(e,t){this._item=e;this._series=e._series;this._state=t.state()},scope:function(){return{item:this._item,series:this._series}},isIdentifier:function(e){e=e.toLowerCase();if(ChartSeriesItemRuntime.IDENTS.hasOwnProperty(e)){return ChartSeriesItemRuntime.IDENTS[e]}return this._super(e)},evaluateIdentifier:function(e){switch(e){case ChartSeriesItemRuntime.ID_INDEX:return this._item.index();case ChartSeriesItemRuntime.ID_COUNT:return this._series.displayCount();case ChartSeriesItemRuntime.ID_VALUE:return this._item.getProp(this._series.valueField());case ChartSeriesItemRuntime.ID_SUM:return this._series._summary&&this._series._summary.sum;case ChartSeriesItemRuntime.ID_MIN:return this._series._summary&&this._series._summary.min;case ChartSeriesItemRuntime.ID_MAX:return this._series._summary&&this._series._summary.max;case ChartSeriesItemRuntime.ID_AVG:return this._series._summary&&this._series._summary.avg;case ChartSeriesItemRuntime.ID_VAR:return this._series._summary&&this._series._summary.var;case ChartSeriesItemRuntime.ID_VARP:return this._series._summary&&this._series._summary.varp;case ChartSeriesItemRuntime.ID_HOVERED:return this._state=="hovered"}return this._super(e)}},{ID_INDEX:0,ID_COUNT:1,ID_VALUE:2,ID_SUM:3,ID_MIN:4,ID_MAX:5,ID_AVG:6,ID_VAR:7,ID_VARP:8,ID_HOVERED:9},function(e){e.IDENTS={index:e.ID_INDEX,count:e.ID_COUNT,value:e.ID_VALUE,sum:e.ID_SUM,min:e.ID_MIN,max:e.ID_MAX,avg:e.ID_AVG,var:e.ID_VAR,varp:e.ID_VARP,hovered:e.ID_HOVERED};e.Default=new e});var ChartSeriesLabelStatementRuntime=defineClass("ChartSeriesLabelStatementRuntime",ExpressionRuntime,{init:function(){this._super()},setItem:function(e){this._item=e;this._series=e.series();return this},isIdentifier:function(e){if(this._series.isItemField(e)){return e}else if(_isString(e)&&e.indexOf("item.")==0){return e}else if(ChartSeriesLabelStatementRuntime.IDENTS.hasOwnProperty(e)){return ChartSeriesLabelStatementRuntime.IDENTS[e]}return this._super(e)},evaluateIdentifier:function(e){if(_isString(e)){if(e.indexOf("item.")==0){return this._item.getProp(e.substr(5))}return this._series.getItemFieldValue(this._item,e)}switch(e){case ChartSeriesLabelStatementRuntime.ID_SERIES:return this._series.displayName()}return this._super(e)}},{ID_SERIES:0},function(e){e.IDENTS={series:e.ID_SERIES};e.Default=new e});var ChartDelegate=defineClass("ChartDelegate",null,{init:function(e){this._super();this._owner=e;this._seriesRenderers={};this._seriesItemRenderers={};this._axisRenderers={};this._axisIndicatorRenderers={};this._polarGridRenderer=null;this._gridRenderer=null;this._legendMarkerRenderers={};this._adornmentRenderers={};this._itemRenderers={};this._seriesLegendRenderer=(new SeriesLegendRenderer).setAnimations(this._owner.animations());this._seriesLegendItemRenderer=(new SeriesLegendItemRenderer).setAnimations(this._owner.animations());this._seriesLegendMarkerRenderer=(new SeriesLegendMarkerRenderer).setAnimations(this._owner.animations())},getLayout:function(e){return DefaultChartLayout.Default},getPlotAreaRenderer:function(e){return e?PolarPlotAreaRenderer.Default:ChartPlotAreaRenderer.Default},getSeriesRenderer:function(e){var t=e.constructor;var i=this._seriesRenderers[t.prototype.$name];if(!i){if(e instanceof BarSeries){i=new BarSeriesRenderer}else if(e instanceof BarRangeSeries){i=new BarRangeSeriesRenderer}else if(e instanceof ColumnSeries){i=new ColumnSeriesRenderer}else if(e instanceof ColumnRangeSeries){i=new ColumnRangeSeriesRenderer}else if(e instanceof PieSeries){i=new PieSeriesRenderer}else if(e instanceof ScatterSeries){i=new ScatterSeriesRenderer}else if(e instanceof BubbleSeries){i=new BubbleSeriesRenderer}else if(e instanceof OhlcSeries){i=new OhlcSeriesRenderer}else if(e instanceof CandlestickSeries){i=new CandlestickSeriesRenderer}else if(e instanceof BoxplotSeries){i=new BoxplotSeriesRenderer}else if(e instanceof WaterfallSeries){i=new WaterfallSeriesRenderer}else if(e instanceof AreaRangeSeries){i=new AreaRangeSeriesRenderer}else if(e instanceof AreaSeries){i=new AreaSeriesRenderer}else if(e instanceof LineSeries){i=new LineSeriesRenderer}else if(e instanceof ErrorBarSeries){i=new ErrorBarSeriesRenderer}else if(e instanceof HistogramSeries){i=new HistogramSeriesRenderer}else if(e instanceof PolarAreaSeries){i=new PolarAreaSeriesRenderer}else if(e instanceof PolarLineSeries){i=new PolarLineSeriesRenderer}else if(e instanceof PolarColumnSeries){i=new PolarColumnSeriesRenderer}else if(e instanceof TreemapSeries){i=new TreemapSeriesRenderer}else if(e instanceof HeatmapSeries){i=new HeatmapSeriesRenderer}if(i){this._seriesRenderers[t.prototype.$name]=i}}i.setAnimations(this._owner.animations());return i},getSeriesItemRenderer:function(e){var t=e.constructor;var i=this._seriesItemRenderers[t.prototype.$name];if(!i){if(e instanceof BarSeries){i=new BarSeriesItemRenderer}else if(e instanceof BarRangeSeries){i=new BarRangeSeriesItemRenderer}else if(e instanceof ColumnSeries){i=new ColumnSeriesItemRenderer}else if(e instanceof ColumnRangeSeries){i=new ColumnRangeSeriesItemRenderer}else if(e instanceof PieSeries){i=new PieSeriesItemRenderer}else if(e instanceof ScatterSeries){i=new ScatterSeriesItemRenderer}else if(e instanceof BubbleSeries){i=new BubbleSeriesItemRenderer}else if(e instanceof OhlcSeries){i=new OhlcSeriesItemRenderer}else if(e instanceof CandlestickSeries){i=new CandlestickSeriesItemRenderer}else if(e instanceof BoxplotSeries){i=new BoxplotSeriesItemRenderer}else if(e instanceof WaterfallSeries){i=new WaterfallSeriesItemRenderer}else if(e instanceof LineSeries){i=new LineSeriesItemRenderer}else if(e instanceof ErrorBarSeries){i=new ErrorBarSeriesItemRenderer}else if(e instanceof HistogramSeries){i=new HistogramSeriesItemRenderer}else if(e instanceof PolarLineSeries){i=new PolarLineSeriesItemRenderer}else if(e instanceof PolarColumnSeries){i=new PolarColumnSeriesItemRenderer}else if(e instanceof TreemapSeries){i=new TreemapSeriesItemRenderer}else if(e instanceof HeatmapSeries){i=new HeatmapSeriesItemRenderer}if(i){this._seriesItemRenderers[t.prototype.$name]=i}}i.setAnimations(this._owner.animations());return i},getAxisRenderer:function(e){var t=e.constructor,i=this._axisRenderers[t.prototype.$name];if(!i){if(e instanceof LinearAxis){i=new LinearAxisRenderer}else if(e instanceof PolarAxis){i=new PolarAxisRenderer}else if(e instanceof DateTimeAxis){i=new DateTimeAxisRenderer}else{i=new CategorizedAxisRenderer}if(i){this._axisRenderers[t.prototype.$name]=i}}i.setAnimations(this._owner.animations());return i},getAxisIndicatorRenderer:function(e){var t=e.constructor,i=this._axisIndicatorRenderers[t.prototype.$name];if(!i){if(e instanceof ChartAxisLineIndicator){i=new AxisIndicatorLineRenderer}else if(e instanceof ChartAxisBandIndicator){i=new AxisIndicatorBandRenderer}if(i){this._axisIndicatorRenderers[t.prototype.$name]=i}}i.setAnimations(this._owner.animations());return i},getGridRenderer:function(e){var t;if(e.isPolar()){t=this._polarGridRenderer||(this._polarGridRenderer=new PolarGridRenderer)}else{t=this._gridRenderer||(this._gridRenderer=new ChartGridRenderer)}t.setAnimations(this._owner.animations());return t},getLegendMarkerRenderer:function(e){var t=e.constructor,i=this._legendMarkerRenderers[t.prototype.$name];if(!i){if(e instanceof AreaSeries||e instanceof PolarAreaSeries){i=new AreaSeriesLegendMarkerRenderer}else if(e instanceof LineSeries||e instanceof PolarLineSeries){i=new LineSeriesLegendMarkerRenderer}else if(e instanceof BubbleSeries){i=new BubbleSeriesLegendMarkerRenderer}else if(e instanceof BoxplotSeries){i=new BoxplotSeriesLegendMarkerRenderer}else if(e instanceof OhlcSeries){i=new OhlcSeriesLegendMarkerRenderer}else if(e instanceof CandlestickSeries){i=new CandlestickSeriesLegendMarkerRenderer}else if(e instanceof HeatmapSeries){i=new HeatmapSeriesLegendMarkerRenderer}else if(e instanceof TreemapSeries){i=new TreemapSeriesLegendMarkerRenderer}if(i){this._legendMarkerRenderers[t.prototype.$name]=i}}i=i||ChartLegendMarkerRenderer.Default;i.setAnimations(this._owner.animations());return i},getSeriesLegendRenderer:function(e){return this._seriesLegendRenderer},getSeriesLegendItemRenderer:function(e){return this._seriesLegendItemRenderer},getSeriesLegendMarkerRenderer:function(e){return this._seriesLegendMarkerRenderer},getItem:function(e,t){var i,r=t.type;switch(r){case"chartlet":i=ChartletItem.createItem(e,t);break;default:i=new ChartTextItem(e);break}return i},getItemView:function(e,t){if(t instanceof ChartTextItem){return new ChartTextItemElement(e)}else if(t instanceof ChartletItem){return new SimpleChartView(e)}else if(t instanceof ChartLegend){return new ChartLegendElement(e)}return new ChartItemElement}});var ChartViewLayout=defineClass("ChartViewLayout",null,{init:function(){this._super();this._bounds=new Rectangle;this.polarAxisPane=function(){return this.plotAreaView().polarAxisPane()}},layout:function(e,t){var i,r,n;this._chartPaneView=e;i=e.model();r=this._bounds.width!=t.width||this._bounds.height!=t.height;this._bounds=t.clone();n=t.clone();if(i&&(n.height>0&&n.width>0)){this._doUpdateModels(i,r);i.styles().deflatePaddings(n);this._doMeasureItems(i,n);this._doLayoutItems(i,n)}},_doUpdateModels:function(e){},_doMeasureItems:function(e,t){},_doLayoutItems:function(e,t){}},{},function(e){var t,i,r=e.prototype,n=["titlePaneView","headerPaneView","footerPaneView","leftPaneView","rightPaneView","leftLegendPaneView","rightLegendPaneView","topLegendPaneView","bottomLegendPaneView","bodyView","legendPaneView"];for(t=n.length;t--;){i=n[t];r[i]=function(t){return function(){var e=this._chartPaneView;return e?e[t].call(e):null}}(i)}});var DefaultChartLayout=defineClass("DefaultChartLayout",ChartViewLayout,{init:function(){this._super();this._titleRect=new Rectangle;this._paneRects=new SideRectangles;this._legendRects=new SideRectangles;this._legendRect=new Rectangle;this._bodyRect=new Rectangle;this._subAxes=null;this._floatings=null},_doUpdateModels:function(e,t){this._super(e);var i,r,n,s,a,o;i=e.xAxes();o=i?i.length:0;for(a=0;a<o;a++){i[a]._doPrepareLayout()}i=e.yAxes();o=i?i.length:0;for(a=0;a<o;a++){i[a]._doPrepareLayout()}e.plotArea().update(e);r=e.legend();if(r){if(!r.source()){r.setSource(e)}r.update(e)}s=e.getSeriesLegends();o=s?s.length:0;for(a=0;a<o;a++){s[a].update(e,true)}},_doMeasureItems:function(e,t){_trace("DefaultChartLayout measure...");var i,r,n,s,a,o,l,h,u,c,d,f=t;t=t.round();this._floatings=new Dictionary;i=this.headerPaneView();a=this._paneRects.top;i.setVisible(i.model().visible());if(i.visible()){r=i.measure(t.width,t.height);a.set(t.x,t.y,t.width,r.height);t.topBy(r.height)}else{a.setEmpty()}i=this.titlePaneView();a=this._titleRect;i.setVisible(i.model().visible());if(i.visible()){r=i.measure(t.width,t.height);a.set(t.x,t.y,t.width,r.height);t.topBy(r.height)}else{a.setEmpty()}i=this.footerPaneView();a=this._paneRects.bottom;i.setVisible(i.model().visible());if(i.visible()){r=i.measure(t.width,t.height);a.set(t.x,t.bottom()-r.height,t.width,r.height);t.bottomBy(-r.height)}else{a.setEmpty()}i=this.leftPaneView();a=this._paneRects.left;i.setVisible(i.model().visible());if(i.visible()){r=i.measure(t.width,t.height);a.set(t.x,t.y,r.width,t.height);t.leftBy(r.width)}else{a.setEmpty()}i=this.rightPaneView();a=this._paneRects.right;i.setVisible(i.model().visible());if(i.visible()){r=i.measure(t.width,t.height);a.set(t.right()-r.width,t.y,r.width,t.height);t.rightBy(-r.width)}else{a.setEmpty()}this._legendRects.clear();l=e.getSeriesLegends(ChartItemPosition.LEFT);i=this.leftLegendPaneView();i.model().setLegends(l);i.setVisible(l&&i.model().checkVisible());a=this._legendRects.left;if(l){size=i.measureI(t.width,t.height);a.set(t.x,t.y,size.width,t.height);t.leftBy(size.width)}else{a.setEmpty()}l=e.getSeriesLegends(ChartItemPosition.RIGHT);i=this.rightLegendPaneView();i.model().setLegends(l);i.setVisible(l&&i.model().checkVisible());a=this._legendRects.right;if(l){size=i.measureI(t.width,t.height);a.set(t.right()-size.width,t.y,size.width,t.height);t.rightBy(-size.width)}else{a.setEmpty()}l=e.getSeriesLegends(ChartItemPosition.TOP);i=this.topLegendPaneView();i.model().setLegends(l);i.setVisible(l&&i.model().checkVisible());a=this._legendRects.top;if(l){size=i.measureI(t.width,t.height);a.set(t.x,t.y,t.width,size.height);t.topBy(size.height)}else{a.setEmpty()}l=e.getSeriesLegends(ChartItemPosition.BOTTOM);i=this.bottomLegendPaneView();i.model().setLegends(l);i.setVisible(l&&i.model().checkVisible());a=this._legendRects.bottom;if(i.visible()){size=i.measureI(t.width,t.height);a.set(t.x,t.bottom()-size.height,t.width,size.height);t.bottomBy(-size.height)}else{a.setEmpty()}i=this.legendPaneView();a=this._legendRect;i.setVisible(i.model().checkVisible());if(i.visible()){u=i.model().legend();r=i.measureI(t.width,t.height);switch(u.position()){case ChartItemPosition.BOTTOM:a.set(t.x,t.bottom()-r.height,t.width,r.height);t.bottomBy(-r.height);break;case ChartItemPosition.TOP:a.set(t.x,t.y,t.width,r.height);t.topBy(r.height);break;case ChartItemPosition.RIGHT:a.set(t.right()-r.width,t.y,r.width,t.height);t.rightBy(-r.width);break;case ChartItemPosition.LEFT:a.set(t.x,t.y,r.width,t.height);t.leftBy(r.width);break;default:a.copy(f);break}}else{a.setEmpty()}i=this.bodyView();this._bodyRect.copy(t)},_doLayoutItems:function(e,t){_trace("DefaultChartLayout layout...");var i,r,n,s=this._chartPaneView;i=this.bodyView();i.setRectI(this._bodyRect);i.layout();n=s._bodyView._plotAreaView.boundsBy(s);i=this.titlePaneView();if(i.visible()){i._layoutNeeded=true;i.setRectI(this._titleRect);i.layout()}i=this.headerPaneView();if(i.visible()){i.setRect(this._paneRects.top);i.layout()}i=this.footerPaneView();if(i.visible()){i.setRect(this._paneRects.bottom);i.layout()}i=this.legendPaneView();if(i.visible()){if(e.legend()&&e.legend()._layoutNeeded===false){i._layoutNeeded=false}else{i._layoutNeeded=true}i.setRectI(this._legendRect);i.layout()}i=this.leftPaneView();if(i.visible()){i.setRect(this._paneRects.left);i.layout()}i=this.rightPaneView();if(i.visible()){i.setRect(this._paneRects.right);i.layout()}i=this.leftLegendPaneView();if(i.visible()){i.setRect(this._legendRects.left);i.layout()}i=this.rightLegendPaneView();if(i.visible()){i.setRect(this._legendRects.right);i.layout()}i=this.topLegendPaneView();if(i.visible()){i.setRect(this._legendRects.top);i.layout()}i=this.bottomLegendPaneView();if(i.visible()){i.setRect(this._legendRects.bottom);i.layout()}}},null,function(e){e.Default=new e});var ChartElement=defineClass("ChartElement",UIElement,{init:function(e,t){this._super(e,t);this._drawRect=new Rectangle;this._measuredWidth=NaN;this._measuredHeight=NaN},model:null,renderer:null,chartView:function(){if(!this._chartView){var e=this.parent();while(e){if(e instanceof ChartView){this._chartView=e;break}e=e.parent()}}return this._chartView},chartModel:function(){return this.chartView().model()},renderer_:function(){return this._renderer||this.defaultRenderer()},defaultRenderer:function(){return null},designTime:function(){return false},tootltip:function(){return null},cursor:function(){return this._model&&this._model.cursor&&this._model.cursor()},measuredWidth:function(){return this._measuredWidth},measuredHeight:function(){return this._measuredHeight},measure:function(e,t){var i=this._doMeasure(e,t);this._measuredWidth=i.width;this._measuredHeight=i.height;return i},measureI:function(e,t){var i=this.measure(e,t);i.width=_floor(i.width);i.height=_floor(i.height);this._measuredWidth=i.width;this._measuredHeight=i.height;return i},layout:function(){this._doLayout.apply(this,arguments)},setStyles:function(e){this._styles=e;return this},updateStyles:function(e){this._styles=e;return this._styles},clip:function(e){this.getClientRect(this._drawRect);this._clipped()&&this._doClip(e)},_doClip:function(e){e.clipRect(this._clipBounds||this._drawRect)},draw:function(e,t){if(this._canDraw()){this._super(e,t)}else{this._dirty=false}},_doDraw:function(e){var t,i=this._styles;r=this._drawRect.clone();if(!r.isEmpty()){i&&i.deflateMargins(r);this._doDrawBackground(e,r);if(t=this.renderer()){t.render(this,e,r)}else{this._doRender(e,r)}i&&i.inflateMargins(r);this._doDrawBorders(e,this._drawRect)}},_doDrawHtml:function(){debugger;this._doDraw(this.$_getGraphics(true,this._drawRect))},$_getGraphics:function(e,t,i){var r=this._svg;if(!r){r=this._svg=new SvgSprite(null,this.container());if(i){this._dom.insertBefore(r._svg,i)}else{this._dom.appendChild(r._svg)}}r._svg.style.visibility="visible";return r.getGraphics(e,t)},_clipped:function(){return false},_canDraw:function(){return true},_doMeasure:function(e,t){var i=this.model(),r=this.renderer();if(i&&r){this.updateStyles(i.styles());return r.measure(this,e,t)}return{width:0,height:0}},_doLayout:function(){},_doRender:function(e,t){},_doDrawBackground:function(e,t){},_doDrawBorders:function(e,t){},_drawDebugBorder:function(e,t){if(this.chartView().debug()){e.drawBoundsI(null,ChartElement.DEBUG_BORDER,t.x,t.y,t.width,t.height)}},$_drawText:function(e,t,i,r,n,s,a,o,l){switch(a){case TextWrap.EXPLICIT:e.drawTextRectExplicitSh(t,i,r,n,s,o,l);break;case TextWrap.NORMAL:e.drawTextRectWrapSh(t,i,r,n,s,o,l);break;default:e.drawTextRectSh(t,i,r,n,s,o,l);break}}},{DEBUG_BORDER:new SolidPen(2164195328),DESIGN_BORDER:new SolidPen(268435456),DESIGN_BORDER_DARK:new SolidPen(536870912),DESIGN_BORDER_GROUP:new SolidPen(805324031),EMPTY_BACKGROUND:new SolidBrush(4294506744),EMPTY_BORDER:new SolidPen("#20000000",1,"dashed"),EMPTY_COLOR:new SolidBrush(4289769648)});var ChartBorderView=defineClass("ChartBorderView",LayerElement,{init:function(e,t){this._super(e,t)},styles:null,_doDraw:function(e){var t=this.clientRect(),i=this._styles,r=i.border(),n=i.borderRadius();if(r){e.drawRoundRectI(null,r,t,n,n,n,n)}}});var ChartPositionableElement=defineClass("ChartPositionableElement",ChartElement,{init:function(e,t){this._super(e,t)},calcLayoutWidth:function(e){var t,i,r=this.model();t=r.width();if(t){i=t.getSize(e)}else{i=this._measuredWidth}if(t=r.maxWidth()){if(isNaN(i)){i=t.getSize(e)}else{i=Math.min(i,t.getSize(e))}}if(t=r.minWidth()){if(isNaN(i)){i=t.getSize(e)}else{i=Math.max(i,t.getSize(e))}}return i},calcLayoutHeight:function(e){var t,i,r=this.model();t=r.height();if(t){i=t.getSize(e)}else{i=this._measuredHeight}if(t=r.maxHeight()){if(isNaN(i)){i=t.getSize(e)}else{i=Math.min(i,t.getSize(e))}}if(t=r.minHeight()){if(isNaN(i)){i=t.getSize(e)}else{i=Math.max(i,t.getSize(e))}}return i},measure:function(e,t){var i,r=this._styles=this._model.styles();i=this._super(e,t);i.width=this.calcLayoutWidth(e);i.height=this.calcLayoutHeight(t);i.height+=r.marginVert();i.width+=r.marginHorz();this._measuredWidth=i.width;this._measuredHeight=i.height;return i},_doDrawBorders:function(e,t){this._drawDebugBorder(e,t)}});var ChartTextElement=defineClass("ChartTextElement",ChartElement,{init:function(e,t){this._super(e,t||"textView");this._angle=NaN;this.setMouseEnabled(false)},text:null,$_getImage:function(e){var t=e.backgroundImage();if(t){t=this.container().getImage(t);if(t&&t.width){return t}}},_canDraw:function(){var e=this._parent;while(e instanceof ChartElement){if(!e._canDraw())return false;e=e._parent}return true},_doMeasure:function(e,t){var i,r,n,s,a,o,l=this._styles,h=this._angle=l.textRotation()/_RADIAN;i=this.container().measureTextRect(l.font(),this._text,0,9,e,t,l.textAlignment(),l.lineAlignment(),l.textWrap());o=this.$_getImage(l);if(o){i.width=Math.max(i.width,o.width);i.height=Math.max(i.height,o.height)}this._contentWidth=r=i.width+=l.spaceHorz();this._contentHeight=n=i.height+=l.spaceVert();if(h!=0){i.width=_abs(r*_cos(h))+_abs(n*_sin(h));i.height=_abs(r*_sin(h))+_abs(n*_cos(h))}return i},_doDraw:function(e){var t,i,r,n,a,o,l,h,u,c,d=this._styles,f=this._angle,_=this._drawRect,g=new Rectangle(_.x,_.y,this._contentWidth,this._contentHeight);s=this._text;if(!isNaN(f)&&f!=0){e.translate(_.width/2,_.height/2);e.rotate(f);g.x-=g.width/2;g.y-=g.height/2}else{g=_}if(!d)debugger;t=this.$_getImage(d);if(t){e.drawImage(t,g.x+(g.width-t.width)/2,g.y,t.width,t.height)}if(s){l=d.color();if(l){o=d.font();c=d.textShadow();i=d.textAlignment();r=d.lineAlignment();n=d.textWrap();h=d.fill();u=d.border();d.deflateMargins(g);if(h||u){e.drawRectI(h,u,g)}d.deflatePaddings(g);switch(n){case TextWrap.EXPLICIT:e.drawTextRectExplicitSh(o,l,c,s,g,i,r);break;case TextWrap.NORMAL:e.drawTextRectWrapSh(o,l,c,s,g,i,r);break;default:e.drawTextRectSh(o,l,c,s,g,i,r);break}}}},_doDrawSvg:function(e){var t,i,r,n,s,a,o,l,h,u,c=this._styles,d=this._angle,f=this._drawRect,_=this._text,g=f;t=this.$_getImage(c);if(t){e.drawImage(t,g.x+(g.width-t.width)/2,g.y,t.width,t.height)}if(_){o=c.color();if(o){a=c.font();u=c.textShadow();i=c.textAlignment();r=c.lineAlignment();n=c.textWrap();l=c.fill();h=c.border();c.deflateMargins(g);if(l||h){e.drawRectI(l,h,g)}c.deflatePaddings(g);e.drawTextRectExplicitASh(a,o,u,_,g,d,i,r)}}}});var ChartStylesTextView=defineClass("ChartStylesTextView",ChartElement,{init:function(e,t){this._super(e,t||"textView");this._source=null;this._text=null;this._runtime=null;this._lineGap=4},setText:function(e){if(e!=this._source){this._source=e;this._text=e?new ChartStylesText(e):null}return this},setRuntime:function(e){if(e!=this._runtime){this._runtime=e}return this},setStyles:function(e){if(e!=this._styles){this._styles=e}return this},_doMeasure:function(e,t){var i;if(this._text){this._text.evaluate(this._runtime);i=this.measureTexts()}else{i={width:0,height:0}}return i},_doDraw:function(e){var t=this._text;if(t==null)return;var i,r,n,s,a,o,l,h,u,c,d,f,_=this._styles,g=_.textRotation()/PI;n=0;if(_.textAlignment()==TextAlign.CENTER){n+=(this.width()-this._measuredWidth)/2}else if(_.textAlignment()==TextAlign.RIGHT){n+=this.width()-this._measuredWidth}s=0;if(_.lineAlignment()==TextLayout.MIDDLE){s+=(this.height()-this._measuredHeight)/2}else if(_.lineAlignment()==TextLayout.BOTTOM){s+=this.height()-this._measuredHeight}for(i=0,r=t.count();i<r;i++){a=t.getLine(i);l=a.count();for(o=0;o<l;o++){h=a.get(o);d=h.text;_=h.styles()||this._styles;u=_.color();c=_.font();f=new Rectangle(h.x+n,a.y+s,h.w,a.h);e.drawTextRectA(c,u,d,f,g)}}},measureTexts:function(){var e,t,i,r,n,s,a,o,l,h,u=this._text,c=0,d=0,f=0,_=this.container();for(e=0,t=u.count();e<t;e++){r=u.getLine(e);n=0;s=0;a=0;o=r.count();h=0;for(a=0;a<o;a++){l=r.get(a);i=l.styles()||this._styles;s=Math.max(s,l.h=i.fontSize());n+=l.w=_.measureText(i.font(),l.text);l.x=h;l.y=f;h+=l.w}r.h=s;r.w=n;r.y=f;if(e<t-1){s+=this._lineGap}c=Math.max(c,n);d+=s;f+=s}return{width:c,height:d}}});var AxisPaneBase=defineClass("AxisPaneBase",ChartElement,{init:function(e,t){this._super(e,t);this._axisViews=[];this._axisCount=0;this._axisVisible=false},setAxes:function(e){var t,i,r,n;this.clear();this._axisCount=0;i=e?e.length:0;if(i>0){for(t=0;t<i;t++){r=e[t];if(r&&r.visible()){if(this._axisViews.length<=this._axisCount){n=new ChartAxisView(this._dom);this._axisViews.push(n)}n=this._axisViews[t];n.setModel(e[t]);this.addElement(n);this._axisCount++}}}},axisViewCount:function(){return this._axisCount},getAxisView:function(e){if(e<0||e>=this._axisCount){throw"Invalid axis index: "+e}return this._axisViews[e]},findAxisView:function(e){var t,i;for(t=0,i=this._axisCount;t<i;t++){if(this._axisViews[t].model()===e){return this._axisViews[t]}}return null},isLayer:function(){return true},_doDrawBorders:function(e,t){this._drawDebugBorder(e,t)}});var ChartAxisPane=defineClass("ChartAxisPane",AxisPaneBase,{init:function(e,t,i){this._super(e,t);this._orientation=i?i:AxisOrientation.HORIZONTAL;this._axisSizes=[]},orientation:function(){return this._orientation},isVertical:function(){return this.orientation()==ChartAxisOrientation.VERTICAL},_doMeasure:function(e,t){var i,r,n,s,a,o,l,h,u={width:e,height:t},c=this.isVertical();if(c){u.width=0}else{u.height=0}this._axisSizes=[];r=this.axisViewCount();for(i=0;i<r;i++){n=this.getAxisView(i);s=n.model();a=this.chartView().delegate().getAxisRenderer(s);n.setRenderer(a);o=n.measure(e,t);if(c){l=o.width;this._axisSizes.push(l);u.width+=l}else{h=o.height;this._axisSizes.push(h);u.height+=h}}return u},_doLayout:function(){var e,t,i,r,n,s,a=this.axisViewCount();if(this.isVertical()){t=this.height();i=0;for(n=0;n<a;n++){s=this.getAxisView(n);s.setBounds(i,0,this._axisSizes[n],t);if(s.model().setSize)s.model().setSize(t);i+=this._axisSizes[n]}}else{e=this.width();r=0;for(n=0;n<a;n++){s=this.getAxisView(n);s.setBounds(0,r,e,this._axisSizes[n]);r+=this._axisSizes[n]}}for(n=0;n<a;n++){s=this.getAxisView(n);s.layout()}},_doDraw:function(e){}});var PolarAxisPane=defineClass("PolarAxisPane",AxisPaneBase,{init:function(e,t,i){this._super(e,"polarAxisPane")},_doMeasure:function(e,t){var i,r=this.axisViewCount();for(i=0;i<r;i++){view=this.getAxisView(i);model=view.model();renderer=this.chartView().delegate().getAxisRenderer(model);view.setRenderer(renderer);view.measure(e,t)}return{width:e,height:t}},_doLayout:function(){var e,t,i,r,n,s,a=this.chartView(),o=this.width(),l=this.height(),h=a.model().plotArea().polarSize(),u=this.axisViewCount();for(s=0;s<u;s++){e=this.getAxisView(s);if(e.visible()){t=a.delegate().getAxisRenderer(e.model());e.setRenderer(t);if(e.model()instanceof PolarAxis){e.setBounds(0,0,o,l)}else{i=o/2;r=l/2;n=l/2*h;e.setBounds(i-100,r-n,100,n)}e.layout()}}}});var ChartAxisTitleView=defineClass("ChartAxisTitleView",ChartElement,{init:function(e,t){this._super(e,"axisTitleView");this._axisView=t},vertical:function(){return this._axisView.model().isVertical()},location:function(){return this._axisView.model().location()}});var AxisIndicatorView=defineClass("AxisIndicatorView",ChartElement,{init:function(e){this._super(e,"axisIndicatorView");this._axisView=null;this.addElement(this._textView=new ChartTextElement(e,"axisIndicatorText"))},axisView:function(){return this._axisView},textView:function(){return this._textView},axis:function(){return this._axisView.model()},isLayer:function(){return true},_doClip:function(){},_doLayout:function(e){this._axisView=e},_canDraw:function(){return!this.chartView().animating()}});var ChartAxisLabelView=defineClass("ChartAxisLabelView",ChartTextElement,{init:function(e,t){this._super(e,t||"axisLabelView");this._tick=null;this.setMouseEnabled(true)},setTick:function(e,t){var i,r,n=this._styles;this._tick=e;if(_isString(t)){i=t}else if(_isNumber(e)){i=n.scaleNumber(e,true)}else{i=_toStr(e)}i=n.decorateText(i);this.setText(i)},setText:function(e){if(e)e=e.replace(/<br>/g,"\n");return this._super(e)}});var ChartDateTimeAxisLabelView=defineClass("ChartDateTimeAxisLabelView",ChartAxisLabelView,{init:function(e){this._super(e,"datetimeAxisLabelView")},setTick:function(e,t){var i,r,n,s=_defined(e)?new Date(e):null;this._tick=s;if(t!==undefined){n=t}else{i=this._styles.datetimeFormat();r=new DateTimeWriter(i||"MM.dd");n=r.getText(s)}this.setText(n)}});var ChartAxisTicksView=defineClass("ChartAxisTicksView",ChartElement,{init:function(e,t){this._super(e,"chartAxisTicksView");this._axisView=t;this._tickViews=[];this._tickCount=0},axisView:function(){return this._axisView},tickCount:function(){return this._tickCount},tickViews:function(){return this._tickViews.slice(0,this._tickCount)},_doRender:function(e,t){},_prepareTicks:function(){var e,t,i,r,n,s,a=this._axisView,o=a.model(),l=o.startIndex?o.startIndex():0,h=o.tick(),u=h.labelCallback(),c=a.renderer(),d=h.styles(),f=o.getTickNumber();while((e=this.childCount())>f){this.removeElementAt(e-1)}while((e=this.childCount())<f){if(this._tickViews.length<=e){this._tickViews.push(c.createTickView(this._dom))}this.addElement(this._tickViews[e])}this._tickCount=f;for(e=0;e<f;e++){if(o._categoriesStyles!=null){if(o._categoriesStyles[e]){d=d.clone();d.extend(o._categoriesStyles[e])}}t=this._tickViews[e];t.updateStyles(d);n=o.getTick(e+l);if(u){s=u(o,e+l,n)}else{s=undefined}t.setTick(n,s)}},$_itemClicked:function(e){this._doItemClicked(e)},_doItemClicked:function(e){}});var ChartAxisScrollBarElement=defineClass("ChartAxisScrollBarElement",ChartElement,{init:function(e){this._super(e,"axisScrollBarView");this._nearButton=new ChartAxisScrollButton(e,this,false);this.addElement(this._nearButton);this._farButton=new ChartAxisScrollButton(e,this,true);this.addElement(this._farButton);this._thumb=new ChartAxisScrollThumb(e,this);this.addElement(this._thumb);this._buttonSize=20;this._min=0;this._max=0;this._pos=0;this._page=0;this._maxPosition=0},vertical:false,maxPosition:function(){return this._maxPosition},setProperties:function(e,t,i){e=_int(Math.max(0,e));t=_int(Math.max(e,t));if(e!=this._min||t!=this._max||i!=this._page){this._min=e;this._max=t;this._page=i;this._pos=Math.min(this._max,Math.max(this._min,this._pos));this._maxPosition=Math.max(0,this._max-this._page);this.invalidate(true,true)}},setPosition:function(e,t){e=_int(Math.min(this._maxPosition,Math.max(this._min,e)));if(e!=this._pos){this._pos=e;this.invalidate(true,true);t&&this._doLayoutContent()}},ptInTrack:function(e,t,i){var r=this._thumb,n=this.containerToElement(e,t);if(this._vertical){if(n.y>=this._farButton.height()&&n.y<this._nearButton.y()){return i&&n.y<r.y()||!i&&n.y>=r.bottom()}}else{if(n.x>=this._nearButton.width()&&n.x<this._farButton.x()){return!i&&n.x<r.x()||i&&n.x>=r.right()}}return false},_doMeasure:function(e,t){var i=this.model(),r=i.styles();this._lineScrollSize=i.lineScrollSize();this._pageScrollSize=i.pageScrollSize();this._minThumbSize=i.minThumbSize();this._fill=r.fill();this._nearButton.updateElement(i.buttonStyles(),r);this._farButton.updateElement(i.buttonStyles(),r);this._thumb.updateElement(i.thumbStyles());if(this._vertical){return{width:this._model.barWidth(),height:t}}else{return{width:e,height:this._model.barWidth()}}},_doLayout:function(){var e=this._vertical,t=this.width(),i=this.height(),r=this._buttonSize,n=(e?i:t)-r*2,s=Math.min(n,Math.max(this._minThumbSize,_int(n*this._page/Math.max(1,this._max-this._min+1)))),a=r+Math.min(n-s,Math.max(0,(n-s)*this._pos/Math.max(1,this._maxPosition-this._min)));this._nearButton.setVisible(r>0);this._farButton.setVisible(r>0);if(r>0){if(e){this._nearButton.setEnabled(this._pos>this._min);this._farButton.setEnabled(this._pos<this._maxPosition)}else{this._nearButton.setEnabled(this._pos>this._min);this._farButton.setEnabled(this._pos<this._maxPosition)}}if(e){if(r>0){this._farButton.setBounds(0,0,t,r);this._nearButton.setBounds(0,i-r,t,r)}if(s<=n){this._thumb.setBounds(1,i-a-s,t-2,s)}}else{if(r>0){this._nearButton.setBounds(0,0,r,this._height);this._farButton.setBounds(t-r,0,r,i)}if(s<=n){this._thumb.setBounds(a,1,s,i-2)}}},_doRender:function(e,t){e.drawRectI(this._fill,null,t)},_doRenderHtml:function(e){var t=this._fill;_ieOld?this.$_setCssFill(t):this._css.background=t?t.css():""},_doScroll:function(e,t,i){this.fireEvent(ChartAxisScrollBarElement.SCROLLED,e,t,i)},_mouseOut:function(){this._nearButton.setPressed(false);this._farButton.setPressed(false);this._thumb.setPressed(false)}},{SCROLLED:"onChartAxisScrollBarScrolled"});var ChartAxisScrollButton=defineClass("ChartAxisScrollButton",UIElement,{init:function(e,t,i){this._super(e);this._scrollBar=t;this._far=i;this._enabled=true},background:null,hoveredBackground:null,selectedBackground:null,border:null,shapeColor:null,shapeSelectedColor:null,shapeInactiveColor:null,pressed:false,enabled:true,vertical:function(){return this._scrollBar._vertical},far:function(){return this._far},scrollBar:function(){return this._scrollBar},setPressed:function(e){if(e!=this._pressed){this._pressed=e;this._scrollBar.invalidate(true,true)}},setEnabled:function(e){if(e!=this._enabled){this._enabled=e;this._scrollBar.invalidate(true,true)}},updateElement:function(e,t){this.setBackground(t.fill());this.setSelectedBackground(t.fill());this.setHoveredBackground(t.fill());this.setBorder(null);this.setShapeColor(new SolidPen("#888"));this.setShapeSelectedColor(new SolidPen("#333"));this.setShapeInactiveColor(new SolidPen("#aaa"))},_hoveredChanged:function(){this._scrollBar.invalidate(true,true)},$_drawTrianlge:function(e,t,i,r){if(this._scrollBar._vertical){if(this._far){e.drawVLineI(t,i,r-2,r+1);e.drawHLineI(t,r+1,i-3,i+4);e.drawHLineI(t,r,i-2,i+3);e.drawHLineI(t,r-1,i-1,i+2)}else{e.drawVLineI(t,i,r-1,r+3);e.drawHLineI(t,r-1,i-3,i+4);e.drawHLineI(t,r,i-2,i+3);e.drawHLineI(t,r+1,i-1,i+2)}}else{if(this._far){e.drawHLineI(t,r,i-1,i+3);e.drawVLineI(t,i-1,r-3,r+4);e.drawVLineI(t,i,r-2,r+3);e.drawVLineI(t,i+1,r-1,r+2)}else{e.drawHLineI(t,r,i-2,i+1);e.drawVLineI(t,i+1,r-3,r+4);e.drawVLineI(t,i,r-2,r+3);e.drawVLineI(t,i-1,r-1,r+2)}}},_doDraw:function(e){var t=this.getClientRect();var i=_int(t.width/2);var r=_int(t.height/2);this.$_getDrawings();e.drawRectI(this._fill,null,t);if(this._border){t.rightBy(-1);t.bottomBy(-1);e.drawRectI(null,this._border,t)}this.$_drawTrianlge(e,this._stroke,i,r)},_doDrawHtml:function(){var e=this.getClientRect();var n=_int(e.width/2);var s=_int(e.height/2);this.$_getDrawings();_ieOld?this.$_setCssFill(this._fill):this._css.background=this._fill?this._fill.css():"";this._css.border=this._border?this._border.css():"";if(!this._svg){this._svg=new SvgSprite(this,this.container())}var a=this;this._svg.render(function(e,t,i,r){a.$_drawTrianlge(t,a._stroke,n,s)})},$_getDrawings:function(){this._fill=this._pressed?this._selectedBackground:this.hovered()?this._hoveredBackground:this._background;this._stroke=this._pressed?this._shapeSelectedColor:this._enabled?this._shapeColor:this._shapeInactiveColor}});var ChartAxisScrollThumb=defineClass("ChartAxisScrollThumb",UIElement,{init:function(e,t){this._scrollBar=t;this._super(e)},borderRadius:0,background:null,hoveredBackground:null,selectedBackground:null,border:null,pressed:false,setBorderRadius:function(e){this._borderRadius=Math.max(0,_forceInt(e))},setPressed:function(e){if(e!=this._pressed){this._pressed=e;this._scrollBar.invalidate(true,true)}},scrollBar:function(){return this._scrollBar},vertical:function(){return this._scrollBar._vertical},updateElement:function(e,t){this.setBorderRadius(e.borderRadius());this.setBackground(e.inactiveFill());this.setHoveredBackground(e.fill());this.setSelectedBackground(e.fill());this.setBorder(e.border())},_hoveredChanged:function(){this._scrollBar.invalidate(true,true)},_doDraw:function(e){var t,i,r,n=this.getClientRect(),s=this._borderRadius;fill=this._pressed?this._selectedBackground:this.hovered()?this._hoveredBackground:this._background;if(s>0){t=this.vertical();i=this.width();r=this.height();s=Math.min(s,(t?i:r)-2,_int((t?r:i)/2-1))}s>0?e.drawRoundRectI(fill,this._border,n,s,s,s,s):e.drawRectI(fill,this._border,n)},_doDrawHtml:function(e){var t=this.getClientRect(),i=this._borderRadius;fill=this._pressed?this._selectedBackground:this.hovered()?this._hoveredBackground:this._background;_ieOld?this.$_setCssFill(fill):this._css.background=fill?fill.css():"";this._css.border=this._border?this._border.css():"";this._css.borderRadius=i>0?i+"px":0}});var ChartAxisScrollThumbRequest=defineClass("ChartAxisScrollThumbRequest",EditRequest,{init:function(e){this._super();this._thumb=e},thumb:function(){return this._thumb},scrollBar:function(){return this._thumb.scrollBar()},cursor:function(){return Cursor.ARROW},isSelectable:function(){return false}});var ChartAxisScrollThumbTracker=defineClass("ChartAxisScrollThumbTracker",DragTracker,{init:function(e,t,i){this._super(e.scrollBar().container(),"scrollThumbTracker");this._request=e;this._thumb=e.thumb();this._scrollBar=e.scrollBar();this._vertical=this._scrollBar.vertical();var r=this._scrollBar.containerToElement(t,i);if(this._scrollBar.vertical()){this._offset=r.y-this._thumb.y()}else{this._offset=r.x-this._thumb.x()}},isStartWhenCreated:function(){return true},_doStart:function(e,t){this._thumb.setPressed(true);return true},_doDrag:function(e,t){return this.$_doScroll(e,t,ScrollEventType.THUMB_TRACK)},_doCompleted:function(e,t){return this.$_doScroll(e,t,ScrollEventType.THUMB_END)},_doCanceled:function(e,t){},_doEnded:function(){this._thumb.setPressed(false)},$_doScroll:function(e,t,i){var r,n,s,a=this._scrollBar,o=a.vertical(),l=a._maxPosition-a._min+1,h=a._buttonSize,u=a.containerToElement(e,t);if(a.vertical()){r=a.height();n=this._thumb.height();s=u.y-this._offset;s=(r-s-h*2-n)*l}else{r=a.width();n=this._thumb.width();s=u.x-this._offset;s=(s-h)*l}s=s/(r-h*2-n);a._doScroll(i,0,_int(s));return true}});var ChartAxisScrollButtonTimer=defineClass("ChartAxisScrollButtonTimer",EventAware,{init:function(e){this._super();this._button=e;this._scrollBar=e.scrollBar();this._active=false;this._timer=UNDEFINED;this._ready=false},start:function(){this._button.setPressed(true);this._active=true;this.$_fireEvent();setTimeout(function(){if(this._ready){this._ready=false;this._timer=setInterval(function(){if(this._active){this.$_fireEvent()}}.bind(this),50)}}.bind(this),200);this._ready=true},move:function(e,t){var i=this._button.containerToElement(e,t);this._active=this._button.containsInClient(i.x,i.y)},stop:function(e,t){this._ready=false;if(this._timer){clearInterval(this._timer)}this._button.setPressed(false)},$_fireEvent:function(){var e=null;var t=1;if(this._scrollBar.vertical()){if(this._button.far()){e=ScrollEventType.LINE_UP}else{e=ScrollEventType.LINE_DOWN;t=-1}}else{if(this._button.far()){e=ScrollEventType.LINE_RIGHT}else{e=ScrollEventType.LINE_LEFT;t=-1}}this._scrollBar._doScroll(e,this._scrollBar._lineScrollSize*t,0)}});var ChartAxisScrollTrackTimer=defineClass("ChartAxisScrollTrackTimer",EventAware,{init:function(e,t){this._super(e);this._scrollBar=e;this._isFar=t;this._active=false;this._timer=UNDEFINED;this._ready=false},start:function(){this._active=true;this.$_fireEvent();setTimeout(function(){if(this._ready){this._ready=false;this._timer=setInterval(function(){if(this._active){this.$_fireEvent()}}.bind(this),50)}}.bind(this),200);this._ready=true},move:function(e,t){var i=this._scrollBar.containerToElement(e,t);this._active=this._scrollBar.ptInTrack(i.x,i.y,this._isFar)},stop:function(e,t){this._ready=false;if(this._timer){clearInterval(this._timer)}},$_fireEvent:function(){var e,t,i=null,r=0,n=this._scrollBar._thumb;if(this._scrollBar.vertical()){t=this._scrollBar.mouseY();if(this._isFar&&t<n.y()){i=ScrollEventType.PAGE_UP;r=1}else if(t>n.bottom()){i=ScrollEventType.PAGE_DOWN;r=-1}}else{e=this._scrollBar.mouseX();if(this._isFar&&e>n.right()){r=1;i=ScrollEventType.PAGE_RIGHT}else if(e<n.x()){i=ScrollEventType.PAGE_LEFT;r=-1}}r!=0&&this._scrollBar._doScroll(i,this._scrollBar._pageScrollSize*r,0)}});var ChartAxisScrollTool=defineClass("ChartAxisScrollTool",null,{init:function(e){this._super(e,"gridScrollTool");this._tracker=null;this._scrollTimer=null},isScrolling:function(){return this._tracker!=null||this._scrollTimer!=null},stop:function(e,t){if(this._tracker&&this._tracker.isDragging()){try{this._tracker.drop(e,t);this._tracker.deactivate()}finally{this._tracker=null}}else{if(this._scrollTimer){this._scrollTimer.stop(e,t);this._scrollTimer=null}}},start:function(e,t,i){if(e instanceof ChartAxisScrollThumb){this._tracker=new ChartAxisScrollThumbTracker(new ChartAxisScrollThumbRequest(e),t,i);this._tracker.activate();if(!this._tracker.start(t,i)){this._tracker=null;return false}return true}if(e instanceof ChartAxisScrollButton){if(e.enabled()){this._scrollTimer=new ChartAxisScrollButtonTimer(e);this._scrollTimer.start()}return true}if(e instanceof ChartAxisScrollBarElement){if(e.ptInTrack(t,i,true)){this._scrollTimer=new ChartAxisScrollTrackTimer(e,true)}else if(e.ptInTrack(t,i,false)){this._scrollTimer=new ChartAxisScrollTrackTimer(e,false)}if(this._scrollTimer){this._scrollTimer.start();return true}}return false},move:function(e,t){if(this._tracker&&this._tracker.isDragging()){if(!this._tracker.drag(e,t)){try{this._tracker.cancel(e,t);this._tracker.deactivate()}finally{this._tracker=null}}}else if(this._scrollTimer){this._scrollTimer.move(e,t)}}});var ChartAxisView=defineClass("ChartAxisView",ChartElement,{init:function(e){this._super(e,"axisView");this._titleView=new ChartAxisTitleView(e,this);this.addElement(this._titleView);this._ticksView=new ChartAxisTicksView(e,this);this.addElement(this._ticksView);this._scrollBar=new ChartAxisScrollBarElement(e);this.addElement(this._scrollBar);this._scrollBar.addListener(this);this._titleSize=0;this._measuredTicks=null;this._focusView=null},onChartAxisScrollBarScrolled:function(e,t,i,r){var n=this._model.startIndex();this._model._handleScrollEvent(e,t,i,r);if(n!=this._model.startIndex()){this.container().invalidateLayout()}},titleRenderer:null,titleView:function(){return this._titleView},titleRenderer:function(){return this._titleRenderer||ChartAxisTitleRenderer.Default},isVertical:function(){return this.model().orientation()==ChartAxisOrientation.VERTICAL},isNear:function(){return this.model().location()==ChartAxisLocation.NORMAL},getTickView:function(e){return this._ticksView._tickViews[e]},showFocus:function(e,t,i){if(!this._focusView){this._focusView=new ChartAxisLabelView(this._dom);this.addElement(this._focusView)}this._focusView.setVisible(true);var r=this.model().styles();this._focusView.updateStyles(r);this._doUpdateFocus(e||this.model().getSeries(0),this._focusView,t,i)},hideFocus:function(){if(this._focusView){this._focusView.setVisible(false)}},isLayer:function(){return true},_doMeasure:function(e,t){var i,r,n,s,a,o,l,h,u=this.model(),c=this.renderer();if(u&&c){i=this.isVertical();r=i?0:e;n=i?t:0;this._titleSize=0;a=u.title();if(a.visible()&&a.text()){l=_trim(a.text());if(l){o=this.titleView();o.setModel(a);o.setRenderer(this.titleRenderer());s=o.measure(e,t);if(i){this._titleSize=r=s.width}else{this._titleSize=n=s.height}}}s=c.measure(this,e,t);if(i){r+=s.width}else{n+=s.height}h=this._scrollBar;h.setVisible(u.isUserScrollable());if(h.visible()){h.setModel(u.scrollBar());h.setVertical(i);s=h.measure(e,t);if(h.vertical()){r+=s.width}else{n+=s.height}}return{width:r,height:n}}else{return{width:30,height:30}}},_doLayout:function(){var e=this.isVertical(),t=this._ticksView,i=this.titleView(),r=this._titleSize,n=this._scrollBar,s=this._model.tick().styles().lineWidth(),a=this.width(),o=this.height();if(n.visible()){this._model._updateScrollBar(n);if(e){n.setBoundsI(a-s-n._measuredWidth,0,n._measuredWidth,o)}else{n.setBoundsI(0,s,a,n._measuredHeight)}n.layout()}i.setVisible(r>0);if(i.visible()){if(e){if(this.isNear()){i.setBoundsI(0,0,r,o)}else{i.setBoundsI(a-r,0,r,o)}}else{i.setBoundsI(0,o-r,a,r)}}},_doDrawBackground:function(e,t){},_doUpdateFocus:function(e,t,i,r){if(e&&t){var n=this.renderer();if(n){n.locateFocusView(this,t,this.clientRect(),i,r)}}}});var ChartSeriesItemView=defineClass("ChartSeriesItemView",ChartElement,{init:function(e){this._super(e,"seriesItemView");this._index=-1;this._dataPoint={x:0,y:0};this._dataPoint2={x:0,y:0}},tooltip:function(){var e=this.model();return e.series().getItemTooltip(e)},series:function(){return this.parent().parent().model()},seriesView:function(){return this.parent().parent()},index:function(){return this._index},setIndex:function(e){this._index=e},state:function(){return this._hovered?"hovered":null},isSingleton:function(){return this.parent().childCount()==1},setDataPoint:function(e,t,i,r){this._dataPoint.x=e;this._dataPoint.y=t;this._dataPoint2.x=i;this._dataPoint2.y=r;return this},_hoveredChanged:function(){var e=this.chartView();if(e&&e.hovering()){this.invalidateLayout()}},canHover:function(){return true},hitTest:function(e,t){var i=this.renderer();if(i&&i.containsPoint){return i.containsPoint(this,e,t)}else{return e>=0&&e<this._width&&t>=0&&t<this._height}}});var StackableSeriesItemView=defineClass("StackableSeriesItemView",ChartSeriesItemView,{init:function(e){this._super(e);this._gindex=0},negative:false,separator:false});var ChartSeriesLabelView=defineClass("ChartSeriesLabelView",ChartTextElement,{init:function(e,t){this._super(e,"itemLabelView");this._itemView=null;this._originX=0;this._originY=0},itemView:function(){return this._itemView},setLabel:function(e,t){this._itemView=e;this.setText(t)},setOrigin:function(e,t){this._originX=e;this._originY=t}});var ChartSeriesTextView=defineClass("ChartSeriesTextView",ChartElement,{init:function(e,t){this._super(e,"seriesTextView");this._seriesView=t;this._textViews=[];this._textViewCount=0},isLayer:function(){return true},_doDraw:function(e){},_doLayout:function(){var e,t,i,r,n,s=this._seriesView,a=s.model();if(a&&(t=s.renderer())){r=a.textsPerItem();n=s._itemCount*r;while((e=this.childCount())>n){this.removeElementAt(e-1)}while((e=this.childCount())<n){if(this._textViews.length<=e){this._textViews.push(new ChartSeriesLabelView(this._dom))}this.addElement(this._textViews[e])}this._textViewCount=n;return t.layoutLabels(s,this._textViews,s.getClientRect())}}});var ChartSeriesView=defineClass("ChartSeriesView",ChartElement,{init:function(e){this._super(e,"seriesView");this._itemRenderer=null;this._itemLayer=new LayerElement(e,"itemsView");this.addElement(this._itemLayer);this._separatorView=new UIElement(e,"separatorLayer");this._separatorView.setRenderCallback(this.drawSeparators.bind(this));this._textView=new ChartSeriesTextView(e,this);this._seriesTotalTextView=new ChartTextElement(e,"stackLabel");this._seriesTotalTextView.setRenderCallback(this.drawStackLabel.bind(this));this.addElement(this._seriesTotalTextView);this._itemViewMap={};this._itemViews=[];this._itemCount=0;this._itemViewCount=0;this._plotView=null},maskRate:0,setMaskRate:function(e){if(e!=this._maskRate){this._maskRate=e;this._mask=this._model.mask().getMask(this.width(),this.height());this.invalidate()}},separatorView:function(){return this._separatorView},textView:function(){return this._textView},itemRenderer:function(){return this._itemRenderer},setItemRenderer:function(e){if(e!==this._itemRenderer){this._itemRenderer=e;this.invalidate()}},itemCount:function(){return this._itemViewCount},getItem:function(e){return this._itemViews[e]},itemByModel:function(e){return this._itemViewMap[e.$_hash]},plotView:function(){return this._plotView},polarSize:function(){return this._polarSize},getRunProperty:function(e,t){var i=this.chartView().animations().getProperty(this.model(),e);return i?i.rate():t!==UNDEFINED?t:1},getDataPoints:function(e){var t,i,r,n=null,s=e!==UNDEFINED?e:this._itemViewCount;if(s>0){n=[];for(t=0;t<s;t++){i=this.getItem(t);r={x:i._dataPoint.x,y:i._dataPoint.y};n.push(r)}}return n},setItemIndex:function(e,t,i,r,n){this._plotView.setItemIndex(e,t,i,r,n);e._negative=n;e._gindex=r},isLayer:function(){return true},_doLayout:function(){var e,t,i,r,n,s,a,o,l,h,u,c,d,f,u,_=this.model(),g=this.renderer();this._itemCount=this._itemViewCount=0;if(_&&g){l=this.width();h=this.height();u=g.canStacked();if(_ instanceof CartesianSeries&&_.isScrollable()&&(e=_.xAxisObj())instanceof CategorizedAxis){c=e.visibleCount();t=e.startIndex()}else{c=_.displayCount();t=0}this._itemCount=c;f=_.viewsPerItem();s=c*f;i=this._itemViewMap={};while((r=this._itemLayer.childCount())>s){this._itemLayer.removeElementAt(r-1)}while((r=this._itemLayer.childCount())<s){if(this._itemViews.length<=r){this._itemViews.push(u?new StackableSeriesItemView(this._dom):new ChartSeriesItemView(this._dom))}this._itemLayer.addElement(this._itemViews[r])}this._startIndex=t;this._itemViewCount=s;for(r=0;r<c;r++){for(n=0;n<f;n++){a=this._itemViews[r*f+n];d=_.getVisibleItem(r+t);a.setVisible(d);if(a.visible()){a.setModel(d);i[d.$_hash]=a;a.setIndex(r+t);a.setRenderer(this.itemRenderer())}}}g.layoutItems(this);this._textView.setBounds(0,0,l,h);this._textView.layout();this.setMaskRate(_.mask().rate())}},_doDrawBackground:function(e,t){},_doDrawBorders:function(e,t){this._drawDebugBorder(e,t)},resetSeparators:function(e,t){var i,r,n;if(e||t){for(i=0,r=this.itemCount();i<r;i++){n=this.getItem(i);if(n._negative){n._separator=n._gindex<t[i]}else{n._separator=n._gindex<e[i]}}}},drawSeparators:function(e){var t=this.model(),i=this.renderer();if(t&&i){i.renderItemSeparators(this,e,new Rectangle(0,0,this.width(),this.height()))}},drawStackLabel:function(e){var t=this.model(),i=this.renderer();if(t&&i){i.renderStackLabel(this,e,new Rectangle(0,0,this.width(),this.height()))}}});var ChartGridView=defineClass("ChartGridView",ChartElement,{init:function(e,t,i){this._super(e,t);this._isFront=i;this._sources=[]},borderRadius:0,isFront:function(){return this._isFront},sources:function(){return this._sources},indexOf:function(e){for(var t=this._sources.length;t--;){if(this._sources[t]===e){return t}}return-1},addSource:function(e){if(this.indexOf(e)<0){this._sources.push(e);this.invalidate()}},removeSource:function(e){var t=this.indexOf(e);if(t>=0){this._sources.splice(t,1);this.invalidate()}},clearSources:function(){this._sources=[]},isLayer:function(){return true},defaultRenderer:function(){return ChartGridRenderer.Default},_clipped:function(){return true},_doClip:function(e){var t=this._drawRect.clone(),i=this._borderRadius;t.width++;t.height++;e.clipRoundRect(t,i,i,i,i)},_doDraw:function(e){var t,i,r,n,s,a,o,l=this._drawRect,h=this._sources;for(t=h.length;t--;){if(h[t].visible()){i=h[t].grid();break}}if(i){if(r=this.renderer()){r.render(this,e,l)}}}});var ChartPlotAreaView=defineClass("ChartPlotAreaView",ChartElement,{init:function(e,t){this._super(e,"plotAreaView");this._owner=t;this._gridView=new ChartGridView(e,"gridView");this.addElement(this._gridView);this._indicatorLayer=new LayerElement(e,"indicatorLayer");this.addElement(this._indicatorLayer);this._seriesLayer=new LayerElement(e,"seriesLayer");this.addElement(this._seriesLayer);this._seriesSeparatorLayer=new LayerElement(e,"seriesSeparatorLayer");this.addElement(this._seriesSeparatorLayer);this._polarAxisPane=new PolarAxisPane(e);this.addElement(this._polarAxisPane);this._labelLayer=new LayerElement(e,"labelLayer");this.addElement(this._labelLayer);this._indicatorViews=[];this._seriesViews=[];this._frontIndicatorLayer=new LayerElement(e,"frontIndicatorLayer");this.addElement(this._frontIndicatorLayer);this._frontGridView=new ChartGridView(e,"frontGridView",true);this.addElement(this._frontGridView);this._borderView=new ChartBorderView(e,"borderView");this.addElement(this._borderView);this._itemIndicies=new Dictionary;this._negativeItemIndicies=new Dictionary;this._itemPaneView=new ChartItemPaneElement(e,"itemPaneView");this.addElement(this._itemPaneView)},maskRate:0,setMaskRate:function(e){if(e!=this._maskRate){this._maskRate=e;this._mask=this._model.mask().getMask(this.width(),this.height());this.invalidate()}},setSeriesMaskRate:function(e){if(e!=this._seriesMaskRate){this._seriesMaskRate=e;this._seriesLayer._mask=this._model.seriesMask().getMask(this.width(),this.height());this.invalidate()}},gridView:function(){return this._gridView},frontGridView:function(){return this._frontGridView},polarAxisPane:function(){return this._polarAxisPane},polarSize:function(){return this._model.polarSize()},polarAxis:function(){var e=this.parent.model().xAxes();return e&&e.length>0?e[0]:null},getSeriesViews:function(){var e,t,i=this._seriesLayer,r=[];for(e=i.childCount();e--;){t=i.getChild(e);if(t instanceof ChartSeriesView){r.push(t)}}return r},getSeriesView:function(e){var t,i,r,n=this._seriesLayer;for(t=0,i=n.childCount();t<i;t++){r=n.getChild(t);if(r instanceof ChartSeriesView&&r.model()===e){return r}}return null},isLayer:function(){return true},_clipped:function(){return false},defaultRenderer:function(){return ChartPlotAreaRenderer.Default},_doMeasure:function(e,t){var i,r=this.model();if(r){this._itemPaneView.setModel(r._itemPane);this._itemPaneView.measure(e,t);if(i=this.renderer()){return i.measure(this,e,t)}}else{this._itemPaneView.setModel(null);this._itemPaneView.measure(e,t)}return{width:e,height:t}},_doLayout:function(){var e,t,i,r,n,s,a,o,l,h,u=this._simple,c=this._parent,d=c.delegate(),f=c.model(),_=this._model.polarSize(),g=this._model.styles(),m=this.width(),p=this.height();if(f.seriesDirty()){this.refreshSeries(c)}if(!u){this.refreshIndicators(c)}this._borderView.setStyles(g);this._borderView.setBounds(0,0,m,p);e=this.polarAxisPane();if(e.visible()){e.setBounds(0,0,m,p);e.layout()}t=this.gridView();t.setBorderRadius(g.borderRadius());t.setRenderer(d.getGridRenderer(f));t.setBounds(0,0,m,p);t.layout();t=this.frontGridView();t.setRenderer(d.getGridRenderer(f));t.setBounds(0,0,m,p);t.layout();n=this._indicatorLayer;for(a=0,o=n.childCount();a<o;a++){l=n.getChild(a);h=l.model();l.setRenderer(d.getAxisIndicatorRenderer(h));l.setBounds(0,0,m,p);l.layout(l["_axisView"])}n=this._frontIndicatorLayer;for(a=0,o=n.childCount();a<o;a++){l=n.getChild(a);h=l.model();l.setRenderer(d.getAxisIndicatorRenderer(h));l.setBounds(0,0,m,p);l.layout(l["_axisView"])}n=this._seriesLayer;for(a=0,o=n.childCount();a<o;a++){s=n.getChild(a);if(s instanceof ChartSeriesView){i=s.model();s._plotView=this;s._polarSize=_;s.setRenderer(d.getSeriesRenderer(i));s.setItemRenderer(d.getSeriesItemRenderer(i));s.setBounds(0,0,m,p);s.updateStyles(i.styles());s.layout();if(!u&&c.animations().animating(i)){s.invalidate(true,true)}}}for(a=0,o=n.childCount();a<o;a++){s=n.getChild(a);if(s instanceof ChartSeriesView){r=s.model().group();s.resetSeparators(this._itemIndicies.get(r),this._negativeItemIndicies.get(r))}}if(!u){this._itemPaneView.setBounds(0,0,m,p);this._itemPaneView.layout()}if(!u){this.setMaskRate(this._model.mask().rate());this.setSeriesMaskRate(this._model.seriesMask().rate())}},_doDraw:function(e){var t=this._drawRect,i=this._model.styles(),r=i.fill(),n=i.borderRadius();if(r){e.applyShadow(i.shadow()).drawRoundRectI(r,null,t,n,n,n,n)}},$_setSimple:function(e){this._simple=e},refreshSeries:function(s){function e(e,t){var i,r,n=null;for(i=0,r=e.length;i<r;i++){if(e[i]instanceof ChartSeriesView&&e[i].model()===t){n=e[i];e.splice(i,1);break}}if(!n){n=new ChartSeriesView(s._dom);n.setModel(t)}return n}var t,i,r,n,a,o,l,h,u=s.model();if(!u){return}h=this._seriesLayer;for(t=h.childCount();t--;){n=h.getChild(t);if(n instanceof ChartSeriesView){h.removeElement(n);this._seriesViews.push(n)}}h=this._labelLayer;for(t=h.childCount();t--;){a=h.getChild(t);if(a instanceof ChartSeriesTextView){h.removeElement(a)}}h=this._seriesSeparatorLayer;for(t=h.childCount();t--;){a=h.getChild(t);h.removeElement(a)}if(this._owner instanceof SimpleChartView){o=this._owner.model().series();if(o){n=e(this._seriesViews,o);this._seriesLayer.addElement(n);this._seriesSeparatorLayer.addElement(n.separatorView());this._labelLayer.addElement(n.textView())}}else{h=this._seriesLayer;o=u.seriesAll();o.sort(function(e,t){return e.zindex()-t.zindex()});for(t=0,r=o.length;t<r;t++){l=o[t];if(l instanceof ChartSeries){n=e(this._seriesViews,l);h.addElement(n);this._seriesSeparatorLayer.addElement(n.separatorView());this._labelLayer.addElement(n.textView())}else{for(i=0;i<l.count();i++){n=e(this._seriesViews,l.getItem(i));h.addElement(n);this._seriesSeparatorLayer.addElement(n.separatorView());this._labelLayer.addElement(n.textView())}}}}},refreshIndicators:function(e){function t(e,t,i){var r,n,s=null;for(r=0,n=t.length;r<n;r++){if(t[r].model()===i){s=t[r];t.splice(r,1);break}}if(!s){s=new AxisIndicatorView(e);s.setModel(i)}return s}var i=e.model();if(!i)return;var r,n,s,a,o,l,h,u,c,d,f,_;u=this._indicatorLayer;for(r=u.childCount()-1;r>=0;r--){c=u.getChild(r);u.removeElement(c);this._indicatorViews.push(c)}u=this._frontIndicatorLayer;for(r=u.childCount()-1;r>=0;r--){c=u.getChild(r);u.removeElement(c);this._indicatorViews.push(c)}_=e.getAxisViews();for(r=0,s=_.length;r<s;r++){o=_[r];l=o.model();d=l.indicators();if(d){for(n=0,a=d.length;n<a;n++){f=d[n];h=t(this._dom,this._indicatorViews,f);h["_axisView"]=o;if(f.front()){this._frontIndicatorLayer.addElement(h)}else{this._indicatorLayer.addElement(h)}}}}},setItemIndex:function(e,t,i,r,n){var s,a,o=n?this._negativeItemIndicies:this._itemIndicies;a=o.get(i);if(!a){a=[];o.set(i,a)}s=a[t];if(s===UNDEFINED||r>s){a[t]=r}}});var ChartBodyElement=defineClass("ChartBodyElement",ChartElement,{init:function(e){this._super(e,"bodyView");this.addElement(this._plotAreaView=new ChartPlotAreaView(e));this.addElement(this._leftAxisPane=new ChartAxisPane(e,"leftAxisPane",ChartAxisOrientation.VERTICAL));this.addElement(this._rightAxisPane=new ChartAxisPane(e,"rightAxisPane",ChartAxisOrientation.VERTICAL));this.addElement(this._bottomAxisPane=new ChartAxisPane(e,"bottomAxisPane",ChartAxisOrientation.HORIZONTAL));this.addElement(this._topAxisPane=new ChartAxisPane(e,"topAxisPane",ChartAxisOrientation.HORIZONTAL));this.addElement(this._backIndicator=new ChartBackIndicator(e,"backIndicator"));this.addElement(this._zoomIndicator=new ChartZoomIndicator(e,"zoomIndicator"));this._plotAreaRenderer=ChartPlotAreaRenderer.Default;this._polarPlotRenderer=PolarPlotAreaRenderer.Default;this._axesRects=new SideRectangles;this._plotAreaRect=new Rectangle},chartView:function(){return this._parent._chartView},plotAreaView:function(){return this._plotAreaView},delegate:function(){return this.chartView().delegate()},polarAxisPane:function(){return this._plotAreaView.polarAxisPane()},leftAxisPane:function(){return this._leftAxisPane},rightAxisPane:function(){return this._rightAxisPane},bottomAxisPane:function(){return this._bottomAxisPane},topAxisPane:function(){return this._topAxisPane},plotAreaView:function(){return this._plotAreaView},plotAreaRenderer:function(){return this._plotAreaRenderer||ChartPlotAreaRenderer.Default},setPlotAreaRenderer:function(e){if(e!=this._plotAreaRenderer){this._plotAreaRenderer=e}},polarPlotRenderer:function(){return this._polarPlotRenderer||PolarPlotAreaRenderer.Default},setPolarPlotRenderer:function(e){if(e!=this._polarPlotRenderer){this._polarPlotRenderer=e}},animations:function(){return this.chartView().animations()},getSeriesView:function(e){return this._plotAreaView.getSeriesView(e)},getAxisViews:function(){function e(e,t){var i,r,n;for(i=0;i<e.length;i++){r=e[i];n=this.leftAxisPane().findAxisView(r);if(!n)n=this.bottomAxisPane().findAxisView(r);if(!n)n=this.rightAxisPane().findAxisView(r);if(!n)n=this.topAxisPane().findAxisView(r);if(n)t.push(n)}}var t=[];e.call(this,this._model.xAxes(),t);e.call(this,this._model.yAxes(),t);return t},getMainAxisViews:function(){function e(e,t){var i;i=this.leftAxisPane().findAxisView(e);if(!i)i=this.bottomAxisPane().findAxisView(e);if(!i)i=this.rightAxisPane().findAxisView(e);if(!i)i=this.topAxisPane().findAxisView(e);if(i)t.push(i)}var t=[];e.call(this,this._model.xAxes()[0],t);e.call(this,this._model.yAxes()[0],t);return t},getAxisViewOf:function(e){var t=this.leftAxisPane().findAxisView(e);if(!t)t=this.bottomAxisPane().findAxisView(e);if(!t)t=this.rightAxisPane().findAxisView(e);if(!t)t=this.topAxisPane().findAxisView(e);return t},updateAxes:function(e,t){},isLayer:function(){return true},_doMeasure:function(e,t){},_doLayout:function(){var e=this.model(),t=this.clientRect();this._isPolar=e.isPolar();this._updateModels(e,t);this._measureItems(e,t);this._layoutItems(e,t)},_doDraw:function(e){},$_resetAxisTicks:function(e,t,i,r,n,s){if(e.update(t,r||n)){if(e instanceof CartesianAxis){var a;if(t.isPolar()){a=Math.min(s.height,s.width)*t.plotArea().polarSize()}else{a=i==ChartAxisOrientation.VERTICAL?s.height:s.width}e.refreshTicks(this,i,a)}else{e.refreshTicks(this,i,0)}}},_updateModels:function(e,t){var i,r,n,s,a=e.isInverted(),o=true,l=e.seriesDirty(),h=e.xAxes(),u=e.yAxes(),c=this._plotAreaView.gridView(),d=this._plotAreaView.frontGridView();c.clearSources();d.clearSources();s=a?ChartAxisOrientation.VERTICAL:ChartAxisOrientation.HORIZONTAL;if(h&&(r=h.length)>0){for(i=0;i<r;i++){n=h[i];this.$_resetAxisTicks(n,e,s,o,l,t);c.addSource(n);d.addSource(n)}}s=a?ChartAxisOrientation.HORIZONTAL:ChartAxisOrientation.VERTICAL;if(u&&(r=u.length)>0){for(i=0;i<r;i++){n=u[i];this.$_resetAxisTicks(n,e,s,o,l,t);c.addSource(n);d.addSource(n)}}},_measureItems:function(e,t){var i,r,n,s,a,o,l,h=this._isPolar;this._axesRects.clear();if(h){i=e.getAxes(null,null,true);this.polarAxisPane().setAxes(i);this.polarAxisPane().measure(t.width,t.height)}else{i=e.getAxes(ChartAxisOrientation.VERTICAL,ChartAxisLocation.NORMAL);r=this.leftAxisPane();r.setAxes(i);if(i&&i.length>0){n=r.measureI(t.width,t.height);this._axesRects.setLeft(t.x,t.y,n.width,t.height);t.leftBy(n.width)}i=e.getAxes(ChartAxisOrientation.VERTICAL,ChartAxisLocation.OPPOSITE);r=this.rightAxisPane();r.setAxes(i);if(i&&i.length>0){n=r.measureI(t.width,t.height);this._axesRects.setRight(t.right()-n.width,t.y,n.width,t.height);t.rightBy(-n.width)}i=e.getAxes(ChartAxisOrientation.HORIZONTAL,ChartAxisLocation.NORMAL);r=this.bottomAxisPane();r.setAxes(i);if(i&&i.length>0){n=r.measureI(t.width,t.height);this._axesRects.setBottom(t.x,t.bottom()-n.height,t.width,n.height);t.bottomBy(-n.height)}i=e.getAxes(ChartAxisOrientation.HORIZONTAL,ChartAxisLocation.OPPOSITE);r=this.topAxisPane();r.setAxes(i);if(i&&i.length>0){n=r.measureI(t.width,t.height);this._axesRects.setTop(t.x,t.y,t.width,n.height);t.topBy(n.height)}}s=this.plotAreaView();s.setModel(e.plotArea());s.setRenderer(h?this.polarPlotRenderer():this.plotAreaRenderer());s.measure(t.width,t.height);this._plotAreaRect.copy(t);a=this._axesRects.left;if(!a.isEmpty()){a.setRight(t.x);a.setBottom(t.bottom())}a=this._axesRects.right;if(!a.isEmpty()){a.setBottom(t.bottom())}s=this._backIndicator;s.setVisible(!h&&(o=e.predecessor()));if(s.visible()){s.setStyles(e.backIndicatorStyles());s.setChart(o);s.measure(t.width,t.height)}s=this._zoomIndicator;l=e.getXAxis(0);s.setVisible(l instanceof CategorizedAxis&&l.isZoomed());if(s.visible()){s.setStyles(e.zoomIndicatorStyles());s.setChart(o);s.measure(t.width,t.height)}},_layoutItems:function(e,t){var i,r,n=this._isPolar;i=this.leftAxisPane();i.setVisible(!n&&!this._axesRects.left.isEmpty());if(i.visible()){i.setRectI(this._axesRects.left);i.layout()}i=this.rightAxisPane();i.setVisible(!n&&!this._axesRects.right.isEmpty());if(i.visible()){i.setRectI(this._axesRects.right);i.layout()}i=this.bottomAxisPane();i.setVisible(!n&&!this._axesRects.bottom.isEmpty());if(i.visible()){i.setRectI(this._axesRects.bottom);i.layout()}i=this.plotAreaView();i.setVisible(!this._plotAreaRect.isEmpty());if(i.visible()){i.setRectI(this._plotAreaRect);i.layout()}i=this._backIndicator;if(i.visible()){i.setBoundsI(this.width()-i._measuredWidth-10,10,i._measuredWidth,i._measuredHeight);r=i.width()+10}else{r=0}i=this._zoomIndicator;if(i.visible()){i.setBoundsI(this.width()-i._measuredWidth-10-r,10,i._measuredWidth,i._measuredHeight)}}});var ChartBackIndicator=defineClass("ChartBackIndicator",ChartTextElement,{init:function(e){this._super(e,"backIndicator");this.setMouseEnabled(true)},setChart:function(e){var t="Back",i=e.name();if(i){if(i.length>10){i=i.substr(0,10)+"..."}t+=" to "+i}this.setText(t)},cursor:function(){return Cursor.POINTER}});var ChartZoomIndicator=defineClass("ChartZoomIndicator",ChartTextElement,{init:function(e){this._super(e,"zoomIndicator");this.setMouseEnabled(true)},setChart:function(e){this.setText("Zoom Out")},cursor:function(){return Cursor.POINTER}});var ChartLegendItemView=defineClass("ChartLegendItemView",ChartElement,{init:function(e){this._super(e,"legendItemView");this.addElement(this._markerView=new ChartLegendMarkerView(e))},setMarkerRenderer:function(e){this._markerView.setRenderer(e)},_doMeasure:function(e,t){var i,r,n,s,a=this.model(),o=a.legend().marker(),l=this.renderer();if(a){i=this.updateStyles(a.styles());this._markerView.setActive(a.active()&&a.source().visible());this._markerView.setModel(o);this._markerView._styles=o._styles;r=this._markerView.measure(e,t);n=r.width;s=r.height;if(l){r=l.measure(this,e,t);r.width+=i.paddingHorz();r.height=Math.max(s,r.height)+i.paddingVert()}r.markerWidth=n;return r}return{width:e,height:t}},_doLayout:function(e){var t=e,i=this._styles;this._markerView.setBounds(i.spaceLeft(),i.spaceTop(),t,this.height()-i.spaceVert())},_doDraw:function(e){var t,i,r,n,s=this.model(),a=this.renderer();if(s&&a){t=this._styles;i=t.spaceLeft()+this._markerView.width();r=t.spaceTop();n=new Rectangle(i,r,this.width()-i-t.spaceRight()+1,this.height()-t.spaceVert()+1);a.render(this,e,n,Text)}this._drawDebugBorder(e,this._drawRect)}});var ChartLegendMarkerView=defineClass("ChartLegendMarkerView",ChartElement,{init:function(e){this._super(e,"legendMarkerView");this.setMouseEnabled(false)},active:true,_doMeasure:function(e,t){var i,r,n=this.model(),s=this.renderer();if(n&&s){r=s.measure(this,e,t);return r}return{width:e,height:t}},_doDraw:function(e){var t=this.model(),i=this.renderer();if(t&&i){styles=this._styles;r=this.clientRect();styles.deflateMargins(r);i.render(this,e,r);styles.inflateMargins(r)}this._drawDebugBorder(e,r)}});var ChartLegendElement=defineClass("ChartLegendElement",ChartPositionableElement,{init:function(e){this._super(e,"legendView");this._itemViews=[];this._itemElements=[];this._itemBounds=[];this._markerWidth=0},itemRenderer:null,itemRenderer_:function(){return this._itemRenderer||this.defaultItemRenderer()},setItemRenderer:function(e){if(e!==this._itemRenderer){this._itemRenderer=e;this.invalidate()}},defaultRenderer:function(){return ChartLegendRenderer.Default},_doMeasure:function(e,t){var i,r,n,s,a,o,l,h,u,c,d,f,_,g,m,p,v,y,S=this.chartView(),C=this.model(),w=this.updateStyles(C.styles()),x=S.delegate(),b=C.itemGap(),I=this.model().items(),T=this._itemElements,A=this._itemViews,E=this._itemBounds,R=this._itemRenderer,L=I?I.length:0;this.setRenderer(S.legendRenderer());this.setItemRenderer(S.legendItemRenderer());R=this._itemRenderer;while(T.length>L){r=this.removeElement(T.pop());A.push(r)}while(T.length<L){if(A.length>0){r=A.pop()}else{r=new ChartLegendItemView(this._dom)}T.push(r);this.addElement(r);E.push(new Rectangle)}this._markerWidth=0;if(L>0){for(i=0;i<L;i++){n=I[i];r=T[i];r.setModel(n);r.setRenderer(R);r.setMarkerRenderer(x.getLegendMarkerRenderer(n.source()));a=r.measure(e,t);this._markerWidth=Math.max(this._markerWidth,a.markerWidth);s=E[i];s.width=a.width;s.height=a.height}o=w.spaceLeft();l=w.spaceTop();f=g=0;_=m=0;h=o;u=l;d=0;c=0;v=C.layout();y=v==ChartLegendLayout.VERTICAL||v==ChartLegendLayout.DEFAULT&&ChartItemPosition.isHorz(C.position());if(y){for(i=0;i<L;i++){s=this._itemBounds[i];s.x=h;s.y=u;s.width+=this._markerWidth;g=Math.max(g,s.width);m+=s.height;u+=s.height+b}m+=b*(L-1)}else{f=0;for(i=0;i<L;i++){s=this._itemBounds[i];s.width+=this._markerWidth;if(f+s.width>e){if(i<L-1){m+=d}g=Math.max(g,f);h=o;u+=d;f=s.width+b;s.x=h;s.y=u;h+=f}else{s.x=h;s.y=u;c=s.width+b;d=Math.max(d,s.height);h+=c;f+=c;g=Math.max(g,f)}}m+=d}a={width:g+w.spaceHorz(),height:m+w.spaceVert()}}else{a={width:200,height:13+w.spaceVert()}}return a},_doLayout:function(){var e,t,i;for(e=0,t=this._itemElements.length;e<t;e++){i=this._itemElements[e];i.setRectI(this._itemBounds[e]);i.layout(this._markerWidth)}},_doDraw:function(e){var t,i=this.model(),r=this.renderer();if(i&&r){t=this._drawRect.clone();r.render(this,e,t)}}});var SeriesLegendItemView=defineClass("SeriesLegendItemView",ChartElement,{init:function(e){this._super(e,"seriesLegendItemView");this.addElement(this._markerView=new SeriesLegendMarkerView)},setMarkerRenderer:function(e){this._markerView.setRenderer(e)},_doMeasure:function(e,t){var i,r,n,s,a,o=this.model(),l=o.legend().marker(),h=this.renderer();if(o&&h){i=this.updateStyles(o.styles());this._markerView.setActive(o.active());this._markerView.setModel(l);this._markerView._styles=l._styles;n=this._markerView.measure(e,t);s=n.width;a=n.height;if(h){n=h.measure(this,e,t);n.width+=i.spaceHorz();n.height=Math.max(a,n.height)+i.spaceVert()}n.markerWidth=s;return n}return{width:e,height:t}},_doLayout:function(e){var t=e,i=this._styles;this._markerView.setBounds(i.spaceLeft(),i.spaceTop(),t,this.height()-i.spaceVert())},_doDraw:function(e){var t,i,r,n,s=this.model(),a=this.renderer();if(s&&a){t=this._styles;i=t.spaceLeft()+this._markerView.width();r=t.spaceTop();n=new Rectangle(i,r,this.width()-i-t.spaceRight()+1,this.height()-t.spaceVert()+1);a.render(this,e,n,Text)}this._drawDebugBorder(e,this._drawRect)}});var SeriesLegendMarkerView=defineClass("SeriesLegendMarkerView",ChartElement,{init:function(e){this._super(e,"seriesLegendMarkerView");this.setMouseEnabled(false)},active:true,_doMeasure:function(e,t){var i,r,n=this.model(),s=this.renderer();if(n&&s){r=s.measure(this,e,t);return r}return{width:e,height:t}},_doDraw:function(e){var t=this.model(),i=this.renderer();if(t&&i){styles=this._styles;r=this.clientRect();styles.deflateMargins(r);i.render(this,e,r);styles.inflateMargins(r)}this._drawDebugBorder(e,r)}});var SeriesLegendElement=defineClass("SeriesLegendElement",ChartElement,{init:function(e){this._super(e,"legendView");this._itemViews=[];this._itemElements=[];this._itemBounds=[];this._markerWidth=0},itemRenderer:null,itemRenderer_:function(){return this._itemRenderer||this.defaultItemRenderer()},setItemRenderer:function(e){if(e!==this._itemRenderer){this._itemRenderer=e;this.invalidate()}},defaultRenderer:function(){return ChartLegendRenderer.Default},_doMeasure:function(e,t){var i,r,n,s,a,o,l,h,u,c,d,f,_,g,m,p,v,y,S=this.chartView(),C=this.model(),w=this.updateStyles(C.styles()),x=S.delegate(),b=C.itemGap(),I=this.model().items(),T=this._itemElements,A=this._itemViews,E=this._itemBounds,R=this._itemRenderer,L=I?I.length:0;this.setRenderer(S.legendRenderer());this.setItemRenderer(S.legendItemRenderer());R=this._itemRenderer;while(T.length>L){r=this.removeElement(T.pop());A.push(r)}while(T.length<L){if(A.length>0){r=A.pop()}else{r=new SeriesLegendItemView(this._dom)}T.push(r);this.addElement(r);E.push(new Rectangle)}this._markerWidth=0;if(L>0){for(i=0;i<L;i++){n=I[i];r=T[i];r.setModel(n);r.setRenderer(R);r.setMarkerRenderer(x.getSeriesLegendMarkerRenderer(C));a=r.measure(e,t);this._markerWidth=Math.max(this._markerWidth,a.markerWidth);s=E[i];s.width=a.width;s.height=a.height}o=w.spaceLeft();l=w.spaceTop();f=g=0;_=m=0;h=o;u=l;d=0;c=0;v=C.layout();y=v==ChartLegendLayout.VERTICAL||v==ChartLegendLayout.DEFAULT&&ChartItemPosition.isHorz(C.position());if(y){for(i=0;i<L;i++){s=this._itemBounds[i];s.x=h;s.y=u;s.width+=this._markerWidth;g=Math.max(g,s.width);m+=s.height;u+=s.height+b}m+=b*(L-1)}else{f=0;for(i=0;i<L;i++){s=this._itemBounds[i];s.width+=this._markerWidth;if(f+s.width>e){if(i<L-1){m+=d}g=Math.max(g,f);h=o;u+=d;f=s.width+b;s.x=h;s.y=u;h+=f}else{s.x=h;s.y=u;c=s.width+b;d=Math.max(d,s.height);h+=c;f+=c;g=Math.max(g,f)}}m+=d}a={width:g+w.spaceHorz(),height:m+w.spaceVert()}}else{a={width:200,height:13+w.spaceVert()}}return a},_doLayout:function(){var e,t,i;for(e=0,t=this._itemElements.length;e<t;e++){i=this._itemElements[e];i.setRectI(this._itemBounds[e]);i.layout(this._markerWidth)}},_doDraw:function(e){var t,i=this.model(),r=this.renderer();if(i&&r){t=this._drawRect.clone();r.render(this,e,t)}}});var ChartColorScalerElement=defineClass("ChartColorScalerElement",ChartPositionableElement,{init:function(e,t){this._super(e,"colorScalerView")},focusColor:null,setFocusColor:function(e){if(e!==this._focusColor){this._focusColor=e;this.invalidate()}},_doMeasure:function(e,t){var i=this._model,r=i.styles(),n=i.stepCount()*i.defaultStepSize(),s=0,a=0;if(ChartItemPosition.isVert(i.position())){a+=i.barWidth()+20;s=n}else{s+=i.barWidth();a=n}return{width:s+r.paddingHorz(),height:a+r.paddingVert()}},_doLayout:function(){},_doRender:function(e,t){var i,r,n=this._model,s=n.stops(),a=!ChartItemPosition.isVert(n.position()),o=n.styles(),l=o.font(),h=o.color(),u=o.fill(),c=o.border();o.deflatePaddings(t);t.height-=20;u&&e.drawRectI(u,null,t);e.drawRangedBounds(s[0].color(),s[1].color(),null,t.x,t.y,t.width,t.height,a?90:0);c&&e.drawRectI(null,c,t);t.height+=20;e.drawTextBounds(l,h,s[0].value()+"",t.x-500,t.bottom()-19,1e3,100,"center","top");e.drawTextBounds(l,h,s[1].value()+"",t.right()-500,t.bottom()-19,1e3,100,"center","top");o.inflatePaddings(t)}});var ChartActionView=defineClass("ChartActionView",ChartElement,{init:function(e,t){this._super(e,t)},action:null,_doRender:function(e,t){}});var ChartItemElement=defineClass("ChartItemElement",ChartElement,{init:function(e,t){this._super(e,t)},calcLayoutWidth:function(e){var t,i,r=this.model();t=r.width();if(t){i=t.getSize(e)}else{i=this._measuredWidth}if(t=r.maxWidth()){if(isNaN(i)){i=t.getSize(e)}else{i=Math.min(i,t.getSize(e))}}if(t=r.minWidth()){if(isNaN(i)){i=t.getSize(e)}else{i=Math.max(i,t.getSize(e))}}return i},calcLayoutHeight:function(e){var t,i,r=this.model();t=r.height();if(t){i=t.getSize(e)}else{i=this._measuredHeight}if(t=r.maxHeight()){if(isNaN(i)){i=t.getSize(e)}else{i=Math.min(i,t.getSize(e))}}if(t=r.minHeight()){if(isNaN(i)){i=t.getSize(e)}else{i=Math.max(i,t.getSize(e))}}return i},measure:function(e,t){var i,r=this._styles=this._model.styles();i=this._super(e,t);i.width=this.calcLayoutWidth(e);i.height=this.calcLayoutHeight(t);i.height+=r.marginVert();i.width+=r.marginHorz();this._measuredWidth=i.width;this._measuredHeight=i.height;return i},_doDrawBorders:function(e,t){this._drawDebugBorder(e,t)},_doRender:function(e,t){}});var ChartTextItemElement=defineClass("ChartTextItemElement",ChartItemElement,{init:function(e){this._super(e,"textItemView");this.addElement(this._textView=new ChartStylesTextView(e))},_doMeasure:function(e,t){var i=this.model(),r=this._styles,n=i.text(),s=this._textView,a={};s.updateStyles(r);s.setText(n);a=s.measure(e,t);a.width+=r.paddingHorz();a.height+=r.paddingVert();return a},_doRender:function(e,t){var i,r,n=this.model(),s=n.styles(),a=this._textView;i=s.fill();r=s.border();if(i||r){e.drawRectI(i,r,t)}s.deflatePaddings(t);a.setRect(t);s.inflatePaddings(t)}});var ChartItemPaneElement=defineClass("ChartItemPaneElement",ChartElement,{init:function(e,t){this._super(e,t);this.addElement(this._rootView=new LayerElement(e,"rootView"));this.addElement(this._feedbackView=new LayerElement(e,"feedbackView"));this._childMap={};this._layout=ChartItemPaneLayout.Default;this._layoutNeeded=true},itemViewCount:function(){return this._rootView.childCount()},getItemView:function(e){return this._childMap[e.$_hash]},itemViewAt:function(e){return this._rootView.getChild(e)},addFeedback:function(e){if(e&&!this._feedbackView.contains(e)){this._feedbackView.addElement(e);return e}return null},removeFeedback:function(e){return this._feedback.removeElement(e)},invalidateLayout:function(){if(this.$_invalidateLayout()){this.container().invalidateLayout()}},getLower:function(e){},getUpper:function(e){},getRight:function(e){},getLeft:function(e){},getFirst:function(){},getLast:function(){},isLayer:function(){return true},setModel:function(e){if(e!==this._model){this._super(e);this._layoutNeeded=true}},layout:function(){var e=this.getClientRect();this._rootView.setRect(e);this._feedbackView.setRect(e);this._super(e)},measure:function(e,t){var i,r=this._styles=this._model.styles();i=this._super(e,t);i.height+=r.marginVert();i.width+=r.marginHorz();this._measuredWidth=i.width;this._measuredHeight=i.height;return i},_doMeasure:function(e,t,i){this._measureChildren(e,t,i);return this._layout.measure(this,e,t)},_doLayout:function(e){if(this._layoutNeeded){this._layout.layout(this,e);this._layoutNeeded=false}},_doRender:function(e,t){var i,r,n,s=this.model(),a=s.styles();if(this.designTime()){if(s.empty()){i="this._getEmptyText()";if(i){t.inflate(-4,-4);e.drawTextRect(null,SolidBrush.GRAY,i,t,TextAlign.LEFT,TextLayout.TOP);t.inflate(4,4)}e.drawRectI(ChartElement.EMPTY_BACKGROUND,null,t)}else{r=a.fill();if(r){e.drawRectI(r,null,t)}}}else{r=a.fill();n=a.border();if(r||n){e.drawRectI(r,n,t)}}},_doDrawBorders:function(e,t){this._drawDebugBorder(e,t)},_addItemView:function(e){return this._rootView.addElement(e)},_clearItemViews:function(){this._rootView.clear()},_hideAllItems:function(){this._rootView.hideAll()},$_clearViews:function(){this._clearItemViews();this._childMap={}},$_invalidateLayout:function(){if(!this._layoutNeeded){this._layoutNeeded=true;return true}return false},_measureChildren:function(e,t,i){var r,n,s,a,o,l=this.chartView(),r=l.delegate(),h=this.model();this._hideAllItems();n=h.getLayoutItems();for(s=0,cnt=n.length;s<cnt;s++){a=n[s];if(a&&a.visible()){o=this._childMap[a.$_hash];if(!o){o=r.getItemView(this._dom,a);if(o){this._childMap[a.$_hash]=o;this._addItemView(o)}}if(o){o.setVisible(a.visible());o.setModel(a);o.measure(e,t,i)}}}}});var ChartLegendPaneElement=defineClass("ChartLegendPaneElement",ChartItemPaneElement,{init:function(e,t){this._super(e,t);this._itemSizes=[]}});var ChartItemPaneLayout=defineClass("ChartItemPaneLayout",null,{init:function(){this._super()},measure:function(e,t,i){var r,n,s,a,o,l,h,u,c=e,d=c.model(),f=c.$_items=this.$_arrangeItems(d,d.getLayoutItems()),_=c._styles,g=0,m=0;for(r=0,n=f.length;r<n;r++){s=f[r];a=c.getItemView(s);o=a._measuredHeight;l=a._measuredWidth;u=s.$_anchor;if(u){switch(s.anchorAlign()){case ChartItemAnchorAlign.LEFT:case ChartItemAnchorAlign.RIGHT:o+=PercentSize.getFixedI(s.top())+PercentSize.getFixedI(s.bottom());m=Math.max(o,m);l+=PercentSize.getFixedI(s.left())+PercentSize.getFixedI(s.right());g+=l;break;case ChartItemAnchorAlign.TOP:case ChartItemAnchorAlign.BOTTOM:o+=PercentSize.getFixedI(s.top())+PercentSize.getFixedI(s.bottom());m+=o;l+=PercentSize.getFixedI(s.left())+PercentSize.getFixedI(s.right());g=Math.max(l,m);break;case ChartItemAnchorAlign.CENTER:default:o+=PercentSize.getFixedI(s.top())+PercentSize.getFixedI(s.bottom());m=Math.max(o,m);l+=PercentSize.getFixedI(s.left())+PercentSize.getFixedI(s.right());g=Math.max(l,m);break}}else{o+=PercentSize.getFixedI(s.top())+PercentSize.getFixedI(s.bottom());o+=this.$_calcVert(c,a,s);m=Math.max(o,m);l+=PercentSize.getFixedI(s.left())+PercentSize.getFixedI(s.right());g=Math.max(l,m)+this.$_calcHorz(s)}}m+=_.paddingVert();g+=_.paddingHorz();return{width:g,height:m}},layout:function(e,t,i){if(!e.model())debugger;var r,n,s,a,o,l,h,u,c,d,f,_,g,m,p,v,y,S,C,w=e,x=w.model(),b=w.$_items,I=x.styles(),T=I.deflatePaddings(t);for(r=0,cnt=b.length;r<cnt;r++){s=b[r];n=w.getItemView(s);a=T.x;o=T.y;l=n.measuredWidth();h=n.measuredHeight();c=h;if(!isNaN(n._anchoredHeight)){c=h+n._anchoredHeight}else{c=h}d=s.left();f=s.right();if(d&&f){a+=m=d.getSize(T.width);l=T.width-f.getSize(T.width)-m}else if(d){a+=d.getSize(T.width)}else if(f){a=T.right()-l-f.getSize(T.width)}else{a+=(T.width-l)/2}_=s.top();g=s.bottom();if(_&&g){o+=m=_.getSize(T.height);h=T.height-g.getSize(T.height)-m}else if(_){o+=_.getSize(T.height)}else if(g){o=T.bottom()-c-g.getSize(T.height)}else{o+=(T.height-c)/2}n.setBoundsI(a,o,Math.max(0,l),Math.max(0,h));n.layout(i);y=s.$_items;if(y){for(v=y.length;v--;){S=y[v];C=w.getItemView(S);switch(S.anchorAlign()){case ChartItemAnchorAlign.LEFT:this.$_alignAnchorLeft(n,C,s,S);break;case ChartItemAnchorAlign.RIGHT:this.$_alignAnchorRight(n,C,s,S);break;case ChartItemAnchorAlign.TOP:this.$_alignAnchorTop(n,C,s,S);break;case ChartItemAnchorAlign.BOTTOM:this.$_alignAnchorBottom(n,C,s,S);break;case ChartItemAnchorAlign.CENTER:this.$_alignAnchorCenter(n,C,s,S);default:break}}}}},$_arrangeItems:function(e,t){var i,r,n,s,t=t.slice(),a=[];for(i=t.length;i--;){r=t[i];if(r&&r.visible()){r.$_items=null;r.$_anchor=n=r.anchor&&e.itemById(r.anchor());if(!n){a.push(r);t.splice(i,1)}}else{t.splice(i,1)}}if(t.length>0){for(i=t.length;i--;){r=t[i];n=r.$_anchor;s=n.$_items;if(!s){s=n.$_items=[]}s.push(r)}}return a},$_calcVert:function(e,t,i){var r,n,s,a,o=t._measuredHeight,l=i.$_items,h=0;if(l){for(r=l.length;r--;){n=l[r];if(n&&n.visible()&&!n.floating()){s=e.getItemView(n);switch(n.anchorAlign()){case ChartItemAnchorAlign.BOTTOM:case ChartItemAnchorAlign.TOP:h=Math.max(h,s._measuredHeight);break;case ChartItemAnchorAlign.CENTER:if(s._measuredHeight>o){h=Math.max(h,s._measuredHeight-o)}break}}}}return t._anchoredHeight=h},$_calcHorz:function(e){var t=0;return t},$_alignAnchorLeft:function(e,t,i,r){},$_alignAnchorRight:function(e,t,i,r){},$_alignAnchorTop:function(e,t,i,r){},$_alignAnchorBottom:function(e,t,i,r){var n,s,a,o=e.bounds(),l=t._measuredWidth,h=t._measuredHeight;n=o.x;s=r.left();a=r.right();if(s&&a){}else if(s){}else if(a){n=o.right()-l-a.getSize(o.width)}else{n+=(o.width-l)/2}t.setBoundsI(n,o.bottom(),l,h)},$_alignAnchorCenter:function(e,t,i,r){}},null,function(e){e.Default=new e});var PositionItemPaneBase=defineClass("PositionItemPaneBase",ChartElement,{init:function(e,t,i){this._super(e,t);this._position=i;this._itemSizes=[]},position:function(){return this._position},isVertical:function(){return this._position==ChartItemPosition.LEFT||this._position==ChartItemPosition.RIGHT}});var SeriesLegendPaneElement=defineClass("SeriesLegendPaneElement",ChartElement,{init:function(e,t,i){this._super(e,t);this._vertical=i;this._itemSizes=[];this._legendViews=[];this._legendCount=0;this._scalerViews=[];this._scalerCount=0},legendViewCount:function(){return this._legendCount},scalerViewCount:function(){return this._scalerCount},getLegendView:function(e){return this._legendViews[e]},findLegendView:function(e){for(var t=0;t<this._legendCount;t++){if(this._legendViews[t].model()===e){return this._legendViews[t]}}},getScalerView:function(e){return this._scalerViews[e]},findScalerView:function(e){for(var t=0;t<this._scalerCount;t++){if(this._scalerViews[t].model()===e){return this._scalerViews[t]}}},_doMeasure:function(e,t){var i,r,n,s,a,o,l,h,u,c=this._legendViews,d=this._scalerViews,f=this._vertical,_={};h=this.chartView().delegate();this.$_setLegends(this.model().legends());_.width=f?0:e;_.height=f?t:0;this._itemSizes.length=0;i=this._legendCount;if(i>0){for(r=0;r<i;r++){n=c[r];s=h.getSeriesLegendRenderer(n.model());n.setRenderer(s);a=h.getSeriesLegendItemRenderer(n.model());n.setItemRenderer(a);u=n.measure(e,t);if(f){o=u.width;this._itemSizes.push(o);_.width+=o}else{l=u.height;this._itemSizes.push(l);_.height+=l}}}i=this._scalerCount;if(i>0){for(r=0;r<i;r++){n=d[r];u=n.measure(e,t);if(f){o=u.width;this._itemSizes.push(o);_.width+=o}else{l=u.height;this._itemSizes.push(l);_.height+=l}}}return _},_doLayout:function(){var e,t,i,r,n=this._legendCount,s=this.height(),a=this.width(),o=this._itemSizes;if((n=this._legendCount)>0){if(this._vertical){t=0;for(e=0;e<n;e++){r=this.getLegendView(e);i=Math.max(0,(s-r._measuredHeight)/2);r.setBounds(t,i,o[e],r._measuredHeight);t+=o[e]}}else{i=0;for(e=0;e<n;e++){r=this.getLegendView(e);t=Math.max(0,(a-r._measuredWidth)/2);r.setBoundsI(t,i,r._measuredWidth,o[e]);i+=o[e]}}for(e=0;e<n;e++){r=this.getLegendView(e);r.layout()}}if((n=this._scalerCount)>0){if(this._vertical){t=0;for(e=0;e<n;e++){r=this.getScalerView(e);i=Math.max(0,(s-r._measuredHeight)/2);r.setBounds(t,i,o[e],r._measuredHeight);t+=o[e]}}else{i=0;for(e=0;e<n;e++){r=this.getScalerView(e);t=Math.max(0,(a-r._measuredWidth)/2);r.setBoundsI(t,i,r._measuredWidth,o[e]);i+=o[e]}}for(e=0;e<n;e++){r=this.getScalerView(e);r.layout()}}},_doDraw:function(e){},$_setLegends:function(e){var t,i,r,n,s,a,o=this._dom,l=this._legendViews,h=this._scalerViews;this.clear();this._legendCount=this._scalerCount=0;if(e&&(n=e.length)>0){for(r=0;r<n;r++){s=e[r];if(s instanceof ChartColorScaler){if(h.length<=this._scalerCount){a=new ChartColorScalerElement(o);h.push(a)}a=h[this._scalerCount++];a.setModel(s);this.addElement(a)}else{if(l.length<=this._legendCount){a=new SeriesLegendElement(o);l.push(a)}a=l[this._legendCount++];a.setModel(s);this.addElement(a)}}}}});var SimpleChartShapeRenderer=function(){};SimpleChartShapeRenderer.Default=new SimpleChartShapeRenderer;SimpleChartShapeRenderer.prototype.render=function(e,t,i,r){var n=e.fill(),s=e.border();switch(t){case"diamond":i.drawDiamond(n,s,r);break;case"square":if(s){i.drawBounds(n,s,r.x,r.y,r.width-1,r.height-1)}else{i.drawRect(n,s,r)}break;case"triangle":i.drawTriangle(n,s,r);break;case"cross":i.drawCross(n,s,r);break;default:i.drawCircle(n,s,r.x+r.width/2,r.y+r.height/2,Math.min(r.width/2,r.height/2));break}};SimpleChartShapeRenderer.prototype.hitTest=function(e,t,i,r){return i>=t.x&&i<t.right()&&r>=t.y&&r<t.bottom()};var ChartObjectRenderer=defineClass("ChartObjectRenderer",null,{init:function(e){this._super();this._initProps(e)},setAnimations:function(e){this._animations=e;return this},getRunProperty:function(e,t,i){return this._animations.getProperty(e,t,i)},getRunStyle:function(e,t,i){return this._animations.getStyle(e,t,i)},animating:function(e){return this._animations.animating(e)},propAnimating:function(e,t){return this._animations.propAnimating(e,t)},_doRenderStackTotalLabel:function(e,t,i){}});var ChartItemRenderer=defineClass("ChartItemRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},createView:function(e){return new ChartItemContentView},measure:function(e,t,i){return this._doMeasure(e,t,i)},render:function(e,t,i){this._doRender(e,t,i)},_doMeasure:function(e,t,i,r){},_doRender:function(e,t,i){}});var PolarGridRenderer=defineClass("PolarGridRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},render:function(e,t,i){if(e.isFront())return;var r,n,s,a,o,l,h,u,c,d,f,_,g,m,p,v,y,S,C,w,x,b=e.chartView().model(),I=e.sources();for(a=0;a<I.length;a++){if(I[a]instanceof PolarAxis){r=I[a];break}}if(!r)return;o=b.plotArea();h=o.circular();l=o.polarSize();u=i.x+i.width/2;c=i.y+i.height/2;d=Math.min(i.width,i.height)/2;for(a=0;a<I.length;a++){n=I[a];s=n.grid();_=s.styles();m=_.fills();if(m&&(v=m.count())>0){if(n.getTickPosition){C=n.getTickNumber();for(S=0;S<C;S++){p=m.getItem(S%v);w=n.getTickPosition(S);if(h){if(S>1){t.drawArcSector2(p,null,u,c,d*x*l,d*x*l,d*w*l,d*w*l,0,Math.PI*2,0)}else{t.drawCircle(p,null,u,c,d*w*l)}}else{}x=w}}}g=_.line();if(g){if(n instanceof PolarAxis){y=n.getTickPoints(i,l);for(S=0,C=y.length;S<C;S++){t.drawLine(g,u,c,y[S].x,y[S].y)}}else if(n.getTickPosition){C=n.getTickNumber();for(S=0;S<C;S++){w=n.getTickPosition(S);if(h){t.drawCircle(null,g,u,c,d*w*l)}else{y=r.getTickPoints(i,l*w);t.drawPolygon(null,g,y)}}}}}}});var ChartPlotAreaRenderer=defineClass("ChartPlotAreaRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},measure:function(e,t,i){return{width:t,height:i}},render:function(e,t,i){var r=e.model(),n=r.styles(),s=n.fill(),a=n.border();if(s||a){i=i.clone();t.drawRectI(s,a,i)}}},null,function(e){e.Default=new e});var PolarPlotAreaRenderer=defineClass("PolarPlotAreaRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},measure:function(e,t,i){return{width:t,height:i}},render:function(e,t,i){}},null,function(e){e.Default=new e});var ChartLegendItemRenderer=defineClass("ChartLegendItemRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},measure:function(e,t,i){var r=e.model(),n=e._styles,s=r.source(),a=s.displayName(),o=e.container().measureText(n.font(),a);return{width:o,height:n.fontSize()}},render:function(e,t,i){var r=e.model(),n=r.source(),s=e._styles,a=n.displayName(),o=s.font(),l=s.fill(),h=new Rectangle(i.x,i.y,i.width,i.height);s.deflateMargins(h);if(l){t.drawRectI(l,null,h)}if(r._followLegendStyle){l=viewStyles.color()}else{l=r.active()?s.color():s.inactiveColor()}if(l){s.deflatePaddings(h);t.drawTextRect(o,l,a,h,s.textAlignment(),s.lineAlignment())}}},null,function(e){e.Default=new e});var ChartLegendMarkerRenderer=defineClass("ChartLegendMarkerRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},measure:function(e,t,i){var r=e.parent().model(),n=this._doMeasureSource(e,r.source(),t,i),s=e._styles;n.width+=s.paddingHorz();n.height+=s.paddingVert();return n},render:function(e,t,i){var r,n,s,a=e.parent().model();styles=e._styles,s=i.clone();styles.deflatePaddings(s);this._doDrawSource(e,a.source(),t,s)},_doMeasureSource:function(e,t,i,r){var n=e.model();return{width:n.width(),height:n.height()}},_doDrawSource:function(e,t,i,r){var n=t.styles(),s=e._styles,a=n.border();if(t._followLegendStyle){fill=s.fill()}else{fill=e.active()?n.fill():n.inactiveFill()}if(fill||a){i.drawRectI(fill,a,r)}}},null,function(e){e.Default=new e});var LineSeriesLegendMarkerRenderer=defineClass("LineSeriesLegendMarkerRenderer",ChartLegendMarkerRenderer,{init:function(e){this._super(e)},_doMeasureSource:function(e,t,i,r){var n=e.model();return{width:n.width()*1.3,height:n.height()}},_doDrawSource:function(e,t,i,r){var n,s,a,o,l=t.styles(),h=l.shapeSize(),u=l.shapeSize();s=l.line();if(s){n=r.y+r.height/2;i.drawLineI(s,r.x,n,r.right(),n)}a=ShapeDrawing.getShape(this,l.shapeName())||ShapeDrawing.getShape(this,"circle");r.x+=(r.width-h)/2;r.y+=(r.height-u)/2;r.width=h;r.height=u;a.draw(i,r,l.fill(),l.border(),0)}});var AreaSeriesLegendMarkerRenderer=defineClass("AreaSeriesLegendMarkerRenderer",ChartLegendMarkerRenderer,{init:function(e){this._super(e)},_doMeasureSource:function(e,t,i,r){var n=e.model();return{width:n.width(),height:n.height()}},_doDrawSource:function(e,t,i,r){var n,s,a,o=t.styles();n=[{x:r.x,y:r.y+r.height/3},{x:r.x+r.width/3,y:r.y+r.height/2},{x:r.right(),y:r.y}];pts2=[{x:r.x,y:r.bottom()},{x:r.right(),y:r.bottom()}];s=o.line();if(s){i.drawCurve(s,n)}a=o.fill();if(a){i.drawCurvedStraightRange(a,null,n,pts2)}}});var BubbleSeriesLegendMarkerRenderer=defineClass("BubbleSeriesLegendMarkerRenderer",ChartLegendMarkerRenderer,{init:function(e){this._super(e)},_doMeasureSource:function(e,t,i,r){var n=e.model();return{width:n.width(),height:n.height()}},_doDrawSource:function(e,t,i,r){var n,s,a,o=t.styles();s=o.fill();a=o.border();if(s||a){n=_floor(Math.min(r.width,r.height)/2);i.drawCircle(s,a,_floor(r.x+r.width/2),_floor(r.y+r.height/2),n)}}});var BoxplotSeriesLegendMarkerRenderer=defineClass("BoxplotSeriesLegendMarkerRenderer",ChartLegendMarkerRenderer,{init:function(e){this._super(e)},_doDrawSource:function(e,t,i,r){var n=t.styles(),s=n.findChild("upper"),a=n.findChild("lower"),o=n.border(),l=r.height/2,h=r.y+l,u;u=s.fill();if(u){i.drawBounds(u,null,r.x,r.y,r.width,l)}u=a.fill();if(u){i.drawBounds(u,null,r.x,h,r.width,l)}if(o){i.drawLine(o,r.x,h,r.right(),h);i.drawRectI(null,o,r)}}});var CandlestickSeriesLegendMarkerRenderer=defineClass("CandlestickSeriesLegendMarkerRenderer",ChartLegendMarkerRenderer,{init:function(e){this._super(e)},_doDrawSource:function(e,t,i,r){var n=t.styles(),s=n.fill(),a=n.border(),o=r.x+r.width/2,l=r.height/4;if(a){i.drawLineI(a,o,r.y,o,r.bottom())}if(a||s){i.drawBoundsI(s,a,r.x,r.y+l,r.width,l*2)}}});var OhlcSeriesLegendMarkerRenderer=defineClass("OhlcSeriesLegendMarkerRenderer",ChartLegendMarkerRenderer,{init:function(e){this._super(e)},_doDrawSource:function(e,t,i,r){var n=t.styles(),s=n.border(),a=r.x+r.width/2,o=r.height*2/9;if(s){i.drawLineI(s,a,r.y,a,r.bottom());i.drawLineI(s,r.x+1,r.y+o,a,r.y+o);i.drawLineI(s,a,r.bottom()-o,r.right()-2,r.bottom()-o)}}});var HeatmapSeriesLegendMarkerRenderer=defineClass("HeatmapSeriesLegendMarkerRenderer",ChartLegendMarkerRenderer,{init:function(e){this._super(e)},_doDrawSource:function(e,t,i,r){var n=t.styles(),s=e.active()?n.fill():n.inactiveFill(),a=n.line();if(a||s){i.drawRectI(s,a,r)}}});var TreemapSeriesLegendMarkerRenderer=defineClass("TreemapSeriesLegendMarkerRenderer",ChartLegendMarkerRenderer,{init:function(e){this._super(e)},_doDrawSource:function(e,t,i,r){var n=t.styles(),s=e.active()?n.fill():n.inactiveFill(),a=n.line();if(a||s){i.drawRectI(s,a,r)}}});var ChartLegendRenderer=defineClass("ChartLegendRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},measure:function(e,t,i,r){},render:function(e,t,i){var r=e.model(),n=e._styles,s=n.fill(),a=n.border();if(s||a){i=i.clone();t.applyShadow(n.shadow()).drawRoundRectI(s,a,i,n.borderRadius(),n.borderRadius(),n.borderRadius(),n.borderRadius())}}},null,function(e){e.Default=new e});var SeriesLegendItemRenderer=defineClass("SeriesLegendItemRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},measure:function(e,t,i){var r=e.model(),n=r.styles(),s=r.displayName(),a=e.container().measureText(n.font(),s);return{width:a,height:n.fontSize()}},render:function(e,t,i){var r=e.model(),n=r.styles(),s=r.displayName(),a=n.font(),o=n.color(),l=i.clone();t.drawTextRect(a,o,s,l)}},null,function(e){e.Default=new e});var SeriesLegendMarkerRenderer=defineClass("SeriesLegendMarkerRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},measure:function(e,t,i){var r=e.model(),n=r.styles(),s={width:r.width(),height:r.height()};s.width+=n.spaceHorz();s.height+=n.spaceVert();return s},render:function(e,t,i){var r,n=e.parent().model(),s=n.source().styles(),a=e.active()?s.fill():s.inactiveFill(),o=s.border();if(a||o){r=i.clone();e._styles.deflateSpaces(r);t.drawRect(a,o,r)}}});var SeriesLegendRenderer=defineClass("SeriesLegendRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},measure:function(e,t,i,r){},render:function(e,t,i){var r=e.model(),n=r.styles(),s=n.fill(),a=n.border();if(s||a){i=i.clone();n.deflateMargins(i);t.drawRoundRectI(s,a,i,n.borderRadius(),n.borderRadius(),n.borderRadius(),n.borderRadius())}}},null,function(e){e.Default=new e});var ISimpleChart=function(){function e(){}function t(){}function i(){}function r(){}function n(){}function s(){}function a(){}};var ChartletItem=defineClass("ChartletItem",ChartItem,{init:function(e,t){this._super(e,t);this._defaultStyles=new ChartStyles(this,"default");this._axisStyles=new ChartStyles(this,"axis");this._seriesStyles=new ChartStyles(this,"series");this.setWidth(120);this.setHeight(120)},owner:function(){return this._owner},isPolar:function(){return this._series&&this._series.isPolar()},plotArea:function(){return this._plotArea},xAxis:function(){return this._xAxis},yAxis:function(){return this._yAxis},getSeries:function(){return this._series},seriesDirty:function(){return true},name:function(){return this._name},series:function(){return this._series},hasData:function(e){return this._owner._dataProvider.hasData(e)},getData:function(e){return this._owner._dataProvider.getData(e)},_styleSheetRegion:function(){return"chartlet"},assign:function(e){this._super(e);if(e){if(e.xAxis){this._xAxis.setVisible(true);this._xAxis.assign(e.xAxis)}if(e.yAxis){this._yAxis.setVisible(true);this._yAxis.assign(e.yAxis)}if(e.plotArea){this._plotArea.assign(e.plotArea)}if(e.series){this._series.assign(e.series)}}},setStyleSheet:function(e){var t=this._defaultStyles.$_spd(null,e.default()),i=this._axisStyles.$_spd(e.axis(),t),r=this._axisStyles.$_spd(e.series(),t);this._super(t,e);this._series.setStyleSheet(r,e);this._xAxis&&this._xAxis.setStyleSheet(i,e);this._yAxis&&this._yAxis.setStyleSheet(i,e)},_initContent:function(){this._xAxis=this._createXAxis();if(this._xAxis){this._xAxis.setVisible(false)}this._yAxis=this._createYAxis();if(this._yAxis){this._yAxis.setVisible(false)}this._series=this._createSeries();this._plotArea=new ChartPlotArea(this)},_createXAxis:function(){return new CategorizedAxis("simpleChartCategorizedAxis")},_createYAxis:function(){return new LinearAxis("simpleChartLinearAxis")},_createSeries:function(){throwAbstractError()}},{createItem:function(e,t){var i=null,r=t.series;if(r){switch(r.type){case"pie":i=new PieChartletItem(e);break;case"line":i=new LineChartletItem(e);break;case"area":i=new AreaChartletItem(e);break;case"bar":i=new BarChartletItem(e);break;case"column":default:i=new ColumnChartletItem(e);break}}return i}});var ColumnChartletItem=defineClass("ColumnChartletItem",ChartletItem,{init:function(e,t){this._super(e,t)},_createSeries:function(){return new ColumnSeries}});var BarChartletItem=defineClass("BarChartletItem",ChartletItem,{init:function(e,t){this._super(e,t)},_createSeries:function(){return new BarSeries}});var LineChartletItem=defineClass("LineChartletItem",ChartletItem,{init:function(e,t){this._super(e,t)},_createSeries:function(){return new LineSeries}});var AreaChartletItem=defineClass("AreaChartletItem",ChartletItem,{init:function(e,t){this._super(e,t)},_createSeries:function(){return new AreaSeries}});var PieChartletItem=defineClass("PieChartletItem",ChartletItem,{init:function(e,t){this._super(e,t)},_createXAxis:function(){return new PolarAxis},_createSeries:function(){return new PieSeries}});var ChartletItemRenderer=defineClass("ChartletItemRenderer",ChartItemRenderer,{init:function(){this._super()},_doMeasure:function(e,t,i,r){},_doRender:function(e,t,i,r){}});var SimpleChartRootLayer=defineClass("SimpleChartRootLayer",LayerElement,{init:function(e){this._super(e,"simpleChartRootLayer")},delegate:function(){return this._parent.chartView().delegate()},model:function(){return this._parent.model()}});var SimpleChartView=defineClass("SimpleChartView",ChartItemElement,{init:function(e){this._super(e,"simpleChartView");this.addElement(this._rootElement=new SimpleChartRootLayer(e));this._rootElement.addElement(this._plotAreaView=new ChartPlotAreaView(e,this));this._rootElement.addElement(this._xAxisView=new ChartAxisView(e));this._rootElement.addElement(this._yAxisView=new ChartAxisView(e));this._loading=false;this._measuredWidth=UNDEFINED;this._measuredHeight=UNDEFINED;this.saveData={}},model:null,setModel:function(e){if(e!=this._model){if(this._model){this._model.onItemChanged=null}this._model=e;if(this._model){this._model.onItemChanged=this._modelChanged.bind(this)}this.invalidateLayout();if(this._model){this._loading=true;this._model.setStyleSheet(this.chartView().styleSheet()||ChartStyleSheet.Default)}}},plotAreaView:function(){return this._plotAreaView},xAxisView:function(){return this._xAxisView},yAxisView:function(){return this._yAxisView},measuredWidth:function(){return this._measuredWidth},measuredHeight:function(){return this._measuredHeight},animations:function(){return this.chartView().animations()},_doMeasure:function(e,t){var i=new Rectangle,r=SimpleChartViewLayout.getDefault();i.width=this.calcLayoutWidth(e);i.height=this.calcLayoutHeight(t);this._styles.deflatePaddings(i);r.measure(this,i);this._measuredWidth=i.width;this._measuredHeight=i.height;return{width:i.width,height:i.height}},_doLayout:function(){var e=this.getClientRect(),t=SimpleChartViewLayout.getDefault();this._styles.deflatePaddings(e);t.layout(this,e,this._loading)},_doRender:function(e,t){if(this._model){var i=this._model.styles(),r=i.fill(),n=i.border();if(r||n){e.drawRectI(r,n,t)}}},_modelChanged:function(){this.invalidateLayout()},_stylesChanged:function(){this.invalidateLayout()}});var SimpleChartViewLayout=defineClass("SimpleChartViewLayout",null,{init:function(){this._super();this._plotRect=new Rectangle;this._xAxisRect=new Rectangle;this._yAxisRect=new Rectangle;this._resized=false;this._seriesDirty=false},measure:function(e,t){this._doUpdateItems(e,t);this._doMeasureItems(e,t)},layout:function(e,t,i){this._doLayoutItems(e,t)},$_updateAxis:function(e,t,i,r,n){if(t.updateSimple(e.model(),this._resized||this._seriesDirty)){if(t instanceof CartesianAxis){var s;if(i){s=Math.min(n.height,n.width)*.8}else{s=r==ChartAxisOrientation.VERTICAL?n.height:n.width}t.refreshTicks(e.model(),r,s)}else{t.refreshTicks(e.model(),r,0)}}},_doUpdateItems:function(e,t){var i=e.model();this._seriesDirty=i.series().updateSimple(i);i.series().connectToAxis(i.xAxis(),i.yAxis());if(i.xAxis()){this.$_updateAxis(e,i.xAxis(),i.isPolar(),ChartAxisOrientation.HORIZONTAL,t)}if(i.yAxis()){this.$_updateAxis(e,i.yAxis(),i.isPolar(),ChartAxisOrientation.VERTICAL,t)}},_doMeasureItems:function(e,t){var i,r,n,s,a,o=e.model(),l=e.chartView().delegate(),h={};if(o.isPolar()){r=o.yAxis();i=e.yAxisView();if(r&&r.visible()){i.setVisible(true);i.setModel(r);i.setRenderer(l.getAxisRenderer(r));h=i.measure(t.width,t.height)}else{i.setVisible(false)}r=o.xAxis();i=e.xAxisView();if(r&&r.visible()){i.setVisible(true);i.setModel(r);i.setRenderer(l.getAxisRenderer(r))}else{i.setVisible(false)}}else{r=o.yAxis();i=e.yAxisView();if(r&&r.visible()){i.setVisible(true);i.setModel(r);i.setRenderer(l.getAxisRenderer(r));h=i.measure(t.width,t.height);n=i.model().location();if(n==ChartAxisLocation.OPPOSITE){this._yAxisRect.set(t.right-h.width,t.y,h.width,h.height);t.rightBy(-h.width)}else{this._yAxisRect.set(t.x,t.y,h.width,h.height);t.leftBy(h.width)}}else{i.setVisible(false)}r=o.xAxis();i=e.xAxisView();if(r&&r.visible()){i.setVisible(true);i.setModel(r);i.setRenderer(l.getAxisRenderer(r));h=i.measure(t.width,t.height);n=i.model().location();if(n==ChartAxisLocation.OPPOSITE){this._xAxisRect.set(t.x,t.top,h.width,h.height);t.topBy(h.height)}else{this._xAxisRect.set(t.x,t.bottom()-h.height,h.width,h.height);t.bottomBy(-h.height)}}else{i.setVisible(false)}}a=o.plotArea();s=e.plotAreaView();if(a&&a.visible()){s.$_setSimple(true);s.setVisible(true);s.setModel(a);s.setRenderer(l.getPlotAreaRenderer(o.isPolar()));this._plotRect.set(t.x,t.y,t.width,t.height);if(e.yAxisView().visible()){this._yAxisRect.setBottom(this._plotRect.bottom())}}else{s.setVisible(false)}},_doLayoutItems:function(e,t){var i,r,n,s,a,o=e.model();if(o.isPolar()){i=e.xAxisView();if(i.visible()){i.setRect(t);i.layout()}i=e.yAxisView();if(i.visible()){n=t.width/2;s=t.height/2;a=t.height/2*.8;i.setBounds(n-100,s-a,100,a);i.layout()}}else{i=e.xAxisView();if(i.visible()){i.setRect(this._xAxisRect);i.layout()}i=e.yAxisView();if(i.visible()){i.setRect(this._yAxisRect);i.layout()}}r=e.plotAreaView();if(r.visible()){r.setRect(this._plotRect);r.layout()}}},{$$_default:null,getDefault:function(){return SimpleChartViewLayout.$$_default||(SimpleChartViewLayout.$$_default=new SimpleChartViewLayout)}});var ChartAxisTitleRenderer=defineClass("ChartAxisTitleRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},measure:function(e,t,i){var r,n={width:t,height:i},s=e.model(),a=e.updateStyles(s.styles()),o=s.text(),l=0;if(o){r=e.container().measureTextRect(a.font(),o,0,0,t,i,a.textAlignment(),a.lineAlignment(),a.textWrap());e.$_textHeight=r.height}if(e.vertical()){l+=r?r.height:0;l+=a.spaceHorz();n.width=l}else{l+=r?r.height:0;l+=a.spaceVert();n.height=l}return n},render:function(e,t,i){var r,n,s,a=e.model(),o=e._styles,l=o.font(),h=o.fill(),u=o.textShadow(),c=o.textWrap(),d=a.text(),f=i.clone();if(h){t.drawRectI(h,null,f)}if(d){o.deflateSpaces(f);h=o.color();if(e.vertical()){r=(e.location()==ChartAxisLocation.OPPOSITE?90:-90)/_RADIAN;switch(c){case TextWrap.NORMAL:case TextWrap.EXPLICIT:t.drawTextRectExplicitASh(l,h,u,d,f,r);break;default:t.drawTextRectASh(l,h,u,d,f,r);break}}else{n=o.textAlignment();s=o.lineAlignment();switch(c){case TextWrap.NORMAL:case TextWrap.EXPLICIT:t.drawTextRectExplicitSh(l,h,u,d,f,n,s);break;default:t.drawTextRectSh(l,h,u,d,f,n,s);break}}}}},null,function(e){e.Default=new e});var AxisIndicatorRenderer=defineClass("AxisIndicatorRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},measure:function(e,t,i){},render:function(e,t,i){var r=e.axisView().model();this._doRender(e,r,t,i)}});var AxisIndicatorLineRenderer=defineClass("AxisIndicatorLineRenderer",AxisIndicatorRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i,r){var n,s,a,o,l,h,u,c,d=e.textView(),f=e.model(),_=f.label(),g=_.offsetX(),m=_.offsetY(),p=e.updateStyles(f.styles()),v=p.line(),y=f.label().getText();e._textView.setVisible(false);d.setVisible(y);if(d.visible()){d.setText(y);d.setStyles(_.styles());n=d.measureI(1e5,1e5)}if(y){o=p.color();l=p.font();h=p.shadow();u=p.textWrap()}c=t.isContinuous()?f.value():f.category();if(t.isVertical()){r.bottomBy(-_floor(r.y+t.getPositionOf(c)*r.height));a=r.bottom();if(v){i.drawLineI(v,r.x,a,r.right(),a)}if(d.visible()){switch(_.position()){case ChartLabelPosition.FAR:s=r.right()-n.width-g;break;case ChartLabelPosition.CENTER:s=r.x+(r.width-n.width)/2+g;break;case ChartLabelPosition.NEAR:case ChartLabelPosition.DEFAULT:default:s=r.x+g;break}switch(_.verticalAlign()){case ChartVerticalAlign.BOTTOM:break;case ChartVerticalAlign.MIDDLE:a-=n.height/2;break;case ChartVerticalAlign.DEFAULT:case ChartVerticalAlign.TOP:a-=n.height;break;default:}d.setBoundsI(s,a,n.width,n.height)}}else{s=r.x+_floor(r.x+t.getPositionOf(c)*r.width);if(v){i.drawLineI(v,s,r.y,s,r.bottom())}if(d.visible()){switch(_.position()){case ChartLabelPosition.NEAR:a=r.bottom()-n.height-m;break;case ChartLabelPosition.CENTER:a=r.y+(r.height-n.height)/2+m;break;case ChartLabelPosition.FAR:case ChartLabelPosition.DEFAULT:default:a=r.y+m;break}switch(_.horizontalAlign()){case ChartHorizontalAlign.LEFT:s+=g;break;case ChartHorizontalAlign.CENTER:s=n.width-g;break;case ChartHorizontalAlign.DEFAULT:case ChartHorizontalAlign.RIGHT:break;default:}d.setBoundsI(s,a,n.width,n.height)}}}});var AxisIndicatorBandRenderer=defineClass("AxisIndicatorBandRenderer",AxisIndicatorRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i,r){var n,s,a,o,l,h,u,c,d,f,_,g=e.textView(),m=e.model(),t=m.axis(),p=m.label(),v=p.offsetX(),y=p.offsetY(),S=e.updateStyles(m.styles()),C=t.isContinuous(),w=C?m.getEndValue(t):m.getEndCategory(t)||m.getEndValue(t),x=C?m.getStartValue(t):m.getStartCategory(t)||m.getStartValue(t),b=r.height,I=r.width,T=p.getText(),A=S.fill();g.setVisible(T);if(g.visible()){g.setText(T);g.setStyles(p.styles());_=g.measureI(1e5,1e5)}if(t.isVertical()){n=r.bottom();s=n-t.getPositionOf(x)*b;a=n-t.getPositionOf(w)*b;if(A){i.drawBounds(A,null,r.x,s,I,a-s)}if(f=S.borderTop()){i.drawHLineI(f,_int(a),r.x,r.right())}if(f=S.borderBottom()){i.drawHLineI(f,_int(s),r.x,r.right())}if(g.visible()){switch(p.position()){case ChartLabelPosition.FAR:l=r.right()-_.width-v;break;case ChartLabelPosition.CENTER:l=r.x+(r.width-_.width)/2+v;break;case ChartLabelPosition.NEAR:case ChartLabelPosition.DEFAULT:default:l=r.x+v;break}switch(p.verticalAlign()){case ChartVerticalAlign.BOTTOM:s-=_.height+y;break;case ChartVerticalAlign.TOP:s=a+y;break;case ChartVerticalAlign.DEFAULT:case ChartVerticalAlign.MIDDLE:s=a+(s-a-_.height)/2-y;break;default:}g.setBoundsI(l,s,_.width,_.height)}}else{if(t instanceof CategorizedAxis){if(x instanceof ChartAxisCategory){l=t.getCategoryPosition(x.index)}else{u=parseInt(x);_=parseFloat(x)-u;l=t.getCategoryPosition(u)+t.getCategoryWidth(u)*_}if(w instanceof ChartAxisCategory){h=t.getCategoryPosition(w.index)+t.getCategoryWidth(w.index)}else{c=parseInt(w);_=parseFloat(w)-c;h=t.getCategoryPosition(c)+t.getCategoryWidth(c)*_}}else{l=t.getPositionOf(x);h=t.getPositionOf(w)}o=r.x;u=l;c=h;l=o+Math.min(u,c)*I;h=o+Math.max(u,c)*I;if(A){i.drawBounds(A,null,l,r.y,h-l,b)}if(f=S.borderLeft()){i.drawVLineI(f,_int(l),r.y,r.bottom())}if(f=S.borderRight()){i.drawVLineI(f,_int(h),r.y,r.bottom())}if(g.visible()){switch(p.position()){case ChartLabelPosition.FAR:s=r.y+y;break;case ChartLabelPosition.CENTER:s=r.y+(r.height-_.height)/2+y;break;case ChartLabelPosition.NEAR:case ChartLabelPosition.DEFAULT:default:s=r.bottom()-_.height-y;break}switch(p.horizontalAlign()){case ChartHorizontalAlign.LEFT:l+=v;break;case ChartHorizontalAlign.RIGHT:l=h-_.width-v;break;case ChartHorizontalAlign.DEFAULT:case ChartHorizontalAlign.CENTER:l+=(h-l-_.width)/2+v;break;default:}g.setBoundsI(l,s,_.width,_.height)}}}});var ChartGridRenderer=defineClass("ChartGridRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},render:function(e,t,i){if(e.isFront()){this.renderFront(e,t,i)}else{this.renderBack(e,t,i)}},renderBack:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f,_,g,m,p,v,y,S,C,w=e.sources(),x=i.width,b=i.height;for(r=0;r<w.length;r++){a=w[r];o=a.grid();if(o.visible()){u=a._styles;l=o._styles;h=a.getGridTickCount()+1;if(h>1){S=a.reversed();C=a.orientation()==ChartAxisOrientation.VERTICAL;if(S){v=i.y;p=i.right()}else{v=i.bottom();p=i.x}g=l.fills();if(g&&(m=g.count())>0){y=i.clone();for(s=0;s<h-2;s++){if(C){y.y=v-a.getGridPosition(s+1)*b;y.setBottom(v-a.getGridPosition(s)*b)}else{y.x=p+a.getGridPosition(s)*x;y.setRight(p+a.getGridPosition(s+1)*x)}_=g.getItem(s%m);_&&t.drawRectI(_,null,y)}}h-=o.hideEndLine()?1:0;for(n=1;n<h-1;n++){if(!a.isContinuous()||a.baseValue()==a.measuredMinimum()||a.getTick(n)!=a.baseValue()){u=l;f=u.line();if(f){if(C){d=v-_floor(a.getGridPosition(n)*b);t.drawLineI(f,i.x,d,i.right(),d)}else{c=p+(S?-1:1)*_floor(a.getGridPosition(n)*x);t.drawLineI(f,c,i.y,c,i.bottom())}}}}}}}},renderFront:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f,_,g,m=e.sources(),p=i.bottom(),v=i.x;for(r=0;r<m.length;r++){s=m[r];a=s.grid();if(s instanceof LinearAxis&&a.visible()){l=a.baseStyles();c=l.line();if(c){d=s.orientation()==ChartAxisOrientation.VERTICAL;o=s.getGridTickCount();_=s.baseValue();g=s.measuredMinimum;f=false;if(_!=g&&o>1){for(n=1;n<o;n++){if(s.getTick(n)==_){if(d){u=p-_floor(s.getGridPosition(n)*i.height);t.drawLineI(c,i.x,u,i.right(),u)}else{h=v+_floor(s.getGridPosition(n)*i.width);t.drawLineI(c,h,i.y,h,i.bottom())}f=true}}}if(!f){if(d){u=p-_floor(s.getPositionOf(_)*i.height);t.drawLineI(c,i.x,u,i.right(),u)}else{h=v+_floor(s.getPositionOf(_)*i.width);t.drawLineI(c,h,i.y,h,i.bottom())}}}}}}});var AxisRenderer=defineClass("AxisRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},createTickView:function(e){return new ChartAxisLabelView(e)},measure:function(e,t,i){var r,n,s,a,o,l,h={width:t,height:i},u=e.model(),c=u.tick(),d=u.styles(),f=c.visible(),_=c.styles(),g=e._ticksView,m=e.container();e._measuredTicks=u.getTickList();g._prepareTicks();if(c.visible()){s=this._doMeasureTicksView(u,g,t,i);if(u.isVertical()){h.width=s.width+c.lineLength()+1}else{h.height=s.height+c.lineLength()+1}}else{if(u.isVertical()){h.width=0}else{h.height=0}}return h},locateFocusView:function(e,t,i,r,n){if(t){t.setBoundsI(r,n,t.width(),t.height())}},_doMeasureTicksView:function(e,t,i){},_doLayoutTicksView:function(e){}});var CategorizedAxisRenderer=defineClass("CategorizedAxisRenderer",AxisRenderer,{init:function(e){this._super(e)},render:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f=e.model(),_=f.tick(),g=f.reversed(),m=f.styles(),p=_.styles(),v=p.lineWidth(),y=e._scrollBar,S=(y.visible()?e.isVertical()?y.width():y.height():0)+v,C=_.lineLength(),w=e._measuredTicks,x=Math.max(1,_.labelInterval()),b=e._ticksView,I=w?w.length:0,T=_.visible()&&I>0;b.setVisible(T);r=i.width;n=i.height;s=m.line();h=p.line();d=p.font();if(f.orientation()===ChartAxisOrientation.HORIZONTAL){if(f.location()===ChartAxisLocation.BETWEEN){}else if(f.location()===ChartAxisLocation.OPPOSITE){o=i.bottom();if(s){t.drawLineI(s,i.x,o,i.right(),o)}if(T){if(h){t.drawLineI(h,i.x,o,i.x,o-C);for(l=0;l<I;l++){a=i.x+_floor((f.getCategoryPosition(l)+f.getCategoryWidth(l))*r);t.drawLineI(h,a,o,a,o-C)}}}}else{o=i.y;if(s){t.drawLineI(s,i.x,o,i.right(),o)}if(T){if(h){o+=S;t.drawLineI(h,i.x,o,i.x,o+C);for(l=0;l<I;l++){a=i.x+_floor((f.getCategoryPosition(l)+f.getCategoryWidth(l))*r);t.drawLineI(h,a,o,a,o+C)}o-=S}o+=C+1;b.setBounds(i.x,o,i.width,i.height-o)}}}else{if(f.location()===ChartAxisLocation.BETWEEN){u=i.x;xOrg2=i.right();c=i.bottom();if(s){t.drawLineI(s,u,i.y,u,c+1);t.drawLineI(s,xOrg2,i.y,xOrg2,c+1)}if(h){t.drawLineI(h,u,i.y,u+C,i.y);t.drawLineI(h,xOrg2-C,i.y,xOrg2,i.y);for(l=0;l<I;l++){o=i.y+_floor((f.getCategoryPosition(l)+f.getCategoryWidth(l))*n);t.drawLineI(h,u,o,u+C,o);t.drawLineI(h,xOrg2-C,o,xOrg2,o)}}r=C+1;b.setBounds(i.x+r,i.y,i.width-r,i.height)}else if(f.location()===ChartAxisLocation.OPPOSITE){u=i.x;c=i.bottom();if(s){t.drawLineI(s,u,i.y,u,c+1)}if(h){t.drawLineI(h,u,i.y,u+C,i.y);for(l=0;l<I;l++){o=i.y+_floor((f.getCategoryPosition(l)+f.getCategoryWidth(l))*n);t.drawLineI(h,u,o,u+C,o)}}r=C+1;b.setBounds(i.x+r,i.y,i.width-r,i.height)}else{c=i.bottom();a=i.right();if(s){t.drawLineI(s,a,i.y,a,c+1)}if(T){if(h){a-=S;t.drawLineI(h,a,i.y,a-C,i.y);for(l=0;l<I;l++){o=i.y+_floor((f.getCategoryPosition(l)+f.getCategoryWidth(l))*n);t.drawLineI(h,a,o,a-C,o)}a+=S}b.setBounds(0,0,i.width-C-1,i.height)}}}T&&this._doLayoutTicksView(f,e,b)},_doMeasureTicksView:function(e,t,i,r){var n,s,a,o,l,h,u,c=e.isVertical(),d={width:0,height:0},f=t.width(),h=[],_=t.tickViews();if(_&&(n=_.length)>0){o=l=0;h=new Array(n);u=new Array(n);for(s=0;s<n;s++){a=_[s];if(c){a.measure(i,r)}else{a.measure(i/n,r)}h[s]=a._measuredWidth;u[s]=a._measuredHeight;o=Math.max(o,h[s]);l=Math.max(l,u[s])}d.width=o;d.height=l;d.widths=h;d.heights=u}return d},_doLayoutTicksView:function(e,t,i){var r,n,s,a,o,l,h,u,c=t._scrollBar,d=i.width(),f=i.height(),_=i._tickViews,g=i.tickCount(),m=e.visibleCount(),p=e.startIndex(),v=e.tick().styles().lineWidth(),y=Math.max(1,e.tick().labelInterval()),S=e.reversed();if(e.isVertical()){if(e.location()===ChartAxisLocation.OPPOSITE){for(r=0;r<m;r+=y){n=_[r];a=e.getCategoryPosition(r)+e.getCategoryWidth(r)/2;if(!S){a=1-a}a*=f;n.setBounds(0,a-n._measuredHeight/2,n._measuredWidth,n._measuredHeight)}}else{for(r=0;r<m;r+=y){n=_[r];a=e.getCategoryPosition(r+p)+e.getCategoryWidth(r+p)/2;if(!S){a=1-a}a*=f;s=d-n._measuredWidth;s-=(c.visible()?c.width():0)+v;n.setBounds(s,a-n._measuredHeight/2,n._measuredWidth,n._measuredHeight)}}}else{if(e.location()===ChartAxisLocation.OPPOSITE){}else{a=(c.visible()?c.height():0)+v;for(r=0;r<m;r+=y){n=_[r];n.setVisible(true);s=(e.getCategoryPosition(r+p)+e.getCategoryWidth(r+p)/2)*d;l=n._measuredWidth;h=n._measuredHeight;o=n._angle;if(o!=0){s-=l/2;u=_cos(o)*(l/2+n._contentHeight/2);s+=_sin(o)>=0?u:-u;n.setBounds(s,a,l,h)}else{n.setBounds(s-l/2,a,l,h)}}}}for(r=m;r<g;r++){_[r].setVisible(false)}},locateFocusView:function(e,t,i,r,n){console.log("### FOCUS");if(!t){return}var s,a,o,l,h,u=e.model(),c=u.tick(),d=c.getSelectStyles();t.updateStyles(d);h=c.lineLength();if(u.orientation()===ChartAxisOrientation.HORIZONTAL){s=u.getCategoryIndexAt(i.width,r);u.setFocusedIndex(s);a=e.getTickView(s);i=a.boundsBy(e);t.setText(a.text());l=t.measure(i.width,i.height);t.setBoundsI(i.x+(l.width-a.width())/2,i.y,l.width,l.height)}else{if(u.location()===ChartAxisLocation.OPPOSITE){}else{}}}});var LinearAxisRenderer=defineClass("LinearAxisRenderer",AxisRenderer,{init:function(e){this._super(e)},render:function(e,t,i){var r,n,s,a,o,l,h,u=i.height,c=i.width,d=e.model(),h=d.tick(),f=d.styles(),_=h.styles(),g=_.line(),m=h.visible(),p=_.font(),v=h.lineLength(),y=d.getTickList(),S=e._ticksView,C=e._titleSize,w=y?y.length:0;S.setVisible(m);if(m&&w>0){if(d.orientation()===ChartAxisOrientation.VERTICAL){if(d.location()===ChartAxisLocation.OPPOSITE){l=i.bottom();o=i.x;a=f.line();if(a){t.drawLineI(a,o,l,o,i.y)}if(g){for(r=0;r<w;r++){h=y[r];s=l-_floor(d.getPositionOf(h)*u);t.drawLineI(g,o,s,o+v,s)}}c=v+1;S.setBounds(o+c,i.y,i.width-c,i.height)}else{l=i.bottom();o=i.right();a=f.line();if(a){t.drawLineI(a,o,l,o,i.y)}if(g){for(r=0;r<w;r++){h=y[r];s=l-_floor(d.getPositionOf(h)*u);t.drawLineI(g,o,s,o-v,s)}}S.setBounds(C,i.y,i.width-v-C-1,i.height)}}else{if(d.location()===ChartAxisLocation.OPPOSITE){}else{if(d.reversed()){o=i.right();l=i.y;a=f.line();if(a){t.drawLineI(a,i.x,l,o,l)}if(g){for(r=0;r<w;r++){h=y[r];n=o-_floor(d.getPositionOf(h)*c);t.drawLineI(g,n,l,n,l+v)}}S.setBounds(i.x,v+1,i.width,i.height-v-1)}else{o=i.x;l=i.y;a=f.line();if(a){t.drawLineI(a,o,l,i.right(),l)}if(g){for(r=0;r<w;r++){h=y[r];n=o+_floor(d.getPositionOf(h)*c);t.drawLineI(g,n,l,n,l+v)}}S.setBounds(i.x,v+1,i.width,i.height-v-1)}}}this._doLayoutTicksView(d,S)}},_doMeasureTicksView:function(e,t,i,r){var n,s,a,o,l,h={width:0,height:0},u=t.tickViews();if(u&&(n=u.length)>0){if(e.isVertical()){o=0;for(s=0;s<n;s++){a=u[s];a.measure(1e4,1e4);o=Math.max(o,a._measuredWidth)}h.width=o}else{l=0;for(s=0;s<n;s++){a=u[s];a.measure(1e4,1e4);l=Math.max(l,a._measuredHeight)}h.height=l}}return h},_doLayoutTicksView:function(e,t){var i,n,s,a,o,l,h=t.bottom(),u=t.width(),c=t.height(),d=t._tickViews,f=t.tickCount(),_=Math.max(1,e.tick().labelInterval());if(e.isVertical()){if(e.location()===ChartAxisLocation.OPPOSITE){for(i=0;i<f;i+=_){n=d[i];a=h-e.getPositionOf(n._tick)*c;n.setBounds(0,a-n._measuredHeight/2,n._measuredWidth,n._measuredHeight)}}else{for(i=0;i<f;i+=_){n=d[i];a=h-e.getPositionOf(n._tick)*c;n.setBounds(u-n._measuredWidth,a-n._measuredHeight/2,n._measuredWidth,n._measuredHeight)}}}else{if(e.location()===ChartAxisLocation.OPPOSITE){}else{if(e.reversed()){for(i=0;i<f;i+=_){n=d[i];s=u-e.getPositionOf(n._tick)*u;n.setBounds(s-n._measuredWidth/2,0,n._measuredWidth,n._measuredHeight)}}else{for(i=0;i<f;i+=_){n=d[i];s=e.getPositionOf(n._tick)*u;o=n._measuredWidth;n.setBounds(s-o/2,0,o,n._measuredHeight)}if(f>1){i=f-1;n=d[i];s=n.x();o=n.width();if(s+o>u){s=Math.max(0,u-o);s=Math.max(s,d[i-1].right())}n.setX(s);if(n.right()>r.right()){n.setVisible(false)}}}}}},locateFocusView:function(e,t,i,r,n){if(!t){return}var s,a,o,l,h,u=e.model(),c=u.tick(),d=u.styles(),f=c.styles();t.updateStyles(f,u,null,"crossed");l=c.lineLength();h=null;if(u.orientation()===ChartAxisOrientation.VERTICAL){s=u.getValueAt(1-n/i.height);a=h?h.format(s):s;t.setText(a);o=t.measure(i.width,i.height);if(u.location()===ChartAxisLocation.OPPOSITE){t.setBounds(i.x+l+1,n-o.height/2,o.width,o.height)}else{t.setBounds(i.right()-l-1-o.width,n-o.height/2,o.width,o.height)}}else{if(u.location()===ChartAxisLocation.OPPOSITE){}else{}}}});var DateTimeAxisRenderer=defineClass("DateTimeAxisRenderer",AxisRenderer,{init:function(e){this._super(e)},render:function(e,t,i){var r,n,s,a,o,l=e.model(),h=l.styles(),u=l.tick(),c=u.styles(),d=u.lineLength(),f=l.getTickList(),_=e._ticksView,g=f?f.length:0,m=u.visible()&&g>0;_.setVisible(m);o=i.y;r=h.line();if(r){t.drawLineI(r,i.x,o,i.right(),o)}if(m){r=c.line();if(l.orientation()===ChartAxisOrientation.VERTICAL){for(n=0;n<g;n++){o=i.y+l.getPositionOf(f[n])*i.height>>>0;t.drawLineI(r,i.right()-d,o,i.right(),o)}}else{for(n=0;n<g;n++){a=i.x+l.getPositionOf(f[n])*i.width>>>0;t.drawLine(r,a,0,a,d)}o+=d+1;_.setBounds(i.x,o,i.width,i.height-o)}}m&&this._doLayoutTicksView(l,_)},createTickView:function(e){return new ChartDateTimeAxisLabelView(e)},_doMeasureTicksView:function(e,t,i,r){var n,s,a,o,l,h,u,c={width:0,height:0},h=[],d=t.tickViews();if(d&&(n=d.length)>0){o=l=0;h=new Array(n);u=new Array(n);for(s=0;s<n;s++){a=d[s];a.measure(1e4,1e4);h[s]=a._measuredWidth;u[s]=a._measuredHeight;o=Math.max(o,h[s]);l=Math.max(l,u[s])}c.width=o;c.height=l;c.widths=h;c.heights=u}return c},_doLayoutTicksView:function(e,t){var i,n,s,a,o,l=t.width(),h=t.height(),u=t._tickViews,c=t.tickCount(),d=e.tick(),f=Math.max(1,d.labelInterval()),_=e.reversed();if(e.isVertical()){if(e.location()===ChartAxisLocation.OPPOSITE){for(i=0;i<c;i+=f){n=u[i];o=e.getCategoryPosition(i)+e.getCategoryWidth(i)/2;if(!_){o=1-o}o*=h;n.setBounds(0,o-n._measuredHeight/2,n._measuredWidth,n._measuredHeight)}}else{for(i=0;i<c;i+=f){n=u[i];o=e.getCategoryPosition(i)+e.getCategoryWidth(i)/2;if(!_){o=1-o}o*=h;n.setBounds(l-n._measuredWidth,o-n._measuredHeight/2,n._measuredWidth,n._measuredHeight)}}}else{if(e.location()===ChartAxisLocation.OPPOSITE){}else{for(i=0;i<c;i+=f){n=u[i];n.setVisible(true);a=r.x+e.getPositionOf(n._tick)*r.width>>>0;n.setBounds(a-n._measuredWidth/2,0,n._measuredWidth,n._measuredHeight)}if(c>1){i=0;n=u[i];s=u[i+1];n.setVisible(n.right()<=s.x()+d.minTickSpace());i=c-1;n=u[i];a=n.x();tw=n.width();if(a+tw>l){a=Math.max(0,l-tw);a=Math.max(a,u[i-1].right()+d.minTickSpace())}n.setX(a);if(n.right()>r.right()){n.setVisible(false)}}}}}});var PolarAxisRenderer=defineClass("PolarAxisRenderer",AxisRenderer,{init:function(e){this._super(e)},measure:function(e,t,i){this._super(e,t,i);return{width:t,height:i}},render:function(e,t,i){var r,n,s,a,o,l=e.model(),h=l.tick(),u=h.visible(),c=l.styles(),d=e.chartView().model().plotArea(),f=d.circular(),_=d.polarSize();a=i.x+i.width/2;o=i.y+i.height/2;s=Math.min(i.width,i.height)*_;n=l.getTickPoints(i,_);r=c.line();if(r){if(f){t.drawCircle(null,r,a,o,s/2)}else{t.drawPolygon(null,r,n)}}u&&this._doLayoutTicksView(l,e._ticksView,n,i)},_doMeasureTicksView:function(e,t,i,r){var n,s=t.tickViews(),a=s?s.length:0;if(a>0){for(n=0;n<a;n++){view=s[n];view.measure(i,r)}}return{width:i,height:r}},_doLayoutTicksView:function(e,t,i,r){var n,s,a,o,l,h,u=r.width/2,c=r.x+u,d=r.y+r.height/2,f=e.styles(),_=e.tick().offset(),g=view.chartView().model().plotArea().polarSize(),m=Math.max(1,e.tick().labelInterval()),p=t._tickViews,v=t.tickCount();for(n=0;n<v;n+=m){s=p[n];l=s._measuredWidth;h=s._measuredHeight;a=i[n].x;o=i[n].y;if(a>=c-3&&a<=c+4){a-=l/2;if(o<d){o-=h+_}else{o+=_}}else if(a<c){a-=l+_;if(a<=0){a=i[n].x;s.measure(a-r.x-_,r.height);l=s._measuredWidth;h=s._measuredHeight;a-=l+_}if(o>=d-3&&o<=d+3){o-=h/2}else if(o<d){o-=h}else{}}else{a+=_;if(a+l>=r.right()){a=i[n].x;s.measure(r.right()-a-_,r.height);l=s._measuredWidth;h=s._measuredHeight;a+=_}if(o>=d-3&&o<=d+3){o-=h/2}else if(o<d){o-=h}else{}}s.setBoundsI(a,o,l,h)}}});var CartesianSeriesLabelLayout=defineClass("CartesianSeriesLabelLayout",null,{init:function(){this._super();this._rect=new Rectangle},layoutVert2:function(e,t,i,r,n,s,a){var o,l,h,u,c,d,f,_,g,m,p,v,y=i.$_model,S=t.height(),C=this._rect,w=i._styles,x=w.textRotation()/_RADIAN;u=t.y();c=u+S;if(s!==undefined){u+=S*s;if(a!==undefined){c+=S*a}else{c=u}}l=t._dataPoint.x;i.setLabel(t,r);o=i.measure(t.width(),1e4);d=C.width=Math.max(o.width,t.width());f=C.height=o.height;_=y.position();m=y.verticalAlign();g=y.horizontalAlign();if(_==ChartLabelPosition.DEFAULT){_=n!==UNDEFINED&&n?n:ChartLabelPosition.CENTER}if(m==ChartVerticalAlign.DEFAULT){switch(_){case ChartLabelPosition.FAR:m=ChartVerticalAlign.TOP;break;case ChartLabelPosition.NEAR:m=ChartVerticalAlign.BOTTOM;break;default:m=ChartVerticalAlign.MIDDLE;break}}if(g==ChartHorizontalAlign.DEFAULT){g=ChartHorizontalAlign.CENTER}p=y.offsetX();v=y.offsetY();switch(_){case ChartLabelPosition.FAR:h=u;break;case ChartLabelPosition.NEAR:h=c;break;case ChartLabelPosition.CENTER:default:h=u+t.height()/2;break}if(m==ChartVerticalAlign.TOP){h-=f}else if(m==ChartVerticalAlign.MIDDLE){h-=f/2}C.y=h-v;if(C.y<0){}else if(C.bottom()>e.height){C.y=e.height-f}if(g==ChartHorizontalAlign.RIGHT){l-=d}else if(g==ChartHorizontalAlign.CENTER){l-=d/2}C.x=l+p;C.x+=e.x;C.y+=e.y;if(x!=0){}return C},layoutHorz2:function(e,t,i,r,n,s){var a,o,l,h,u,c,d,f,_,g,m,p,v=i.$_model,y=t.width(),S=this._rect,C=i._styles;if(s){h=t.x()+y;u=t.x()}else{h=t.x();u=t.x()+y}l=t._dataPoint.y;i.setLabel(t,r);i.setRotation(C.textRotation()/_RADIAN);a=i.measure(1e4,1e4);c=S.width=a.width;d=S.height=a.height;f=v.position();if(f==ChartLabelPosition.DEFAULT){f=n!==UNDEFINED&&n?n:ChartLabelPosition.CENTER}_=v.horizontalAlign();if(_==ChartHorizontalAlign.DEFAULT){switch(f){case ChartLabelPosition.FAR:_=s?ChartHorizontalAlign.LEFT:ChartHorizontalAlign.RIGHT;break;case ChartLabelPosition.NEAR:_=s?ChartHorizontalAlign.RIGHT:ChartHorizontalAlign.LEFT;break;default:_=ChartHorizontalAlign.CENTER;break}}g=v.verticalAlign();if(g==ChartVerticalAlign.DEFAULT){g=ChartVerticalAlign.MIDDLE}m=v.offsetX()*(s?-1:1);p=v.offsetY();switch(f){case ChartLabelPosition.FAR:o=u;break;case ChartLabelPosition.NEAR:o=h;break;case ChartLabelPosition.CENTER:default:o=Math.min(h,u)+y/2;break}if(_==ChartHorizontalAlign.LEFT){o-=c}else if(_==ChartHorizontalAlign.CENTER){o-=c/2}S.x=o+m;if(S.x<0){}else if(S.right()>e.width){}if(g==ChartVerticalAlign.BOTTOM){l-=d}else if(g==ChartVerticalAlign.MIDDLE){l-=d/2}S.y=l-p;S.x+=e.x;S.y+=e.y;return S}},null,function(e){e.Default=new e});var PieSeriesLabelArranger=defineClass("PieSeriesLabelArranger",null,{init:function(e){this._super(e)},arrange:function(e,t,i,r){if(r<=0)return;var n,s,a,o,l,h,u,c,d,f,_,g,m,p,v,y,S=[],C=[],w=0,x=t.height;o=i[0];w=C[0]=S[0]=o.y();l=o.y()+o.height();for(n=1;n<r;n++){o=i[n];h=o.y();d=o.height();u=h-l;if(u<0){c=-u;if(w>0){for(s=n-1;s>=0;s--){if(C[s]>=c){for(a=n-1;a>=s;a--){S[a]-=c}C[s]-=c;w-=c;c=0}else if(C[s]>0){for(a=n-1;a>=s;a--){S[a]-=C[s]}c-=C[s];w-=C[s];C[s]=0}if(c<=0){break}}}h+=c;u=0}w+=u;C[n]=u;S[n]=h;l=h+d}f=t.width/2;_=t.height/2;for(n=0;n<r;n++){o=i[n];g=o.x();m=o.y();h=Math.min(S[n],t.bottom()-o.height());u=o.y()-h;if(u!=0){p=o.x()-f;v=o.y()-_;y=Math.sqrt(Math.max(0,p*p+v*v-(v-u)*(v-u)));if(o.x()<f){o.setX(Math.min(o.x(),-y+f))}else{o.setX(Math.max(o.x(),y+f))}}o.setY(h);o.itemView()._dataPoint2.x+=o.x()-g;o.itemView()._dataPoint2.y+=o.y()-m}}},null,function(e){e.Default=new e});var ChartSeriesRenderer=defineClass("ChartSeriesRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},canStacked:function(){return false},getRunProperty:function(e,t,i,r){return this._animations.getProperty(e,t,i,r)},getItemRunProperty:function(e,t,i,r){var n=e._series;return this._animations.getProperty(n.itemAnisTarget(),t,i,r)},getItemRunStyle:function(e,t,i,r){var n=e._series;return this._animations.getStyle(n.itemAnisTarget(),t,i,r)},measure:function(e,t,i){return this._doMeasure(e,t,i)},layoutItems:function(e){if(this._checkAxes(e)){var t=[];for(var i=0,r=e.itemCount();i<r;i++){var n=e.getItem(i);if(n){t.push(n)}}var s=new Rectangle(0,0,e.width(),e.height());this._doLayoutItems(e,t,s)}},render:function(e,t,i){this._doRender(e,t,i)},renderItemSeparators:function(e,t,i){if(!this.animating(e.model())){this._doRenderItemSeparators(e,t,i)}},renderStackLabel:function(e,t,i){if(!this.animating(e.model())){this._doRenderStackTotalLabel(e,t,i)}},renderText:function(e,t,i){if(!this.animating(e.model())){this._doRenderText(e,t,i)}},layoutLabels:function(e,t,i){if(this._checkAxes(e)){if(t){if(!this.animating(e.model())){this._doLayoutLabels(e,t,i)}else{for(var r=t.length;r--;){t[r].setVisible(false)}}}}},_checkAxes:function(e){var t=e.model();if(t instanceof RadialSeries){return t.xAxisObj()}return t&&t.xAxisObj()&&t.yAxisObj()},_doMeasure:function(e,t,i){return{width:t,height:i}},_doRender:function(e,t,i){},_doRenderItemSeparators:function(e,t,i){},_doRenderText:function(e,t,i){},_doLayoutLabels:function(e,t,i){for(var r=t.length;r--;){t[r].setVisible(false)}},_doLayoutItems:function(e,t,i){},_getItemLabel:function(e,t,i,r,n){var s=i.getText(e,n),a;if(!_defined(s)){s=r}a=t.scaleNumber(r);if(_isString(s)){return s.replace(r,a)}else{return a}},animating:function(e){return this._super(e)||e&&this._animations.animating(e.itemAnisTarget())}});var ChartSeriesItemRenderer=defineClass("ChartSeriesItemRenderer",ChartObjectRenderer,{init:function(e){this._super(e)},seriesView:function(e){do{if(e instanceof ChartSeriesView)return e;e=e.parent()}while(e);return null},getItemRunProperty:function(e,t,i){var r=e._series;return this._animations.getProperty(r.itemAnisTarget(),t,i)},getItemRunStyle:function(e,t,i){var r=e._series;return this._animations.getStyle(r.itemAnisTarget(),t,i)},getFill:function(e,t){var i=this.getItemRunStyle(e,"fill",t.fill());return i&&i.setBrightness(this.getItemRunStyle(e,"fillBrightness",t.fillBrightness()))},measure:function(e,t,i){return this._doMaesure(model,t,i)},render:function(e,t,i){this._doRender(e,t,i)}});var ColumnSeriesRenderer=defineClass("ColumnSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},canStacked:function(){return true},_doRender:function(e,t,i){},_doRenderItemSeparators:function(e,t,i){var r,n,s,a,o,l,h,u=e.model(),c=u.group();if(c&&(c.stackMode()==ChartStackMode.FILL||c.stackMode()==ChartStackMode.NORMAL)){s=e.itemCount();a=c.separatorStyles();o=a.line();if(o){for(n=0;n<s;n++){r=e.getItem(n);if(r.separator()){l=r.x();h=r.negative()?r.y()+r.height()-1:r.y();t.drawLineI(o,l,h,l+r.width(),h)}}}}},_doRenderStackTotalLabel:function(e,t,i){var r,n,s,a,o,l,h,u,c,d=e.model(),f=d.group();if(f&&(f.stackMode()==ChartStackMode.FILL||f.stackMode()==ChartStackMode.NORMAL)){stackLabel=f.stackLabel();if(stackLabel.visible()){s=e.itemCount();a=f.stackLabel().styles();lastIndex=f._series.length-1;if(f._series.length>0&&f._series[lastIndex]==d){var _=f.getUpperValues(0);for(n=0;n<s;n++){text=_[n];r=e.getItem(n);l=r.x();h=r.negative()?r.y()+r.height()+4:r.y()-5;u=e.container().measureTextRect(a.font(),text,0,9,i.width,i.height,a.textAlignment(),a.lineAlignment(),a.textWrap());t.drawTextBoundsSh(a.font(),a.color(),null,text,l,h,r.width(),0,"center")}}}}},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f=e.model(),_=f.label(),g=f.yAxisObj(),m=g.baseValue(),p=f.group(),v=p&&p.stackMode(),y=f.valueField(),S=CartesianSeriesLabelLayout.Default,C=e.itemCount();for(r=0;r<C;r++){s=e.getItem(r);n=s.model();a=t[r];a.setVisible(n&&_.visible());if(a.visible()){c=_.prepareItemStyles(s);a.setStyles(c);a.$_model=_;o=n.getProp(y);if(v==null||v!=ChartStackMode.NONE&&o!==0){l=this._getItemLabel(n,c,_,o);h=o<m?ChartLabelPosition.NEAR:ChartLabelPosition.FAR;u=S.layoutVert2(i,s,a,l,h);a.setRect(u)}else{a.setVisible(false)}}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1){return}var n,s,a,o,l,h,u,c,d,f,_,g,m,p,v,y,S,C,w,x,b,I,T,A,E,R=e.model(),L=R.xAxisObj(),P=R.yAxisObj(),N=R.valueField(),k=R.group(),D=k&&k.stackMode(),O=R.clusterInfo,M=i.height,V=i.width,F=P.baseValue(),B=i.bottom(),$=P.getPositionOf(F);for(n=0;n<r;n++){p=t[n];c=p.model();p.setVisible(c!=null);if(!p.visible()){continue}p._styles=R.prepareItemStyles(p);m=R.itemWidth();l=c.getProp(N);l=this.getItemRunProperty(c,"value",l);S=F;d=L.getDisplayWidth(c);C=L.getDisplayPosition(c)+d*(O?O.position:0);f=d*(O?O.width:1);if(!k){}else if(D==ChartStackMode.NONE||D==ChartStackMode.OVERLAP){}else if(D==ChartStackMode.NORMAL){v=l<F;y=0;for(s=0;s<R.visibleIndex();s++){a=k.getVisibleItem(s);if(a instanceof ColumnSeries){o=a.getItem(n+e._startIndex);h=o.getProp(a.valueField());h=this.getItemRunProperty(o,"value",h);if((h-F)*(l-F)>=0){S+=h;y++}}}l+=S;e.setItemIndex(p,n,k,y,v);m*=k?k.itemWidth():1}else{T=A=0;for(s=0;s<k.visibleCount();s++){a=k.getVisibleItem(s);if(a instanceof ColumnSeries){o=a.getItem(n+e._startIndex);h=o.getProp(a.valueField());if(h>=F){T+=h}else{A+=h}}}if(l>=F){E=(k.maxValue()-k.minValue())/T}else{E=(k.maxValue()-k.minValue())/A}v=l<F;y=0;for(s=0;s<R.visibleIndex();s++){a=k.getVisibleItem(s);if(a instanceof ColumnSeries){o=a.getItem(n+e._startIndex);h=o.getProp(a.valueField());h=this.getItemRunProperty(o,"value",h);if((h-F)*(l-F)>=0){S+=h;y++}}}l=(l+S)*E;S*=E;e.setItemIndex(p,n,k,y,v);m*=k?k.itemWidth():1}g=i.x+1;w=C+=f/2;w=g+w*V;f=m*f;C-=f/2;C=g+C*V;f=f*V;_=P.getPositionOf(S);x=P.getPositionOf(l);if(l>=F){I=$;if(S>F){I=$+(_-$)}I=B-I*M;x=b=B-x*M;b=I-(I-b)}else{b=$;if(S<F){b=$+(_-$)}b=B-b*M;x=I=B-x*M;I=b+(I-b)}C=_floor(C);x=_floor(x);w=_floor(w);b=_floor(b);I=_floor(I);f=_floor(f);p.setDataPoint(w,x);p.setBounds(C,b,f,Math.abs(I-b)+1)}}});var ColumnSeriesItemRenderer=defineClass("ColumnSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r=e.series(),n=e.model(),s=n.getProp(r.valueField()),a=r.getItemStyles(n,e._styles,e._hovered),o=this.getFill(n,a),l=a.border(),h=a.borderRadius();if(o){h=Math.min(i.width,i.height,h);t.applyShadow(a.shadow()).drawRoundRectI(o,null,i,h,h,0,0)}if(l){if(h>0){}else{if(s>=0){t.drawLinesI(l,i.x,i.bottom()-1,i.x,i.y,i.right()-1,i.y,i.right()-1,i.bottom()-1)}else{t.drawLinesI(l,i.x,i.y,i.x,i.bottom()-1,i.right()-1,i.bottom()-1,i.right()-1,i.x)}}}}});var ColumnRangeSeriesRenderer=defineClass("ColumnRangeSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d=e.model(),f=d.label(),_=d.highField(),g=d.lowField(),m=CartesianSeriesLabelLayout.Default,p=e.itemCount();for(r=0;r<p;r++){s=e.getItem(r);n=s.model();a=t[r*2];o=t[r*2+1];u=n&&f.visible();a.setVisible(u);o.setVisible(u);if(u){styles=f.prepareItemStyles(s);a.setStyles(styles);o.setStyles(styles);o.$_model=a.$_model=f;l=n.getProp(_);c=this._getItemLabel(n,styles,f,l,"high");h=m.layoutVert2(i,s,a,c,ChartLabelPosition.FAR);a.setRect(h);l=n.getProp(g);c=this._getItemLabel(n,styles,f,l,"low");h=m.layoutVert2(i,s,o,c,ChartLabelPosition.NEAR);o.setRect(h)}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1)return;var n,s,a,o,l,h,u,c,d,f,_,g,m=e.model(),p=m.styles(),v=m.xAxisObj(),y=m.yAxisObj(),S=m.lowField(),C=m.highField(),w=m.clusterInfo,x=i.height,b=i.width;for(n=0;n<r;n++){s=t[n];o=s.model();s.setVisible(o!=null);if(s.visible()){s._styles=m.prepareItemStyles(s);a=m.itemWidth();l=v.getDisplayWidth(o);u=v.getDisplayPosition(o)+l*w.position;h=l*w.width;c=u+=h/2;c=i.x+_floor(c*b);h=a*h;u-=h/2;u=i.x+_floor(u*b);h=_floor(h*b);g=o.getProp(C);g=this.getItemRunProperty(o,"value",g);d=y.getPositionOf(g);g=o.getProp(S);g=this.getItemRunProperty(o,"value",g);f=y.getPositionOf(g);d=i.bottom()-_floor(d*x);f=i.bottom()-_floor(f*x);_=f-d;s.setDataPoint(c,d,c,f);s.setBounds(u,d+(_-_),h,_)}}}});var ColumnRangeSeriesItemRenderer=defineClass("ColumnRangeSeriesItemRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r=e._model,n=e._styles,s=n.fill(),a=n.border(),o=n.borderRadius();s=this.getItemRunStyle(r,"fill",s);a=this.getItemRunStyle(r,"border",a);if(s||a){o=Math.min(i.width,i.height,o);t.applyShadow(n.shadow()).drawRoundRectI(s,a,i,o,o,0,0)}}});var BarSeriesRenderer=defineClass("BarSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},canStacked:function(){return true},_doRender:function(e,t,i){},_doRenderItemSeparators:function(e,t,i){var r,n,s,a,o,l,h,u=e.model(),c=u.group();if(c&&(c.stackMode()==ChartStackMode.FILL||c.stackMode()==ChartStackMode.NORMAL)){s=e.itemCount();a=c.separatorStyles();o=a.line();if(o){for(n=0;n<s;n++){r=e.getItem(n);if(r.separator()){h=r.y();l=r.negative()?r.x():r.x()+r.width()-1;t.drawLineI(o,l,h,l,h+r.height())}}}}},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f=e.model(),_=f.label(),g=f.yAxisObj(),m=g.reversed(),p=g.baseValue(),v=f.group(),y=v&&v.stackMode(),S=f.valueField(),C=CartesianSeriesLabelLayout.Default,w=e.itemCount();for(r=0;r<w;r++){s=e.getItem(r);n=s.model();a=t[r];a.setVisible(n&&_.visible());if(a.visible()){u=_.prepareItemStyles(s);a.setStyles(u);a.$_model=_;o=n.getProp(S);if(y==null||y!=ChartStackMode.NONE&&o!==0){l=this._getItemLabel(n,u,_,o);d=o<p?!m:m;h=C.layoutHorz2(i,s,a,l,ChartLabelPosition.FAR,d);a.setRect(h)}else{a.setVisible(false)}}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1){return}var n,s,a,o,l,h,u,c,d,f,_,g,m,p,v,y,S,C,w,x,b,I,T=e.model(),A=T.xAxisObj(),E=A.reversed(),R=A.isOppositeOf(T),L=T.yAxisObj(),P=L.reversed(),N=L.isOppositeOf(T),k=T.valueField(),D=T.group(),O=D&&D.stackMode(),M=T.clusterInfo,V=i.height,F=i.width,B=!isNaN(L.baseValue())?L.baseValue():L.measuredMinimum(),$=P?i.right():i.x,H=L.getPositionOf(B),G=B;if(A.startIndex){n=A.startIndex();r=Math.min(A.visibleCount()+A.startIndex(),r)}else{n=0}for(n=0;n<r;n++){u=null;g=t[n];u=g.model();g.setVisible(u!=null);if(!u){continue}g._styles=T.prepareItemStyles(g);_=T.itemWidth();l=u.getProp(k);l=this.getItemRunProperty(u,"value",l);G=B;c=A.getDisplayWidth(u);C=A.getDisplayPosition(u)+c*M.position;d=c*M.width;if(D==null){}else if(O==ChartStackMode.NONE||O==ChartStackMode.OVERLAP){}else if(O==ChartStackMode.NORMAL){m=l<B;p=0;for(s=0;s<T.visibleIndex();s++){a=D.getVisibleItem(s);if(a instanceof BarSeries){o=a.getItem(n+e._startIndex);h=o.getProp(a.valueField());h=this.getItemRunProperty(o,"value",h);if(h*l>=0){G+=h;p++}}}l+=G;e.setItemIndex(g,n,D,p,m)}else{x=b=0;for(s=0;s<D.visibleCount();s++){a=D.getVisibleItem(s);if(a instanceof BarSeries){o=a.getItem(n+e._startIndex);h=o.getProp(a.valueField());if(h>=0)x+=h;else b-=h}}if(l>=0){I=(L.measuredMaximum()-B)/x}else{I=-(L.measuredMinimum()-B)/b}m=l<B;p=0;for(s=0;s<T.visibleIndex();s++){a=D.getVisibleItem(s);if(a instanceof BarSeries){o=a.getItem(n+e._startIndex);h=o.getProp(a.valueField());if(h*l>=0){G+=h;p++}}}l=(l+G)*I;G*=I;e.setItemIndex(g,n,D,p,m)}w=C+=d/2;if(E){w=i.y+w*V}else{w=i.bottom()-w*V}d=_*d;if(E){C-=d/2;C=i.x+C*V}else{C+=d/2;C=i.bottom()-C*V}d=d*V;f=L.getPositionOf(G);v=L.getPositionOf(l);if(l>=B){y=H;if(G>B){y=H+(f-H)}S=y+(v-y)}else{S=H;if(G<B){S=H-(H-f)}y=S-(S-v)}v=_floor(v*F);y=_floor(y*F);S=_floor(S*F);C=_floor(C);w=_floor(w);d=_floor(d);if(P){v=$-v;y=$-y;S=$-S}else{v+=$;y+=$;S+=$}l=Math.abs(S-y)+1;if(P){g.setBounds(y-l+1,C,l,d);g.setDataPoint(v-l+1,w)}else{g.setBounds(y,C,l,d);g.setDataPoint(v,w)}}}});var BarSeriesItemRenderer=defineClass("BarSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r=e.series(),n=e.model(),s=n.getProp(r.valueField()),a=r.getItemStyles(n,e._styles,e._hovered),o=this.getFill(n,a),l=a.border(),h=a.borderRadius();if(o){t.drawRectI(o,null,i)}if(l){i.width-=_round(l.width()/2);i.height-=_round(l.width()/2);t.drawRectI(null,l,i)}}});var BarRangeSeriesRenderer=defineClass("BarRangeSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d=e.model(),f=d.label(),_=d.highField(),g=d.lowField(),m=CartesianSeriesLabelLayout.Default;cnt=e.itemCount();for(r=0;r<cnt;r++){s=e.getItem(r);n=s.model();a=t[r*2];o=t[r*2+1];u=n&&f.visible();a.setVisible(u);o.setVisible(u);if(u){styles=f.prepareItemStyles(s);a.setStyles(styles);o.setStyles(styles);o.$_model=a.$_model=f;l=n.getProp(_);c=this._getItemLabel(n,styles,f,l,"high");h=m.layoutHorz2(i,s,a,c,ChartLabelPosition.FAR);a.setRect(h);l=n.getProp(g);c=this._getItemLabel(n,styles,f,l,"low");h=m.layoutHorz2(i,s,o,c,ChartLabelPosition.NEAR);o.setRect(h)}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1)return;var n,s,a,o,l,h,u,c,d,f,_,g,m=e.model(),p=m.styles(),v=m.xAxisObj(),y=m.yAxisObj(),S=m.lowField(),C=m.highField(),w=m.group(),x=m.clusterInfo,b=i.height,I=i.width;for(n=0;n<r;n++){s=t[n];o=s.model();s.setVisible(o!=null);if(s.visible()){s._styles=m.prepareItemStyles(s);a=m.itemWidth();l=v.getDisplayWidth(o);d=v.getDisplayPosition(o)+l*x.position;h=l*x.width;f=d+=h/2;f=i.y+_floor(f*b);h=a*h;d-=h/2;d=i.y+_floor(d*b);h=_floor(h*b);g=o.getProp(S);g=this.getItemRunProperty(o,"value",g);u=y.getPositionOf(g);g=o.getProp(C);g=this.getItemRunProperty(o,"value",g);c=y.getPositionOf(g);u=i.x+_floor(u*I);c=i.x+_floor(c*I);_=c-u;s.setDataPoint(u,f,c,f);s.setBounds(u,d,_,h)}}}});var BarRangeSeriesItemRenderer=defineClass("BarRangeSeriesItemRenderer",ColumnRangeSeriesItemRenderer,{init:function(e){this._super(e)}});var LineSeriesRenderer=defineClass("LineSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r,n,s,a,o,l,h,u,c=e.itemCount();if(c>1){r=e.model();n=r.styles();s=n.line();if(s){t.applyShadow(n.shadow());a=r.lineType();o=a==ChartLineType.STEPPED;l=0;while(l<c){for(;l<c;l++){h=e.getItem(l);if(h.visible()){break}}pts=[];for(;l<c;l++){h=e.getItem(l);if(!h.visible()){break}pts.push(u={x:h.x()+h.width()/2,y:h.y()+h.height()/2});if(o&&l<c-1&&(h=e.getItem(l+1)).visible()){pts.push({x:h.x()+h.width()/2,y:u.y})}}if(pts.length>1){if(a==ChartLineType.CURVED){t.drawCurve(s,pts)}else{t.drawLines(s,pts)}}}t.clearShadow()}}},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f,_=e.model(),g=_.label(),m=g.visible(),p=g.labelField()||_.valueField(),v=CartesianSeriesLabelLayout.Default,y=e.itemCount();for(r=0;r<y;r++){s=e.getItem(r);n=s.model();a=t[r];if(n&&m){a.setVisible(_defined(s)&&m);if(a.visible()){o=n.getProp(p);h=g.prepareItemStyles(s);a.setStyles(h);a.$_model=g;f=this._getItemLabel(n,h,g,o);l=ChartLabelPosition.FAR;d=v.layoutVert2(i,s,a,f,l);a.setRect(d)}}else{a.setVisible(false)}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1){return}var n,s,a,o,l,h,u,c,d,f,_,g,m,p,v=e.model(),y=v.xAxisObj(),S=v.yAxisObj(),C=y instanceof LinearAxis?S:y,w=S instanceof LinearAxis?S:y,x=C==v.xAxisObj(),b=v.labelField(),I=v.valueField(),T=v.dateField(),A=b!=T?b:null,E=i.height,R=i.width,L=i.bottom();for(n=0;n<r;n++){s=t[n];a=s.model();s.setVisible(a!=null);if(s.visible()){g=s._styles=v.prepareItemStyles(s);sz=g.shapeSize();h=sz?sz.getDimension(9):9;u=h;f=a.getProp(I);f=this.getItemRunProperty(a,"value",f);if(x){if(C.getDisplayPosition){c=(C.getDisplayPosition(a)+C.getDisplayWidth(a)/2)*R}else if(C instanceof DateTimeAxis){_=a.getDate(T,A);if(!_&&v.labelStart){_=new Date(v.labelStart()+a.index()*v.labelInterval())}c=C.getPositionOf(_)*R}else{_=a.getProp(b);if(!_&&v.labelStart){_=v.labelStart()+a.index()*v.labelInterval()}c=C.getPositionOf(_)*R}d=L-w.getPositionOf(f)*E}else{c=w.getPositionOf(f)*R;if(C.getDisplayPosition){d=(C.getDisplayPosition(a)+C.getDisplayWidth(a)/2)*E;d+=i.y}else{d=C.getPositionOf(a.getProp(b))*E;d=i.bottom()-d}}s.setDataPoint(c,d);s.setBounds(c-h/2,d-u/2,h,u)}}}});var LineSeriesItemRenderer=defineClass("LineSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r,n,s,a,o,l=e.model(),h=e._styles,u=h.shapeName(),r=ShapeDrawing.getShape(this,u);if(r){r.draw(t,i,h.fill(),h.border(),0)}else if(u&&u.indexOf("url(")==0&&u.lastIndexOf(")")==u.length-1){u=u.substring(4,u.length-1);r=e.chartView().container().getImage(u);if(r){a=r.width;o=r.height;t.drawImage(r,i.x+(i.width-a)/2,i.y+(i.height-o)/2,a,o)}}}});var StepLineSeriesItemRenderer=defineClass("StepLineSeriesItemRenderer",LineSeriesItemRenderer,{init:function(e){this._super(e)}});var AreaSeriesRenderer=defineClass("AreaSeriesRenderer",LineSeriesRenderer,{init:function(e){this._super(e)},$_drawArea:function(e,t,i,r,n,s,a,o,l,h){if(a&&a.length>0){if(o){if(t){if(l){e.drawCurvedRange(t,null,s,a)}else{e.drawCurvedStraightRange(t,null,s,a)}}if(i){e.drawCurve(i,s)}}else{if(t){if(l){e.drawStraightCurvedRange(t,null,s,a)}else{e.drawRange(t,null,s,a)}}if(i){e.drawLines(i,s)}}if(r){if(l){e.drawCurve(r,a)}else{e.drawLines(r,a)}}}else if(s&&s.length>0){p1={x:s[0].x,y:h?0:n.bottom()};p2={x:s[s.length-1].x,y:h?0:n.bottom()};if(o){if(t){e.drawCurvedRange(t,null,s,[p1,p2])}if(i){e.drawCurve(i,s)}}else{if(t){s.unshift(p1);s.push(p2);e.drawPolygon(t,null,s);s.shift();s.pop()}if(i){e.drawLines(i,s)}}if(r){if(l){e.drawCurve(r,a)}else{e.drawLines(r,a)}}}},_doRender:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f,_,g,m,p,v,y,S,C,w,x,b=e.chartView(),I=e.itemCount();if(I>1){r=e.model();n=r.group();a=r.valueAxis();o=_pickNum(r.baseValue(),a.baseValue());l=!isNaN(o)&&o!=a.measuredMinimum();s=r.styles();h=r.lineType()===ChartLineType.CURVED;u=v&&v.lineType()===ChartLineType.CURVED;f=_=0;while(f<I){for(;f<I;f++){itemView=e.getItem(f);if(itemView.visible()){break}}c=[];for(;f<I;f++){itemView=e.getItem(f);if(!itemView.visible()){break}if(itemView.x()<0){itemView.setX(0)}c.push({x:itemView.x()+itemView.width()/2,y:itemView.y()+itemView.height()/2})}d=null;y=null;g=r.visibleIndex();if(n&&n.stackMode()!=ChartStackMode.NONE&&g>0){v=n.getVisibleItem(g-1);m=b.getSeriesView(v);y=m.$_styles;p=m.itemCount();for(;_<p;_++){itemView=m.getItem(_);if(itemView.visible()){break}}d=[];for(;_<p;_++){itemView=m.getItem(_);if(!itemView.visible()){break}d.push({x:itemView.x()+itemView.width()/2,y:itemView.y()+itemView.height()/2})}}S=s.fill();C=s.line();if(l){t.save();w=i.height-_int(a.getPositionOf(o)*i.height);t.clipBounds(i.x,i.y,i.width,w);this.$_drawArea(t,S,C,null,i,c,d,h,u);t.restore();s=r.lowStyles();S=s.fill();C=s.line();t.save();t.clipBounds(i.x,i.y+w,i.width,i.height-w);this.$_drawArea(t,S,C,null,i,c,d,h,u,true);t.restore()}else{this.$_drawArea(t,S,C,null,i,c,d,h,u)}}}},$_getRunValue:function(e,t,i){var r=e?parseFloat(e.getProp(t)):0;return this.getItemRunProperty(e,"value",r,i)},_doLayoutItems:function(e,t,i){if(!t||t.length<1){return}var r,n,s,a,o,l,u,c,d,f,_,g,m,p,v,y,S,C,x,b,I,T,A,E,R=e.model(),L=R.group(),P=R.labelAxis(),N=R.valueAxis(),f=P===R.xAxisObj();labelFld=R.labelField(),valueFld=R.valueField(),dateFld=R.dateField(),labelDateFld=labelFld!=dateFld?labelFld:null,h=i.height,w=i.width,based=_hasNum(R.baseValue(),N.baseValue()),start=N.measuredMinimum(),yOrg=i.bottom();if(L&&L.visibleCount()<2){L=null}for(n=0,s=t.length;n<s;n++){a=t[n];o=null;d=n;if(d<0){a.setVisible(false)}else{o=a.model();a.setVisible(o!=null||L&&L.stackMode()!=ChartStackMode.NONE)}if(a.visible()){l=a._styles=R.prepareItemStyles(a);sz=l.shapeSize();A=sz?sz.getDimension(9):9;E=A;m=0;p=0;_=this.$_getRunValue(o,valueFld,start);vStart=r;if(P.getDisplayPosition){m=P.getDisplayPosition(o)+P.getDisplayWidth(o)/2}else if(P instanceof DateTimeAxis){g=o.getDate(dateFld,labelDateFld);if(!g&&R.labelStart){g=new Date(R.labelStart()+o.index()*R.labelInterval())}m=P.getPositionOf(g)}else{g=o.getProp(labelFld);if(!g&&R.labelStart){g=R.labelStart()+o.index()*R.labelInterval()}m=P.getPositionOf(g)}if(L&&L.stackMode()==ChartStackMode.NORMAL){if(f){v=0;for(y=0;y<R.visibleIndex();y++){S=L.getVisibleItem(y);if(S){C=S.getItem(n);v+=this.$_getRunValue(C,S.valueField(),start)}}p=N.getPositionOf(_+v)}else{}}else if(L&&L.stackMode()==ChartStackMode.FILL){if(f){x=0;for(y=0;y<L.visibleCount();y++){S=L.getVisibleItem(y);if(S){C=S.getItem(n);x+=this.$_getRunValue(C,S.valueField(),start)}}b=N.measuredMaximum()/x;v=0;for(y=0;y<R.visibleIndex();y++){S=L.getVisibleItem(y);if(S){C=S.getItem(n);v+=this.$_getRunValue(C,S.valueField(),start)}}v=(_+v)*b;p=N.getPositionOf(v)}else{}}else{if(f){p=N.getPositionOf(_)}else{m=N.getPositionOf(_);if(P.getDisplayPosition){p=P.getDisplayPosition(o)+P.getDisplayWidth(o)/2;p+=i.y}else{p=P.getPositionOf(o.getProp(labelFld));p=i.bottom()-p}}}if(isNaN(m)||isNaN(p)){a.setVisible(false)}else{if(f){m=i.x+m*w;p=i.y+yOrg-p*h}else{m=i.x+m*w;p=i.y+p*h}a.setVisible(true);a.setDataPoint(m,p);a.setBounds(m-A/2,p-E/2,A,E)}}}}});var AreaRangeSeriesRenderer=defineClass("AreaRangeSeriesRenderer",AreaSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f=e.itemCount()/2;if(f>1){r=e.model();axis=r.valueAxis();n=r.styles();a=r.lineType()===ChartLineType.CURVED;s=0;while(s<f){for(;s<f;s++){o=e.getItem(s*2);l=e.getItem(s*2+1);if(o.visible()&&l.visible()){break}}h=[];u=[];for(;s<f;s++){o=e.getItem(s*2);l=e.getItem(s*2+1);if(!o.visible()||!l.visible()){break}h.push({x:o.x()+o.width()/2,y:o.y()+o.height()/2});u.push({x:l.x()+l.width()/2,y:l.y()+l.height()/2})}c=n.fill();d=n.line();this.$_drawArea(t,c,d,d,i,h,u,a,a)}}},_doRenderText:function(e,t,i){},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f,_,g=e.model(),m=g.label(),p=m.visible(),v=g.highField(),y=g.lowField(),S=CartesianSeriesLabelLayout.Default,C=e.itemCount()/2;for(r=0;r<C;r++){s=e.getItem(r*2);a=e.getItem(r*2+1);n=s.model();o=t[r*2];l=t[r*2+1];f=p&&n&&n.visible();o.setVisible(f);l.setVisible(f);if(f){_=m.prepareItemStyles(s);o.setStyles(_);l.setStyles(_);o.$_model=m;l.$_model=m;h=n.getProp(v);u=this._getItemLabel(n,c,m,h,"high");d=S.layoutVert2(i,s,o,c,u,ChartLabelPosition.FAR);o.setRect(d);h=n.getProp(y);u=this._getItemLabel(n,c,m,h,"low");d=S.layoutVert2(i,a,l,c,u,ChartLabelPosition.NEAR);l.setRect(d)}}},_doLayoutItems:function(e,t,i){var r=e.itemCount()/2;if(r<1){return}var n,r,s,a,o,l,h,u,c,d,f,_,g,m,p,v=e.model(),y=v.xAxisObj(),S=v.yAxisObj(),C=v.labelField(),w=v.dateField(),x=C!=w?C:null,b=v.lowField(),I=v.highField(),T=i.bottom(),A=e.height(),E=e.width();for(n=0,r=v.itemCount();n<r;n++){s=t[n*2];a=t[n*2+1];o=s.model();l=n;if(l>=0&&o&&o.$_valid){h=s._styles=v.prepareItemStyles(s);a._styles=v.prepareItemStyles(a);if(y==v.xAxisObj()){if(y.getDisplayPosition){_=(y.getDisplayPosition(o)+y.getDisplayWidth(o)/2)*E}else if(y instanceof DateTimeAxis){u=o.getDate(w,x);if(!u&&v.labelStart){u=new Date(v.labelStart()+o.index()*v.labelInterval())}_=y.getPositionOf(u)*E}else{u=o.getProp(C);if(!u&&v.labelStart){u=v.labelStart()+o.index()*v.labelInterval()}_=y.getPositionOf(u)*E}g=_;m=T-S.getPositionOf(o.getProp(I))*A;p=T-S.getPositionOf(o.getProp(b))*A}else{_=S.getPositionOf(o.getProp(I))*E;g=S.getPositionOf(o.getProp(b))*E;m=p=T-(y.getDisplayPosition(l)+y.getDisplayWidth(l)/2)*A}c=h.shapeSize();d=c?c.getDimension(9):9;f=d;s.setDataPoint(_,m);a.setDataPoint(g,p);s.setBounds(_-d/2,m-f/2,d,f);a.setBounds(g-d/2,p-f/2,d,f);s.setVisible(true);a.setVisible(true)}else{s.setVisible(false);a.setVisible(false)}}}});var CandlestickSeriesRenderer=defineClass("CandlestickSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f=e.model(),_=f.label(),g=f.highField(),m=f.lowField(),p=CartesianSeriesLabelLayout.Default,v=e.itemCount();for(r=0;r<v;r++){s=e.getItem(r);n=s.model();a=t[r*2];o=t[r*2+1];l=n&&_.visible();a.setVisible(l);o.setVisible(l);if(l){c=_.prepareItemStyles(s);a.$_model=_;o.$_model=_;if(a.visible()){a.setStyles(c);l=n.getProp(g);h=this._getItemLabel(n,u,_,l,"high");d=p.layoutVert2(i,s,a,h,ChartLabelPosition.FAR);a.setRect(d)}if(o.visible()){o.setStyles(c);l=n.getProp(m);h=this._getItemLabel(n,u,_,l,"low");d=p.layoutVert2(i,s,o,h,ChartLabelPosition.NEAR);o.setRect(d)}}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1)return;var n,s,a,o,l,h,u,c,d,f,_,g=e.model(),m=g.xAxisObj(),p=g.yAxisObj(),v=g.openField(),y=g.closeField(),S=g.lowField(),C=g.highField(),w=g.clusterInfo,x=i.height,b=i.width,I=1,T=1;for(n=0;n<r;n++){s=t[n];a=s.model();s.setVisible(a!=null);if(s.visible()){s._styles=g.prepareItemStyles(s);f=g.itemWidth();o=m.getDisplayWidth(a);c=m.getDisplayPosition(a)+o*w.position;l=o*w.width;x1=c+=l/2;x1=i.x+_floor(x1*b);l=f*l;c-=l/2;c=i.x+_floor(c*b);l=_floor(l*b);h=p.getPositionOf(a.getProp(C));u=p.getPositionOf(a.getProp(S));h=i.bottom()-_floor(h*T*x);u=i.bottom()-_floor(u*T*x);d=u-h;s.setDataPoint(x1,h,x1,u);s.setBounds(c,h+(d-d*I),l,d*I)}}}});var CandlestickSeriesItemRenderer=defineClass("CandlestickSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r,n,s,a,o,l,h,u=e.series(),c=e.model(),d=c.getProp(u.lowField()),f=c.getProp(u.highField()),_=c.getProp(u.openField()),g=c.getProp(u.closeField()),m=e._styles,p=m.fill(),v=m.border();if(p||v){r=i.height;n=f-d;s=_floor(i.y);a=_floor(i.y+(f-(_>=g?_:g))/n*r);o=_floor(i.y+(f-(_<g?_:g))/n*r);l=_floor(i.bottom());h=_floor(i.x+i.width/2);t.drawLineI(v,h,s,h,a);t.drawBoundsI(p,v,i.x,a,i.width,o-a);t.drawLineI(v,h,o,h,l)}}});var OhlcSeriesRenderer=defineClass("OhlcSeriesRenderer",CandlestickSeriesRenderer,{init:function(e){this._super(e)}});var OhlcSeriesItemRenderer=defineClass("OhlcSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r,n,s,a,o,l,h,u=e.series(),c=e.model(),d=c.getProp(u.lowField()),f=c.getProp(u.highField()),_=c.getProp(u.openField()),g=c.getProp(u.closeField()),m=e._styles,p=m.line();if(p){r=i.height;n=f-d;s=_floor(i.y);a=_floor(i.y+(f-_)/n*r);o=_floor(i.y+(f-g)/n*r);l=_floor(i.bottom());h=_floor(i.x+i.width/2);t.drawLineI(p,i.x,a,h,a);t.drawLineI(p,h,o,i.right(),o);t.drawLineI(p,h,s,h,l)}}});var BoxplotSeriesRenderer=defineClass("BoxplotSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f,_,g=e.model(),m=g.label(),p=g.minField(),v=g.medianField(),y=g.maxField(),S=CartesianSeriesLabelLayout.Default,C=e.itemCount();for(r=0;r<C;r++){s=e.getItem(r);n=s.model();o=t[r*3];a=t[r*3+1];l=t[r*3+2];h=n&&m.visible();a.setVisible(h);o.setVisible(h);l.setVisible(h);if(h){f=m.prepareItemStyles(s);a.setStyles(f);l.setStyles(f);o.setStyles(f);a.$_model=m;l.$_model=m;o.$_model=m;h=n.getProp(y);u=this._getItemLabel(n,c,m,h,"lmax");_=S.layoutVert2(i,s,o,u,ChartLabelPosition.FAR);o.setRect(_);h=n.getProp(v);u=this._getItemLabel(n,c,m,h,"mid");_=S.layoutVert2(i,s,a,u,ChartLabelPosition.FAR,s._midPoint);a.setRect(_);h=n.getProp(p);u=this._getItemLabel(n,c,m,h,"min");_=S.layoutVert2(i,s,l,u,ChartLabelPosition.NEAR);l.setRect(_)}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1)return;var n,s,a,o,l,h,u,c,d,f,_,g,m=e.model(),p=m.styles(),v=m.xAxisObj(),y=m.yAxisObj(),S=m.minField(),C=m.maxField(),w=m.group(),x=(w?w:m).clusterInfo,b=i.height,I=i.width,T=1;locRate=1;for(n=0;n<r;n++){s=t[n];a=s.model();s.setVisible(a!=null);if(s.visible()){s._styles=m.prepareItemStyles(s);s._upperStyles=m.upperStyles();s._lowerStyles=m.lowerStyles();g=m.itemWidth();o=v.getDisplayWidth(a);u=v.getDisplayPosition(a)+o*x.position;if(w==null){h=o*x.width}else{l=o*x.width;h=l/w.count();u+=h*m.groupIndex()}c=u+=h/2;c=i.x+_floor(c*I);h=g*h;u-=h/2;u=i.x+_floor(u*I);h=_floor(h*I);d=y.getPositionOf(a.getProp(C));f=y.getPositionOf(a.getProp(S));d=i.bottom()-_floor(d*locRate*b);f=i.bottom()-_floor(f*locRate*b);_=f-d;s.setDataPoint(c,d,c,f);s.setBounds(u,d+(_-_*T),h,_*T)}}}});var BoxplotSeriesItemRenderer=defineClass("BoxplotSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r,n,s,a,o,l,h,u,c=e.series(),d=e.model(),f=d.getProp(c.minField()),_=d.getProp(c.maxField()),g=d.getProp(c.lowerField()),m=d.getProp(c.upperField()),p=d.getProp(c.medianField()),v=e._styles,y=e._upperStyles,S=e._lowerStyles,C=y.fill(),w=S.fill(),x=v.border();if(x){r=i.height;n=_-f;s=_floor(i.y);a=_floor(i.y+(_-m)/n*r);o=_floor(i.y+(_-p)/n*r);l=_floor(i.y+(_-g)/n*r);h=_floor(i.bottom());u=_floor(i.x+i.width/2);e._midPoint=(_-p)/n;t.drawLineI(x,i.x,s,i.right(),s);t.drawLineI(x,u,s,u,a);t.drawBoundsI(C,x,i.x,a,i.width,o-a);t.drawBoundsI(w,x,i.x,o,i.width,l-o);t.drawLineI(x,i.x,o,i.right(),o);t.drawLineI(x,u,l,u,h);t.drawLineI(x,i.x,h,i.right(),h)}}});var WaterfallSeriesRenderer=defineClass("WaterfallSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},canStacked:function(){return true},_doRender:function(e,t,i){if(!this.animating(e.model())){var r,n,s,a,o,l,h,u=e.model(),c=u.styles(),d=c.line();if(d){n=e.itemCount();if(n>2){s=e.getItem(0);for(r=1;r<n;r++){a=e.getItem(r);o=s.model();l=a.model();if(o.isSum()){h=s.y()}else if(o.increased()){h=s.y()}else{h=s.bottom()}t.drawHLineI(d,h,s.right(),a.x());s=a}}}}},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f,_,g=e.model(),m=g.label(),p=g.yAxisObj(),v=p.baseValue(),y=g.valueField(),S=CartesianSeriesLabelLayout.Default,C=e.itemCount();for(r=0;r<C;r++){s=e.getItem(r);n=s.model();a=t[r];a.setVisible(n&&m.visible());if(a.visible()){d=m.prepareItemStyles(s);a.setStyles(d);a.$_model=m;o=n.range();l=n.getProp(y);if(l!=null){_=n.getScale(l);o=Number(o.toFixed(_))}h=this._getItemLabel(n,d,m,o);u=o<v?ChartLabelPosition.NEAR:ChartLabelPosition.FAR;c=S.layoutVert2(i,s,a,h,u);a.setRect(c)}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1)return;var n,s,a,o,l,h,u,c,d,f,_,g,m=e.model(),p=m.styles(),v=m.xAxisObj(),y=m.yAxisObj(),S=m.clusterInfo,C=i.height,w=i.width;for(n=0;n<r;n++){s=t[n];o=s.model();s.setVisible(o!=null);if(s.visible()){s._styles=m.prepareItemStyles(s);s._decreseStyles=m._decreaseStyles;s._sumStyles=m._sumStyles;a=m.itemWidth();l=v.getDisplayWidth(o);u=v.getDisplayPosition(o)+l*S.position;h=l*S.width;c=u+=h/2;c=i.x+_floor(c*w);h=a*h;u-=h/2;u=i.x+_floor(u*w);h=_floor(h*w);g=o.highValue();g=this.getItemRunProperty(o,"endValue",g);d=y.getPositionOf(g);g=o.lowValue();g=this.getItemRunProperty(o,"startValue",g);f=y.getPositionOf(g);d=i.bottom()-_floor(d*C);f=i.bottom()-_floor(f*C);_=f-d;s.setDataPoint(c,d,c,f);s.setBounds(u,d,h,_)}}}});var WaterfallSeriesItemRenderer=defineClass("WaterfallSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r=e.series(),n=e.model(),s=n.isSum()?e._sumStyles:n.decreased()?e._decreseStyles:e._styles,a=s.fill(),o=s.border(),l=s.borderRadius();a=this.getItemRunStyle(n,"fill",a);if(a||o){l=Math.min(i.width,i.height,l);t.applyShadow(s.shadow()).drawRoundRectI(a,o,i,l,l,0,0)}}});var ScatterSeriesRenderer=defineClass("ScatterSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f=e.model(),_=f.label(),g=f.valueField(),m=CartesianSeriesLabelLayout.Default,p=e.itemCount();for(r=0;r<p;r++){s=e.getItem(r);n=s.model();a=t[r];a.setVisible(n!=null&&_.visible());if(a.visible()){h=_.prepareItemStyles(s);a.setStyles(h);a.$_model=_;o=n.getProp(g);l=this._getItemLabel(n,h,_,o);pos=ChartLabelPosition.MID;d=m.layoutVert2(i,s,a,l,pos);a.setRect(d)}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1){return}var n,s,a,o,l,h,u,c,d=e.model(),f=d.xAxisObj(),_=d.yAxisObj(),g=d.xField(),m=d.yField(),p=i.bottom(),v=i.height,y=i.width;for(n=0;n<r;n++){s=t[n];a=s.model();o=i.x+f.getPositionOf(a.getProp(g))*y;l=p-_.getPositionOf(a.getProp(m))*v;s._styles=d.prepareItemStyles(s);c=s._styles.shapeSize();h=c?c.getDimension(y):1;u=c?c.getDimension(v):1;s.setDataPoint(o,l);s.setBounds(o-h/2,l-u/2,h,u)}}});var ScatterSeriesItemRenderer=defineClass("ScatterSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r,n,s,a,o,l;if(e.visible()&&(r=e.model()).visible()){l=e.series();n=l.getItemStyles(r,e._styles,e._hovered);s=ShapeDrawing.getShape(this,n.shapeName());if(s){s.draw(t,i,n.fill(),n.border(),n.shapeRotation())}}},_doRender_old:function(e,t,i){var r,n,s=e.series(),a=e.model(),o=e._styles,l=o.symbol(),h=l?a.shapeRenderer||SimpleChartShapeRenderer.Default:null;if(h){h.render(o,l,t,i)}else{r=o.getFillOrFills(e.index());n=o.border();t.drawRectI(r,n,i)}}});var BubbleSeriesRenderer=defineClass("BubbleSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){},_doLayoutLabels:function(e,t,i){var r,n,a,o,l,h,u,c,d,f,_=e.model(),g=_.label(),m=_.valueField(),p=CartesianSeriesLabelLayout.Default,v=e.itemCount();for(r=0;r<v;r++){a=e.getItem(r);n=a.model();o=t[r];o.setVisible(n!=null&&g.visible());if(o.visible()){u=g.prepareItemStyles(a);o.setStyles(u);o.$_model=g;l=n.getProp(m);s=this._getItemLabel(n,u,g,l);h=ChartLabelPosition.MID;f=p.layoutVert2(i,a,o,s,h);o.setRect(f)}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1){return}var n,s,a,o,l,h,u,c,d=e.model(),f=d.xAxisObj(),_=d.yAxisObj(),g=d.xField(),m=d.yField(),p=d.volumeField(),v=d.sizePolicy(),y=i.height,S=i.width;for(n=0;n<r;n++){s=t[n];a=s.model();o=a.getProp(p);s._styles=d.prepareItemStyles(s);l=s._styles.shapeSize();h=v===BubbleSizePolicy.AREA?Math.sqrt(o/Math.PI):o/((v===BubbleSizePolicy.RADIUS?2:1)*Math.PI);if(l&&!l.fixed()){h=this.getItemRunStyle(a,"shapeSize",l).getDimension(h)}u=i.x+f.getPositionOf(a.getProp(g))*S;c=i.bottom()-_.getPositionOf(a.getProp(m))*y;s.setDataPoint(u,c);s.setBounds(u-h,c-h,h*2,h*2)}}});var BubbleSeriesItemRenderer=defineClass("BubbleSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r=e.series(),n=e._styles,s=n.fill(),a=n.border();if(s||a){t.drawCircle(s,a,i.x+i.width/2,i.y+i.height/2,Math.min(i.width,i.height)/2)}}});var ErrorBarSeriesRenderer=defineClass("ErrorBarSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){},_doLayoutLabels:function(e,t,i){},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1)return;var n,s,a,o,l,h,u,c,d,f,_,g,m=e.model(),p=m.styles(),v=m.xAxisObj(),y=m.yAxisObj(),S=m.lowField(),C=m.highField(),w=m.group(),x=(w?w:m).clusterInfo,b=i.height,I=i.width;for(n=0;n<r;n++){s=t[n];a=s.model();s.setVisible(a!=null);if(s.visible()){s._styles=m.prepareItemStyles(s);g=m.itemWidth();o=v.getDisplayWidth(a);u=v.getDisplayPosition(a);h=o;c=u+=h/2;c=i.x+_floor(c*I);h=g*h;u-=h/2;u=i.x+_floor(u*I);h=_floor(h*I);d=y.getPositionOf(a.getProp(C));f=y.getPositionOf(a.getProp(S));d=i.bottom()-_floor(d*b);f=i.bottom()-_floor(f*b);_=f-d;s.setDataPoint(c,d,c,f);s.setBounds(u,d+_,h,_)}}}});var ErrorBarSeriesItemRenderer=defineClass("ErrorBarSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r,n,s,a,o,l,h=e.series(),u=e.model(),c=u.getProp(h.lowField()),d=u.getProp(h.highField()),f=e._styles,_=f.line();if(_){r=i.height;n=d-c;s=_floor(i.y);a=_floor(i.bottom());l=_floor(i.x+i.width/2);t.drawLineI(_,l,s,l,a);t.drawLineI(_,i.x,s,i.right(),s);t.drawLineI(_,i.x,a,i.right(),a)}}});var HistogramSeriesRenderer=defineClass("HistogramSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f=e.model(),_=f.label(),g=f.yAxisObj(),m=g.baseValue(),p=f.valueField(),v=CartesianSeriesLabelLayout.Default,y=e.itemCount();for(r=0;r<y;r++){s=e.getItem(r);n=s.model();a=t[r];a.setVisible(n&&_.visible());if(a.visible()){c=_.prepareItemStyles(s);a.setStyles(c);a.$_model=_;o=n.getProp(p);l=this._getItemLabel(n,c,_,o);h=o<m?ChartLabelPosition.NEAR:ChartLabelPosition.FAR;u=v.layoutVert2(i,s,a,l,h);a.setRect(u)}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1)return;var n,s,a,o,l,u,c,d,f,_,g,m=e.model(),p=m.styles(),y=m.xAxisObj(),S=m.yAxisObj(),C=m.valueField(),x=S.baseValue(),b=i.bottom(),I=S.getPositionOf(x);h=i.height,w=i.width;for(n=0;n<r;n++){s=t[n];a=s.model();s.setVisible(a!=null);if(s.visible()){s._styles=m.prepareItemStyles(s);v=a.getProp(C);v=this.getItemRunProperty(a,"value",v);vStart=x;c=y.getPositionOf(a.xFrom())*w;d=y.getPositionOf(a.xTo())*w;u=d-c;yStart=S.getPositionOf(vStart);f=S.getPositionOf(v);g=I;if(vStart>x){g=I+(yStart-I)}g=b-g*h;f=_=b-f*h;_=g-(g-_);c=_floor(c);f=_floor(f);_=_floor(_);g=_floor(g);u=_floor(u);s.setDataPoint(c+u/2,f);s.setBounds(c,_,u,Math.abs(g-_)+1)}}}});var HistogramSeriesItemRenderer=defineClass("HistogramSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r=e.series(),n=e.model(),s=n.getProp(r.valueField()),a=r.getItemStyles(n,e._styles,e._hovered),o=this.getFill(n,a),l=a.border(),h=a.borderRadius();if(o){h=Math.min(i.width,i.height,h);t.applyShadow(a.shadow()).drawRoundRectI(o,null,i,h,h,0,0)}if(l){if(h>0){}else{if(s>=0){t.drawLinesI(l,i.x,i.bottom()-1,i.x,i.y,i.right()-1,i.y,i.right()-1,i.bottom()-1)}else{t.drawLinesI(l,i.x,i.y,i.x,i.bottom()-1,i.right()-1,i.bottom()-1,i.right()-1,i.x)}}}}});var PieSeriesRenderer=defineClass("PieSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r,n,s,a,o,l,h,u,c=e.model(),d=c.label(),f=5,_,g;if(!this.animating()&&d.position()!=ChartLabelPosition.INNER&&(n=e.itemCount())>0){a=i.x+i.width/2;u=d.offset();for(r=0;r<n;r++){s=e.getItem(r);_=s.model();g=d.prepareItemStyles(s);h=g.line();if(h){if(u>0){o=s._dataPoint;l=s._dataPoint2;t.drawLine(h,o.x,o.y,l.x,l.y);if(l.x>=a){t.drawLine(h,l.x,l.y,l.x+f,l.y)}else{t.drawLine(h,l.x,l.y,l.x-f,l.y)}}else{}}}}},_doRenderItemSeparators:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f,_,g=e.model(),m=g.startAngleRad(),p=e.itemCount();l=Math.min(i.width,i.height)*e.polarSize()*g.radius();h=l/2;u=h*g.innerRadius();c=i.x+(i.width-l)/2+h+g.offsetX()*l;d=i.y+(i.height-l)/2+h+g.offsetY()*l;for(o=0;o<p;o++){r=e.getItem(o);n=r.model();if(n.separator){s=n.separatorStyles();a=s.line();f=Graphics.getArcPoint(c,d,h,h,n.startAngle,n.angle,m,true,1);_=Graphics.getArcPoint(c,d,u,u,n.startAngle,n.angle,m,true,1);t.drawLine(a,_.x,_.y,f.x,f.y)}}},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f,_,g,m,p,v,y,S,C,w=e.model(),x=w.label(),b=w.xAxisObj(),I=w.labelField(),T=w.valueField(),A=w.slicedField(),E=w.slicedOffset(),R=x.offset(),L=x.position()==ChartLabelPosition.INNER,P=w.styles(),N=w.startAngleRad(),k=Math.min(i.width,i.height)*e.polarSize()*w.radius(),D=k/2,O=i.x+(i.width-k)/2+D+w.offsetX()*k,M=i.y+(i.height-k)/2+D+w.offsetY()*k,V=e.itemCount(),F=5;for(r=0;r<V;r++){s=e.getItem(r);n=s.model();a=t[r];a.setVisible(n&&x.visible());if(a.visible()){a.setStyles(g=x.prepareItemStyles(s));m=n.getProp(A,false);l=n.getProp(T);h=this._getItemLabel(n,g,x,l);a.setLabel(s,h);o=a.measure(1e4,1e4);f=O;_=M;if(L){p=Math.min(i.width,i.height)*e.polarSize()*w.radius()/2-R;if(m){u=Graphics.getArcPoint(O,M,E,E,n.startAngle,n.angle,N,true);f=u.x;_=u.y}u=Graphics.getArcPoint(f,_,D,D,n.startAngle,n.angle,N,true);c=Graphics.getArcPoint(f,_,p,p,n.startAngle,n.angle,N,true);s.setDataPoint(u.x,u.y,c.x,c.y);a.setBoundsI(c.x-o.width/2,c.y-o.height/2,o.width,o.height)}else{p=(Math.min(i.width,i.height)*e.polarSize()*w.radius()+R*2)/2;if(m){u=Graphics.getArcPoint(O,M,E,E,n.startAngle,n.angle,N,true);f=u.x;_=u.y}u=Graphics.getArcPoint(f,_,D,D,n.startAngle,n.angle,N,true);c=Graphics.getArcPoint(f,_,p,p,n.startAngle,n.angle,N,true);s.setDataPoint(u.x,u.y,c.x,c.y);d=c.x;if(R>0){if(c.x>=O){d+=F;s._x1=d}else{d-=F;s._x1=d;d-=o.width}}else{}a.setBoundsI(d,c.y-o.height/2,o.width,o.height)}}}if(!L){v=0;y=0;S=[];C=[];for(r=0;r<V;r++){a=t[r];if(a.visible()){s=a.itemView();if(s._dataPoint2.x<=O){S.push(a);v++}else{C.push(a);y++}}}if(S.length>0){S.sort(this.$_sortLabels);PieSeriesLabelArranger.Default.arrange(e,i,S,v)}if(C.length>0){C.sort(this.$_sortLabels);PieSeriesLabelArranger.Default.arrange(e,i,C,y)}}},$_sortLabels:function(e,t){return e.y()-t.y()},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1){return}var n,s,a,o,l,h,u,c,d,f,_,g,m=e.model(),p=m.radius(),v=m.innerRadius(),y=m.offsetX(),S=m.offsetY(),C=m.styles(),w=m.valueField(),x=m.slicedField(),b=0,I=m.xAxisObj(),T=I.startAngle()*Math.PI/180,A=m.startAngleRad(),E=m.totalAngleRad(),R=null,L=false,P=this.animating(m);if(this.animating()&&!this.propAnimating(m,"slicedOffset")){g=0}else{g=this.getRunProperty(m,"slicedOffset",m.slicedOffset())}for(n=0;n<r;n++){a=t[n];o=a.model();b+=Number(o.getProp(w))}s=Math.min(i.width,i.height)*e.polarSize();for(n=0;n<r;n++){a=t[n];o=a.model();p=this.getRunProperty(m,"radius",p);o.radius=p;o.innerRadius=v;l=s*p;h=i.x+(i.width-l)/2+y*l;u=i.y+(i.height-l)/2+S*l;c=o.getProp(x,false);a._styles=m.prepareItemStyles(a);d=o.getProp(w);d=this.getItemRunProperty(o,"value",d);f=d*E/b;o.startAngle=T;o.angle=f;if(c){if(!this.animating(e.model())){_=Graphics.getArcPoint(h,u,g,g,o.startAngle,o.angle,A,true);a.setBounds(_.x,_.y,l,l)}else{a.setBounds(h,u,l,l)}}else{a.setBounds(h,u,l,l)}T+=f;if(R){R.separator=!L&&!c}R=o;L=c}a=t[0];o=a.model();c=o.getProp(x,false);if(R){R.separator=!L&&!c}}});var PieSeriesItemRenderer=defineClass("PieSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},containsPoint:function(e,t,i){if(this.$_g){var r=this.$_g,n=e.clientRect(),s=e.series(),a=e.model(),o=n.width/2,l=n.x+o,h=s.startAngleRad(),u=a.startAngle,c=a.angle;if(a.innerRadius>0){var d=o*a.innerRadius/a.radius;r.drawArcSector2(SolidBrush.Null,null,l,l,d,d,o,o,u,c,h)}else{r.drawArcSector(SolidBrush.Null,null,l,l,o,o,u,c,h)}return r.containsPoint(t,i)}},_doRender:function(e,t,i){this.$_g=t;var r,n,s,a,o,l,h,u,c=e.series(),d=e.model(),f=c.getItemStyles(d,e._styles,e._hovered),_=this.getFill(d,f),g=f.border();if(_||g){r=i.width/2;n=i.x+r;o=c.startAngleRad(),l=d.startAngle;h=d.angle;t.applyShadow(f.shadow());if(d.innerRadius>0){u=r*d.innerRadius;t.drawArcSector2(_,g,n,n,u,u,r,r,l,h,o)}else{t.drawArcSector(_,g,n,n,r,r,l,h,o)}}}});var SemicircleSeriesRenderer=defineClass("SemicircleSeriesRenderer",PieSeriesRenderer,{init:function(e){this._super(e)},_doRenderItemSeparators:function(e,t,i){this._super(e,t,i)},_doLayoutLabels:function(e,t,i){this._super(e,t,i)},_doLayoutItems:function(e,t,i){this._super(e,t,i)}});var PolarSeriesRenderer=defineClass("PolarSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)}});var PolarLineSeriesRenderer=defineClass("PolarLineSeriesRenderer",PolarSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r=e.$_points,n=e.model(),s=e._styles,a=this._area?s.fill():null,o=s.line();if(o||a){if(r){t.drawPolygon(a,o,r)}else{t.drawCircle(a,o,cx,cy,rd)}}},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f=e.model(),_=f.label(),g=f.yAxisObj(),m=g.baseValue(),p=f.group(),v=p&&p.stackMode(),y=f.valueField(),S=CartesianSeriesLabelLayout.Default,C=e.itemCount();for(r=0;r<C;r++){s=e.getItem(r);n=s.model();a=t[r];a.setVisible(n&&_.visible());if(a.visible()){c=_.prepareItemStyles(s);a.setStyles(c);a.$_model=_;o=n.getProp(y);if(v==null||v==ChartStackMode.NORMAL&&o!==0){l=this._getItemLabel(n,c,_,o);h=o<m?ChartLabelPosition.NEAR:ChartLabelPosition.FAR;u=S.layoutVert2(i,s,a,l,h);a.setRect(u)}}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1){e.$_points=null;return}var n,s,a,o,l,h,u,c,d,f=e.model(),_=f.valueField(),g=f.xAxisObj(),m=f.yAxisObj(),p=this.getRunProperty(f,"radius",f.radius()),p=Math.min(i.width,i.height)/2*e.chartView().model().plotArea().polarSize()*p,v=i.x+i.width/2,y=i.y+i.height/2,S=2*Math.PI/r,C=0,w=[];for(n=0;n<r;n++){a=t[n];s=f.getItem(n);o=this.getItemRunProperty(s,"value",s.getProp(_));l=p*m.getPositionOf(o);h=g.getPointOf(C,v,y,l);w.push(h);C+=S;a.setVisible(s!=null);if(a.visible()){u=a._styles=f.prepareItemStyles(a);c=u.shapeSize();d=c?c.getDimension(9):9;markerHeight=d;a.setDataPoint(h.x,h.y);a.setBounds(h.x-d/2,h.y-markerHeight/2,d,markerHeight)}}e.$_points=w}});var PolarLineSeriesItemRenderer=defineClass("PolarLineSeriesItemRenderer",PolarSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r,n,s,a,o,l=e.model(),h=e._styles,u=h.shapeName(),r=ShapeDrawing.getShape(this,u);if(r){r.draw(t,i,h.fill(),h.border(),0)}else if(u&&u.indexOf("url(")==0&&u.lastIndexOf(")")==u.length-1){u=u.substring(4,u.length-1);r=e.chartView().container().getImage(u);if(r){a=r.width;o=r.height;t.drawImage(r,i.x+(i.width-a)/2,i.y+(i.height-o)/2,a,o)}}}});var PolarAreaSeriesRenderer=defineClass("PolarAreaSeriesRenderer",PolarLineSeriesRenderer,{init:function(e){this._super(e);this._area=true}});var PolarColumnSeriesRenderer=defineClass("PolarColumnSeriesRenderer",PolarSeriesRenderer,{init:function(e){this._super(e)},canStacked:function(){return true},_doRender:function(e,t,i){},_doRenderItemSeparators:function(e,t,i){},_doLayoutLabels:function(e,t,i){},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1){return}var n,s,a,o,l,h,u,c,d,f,_,g,m,p,v,S,C,b,I,T,A,E,R,L,P=e.model(),N=P.xAxisObj(),k=P.yAxisObj(),D=P.valueField(),O=P.group(),M=O&&O.stackMode(),V=P.clusterInfo,F=i.height,B=k.baseValue(),$=i.bottom(),H=k.getPositionOf(B),G=this.getRunProperty(P,"radius",P.radius());w=Math.min(i.width,i.height)*G*e.polarSize();m=Math.PI*2/r;c=N.startAngle()/_RADIAN+m*N.startOffset();for(n=0;n<r;n++){p=t[n];u=p.model();p._styles=P.prepareItemStyles(p);v=P.itemWidth();l=u.getProp(D);l=this.getItemRunProperty(u,"value",l);b=B;if(!O){}else if(M==ChartStackMode.NONE||M==ChartStackMode.OVERLAP){}else if(M==ChartStackMode.NORMAL){C=0;for(s=0;s<P.visibleIndex();s++){a=O.getVisibleItem(s);if(a instanceof PolarColumnSeries){o=a.getItem(n);h=o.getProp(a.valueField());h=this.getItemRunProperty(o,"value",h);if((h-B)*(l-B)>=0){b+=h;C++}}}l+=b;e.setItemIndex(p,n,O,C,false);v*=O?O.itemWidth():1}else{}x=V?V.position:0;f=(V?V.width:1)*v;x+=(1-v)/2;u.startAngle=x*m+c;u.angle=f*m;u.radius=k.getPositionOf(l);u.innerRadius=k.getPositionOf(b);x=i.x+(i.width-w)/2;y=i.y+(i.height-w)/2;p.setBounds(x,y,w,w);c+=m}}});var PolarColumnSeriesItemRenderer=defineClass("PolarColumnSeriesItemRenderer",PieSeriesItemRenderer,{init:function(e){this._super(e)},containsPoint:function(e,t,i){if(this.$_g){var r,n=this.$_g,s=e.series(),a=e.model(),o=e.clientRect(),l=Math.min(o.width,o.height)/2,h=o.width/2*a.radius,u=o.x+h,c=s.startAngleRad(),d=a.startAngle,f=a.angle;if(a.innerRadius>0){r=o.width/2*a.innerRadius;n.drawArcSector2(SolidBrush.Null,null,l,l,r,r,h,h,d,f,c)}else{n.drawArcSector(SolidBrush.Null,null,l,l,h,h,d,f,c)}return n.containsPoint(t,i)}},_doRender:function(e,t,i){this.$_g=t;var r,n,s,a,o,l=Math.min(i.width,i.height)/2,h=e.series(),u=e.model(),c=h.getItemStyles(u,e._styles,e._hovered),d=h.startAngleRad(),f=this.getFill(u,c),_=c.border();f=this.getItemRunStyle(u,"fill",f);if(f||_){r=i.width/2*u.radius;n=i.x+r;a=u.startAngle;o=u.angle;t.applyShadow(c.shadow());if(u.innerRadius>0){s=i.width/2*u.innerRadius;t.drawArcSector2(f,_,l,l,s,s,r,r,a,o,d)}else{t.drawArcSector(f,_,l,l,r,r,a,o,d)}}}});var TreemapSeriesItemRenderer=defineClass("TreemapSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r=e.series(),n=e.model(),s=n.getProp(r.valueField()),a=r.getItemStyles(n,e._styles,e._hovered),o=this.getFill(n,a);radius=a.borderRadius();if(o){radius=Math.min(i.width,i.height,radius);t.drawRoundRectI(o,null,i,radius,radius,0,0)}}});var TreemapSeriesRenderer=defineClass("TreemapSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){},_doRenderItemSeparators:function(e,t,i){},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d,f=e.model(),_=f.label(),g=_.visible(),m=f.yAxisObj(),p=m.baseValue(),v=f.labelField(),y=f.valueField(),S=CartesianSeriesLabelLayout.Default,C=e.itemCount();for(r=0;r<C;r++){s=e.getItem(r);n=s.model();a=t[r];a.setVisible(n&&g);if(a.visible()){c=_.prepareItemStyles(s);a.setStyles(c);a.$_model=_;o=n.pickProp(v,y);l=this._getItemLabel(n,c,_,o);a.setLabel(s,l);u=s.getBounds();a.setRect(u)}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1){return}var n,s,a,o,l,h=e.model(),u=h.$_buildLayout(i),r=u.count();for(n=0;n<r;n++){s=u.getChild(n);a=s.seriesItem();o=e.itemByModel(a);o._styles=h.prepareItemStyles(o);l=s.$_rect;o.setRectI(l)}},renderItemSeparators:function(e,a,t){function o(e,t){var i,r,n,s;for(i=0,r=e.count();i<r;i++){n=e.getChild(i);if(!n.$_last){s=n.$_rect;if(n.$_vert){a.drawVLine(t,s.right()-1,s.y,s.bottom())}else{a.drawHLine(t,s.bottom()-1,s.x,s.right())}}o(n,t)}}var i,r=e.model(),n=r.styles(),s=n.line();if(s){i=r.$_rootNode();o(i,s)}}});var HeatmapSeriesItemRenderer=defineClass("HeatmapSeriesItemRenderer",ChartSeriesItemRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){var r=e.series(),n=e.model(),s=n.getProp(r.valueField()),a=r.getItemStyles(n,e._styles,e._hovered),o=e.$_fill,l=a.borderRadius();if(o){l=Math.min(i.width,i.height,l);t.drawRoundRectI(o,null,i,l,l,0,0)}}});var HeatmapSeriesRenderer=defineClass("HeatmapSeriesRenderer",ChartSeriesRenderer,{init:function(e){this._super(e)},_doRender:function(e,t,i){},_doRenderItemSeparators:function(e,t,i){},_doLayoutLabels:function(e,t,i){var r,n,s,a,o,l,h,u,c,d=e.model(),f=d.label(),_=d.valueField(),g=CartesianSeriesLabelLayout.Default,m=e.itemCount();for(r=0;r<m;r++){s=e.getItem(r);n=s.model();a=t[r];a.setVisible(n&&f.visible());if(a.visible()){u=f.prepareItemStyles(s);a.setStyles(u);a.$_model=f;o=n.getProp(_);l=this._getItemLabel(n,u,f,o);a.setLabel(s,l);h=a.measure(s.width(),1e5);a.setBounds(s.x()+(s.width()-h.width)/2,s.y()+(s.height()-h.height)/2,h.width,h.height)}}},_doLayoutItems:function(e,t,i){var r=e.itemCount();if(r<1){return}var n,s,a,o,l,h,u,c,d,f,_=e.model(),g=_.columnField(),m=_.rowField(),p=_.valueField(),v=_.xAxisObj(),y=_.yAxisObj(),S=i.x,C=i.y,w=i.width,x=i.height;for(n=0;n<r;n++){a=t[n];s=a.model();a.setVisible(s!=null);if(!s){continue}o=s.getProp(g);l=s.getProp(m);a._styles=_.prepareItemStyles(a);u=v.getTickPosition(o);d=v.getTickPosition(o+1)-u;c=y.getTickPosition(l);f=y.getTickPosition(l+1)-c;c=1-(c+f);a.setBounds(S+u*w,C+c*x,d*w,f*x);h=s.getProp(p);a.$_fill=_.getScaledFill(h)}},renderItemSeparators:function(e,t,i){var r,n,s,a=e.model(),o=a.xAxisObj(),l=a.yAxisObj(),h=a.styles(),u=h.line();if(u){for(r=0;r<l.visibleCount();r++){s=i.y+l.getTickPosition(r)*i.height;t.drawHLineI(u,s,i.x,i.right())}for(r=0;r<o.visibleCount();r++){n=i.x+o.getTickPosition(r)*i.width;t.drawVLineI(u,n,i.y,i.bottom())}}}});var ChartSeriesEffect=defineClass("ChartSeriesEffect",null,{init:function(e){this._super();this._name=e},apply:function(e,t){this._doApply(e,t)},_doPrepare:function(e){},_doApply:function(e,t){}});var ChartSeriesSlideEffect=defineClass("ChartSeriesSlideEffect",ChartSeriesEffect,{init:function(){this._super("slide")},start:"left",_doApply:function(e,t){},$_getSlideRect:function(e,t,i){var r=new Rectangle;switch(this._start){case"left":r.set(t.x-t.width*(1-i),t.y,t.width,t.height);break;case"bottom":r.set(t.x,t.y+t.height*(1-i),t.width,t.height);break;case"top":r.set(t.x,t.y-t.height*(1-i),t.width,t.height);break;case"topRight":r.set(t.x+t.width*(1-i),t.y-t.height*(1-i),t.width,t.height);break;case"topLeft":r.set(t.x-t.width*(1-i),t.y-t.height*(1-i),t.width,t.height);break;case"bottomRight":r.set(t.x+t.width*(1-i),t.y+t.height*(1-i),t.width,t.height);break;case"bottomLeft":r.set(t.x-t.width*(1-i),t.y+t.height*(1-i),t.width,t.height);break;case"right":default:r.set(t.x+t.width*(1-i),t.y,t.width,t.height);break}return r}});var ChartConfiguration=defineClass("ChartConfiguration",null,{init:function(){this._super()},load:function(e,t){var i=new Chart;i.setDelegate(e.delegate());this.loadChart(e,i,t);return i},loadChart:function(e,t,i){t.setName(i.name);i.palettes&&e.loadPalettes(i.palettes);i.data&&t.loadData(i.data);i.options&&e.setOptions(i.options);this._loadBody(t,i);_defined(i.legend)&&t.setLegend(i.legend);charts=this._loadSubcharts(e,t,i.subcharts);t.setSubcharts(charts)},_loadAxis:function(e,t,i){var r=null,n=t&&t.type||i;if(_isString(n)){n=n.trim().toLowerCase();switch(n){case"linear":r=new LinearAxis(e);break;case"category":r=new CategorizedAxis(e);break;case"categoryreverse":r=new CategorizedReverseAxis(e);break;case"date":case"datetime":r=new DateTimeAxis(e);break;case"polar":case"categorizedpolar":r=new CategorizedPolarAxis(e);break;case"linearpolar":r=new LinearPolarAxis(e);break;default:throw"Invalid axis type: "+n}}if(r){r.assign(t)}return r},_loadAxes:function(e,t,i){var r,n,s;var a=[];var o=t;if(!isArray(o)){if(o){o=[t]}}if(o){for(r=0,n=o.length;r<n;r++){s=this._loadAxis(e,o[r],i);a.push(s)}}else{s=this._loadAxis(e,null,i);a.push(s)}return a},_createDefaultSeriesGroup:function(e){return null},_createDefaultSeries:function(e){return null},_loadSeriesGroups:function(e,t){var i,r,n,s,a,o,l,h=null,u=t;if(!isArray(u)&&t){u=[t]}if(u){for(i=0,r=u.length;i<r;i++){n=u[i];if(n.name){s=null;l=n.type&&n.type.toLowerCase();a=DefaultChartConfigurer.SeriesGroup[l];if(a){s=new a(e)}if(!s){s=this._createDefaultSeriesGroup(e)}if(s){s.assign(n);h=h||[];h.push(s)}}}}return h},_loadSeries:function(s,e){function t(e,t){var i,r,n=t.type;if(n){i=DefaultChartConfigurer.Series[n];if(i){r=new i(s)}}if(!r){r=e._createDefaultSeries(s)}if(r){r.assign(t)}return r}var i,r,n,a,o=toArray(e);if(o){for(i=0,r=o.length;i<r;i++){n=t(this,o[i]);if(n){n.source=o[i];a=a||[];a.push(n)}}}return a},_loadSubcharts:function(e,t,i){var r,n,s,t,a=null;if(i){i=_makeArray(i);if(_isArray(i)){for(r=0;r<i.length;r++){s=i[r];if(_isObject(s)){t=this.load(e,s);if(t){a=a||[];a.push(t)}}}}}return a},_loadBody:function(e,t){var i,r,n,s,a,o,l,h,u,c,d,f;i=this._loadAxes(e,t.xAxes,this._xAxisType());e.setXAxes(i);i=this._loadAxes(e,t.yAxes,this._yAxisType());e.setYAxes(i);e.setPlotArea(t.plotArea);r=this._loadSeriesGroups(e,t.seriesGroups);n=this._loadSeries(e,t.series);if(r){a=n.length;for(o=0,h=r.length;o<h;o++){d=r[o];for(l=0;l<a;l++){c=n[l];if(c instanceof ChartSeries&&c.source.group==d.name()){d.addSeries(c);c["_group"]=d}}}s=[];for(o=0;o<a;o++){c=n[o];if(c instanceof ChartSeries){d=c["_group"];if(d){u=false;for(l=0;l<s.length;l++){if(s[l]===d){u=true;break}}if(!u){s.push(d)}}else{s.push(c)}}delete c["_group"]}e.setSeries(s)}else{e.setSeries(n)}t.title&&e.titlePane().setTitle(t.title);t.subtitle&&e.titlePane().setSubtitle(t.subtitle);t.titlePane&&e.setTitlePane(t.titlePane);t.headerPane&&e.setHeaderPane(t.headerPane);t.footerPane&&e.setFooterPane(t.footerPane);t.leftPane&&e.setLeftPane(t.leftPane);t.rightPane&&e.setRightPane(t.rightPane);t.data&&e.setData(t.data);t.styles&&e.setStyles(t.styles)}});var CartesianChartConfig=defineClass("CartesianChartConfig",ChartConfiguration,{init:function(){this._super()},loadChart:function(e,t,i){this._super(e,t,i)},_xAxisType:function(){return"category"},_yAxisType:function(){return"linear"}});var XYChartConfig=defineClass("XYChartConfig",CartesianChartConfig,{init:function(){this._super()},_xAxisType:function(){return"linear"},_yAxisType:function(){return"linear"}});var AreaChartConfig=defineClass("AreaChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new AreaSeries(e)},_createDefaultSeriesGroup:function(e){return new AreaSeriesGroup(e)}});var BarChartConfig=defineClass("BarChartConfig",CartesianChartConfig,{init:function(){this._super()},_xAxisType:function(){return"category"},_yAxisType:function(){return"linear"},_createDefaultSeries:function(e){return new BarSeries(e)},_createDefaultSeriesGroup:function(e){return new BarSeriesGroup(e)}});var BarRangeChartConfig=defineClass("BarRangeChartConfig",CartesianChartConfig,{init:function(){this._super()},_xAxisType:function(){return"categoryreverse"},_yAxisType:function(){return"linear"},_createDefaultSeries:function(e){return new BarRangeSeries(e)}});var BubbleChartConfig=defineClass("BubbleChartConfig",XYChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new BubbleSeries(e)}});var BoxplotChartConfig=defineClass("BoxplotChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new BoxplotSeries(e)}});var WaterfallChartConfig=defineClass("WaterfallChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new WaterfallSeries(e)}});var OhlcChartConfig=defineClass("OhlcChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new OhlcSeries(e)}});var CandlestickChartConfig=defineClass("CandlestickChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new CandlestickSeries(e)}});var ColumnChartConfig=defineClass("ColumnChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new ColumnSeries(e)},_createDefaultSeriesGroup:function(e){return new ColumnSeriesGroup(e)}});var ColumnRangeChartConfig=defineClass("ColumnRangeChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new ColumnRangeSeries(e)},_createDefaultSeriesGroup:function(e){return new ColumnRangeSeriesGroup(e)}});var LineChartConfig=defineClass("LineChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new LineSeries(e)}});var AreaRangeChartConfig=defineClass("AreaRangeChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new AreaRangeSeries(e)}});var ErrorBarChartConfig=defineClass("ErrorBarChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new ErrorBarSeries(e)}});var ScatterChartConfig=defineClass("ScatterChartConfig",XYChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new ScatterSeries(e)}});var ScatterDataChartConfig=defineClass("ScatterDataChartConfig",XYChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new ScatterDataSeries(e)}});var HistogramChartConfig=defineClass("HistogramChartConfig",XYChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new HistogramSeries(e)}});var RadialChartConfig=defineClass("RadialChartConfig",ChartConfiguration,{init:function(){this._super()},loadChart:function(e,t,i){this._super(e,t,i)},_yAxisType:function(){return"linear"}});var PieChartConfig=defineClass("PieChartConfig",RadialChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new PieSeries(e)},_xAxisType:function(){return"categorizedPolar"},_loadAxis:function(e,t,i){var r=this._super(e,t,i);r&&r.setVisible(false);return r}});var PolarChartConfig=defineClass("PolarChartConfig",RadialChartConfig,{init:function(){this._super()},_xAxisType:function(){return"categorizedPolar"},_loadAxis:function(e,t,i){var r=this._super(e,t,i);if(!(r instanceof PolarAxis)){r._polar=true}return r}});var PolarLineChartConfig=defineClass("PolarLineChartConfig",PolarChartConfig,{init:function(){this._super()},loadChart:function(e,t,i){this._super(e,t,i);var r=t.yAxes();if(!r||r.length<1){var n=new LinearAxis(t);r.push(n);t.setYAxes(r)}},_createDefaultSeries:function(e){return new PolarLineSeries(e)},_xAxisType:function(){return"categorizedPolar"}});var PolarAreaChartConfig=defineClass("PolarAreaChartConfig",PolarLineChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new PolarAreaSeries(e)}});var PolarColumnChartConfig=defineClass("PolarColumnChartConfig",PolarLineChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new PolarColumnSeries(e)},_createDefaultSeriesGroup:function(e){return new PolarColumnSeriesGroup(e)}});var TreemapChartConfig=defineClass("TreemapChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new TreemapSeries(e)}});var HeatmapChartConfig=defineClass("HeatmapChartConfig",CartesianChartConfig,{init:function(){this._super()},_createDefaultSeries:function(e){return new HeatmapSeries(e)},_xAxisType:function(){return"category"},_yAxisType:function(){return"category"},_loadAxis:function(e,t,i){var r=new CategorizedAxis(e);r.assign(t);return r}});var DefaultChartConfigurer=function(){};DefaultChartConfigurer.Default=new DefaultChartConfigurer;DefaultChartConfigurer.Configs={column:ColumnChartConfig,columnrange:ColumnRangeChartConfig,bar:BarChartConfig,barrange:BarRangeChartConfig,line:LineChartConfig,area:AreaChartConfig,arearange:AreaRangeChartConfig,ohlc:OhlcChartConfig,candlestick:CandlestickChartConfig,boxplot:BoxplotChartConfig,waterfall:WaterfallChartConfig,bubble:BubbleChartConfig,scatter:ScatterChartConfig,scatterdata:ScatterDataChartConfig,errorbar:ErrorBarChartConfig,histogram:HistogramChartConfig,pie:PieChartConfig,polarline:PolarLineChartConfig,polararea:PolarAreaChartConfig,polarcolumn:PolarColumnChartConfig,radar:PolarLineChartConfig,spiderweb:PolarLineChartConfig,treemap:TreemapChartConfig,heatmap:HeatmapChartConfig};DefaultChartConfigurer.Series={column:ColumnSeries,columnrange:ColumnRangeSeries,bar:BarSeries,barrange:BarRangeSeries,line:LineSeries,area:AreaSeries,arearange:AreaRangeSeries,ohlc:OhlcSeries,candlestick:CandlestickSeries,boxplot:BoxplotSeries,waterfall:WaterfallSeries,bubble:BubbleSeries,scatter:ScatterSeries,scatterdata:ScatterDataSeries,errorbar:ErrorBarSeries,histogram:HistogramSeries,pie:PieSeries,polarline:PolarLineSeries,polararea:PolarAreaSeries,polarcolumn:PolarColumnSeries,radar:PolarLineSeries,spiderweb:PolarLineSeries,treemap:TreemapSeries,heatmap:HeatmapSeries};DefaultChartConfigurer.SeriesGroup={column:ColumnSeriesGroup,bar:BarSeriesGroup,area:AreaSeriesGroup,polarcolumn:PolarColumnSeriesGroup,polararea:PolarAreaSeriesGroup};DefaultChartConfigurer.prototype.loadChart=function(e,t){var i=typeof t==="object"&&t;if(!i){i=JSON.parse(t)}var r,n=null,s=_isString(i.type)&&i.type.trim().toLowerCase();r=DefaultChartConfigurer.Configs[s];if(r){n=new r;return n.load(e,i)}return null};var _loadLog="### DATALUDI CHARTING MODULE LOADED in "+_getTimer()+" ms. (v "+_ver+")";_dlog(_loadLog);return{getVersion:_getVersion,setDebug:_setDebug,getTimer:getTimer,ChartComponent:ChartComponent,Chart:Chart,NumberScales:NumberScales,TextDecoration:TextDecoration,ChartStyles:ChartStyles,ChartStyleSheet:ChartStyleSheet,ChartAxisTitle:ChartAxisTitle,CategorizedAxis:CategorizedAxis,LinearAxis:LinearAxis,ColumnSeries:ColumnSeries,BarSeries:BarSeries}}(this);