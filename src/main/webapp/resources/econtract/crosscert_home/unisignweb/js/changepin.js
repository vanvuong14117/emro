var __changepin=function(b){var q=function(h){function m(a){if(!a)return alert("UI load error."),!1;var c=document.createElement("div");document.body.insertBefore(c,document.body.firstChild);c.innerHTML=a;return!0}function k(){var a=document.getElementById("us-change-pin-new-first-textbox").value,c=document.getElementById("us-change-pin-check-rule1"),b=document.getElementById("us-change-pin-check-rule2"),f=document.getElementById("us-change-pin-check-rule3"),e=!0;6==a.length?c.className="check":(c.className="",e=!1);if(2<a.length){for(c=0;c<a.length-2;c++)if(a.charAt(c)===a.charAt(c+1)&&a.charAt(c)===a.charAt(c+2)){b.className="";e=!1;break}else b.className="check";for(c=0;c<a.length-2;c++)if(a.charCodeAt(c)===a.charCodeAt(c+1)-1&&a.charCodeAt(c)===a.charCodeAt(c+2)-2){f.className="";e=!1;break}else if(a.charCodeAt(c)===a.charCodeAt(c+1)+1&&a.charCodeAt(c)===a.charCodeAt(c+2)+2){f.className="";e=!1;break}else f.className="check"}else b.className="check",f.className="check";return e}function f(a){return 48>a.keyCode||57<a.keyCode?a.returnValue=!1:a.returnValue=!0}var g=function(){var a=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");a.open("GET",b.ESVS.SRCPath+"unisignweb/rsrc/layout/changepin.html?version="+b.ver,!1);a.send(null);return a.responseText},n=function(){var a=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");a.open("GET",b.ESVS.SRCPath+"unisignweb/rsrc/lang/"+b.ESVS.Language+"/changepin_"+b.ESVS.Language+".js?version="+b.ver,!1);a.send(null);return a.responseText},e=b.ESVS.TabIndex;return function(){var a=b.CustomEval(g),c=b.CustomEval(n,!0);m(a());a=document.getElementById("us-change-pin-lbl-title");a.appendChild(document.createTextNode(c.IDS_CHANGE_PIN));a.setAttribute("tabindex",e,0);document.getElementById("us-change-pin-cls-btn-img").setAttribute("src",b.ESVS.SRCPath+"unisignweb/rsrc/img/x-btn.png",0);document.getElementById("us-change-pin-origin-lbl").appendChild(document.createTextNode(c.IDS_CHANGE_PIN_ORIGIN+" :"));var d=document.getElementById("us-change-pin-origin-textbox");d.setAttribute("tabindex",e+1,0);d.setAttribute("title",c.IDS_CHANGE_PIN_ORIGIN,0);d.onkeypress=function(a){f(a?a:event)};document.getElementById("us-change-pin-new-first-lbl").appendChild(document.createTextNode(c.IDS_CHANGE_PIN_NEW_FIRST+" :"));d=document.getElementById("us-change-pin-new-first-textbox");d.setAttribute("tabindex",e+2,0);d.setAttribute("title",c.IDS_CHANGE_PIN_NEW_FIRST,0);d.onkeypress=function(a){f(a?a:event)};d.onkeyup=function(a){k()};document.getElementById("us-change-pin-new-second-lbl").appendChild(document.createTextNode(c.IDS_CHANGE_PIN_NEW_SECOND+" :"));d=document.getElementById("us-change-pin-new-second-textbox");d.setAttribute("tabindex",e+3,0);d.setAttribute("title",c.IDS_CHANGE_PIN_NEW_SECOND,0);d.onkeypress=function(a){f(a?a:event)};d.onkeydown=function(a){if(a=a?a:event)a=a||window.event,13==(a.which||a.keyCode)&&document.getElementById("us-change-pin-confirm-btn").click()};document.getElementById("us-change-pin-check-rule1").appendChild(document.createTextNode("6 "+c.IDS_CHANGE_PIN_RULE1));document.getElementById("us-change-pin-check-rule2").appendChild(document.createTextNode(c.IDS_CHANGE_PIN_RULE2));document.getElementById("us-change-pin-check-rule3").appendChild(document.createTextNode(c.IDS_CHANGE_PIN_RULE3));d=document.getElementById("us-change-pin-confirm-btn");d.setAttribute("value",c.IDS_CONFIRM,0);d.setAttribute("tabindex",e+4,0);d.onclick=function(){var a=document.getElementById("us-change-pin-origin-textbox"),d=document.getElementById("us-change-pin-new-first-textbox"),e=document.getElementById("us-change-pin-new-second-textbox"),f=a.value,g=d.value,n=e.value;f&&g?g!=n?(b.uiUtil().msgBox(c.IDS_MSGBOX_ERROR_PLEASE_RETRY_TO_INPUT_CORRECTLY),d.focus()):k()?(h.onConfirm(f,g),a.value="",d.value="",e.value=""):(b.uiUtil().msgBox(c.IDS_MSGBOX_ERROR_CANT_PASS_RULES),d.focus()):(b.uiUtil().msgBox(c.IDS_MSGBOX_ERROR_PLEASE_INPUT_PIN),a.focus())};var l=document.getElementById("us-change-pin-cancel-btn");l.setAttribute("value",c.IDS_CANCEL,0);l.setAttribute("tabindex",e+5,0);l.onclick=function(){h.onCancel()};var p=document.getElementById("us-change-pin-cls-img-btn");p.setAttribute("tabindex",e+6,0);p.onclick=function(){h.onCancel()};b.uiUtil().setRotationTabFocus(l,d,a);b.uiUtil().setRotationTabFocus(a,l,d);return document.getElementById("us-div-change-pin")}()};return function(h){var m=b.uiLayerLevel,k=b.uiUtil().getOverlay(m),f=q({type:h.type,args:h.args,onConfirm:h.onConfirm,onCancel:h.onCancel});f.style.zIndex=m+1;b.ESVS.TargetObj.insertBefore(k,b.ESVS.TargetObj.firstChild);var g=window.onresize;return{show:function(){b.ActiveUI=this;draggable(f,document.getElementById("us-div-change-pin-title"));k.style.display="block";b.uiUtil().offsetResize(f);window.onresize=function(){b.uiUtil().offsetResize(f);g&&g()};b.uiLayerLevel+=10;b.ESVS.TabIndex+=30;setTimeout(function(){var b=f.getElementsByTagName("p");if(0<b.length)for(var e=0;e<b.length;e++)"us-change-pin-lbl-title"==b[e].id&&b[e].focus()},10)},hide:function(){k.style.display="none";f.style.display="none"},dispose:function(){window.onresize=function(){g&&g()};f.parentNode.parentNode.removeChild(f.parentNode);k.parentNode.removeChild(k);b.uiLayerLevel-=10;b.ESVS.TabIndex-=30}}}};