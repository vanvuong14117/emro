var __pin=function(b){var n=function(d){function m(a){if(!a)return alert("UI load error."),!1;var b=document.createElement("div");document.body.insertBefore(b,document.body.firstChild);b.innerHTML=a;return!0}function l(a){if(!a)return!1;a=a||window.event;13==(a.which||a.keyCode)&&document.getElementById("us-pin-confirm-btn").click()}var k=function(){var a=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");a.open("GET",b.ESVS.SRCPath+"unisignweb/rsrc/layout/pin.html?version="+b.ver,!1);a.send(null);return a.responseText},h=function(){var a=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");a.open("GET",b.ESVS.SRCPath+"unisignweb/rsrc/lang/"+b.ESVS.Language+"/pin_"+b.ESVS.Language+".js?version="+b.ver,!1);a.send(null);return a.responseText},e=b.ESVS.TabIndex;return function(){var a=b.CustomEval(k),c=b.CustomEval(h,!0),g=d.type;m(a());a=document.getElementById("us-pin-lbl-title");"PIN_SAVE_TOKEN"==g?a.appendChild(document.createTextNode(c.IDS_SAVETOKEN_PIN)):"PIN_CLOUD"==g?a.appendChild(document.createTextNode(c.IDS_CLOUD_PIN)):a.appendChild(document.createTextNode(c.IDS_SECTOKEN_PIN));a.setAttribute("tabindex",e,0);document.getElementById("us-pin-cls-btn-img").setAttribute("src",b.ESVS.SRCPath+"unisignweb/rsrc/img/x-btn.png",0);a=document.getElementById("us-pin-sectoken-img");"PIN_SAVE_TOKEN"==g?a.setAttribute("src",b.ESVS.SRCPath+"unisignweb/rsrc/img/media_savetoken.png",0):a.setAttribute("src",b.ESVS.SRCPath+"unisignweb/rsrc/img/media_securitytoken.png",0);a=document.getElementById("us-pin-sectoken-name");"PIN_SAVE_TOKEN"==g?a.appendChild(document.createTextNode(c.IDS_SAVETOKEN)):"PIN_CLOUD"==g?a.appendChild(document.createTextNode(c.IDS_CLOUD)):a.appendChild(document.createTextNode(c.IDS_SECTOKEN));a=document.getElementById("us-pin-notice-text");"PIN_SAVE_TOKEN"==g?a.appendChild(document.createTextNode(c.IDS_SAVETOKEN_PIN_NOTICE)):"PIN_CLOUD"==g?a.appendChild(document.createTextNode(c.IDS_CLOUD_PIN_NOTICE)):a.appendChild(document.createTextNode(c.IDS_SECTOKEN_PIN_NOTICE));b.uiUtil().addCapsLockEvent("us-pin-input-textbox","us-pin-err-msg-capslock",c.IDS_MSGBOX_CAPSLOCK_ON,l);document.getElementById("us-pin-input-textbox").setAttribute("tabindex",e+1,0);a=document.getElementById("us-pin-confirm-btn");a.setAttribute("value",c.IDS_CONFIRM,0);a.setAttribute("title",c.IDS_CONFIRM+c.IDS_BUTTON,0);a.setAttribute("tabindex",e+2,0);a.onclick=function(){if(c){var a=document.getElementById("us-pin-input-textbox"),f=a.value;f&&4&b.ESVS.Mode&&"PIN_CLOUD"!=d.type&&("touchen"==b.ESVS.SecureKeyboardType&&b.bsUtil().isTouchEnKeyUsable()?f=b.bsUtil().GetEncryptPwd("us-keyboard-secure-frm","us-pin-input-textbox"):"ahnlab"==b.ESVS.SecureKeyboardType&&b.bsUtil().isAhnlabProtectorUsable()&&(f=b.bsUtil().GetAhnlabEncInputInfo("us-pin-input-textbox")));f?(d.onConfirm(f),a.value=""):(f=null,"PIN_SAVE_TOKEN"==d.type?f=c.IDS_MSGBOX_ERROR_PLEASE_INPUT_SAVETOKEN_PIN:"PIN_SECURITY_TOKEN"==d.type?f=c.IDS_MSGBOX_ERROR_PLEASE_INPUT_SECTOKEN_PIN:"PIN_CLOUD"==d.type&&(f=c.IDS_MSGBOX_ERROR_PLEASE_INPUT_SECTOKEN_PIN),b.uiUtil().msgBox(f),a.focus())}};a=document.getElementById("us-pin-cancel-btn");a.setAttribute("value",c.IDS_CANCEL,0);a.setAttribute("title",c.IDS_CANCEL+c.IDS_BUTTON,0);a.setAttribute("tabindex",e+3,0);a.onclick=function(){d.onCancel()};a=document.getElementById("us-pin-cls-btn");"PIN_SAVE_TOKEN"==g?a.setAttribute("title",c.IDS_SAVETOKEN_PIN_CLOSE,0):"PIN_CLOUD"==g?a.setAttribute("title",c.IDS_CLOUD_PIN_CLOSE,0):a.setAttribute("title",c.IDS_SECTOKEN_PIN_CLOSE,0);a.setAttribute("tabindex",e+4,0);a.onclick=function(){d.onCancel()};return document.getElementById("us-div-pin")}()};return function(d){function m(){function a(){0<c.value.length?c.value="":(5>g&&setTimeout(a,10),g++)}var c=document.getElementById("us-pin-input-textbox"),g=0;a();var e=h.getElementsByTagName("p");if(0<e.length)for(var f=0;f<e.length;f++)"us-pin-lbl-title"==e[f].id&&e[f].focus();"PIN_CLOUD"!=d.type&&(b.bsUtil().SetSecurityStatus("us-pin-input-textbox"),b.bsUtil().SetReScan())}var l=b.uiLayerLevel,k=b.uiUtil().getOverlay(l),h=n({type:d.type,args:d.args,onConfirm:d.onConfirm,onCancel:d.onCancel});h.style.zIndex=l+1;b.ESVS.TargetObj.insertBefore(k,b.ESVS.TargetObj.firstChild);var e=window.onresize;return{show:function(){b.bsUtil().AhnlabClearText("us-pin-input-textbox");b.ActiveUI=this;draggable(h,document.getElementById("us-div-pin-title"));k.style.display="block";b.uiUtil().offsetResize(h);window.onresize=function(){b.uiUtil().offsetResize(h);e&&e()};b.uiLayerLevel+=10;b.ESVS.TabIndex+=30;"PIN_CLOUD"!=d.type&&b.bsUtil().ahnlabInit();setTimeout(function(){m()},10)},hide:function(){k.style.display="none";h.style.display="none"},dispose:function(){window.onresize=function(){e&&e()};h.parentNode.parentNode.removeChild(h.parentNode);k.parentNode.removeChild(k);b.uiLayerLevel-=10;b.ESVS.TabIndex-=30}}}};